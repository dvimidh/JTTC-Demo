import "./../box2d.wasm.js";
// Generated by Construct, the game and animation creation tool
// Visit: https://www.construct.net

{let O=function(t){vh=t},L=function(t){return t*Oh},N=function(t,s){return Math.abs(t-s)<=Mh*Math.max(1,Math.abs(t),Math.abs(s))},B=function(){var t=new vh(4);return vh!=Float32Array&&(t[1]=0,t[2]=0),t[0]=1,t[3]=1,t},W=function(t){var s=new vh(4);return s[0]=t[0],s[1]=t[1],s[2]=t[2],s[3]=t[3],s},V=function(t,s){return t[0]=s[0],t[1]=s[1],t[2]=s[2],t[3]=s[3],t},j=function(t){return t[0]=1,t[1]=0,t[2]=0,t[3]=1,t},H=function(t,s,i,e){var h=new vh(4);return h[0]=t,h[1]=s,h[2]=i,h[3]=e,h},U=function(t,s,i,e,h){return t[0]=s,t[1]=i,t[2]=e,t[3]=h,t},z=function(t,s){var i;return t===s?(i=s[1],t[1]=s[2],t[2]=i):(t[0]=s[0],t[1]=s[2],t[2]=s[1],t[3]=s[3]),t},J=function(t,s){var i=s[0],e=s[1],h=s[2],r=i*(s=s[3])-h*e;return r?(t[0]=s*(r=1/r),t[1]=-e*r,t[2]=-h*r,t[3]=i*r,t):null},q=function(t,s){var i=s[0];return t[0]=s[3],t[1]=-s[1],t[2]=-s[2],t[3]=i,t},X=function(t){return t[0]*t[3]-t[2]*t[1]},t=function(t,s,i){var e=s[0],h=s[1],r=s[2],s=s[3],n=i[0],o=i[1],a=i[2],i=i[3];return t[0]=e*n+r*o,t[1]=h*n+s*o,t[2]=e*a+r*i,t[3]=h*a+s*i,t},Y=function(t,s,i){var e=s[0],h=s[1],r=s[2],s=s[3],n=Math.sin(i),i=Math.cos(i);return t[0]=e*i+r*n,t[1]=h*i+s*n,t[2]=e*-n+r*i,t[3]=h*-n+s*i,t},$=function(t,s,i){var e=s[0],h=s[1],r=s[2],s=s[3],n=i[0],i=i[1];return t[0]=e*n,t[1]=h*n,t[2]=r*i,t[3]=s*i,t},K=function(t,s){var i=Math.sin(s),s=Math.cos(s);return t[0]=s,t[1]=i,t[2]=-i,t[3]=s,t},Z=function(t,s){return t[0]=s[0],t[1]=0,t[2]=0,t[3]=s[1],t},Q=function(t){return"mat2("+t[0]+", "+t[1]+", "+t[2]+", "+t[3]+")"},tt=function(t){return Math.hypot(t[0],t[1],t[2],t[3])},st=function(t,s,i,e){return t[2]=e[2]/e[0],i[0]=e[0],i[1]=e[1],i[3]=e[3]-t[2]*i[1],[t,s,i]},it=function(t,s,i){return t[0]=s[0]+i[0],t[1]=s[1]+i[1],t[2]=s[2]+i[2],t[3]=s[3]+i[3],t},s=function(t,s,i){return t[0]=s[0]-i[0],t[1]=s[1]-i[1],t[2]=s[2]-i[2],t[3]=s[3]-i[3],t},et=function(t,s){return t[0]===s[0]&&t[1]===s[1]&&t[2]===s[2]&&t[3]===s[3]},ht=function(t,s){var i=t[0],e=t[1],h=t[2],t=t[3],r=s[0],n=s[1],o=s[2],s=s[3];return Math.abs(i-r)<=Mh*Math.max(1,Math.abs(i),Math.abs(r))&&Math.abs(e-n)<=Mh*Math.max(1,Math.abs(e),Math.abs(n))&&Math.abs(h-o)<=Mh*Math.max(1,Math.abs(h),Math.abs(o))&&Math.abs(t-s)<=Mh*Math.max(1,Math.abs(t),Math.abs(s))},rt=function(t,s,i){return t[0]=s[0]*i,t[1]=s[1]*i,t[2]=s[2]*i,t[3]=s[3]*i,t},nt=function(t,s,i,e){return t[0]=s[0]+i[0]*e,t[1]=s[1]+i[1]*e,t[2]=s[2]+i[2]*e,t[3]=s[3]+i[3]*e,t},ot=function(){var t=new vh(6);return vh!=Float32Array&&(t[1]=0,t[2]=0,t[4]=0,t[5]=0),t[0]=1,t[3]=1,t},at=function(t){var s=new vh(6);return s[0]=t[0],s[1]=t[1],s[2]=t[2],s[3]=t[3],s[4]=t[4],s[5]=t[5],s},lt=function(t,s){return t[0]=s[0],t[1]=s[1],t[2]=s[2],t[3]=s[3],t[4]=s[4],t[5]=s[5],t},ut=function(t){return t[0]=1,t[1]=0,t[2]=0,t[3]=1,t[4]=0,t[5]=0,t},ct=function(t,s,i,e,h,r){var n=new vh(6);return n[0]=t,n[1]=s,n[2]=i,n[3]=e,n[4]=h,n[5]=r,n},ft=function(t,s,i,e,h,r,n){return t[0]=s,t[1]=i,t[2]=e,t[3]=h,t[4]=r,t[5]=n,t},dt=function(t,s){var i=s[0],e=s[1],h=s[2],r=s[3],n=s[4],s=s[5],o=i*r-e*h;return o?(t[0]=r*(o=1/o),t[1]=-e*o,t[2]=-h*o,t[3]=i*o,t[4]=(h*s-r*n)*o,t[5]=(e*n-i*s)*o,t):null},pt=function(t){return t[0]*t[3]-t[1]*t[2]},i=function(t,s,i){var e=s[0],h=s[1],r=s[2],n=s[3],o=s[4],s=s[5],a=i[0],l=i[1],u=i[2],c=i[3],f=i[4],i=i[5];return t[0]=e*a+r*l,t[1]=h*a+n*l,t[2]=e*u+r*c,t[3]=h*u+n*c,t[4]=e*f+r*i+o,t[5]=h*f+n*i+s,t},mt=function(t,s,i){var e=s[0],h=s[1],r=s[2],n=s[3],o=s[4],s=s[5],a=Math.sin(i),i=Math.cos(i);return t[0]=e*i+r*a,t[1]=h*i+n*a,t[2]=e*-a+r*i,t[3]=h*-a+n*i,t[4]=o,t[5]=s,t},gt=function(t,s,i){var e=s[0],h=s[1],r=s[2],n=s[3],o=s[4],s=s[5],a=i[0],i=i[1];return t[0]=e*a,t[1]=h*a,t[2]=r*i,t[3]=n*i,t[4]=o,t[5]=s,t},yt=function(t,s,i){var e=s[0],h=s[1],r=s[2],n=s[3],o=s[4],s=s[5],a=i[0],i=i[1];return t[0]=e,t[1]=h,t[2]=r,t[3]=n,t[4]=e*a+r*i+o,t[5]=h*a+n*i+s,t},St=function(t,s){var i=Math.sin(s),s=Math.cos(s);return t[0]=s,t[1]=i,t[2]=-i,t[3]=s,t[4]=0,t[5]=0,t},wt=function(t,s){return t[0]=s[0],t[1]=0,t[2]=0,t[3]=s[1],t[4]=0,t[5]=0,t},bt=function(t,s){return t[0]=1,t[1]=0,t[2]=0,t[3]=1,t[4]=s[0],t[5]=s[1],t},Mt=function(t){return"mat2d("+t[0]+", "+t[1]+", "+t[2]+", "+t[3]+", "+t[4]+", "+t[5]+")"},vt=function(t){return Math.hypot(t[0],t[1],t[2],t[3],t[4],t[5],1)},Tt=function(t,s,i){return t[0]=s[0]+i[0],t[1]=s[1]+i[1],t[2]=s[2]+i[2],t[3]=s[3]+i[3],t[4]=s[4]+i[4],t[5]=s[5]+i[5],t},e=function(t,s,i){return t[0]=s[0]-i[0],t[1]=s[1]-i[1],t[2]=s[2]-i[2],t[3]=s[3]-i[3],t[4]=s[4]-i[4],t[5]=s[5]-i[5],t},xt=function(t,s,i){return t[0]=s[0]*i,t[1]=s[1]*i,t[2]=s[2]*i,t[3]=s[3]*i,t[4]=s[4]*i,t[5]=s[5]*i,t},Gt=function(t,s,i,e){return t[0]=s[0]+i[0]*e,t[1]=s[1]+i[1]*e,t[2]=s[2]+i[2]*e,t[3]=s[3]+i[3]*e,t[4]=s[4]+i[4]*e,t[5]=s[5]+i[5]*e,t},_t=function(t,s){return t[0]===s[0]&&t[1]===s[1]&&t[2]===s[2]&&t[3]===s[3]&&t[4]===s[4]&&t[5]===s[5]},It=function(t,s){var i=t[0],e=t[1],h=t[2],r=t[3],n=t[4],t=t[5],o=s[0],a=s[1],l=s[2],u=s[3],c=s[4],s=s[5];return Math.abs(i-o)<=Mh*Math.max(1,Math.abs(i),Math.abs(o))&&Math.abs(e-a)<=Mh*Math.max(1,Math.abs(e),Math.abs(a))&&Math.abs(h-l)<=Mh*Math.max(1,Math.abs(h),Math.abs(l))&&Math.abs(r-u)<=Mh*Math.max(1,Math.abs(r),Math.abs(u))&&Math.abs(n-c)<=Mh*Math.max(1,Math.abs(n),Math.abs(c))&&Math.abs(t-s)<=Mh*Math.max(1,Math.abs(t),Math.abs(s))},h=function(){var t=new vh(9);return vh!=Float32Array&&(t[1]=0,t[2]=0,t[3]=0,t[5]=0,t[6]=0,t[7]=0),t[0]=1,t[4]=1,t[8]=1,t},Ct=function(t,s){return t[0]=s[0],t[1]=s[1],t[2]=s[2],t[3]=s[4],t[4]=s[5],t[5]=s[6],t[6]=s[8],t[7]=s[9],t[8]=s[10],t},Pt=function(t){var s=new vh(9);return s[0]=t[0],s[1]=t[1],s[2]=t[2],s[3]=t[3],s[4]=t[4],s[5]=t[5],s[6]=t[6],s[7]=t[7],s[8]=t[8],s},Rt=function(t,s){return t[0]=s[0],t[1]=s[1],t[2]=s[2],t[3]=s[3],t[4]=s[4],t[5]=s[5],t[6]=s[6],t[7]=s[7],t[8]=s[8],t},At=function(t,s,i,e,h,r,n,o,a){var l=new vh(9);return l[0]=t,l[1]=s,l[2]=i,l[3]=e,l[4]=h,l[5]=r,l[6]=n,l[7]=o,l[8]=a,l},Et=function(t,s,i,e,h,r,n,o,a,l){return t[0]=s,t[1]=i,t[2]=e,t[3]=h,t[4]=r,t[5]=n,t[6]=o,t[7]=a,t[8]=l,t},Ft=function(t){return t[0]=1,t[1]=0,t[2]=0,t[3]=0,t[4]=1,t[5]=0,t[6]=0,t[7]=0,t[8]=1,t},Dt=function(t,s){var i,e,h;return t===s?(i=s[1],e=s[2],h=s[5],t[1]=s[3],t[2]=s[6],t[3]=i,t[5]=s[7],t[6]=e,t[7]=h):(t[0]=s[0],t[1]=s[3],t[2]=s[6],t[3]=s[1],t[4]=s[4],t[5]=s[7],t[6]=s[2],t[7]=s[5],t[8]=s[8]),t},kt=function(t,s){var i=s[0],e=s[1],h=s[2],r=s[3],n=s[4],o=s[5],a=s[6],l=s[7],u=(s=s[8])*n-o*l,c=-s*r+o*a,f=l*r-n*a,d=i*u+e*c+h*f;return d?(t[0]=u*(d=1/d),t[1]=(-s*e+h*l)*d,t[2]=(o*e-h*n)*d,t[3]=c*d,t[4]=(s*i-h*a)*d,t[5]=(-o*i+h*r)*d,t[6]=f*d,t[7]=(-l*i+e*a)*d,t[8]=(n*i-e*r)*d,t):null},Ot=function(t,s){var i=s[0],e=s[1],h=s[2],r=s[3],n=s[4],o=s[5],a=s[6],l=s[7],s=s[8];return t[0]=n*s-o*l,t[1]=h*l-e*s,t[2]=e*o-h*n,t[3]=o*a-r*s,t[4]=i*s-h*a,t[5]=h*r-i*o,t[6]=r*l-n*a,t[7]=e*a-i*l,t[8]=i*n-e*r,t},Lt=function(t){var s=t[0],i=t[3],e=t[4],h=t[5],r=t[6],n=t[7],o=t[8];return s*(o*e-h*n)+t[1]*(-o*i+h*r)+t[2]*(n*i-e*r)},r=function(t,s,i){var e=s[0],h=s[1],r=s[2],n=s[3],o=s[4],a=s[5],l=s[6],u=s[7],s=s[8],c=i[0],f=i[1],d=i[2],p=i[3],m=i[4],g=i[5],y=i[6],S=i[7],i=i[8];return t[0]=c*e+f*n+d*l,t[1]=c*h+f*o+d*u,t[2]=c*r+f*a+d*s,t[3]=p*e+m*n+g*l,t[4]=p*h+m*o+g*u,t[5]=p*r+m*a+g*s,t[6]=y*e+S*n+i*l,t[7]=y*h+S*o+i*u,t[8]=y*r+S*a+i*s,t},Nt=function(t,s,i){var e=s[0],h=s[1],r=s[2],n=s[3],o=s[4],a=s[5],l=s[6],u=s[7],s=s[8],c=i[0],i=i[1];return t[0]=e,t[1]=h,t[2]=r,t[3]=n,t[4]=o,t[5]=a,t[6]=c*e+i*n+l,t[7]=c*h+i*o+u,t[8]=c*r+i*a+s,t},Bt=function(t,s,i){var e=s[0],h=s[1],r=s[2],n=s[3],o=s[4],a=s[5],l=s[6],u=s[7],s=s[8],c=Math.sin(i),i=Math.cos(i);return t[0]=i*e+c*n,t[1]=i*h+c*o,t[2]=i*r+c*a,t[3]=i*n-c*e,t[4]=i*o-c*h,t[5]=i*a-c*r,t[6]=l,t[7]=u,t[8]=s,t},Wt=function(t,s,i){var e=i[0],i=i[1];return t[0]=e*s[0],t[1]=e*s[1],t[2]=e*s[2],t[3]=i*s[3],t[4]=i*s[4],t[5]=i*s[5],t[6]=s[6],t[7]=s[7],t[8]=s[8],t},Vt=function(t,s){return t[0]=1,t[1]=0,t[2]=0,t[3]=0,t[4]=1,t[5]=0,t[6]=s[0],t[7]=s[1],t[8]=1,t},jt=function(t,s){var i=Math.sin(s),s=Math.cos(s);return t[0]=s,t[1]=i,t[2]=0,t[3]=-i,t[4]=s,t[5]=0,t[6]=0,t[7]=0,t[8]=1,t},Ht=function(t,s){return t[0]=s[0],t[1]=0,t[2]=0,t[3]=0,t[4]=s[1],t[5]=0,t[6]=0,t[7]=0,t[8]=1,t},Ut=function(t,s){return t[0]=s[0],t[1]=s[1],t[2]=0,t[3]=s[2],t[4]=s[3],t[5]=0,t[6]=s[4],t[7]=s[5],t[8]=1,t},zt=function(t,s){var i=s[0],e=s[2],h=e+e,i=i*(l=i+i),r=(n=s[1])*l,n=n*(u=n+n),o=e*l,a=e*u,l=(s=s[3])*l,u=s*u,s=s*h;return t[0]=1-n-(e=e*h),t[3]=r-s,t[6]=o+u,t[1]=r+s,t[4]=1-i-e,t[7]=a-l,t[2]=o-u,t[5]=a+l,t[8]=1-i-n,t},Jt=function(t,s){var i=s[0],e=s[1],h=s[2],r=s[3],n=s[4],o=s[5],a=s[6],l=s[7],u=s[8],c=s[9],f=s[10],d=s[11],p=s[12],m=s[13],g=s[14],y=i*o-e*n,S=i*a-h*n,w=i*l-r*n,b=e*a-h*o,M=e*l-r*o,v=h*l-r*a,T=u*m-c*p,x=u*g-f*p,G=c*g-f*m;return(d=y*(f=f*(s=s[15])-d*g)-S*(c=c*s-d*m)+w*G+b*(u=u*s-d*p)-M*x+v*T)?(t[0]=(o*f-a*c+l*G)*(d=1/d),t[1]=(a*u-n*f-l*x)*d,t[2]=(n*c-o*u+l*T)*d,t[3]=(h*c-e*f-r*G)*d,t[4]=(i*f-h*u+r*x)*d,t[5]=(e*u-i*c-r*T)*d,t[6]=(m*v-g*M+s*b)*d,t[7]=(g*w-p*v-s*S)*d,t[8]=(p*M-m*w+s*y)*d,t):null},qt=function(t,s,i){return t[0]=2/s,t[1]=0,t[2]=0,t[3]=0,t[4]=-2/i,t[5]=0,t[6]=-1,t[7]=1,t[8]=1,t},Xt=function(t){return"mat3("+t[0]+", "+t[1]+", "+t[2]+", "+t[3]+", "+t[4]+", "+t[5]+", "+t[6]+", "+t[7]+", "+t[8]+")"},Yt=function(t){return Math.hypot(t[0],t[1],t[2],t[3],t[4],t[5],t[6],t[7],t[8])},$t=function(t,s,i){return t[0]=s[0]+i[0],t[1]=s[1]+i[1],t[2]=s[2]+i[2],t[3]=s[3]+i[3],t[4]=s[4]+i[4],t[5]=s[5]+i[5],t[6]=s[6]+i[6],t[7]=s[7]+i[7],t[8]=s[8]+i[8],t},n=function(t,s,i){return t[0]=s[0]-i[0],t[1]=s[1]-i[1],t[2]=s[2]-i[2],t[3]=s[3]-i[3],t[4]=s[4]-i[4],t[5]=s[5]-i[5],t[6]=s[6]-i[6],t[7]=s[7]-i[7],t[8]=s[8]-i[8],t},Kt=function(t,s,i){return t[0]=s[0]*i,t[1]=s[1]*i,t[2]=s[2]*i,t[3]=s[3]*i,t[4]=s[4]*i,t[5]=s[5]*i,t[6]=s[6]*i,t[7]=s[7]*i,t[8]=s[8]*i,t},Zt=function(t,s,i,e){return t[0]=s[0]+i[0]*e,t[1]=s[1]+i[1]*e,t[2]=s[2]+i[2]*e,t[3]=s[3]+i[3]*e,t[4]=s[4]+i[4]*e,t[5]=s[5]+i[5]*e,t[6]=s[6]+i[6]*e,t[7]=s[7]+i[7]*e,t[8]=s[8]+i[8]*e,t},Qt=function(t,s){return t[0]===s[0]&&t[1]===s[1]&&t[2]===s[2]&&t[3]===s[3]&&t[4]===s[4]&&t[5]===s[5]&&t[6]===s[6]&&t[7]===s[7]&&t[8]===s[8]},ts=function(t,s){var i=t[0],e=t[1],h=t[2],r=t[3],n=t[4],o=t[5],a=t[6],l=t[7],t=t[8],u=s[0],c=s[1],f=s[2],d=s[3],p=s[4],m=s[5],g=s[6],y=s[7],s=s[8];return Math.abs(i-u)<=Mh*Math.max(1,Math.abs(i),Math.abs(u))&&Math.abs(e-c)<=Mh*Math.max(1,Math.abs(e),Math.abs(c))&&Math.abs(h-f)<=Mh*Math.max(1,Math.abs(h),Math.abs(f))&&Math.abs(r-d)<=Mh*Math.max(1,Math.abs(r),Math.abs(d))&&Math.abs(n-p)<=Mh*Math.max(1,Math.abs(n),Math.abs(p))&&Math.abs(o-m)<=Mh*Math.max(1,Math.abs(o),Math.abs(m))&&Math.abs(a-g)<=Mh*Math.max(1,Math.abs(a),Math.abs(g))&&Math.abs(l-y)<=Mh*Math.max(1,Math.abs(l),Math.abs(y))&&Math.abs(t-s)<=Mh*Math.max(1,Math.abs(t),Math.abs(s))},ss=function(){var t=new vh(16);return vh!=Float32Array&&(t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[11]=0,t[12]=0,t[13]=0,t[14]=0),t[0]=1,t[5]=1,t[10]=1,t[15]=1,t},is=function(t){var s=new vh(16);return s[0]=t[0],s[1]=t[1],s[2]=t[2],s[3]=t[3],s[4]=t[4],s[5]=t[5],s[6]=t[6],s[7]=t[7],s[8]=t[8],s[9]=t[9],s[10]=t[10],s[11]=t[11],s[12]=t[12],s[13]=t[13],s[14]=t[14],s[15]=t[15],s},es=function(t,s){return t[0]=s[0],t[1]=s[1],t[2]=s[2],t[3]=s[3],t[4]=s[4],t[5]=s[5],t[6]=s[6],t[7]=s[7],t[8]=s[8],t[9]=s[9],t[10]=s[10],t[11]=s[11],t[12]=s[12],t[13]=s[13],t[14]=s[14],t[15]=s[15],t},hs=function(t,s,i,e,h,r,n,o,a,l,u,c,f,d,p,m){var g=new vh(16);return g[0]=t,g[1]=s,g[2]=i,g[3]=e,g[4]=h,g[5]=r,g[6]=n,g[7]=o,g[8]=a,g[9]=l,g[10]=u,g[11]=c,g[12]=f,g[13]=d,g[14]=p,g[15]=m,g},rs=function(t,s,i,e,h,r,n,o,a,l,u,c,f,d,p,m,g){return t[0]=s,t[1]=i,t[2]=e,t[3]=h,t[4]=r,t[5]=n,t[6]=o,t[7]=a,t[8]=l,t[9]=u,t[10]=c,t[11]=f,t[12]=d,t[13]=p,t[14]=m,t[15]=g,t},p=function(t){return t[0]=1,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=1,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=1,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t},ns=function(t,s){var i,e,h,r,n,o;return t===s?(i=s[1],e=s[2],h=s[3],r=s[6],n=s[7],o=s[11],t[1]=s[4],t[2]=s[8],t[3]=s[12],t[4]=i,t[6]=s[9],t[7]=s[13],t[8]=e,t[9]=r,t[11]=s[14],t[12]=h,t[13]=n,t[14]=o):(t[0]=s[0],t[1]=s[4],t[2]=s[8],t[3]=s[12],t[4]=s[1],t[5]=s[5],t[6]=s[9],t[7]=s[13],t[8]=s[2],t[9]=s[6],t[10]=s[10],t[11]=s[14],t[12]=s[3],t[13]=s[7],t[14]=s[11],t[15]=s[15]),t},os=function(t,s){var i=s[0],e=s[1],h=s[2],r=s[3],n=s[4],o=s[5],a=s[6],l=s[7],u=s[8],c=s[9],f=s[10],d=s[11],p=s[12],m=s[13],g=s[14],y=i*o-e*n,S=i*a-h*n,w=i*l-r*n,b=e*a-h*o,M=e*l-r*o,v=h*l-r*a,T=u*m-c*p,x=u*g-f*p,G=u*(s=s[15])-d*p,_=c*g-f*m,I=c*s-d*m,C=f*s-d*g,P=y*C-S*I+w*_+b*G-M*x+v*T;return P?(t[0]=(o*C-a*I+l*_)*(P=1/P),t[1]=(h*I-e*C-r*_)*P,t[2]=(m*v-g*M+s*b)*P,t[3]=(f*M-c*v-d*b)*P,t[4]=(a*G-n*C-l*x)*P,t[5]=(i*C-h*G+r*x)*P,t[6]=(g*w-p*v-s*S)*P,t[7]=(u*v-f*w+d*S)*P,t[8]=(n*I-o*G+l*T)*P,t[9]=(e*G-i*I-r*T)*P,t[10]=(p*M-m*w+s*y)*P,t[11]=(c*w-u*M-d*y)*P,t[12]=(o*x-n*_-a*T)*P,t[13]=(i*_-e*x+h*T)*P,t[14]=(m*S-p*b-g*y)*P,t[15]=(u*b-c*S+f*y)*P,t):null},as=function(t,s){var i=s[0],e=s[1],h=s[2],r=s[3],n=s[4],o=s[5],a=s[6],l=s[7],u=s[8],c=s[9],f=s[10],d=s[11],p=s[12],m=s[13],g=s[14],y=i*o-e*n,S=i*a-h*n,w=i*l-r*n,b=e*a-h*o,M=e*l-r*o,v=h*l-r*a,T=u*m-c*p,x=u*g-f*p,G=u*(s=s[15])-d*p,_=c*g-f*m,I=c*s-d*m,C=f*s-d*g;return t[0]=o*C-a*I+l*_,t[1]=h*I-e*C-r*_,t[2]=m*v-g*M+s*b,t[3]=f*M-c*v-d*b,t[4]=a*G-n*C-l*x,t[5]=i*C-h*G+r*x,t[6]=g*w-p*v-s*S,t[7]=u*v-f*w+d*S,t[8]=n*I-o*G+l*T,t[9]=e*G-i*I-r*T,t[10]=p*M-m*w+s*y,t[11]=c*w-u*M-d*y,t[12]=o*x-n*_-a*T,t[13]=i*_-e*x+h*T,t[14]=m*S-p*b-g*y,t[15]=u*b-c*S+f*y,t},ls=function(t){var s=t[0],i=t[1],e=t[2],h=t[4],r=t[5],n=t[6],o=t[8],a=t[9],l=t[10],u=t[12],c=t[13],f=t[14],d=s*r-i*h,p=s*n-e*h,m=i*n-e*r,g=o*c-a*u,y=o*f-l*u,S=a*f-l*c;return t[7]*(s*S-i*y+e*g)-t[3]*(h*S-r*y+n*g)+t[15]*(o*m-a*p+l*d)-t[11]*(u*m-c*p+f*d)},o=function(t,s,i){var e=s[0],h=s[1],r=s[2],n=s[3],o=s[4],a=s[5],l=s[6],u=s[7],c=s[8],f=s[9],d=s[10],p=s[11],m=s[12],g=s[13],y=s[14],s=s[15],S=i[0],w=i[1],b=i[2],M=i[3];return t[0]=S*e+w*o+b*c+M*m,t[1]=S*h+w*a+b*f+M*g,t[2]=S*r+w*l+b*d+M*y,t[3]=S*n+w*u+b*p+M*s,t[4]=(S=i[4])*e+(w=i[5])*o+(b=i[6])*c+(M=i[7])*m,t[5]=S*h+w*a+b*f+M*g,t[6]=S*r+w*l+b*d+M*y,t[7]=S*n+w*u+b*p+M*s,t[8]=(S=i[8])*e+(w=i[9])*o+(b=i[10])*c+(M=i[11])*m,t[9]=S*h+w*a+b*f+M*g,t[10]=S*r+w*l+b*d+M*y,t[11]=S*n+w*u+b*p+M*s,t[12]=(S=i[12])*e+(w=i[13])*o+(b=i[14])*c+(M=i[15])*m,t[13]=S*h+w*a+b*f+M*g,t[14]=S*r+w*l+b*d+M*y,t[15]=S*n+w*u+b*p+M*s,t},us=function(t,s,i){var e,h,r,n,o,a,l,u,c,f,d,p,m=i[0],g=i[1],i=i[2];return s===t?(t[12]=s[0]*m+s[4]*g+s[8]*i+s[12],t[13]=s[1]*m+s[5]*g+s[9]*i+s[13],t[14]=s[2]*m+s[6]*g+s[10]*i+s[14],t[15]=s[3]*m+s[7]*g+s[11]*i+s[15]):(e=s[0],h=s[1],r=s[2],n=s[3],o=s[4],a=s[5],l=s[6],u=s[7],c=s[8],f=s[9],d=s[10],p=s[11],t[0]=e,t[1]=h,t[2]=r,t[3]=n,t[4]=o,t[5]=a,t[6]=l,t[7]=u,t[8]=c,t[9]=f,t[10]=d,t[11]=p,t[12]=e*m+o*g+c*i+s[12],t[13]=h*m+a*g+f*i+s[13],t[14]=r*m+l*g+d*i+s[14],t[15]=n*m+u*g+p*i+s[15]),t},cs=function(t,s,i){var e=i[0],h=i[1],i=i[2];return t[0]=s[0]*e,t[1]=s[1]*e,t[2]=s[2]*e,t[3]=s[3]*e,t[4]=s[4]*h,t[5]=s[5]*h,t[6]=s[6]*h,t[7]=s[7]*h,t[8]=s[8]*i,t[9]=s[9]*i,t[10]=s[10]*i,t[11]=s[11]*i,t[12]=s[12],t[13]=s[13],t[14]=s[14],t[15]=s[15],t},fs=function(t,s,i,e){var h,r,n,o,a,l,u,c,f,d,p,m,g,y,S,w,b,M,v,T,x=e[0],G=e[1],e=e[2],_=Math.hypot(x,G,e);return _<Mh?null:(x*=_=1/_,G*=_,e*=_,_=Math.sin(i),i=Math.cos(i),r=s[0],n=s[1],o=s[2],a=s[3],u=s[5],c=s[6],f=s[7],p=s[9],m=s[10],g=s[11],S=x*G*(h=1-i)-e*_,w=G*G*h+i,b=e*G*h+x*_,M=x*e*h+G*_,v=G*e*h-x*_,T=e*e*h+i,t[0]=r*(i=x*x*h+i)+(l=s[4])*(y=G*x*h+e*_)+(d=s[8])*(e=e*x*h-G*_),t[1]=n*i+u*y+p*e,t[2]=o*i+c*y+m*e,t[3]=a*i+f*y+g*e,t[4]=r*S+l*w+d*b,t[5]=n*S+u*w+p*b,t[6]=o*S+c*w+m*b,t[7]=a*S+f*w+g*b,t[8]=r*M+l*v+d*T,t[9]=n*M+u*v+p*T,t[10]=o*M+c*v+m*T,t[11]=a*M+f*v+g*T,s!==t&&(t[12]=s[12],t[13]=s[13],t[14]=s[14],t[15]=s[15]),t)},ds=function(t,s,i){var e=Math.sin(i),i=Math.cos(i),h=s[4],r=s[5],n=s[6],o=s[7],a=s[8],l=s[9],u=s[10],c=s[11];return s!==t&&(t[0]=s[0],t[1]=s[1],t[2]=s[2],t[3]=s[3],t[12]=s[12],t[13]=s[13],t[14]=s[14],t[15]=s[15]),t[4]=h*i+a*e,t[5]=r*i+l*e,t[6]=n*i+u*e,t[7]=o*i+c*e,t[8]=a*i-h*e,t[9]=l*i-r*e,t[10]=u*i-n*e,t[11]=c*i-o*e,t},ps=function(t,s,i){var e=Math.sin(i),i=Math.cos(i),h=s[0],r=s[1],n=s[2],o=s[3],a=s[8],l=s[9],u=s[10],c=s[11];return s!==t&&(t[4]=s[4],t[5]=s[5],t[6]=s[6],t[7]=s[7],t[12]=s[12],t[13]=s[13],t[14]=s[14],t[15]=s[15]),t[0]=h*i-a*e,t[1]=r*i-l*e,t[2]=n*i-u*e,t[3]=o*i-c*e,t[8]=h*e+a*i,t[9]=r*e+l*i,t[10]=n*e+u*i,t[11]=o*e+c*i,t},ms=function(t,s,i){var e=Math.sin(i),i=Math.cos(i),h=s[0],r=s[1],n=s[2],o=s[3],a=s[4],l=s[5],u=s[6],c=s[7];return s!==t&&(t[8]=s[8],t[9]=s[9],t[10]=s[10],t[11]=s[11],t[12]=s[12],t[13]=s[13],t[14]=s[14],t[15]=s[15]),t[0]=h*i+a*e,t[1]=r*i+l*e,t[2]=n*i+u*e,t[3]=o*i+c*e,t[4]=a*i-h*e,t[5]=l*i-r*e,t[6]=u*i-n*e,t[7]=c*i-o*e,t},gs=function(t,s){return t[0]=1,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=1,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=1,t[11]=0,t[12]=s[0],t[13]=s[1],t[14]=s[2],t[15]=1,t},ys=function(t,s){return t[0]=s[0],t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=s[1],t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=s[2],t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t},Ss=function(t,s,i){var e,h=i[0],r=i[1],i=i[2],n=Math.hypot(h,r,i);return n<Mh?null:(h*=n=1/n,r*=n,i*=n,n=Math.sin(s),s=Math.cos(s),t[0]=h*h*(e=1-s)+s,t[1]=r*h*e+i*n,t[2]=i*h*e-r*n,t[3]=0,t[4]=h*r*e-i*n,t[5]=r*r*e+s,t[6]=i*r*e+h*n,t[7]=0,t[8]=h*i*e+r*n,t[9]=r*i*e-h*n,t[10]=i*i*e+s,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t)},ws=function(t,s){var i=Math.sin(s),s=Math.cos(s);return t[0]=1,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=s,t[6]=i,t[7]=0,t[8]=0,t[9]=-i,t[10]=s,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t},bs=function(t,s){var i=Math.sin(s),s=Math.cos(s);return t[0]=s,t[1]=0,t[2]=-i,t[3]=0,t[4]=0,t[5]=1,t[6]=0,t[7]=0,t[8]=i,t[9]=0,t[10]=s,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t},Ms=function(t,s){var i=Math.sin(s),s=Math.cos(s);return t[0]=s,t[1]=i,t[2]=0,t[3]=0,t[4]=-i,t[5]=s,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=1,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t},f=function(t,s,i){var e=s[0],h=s[2],r=h+h,n=e*(u=e+e),o=e*(c=(l=s[1])+l),e=e*r,a=l*c,l=l*r,u=(s=s[3])*u,c=s*c,s=s*r;return t[0]=1-(a+(h=h*r)),t[1]=o+s,t[2]=e-c,t[3]=0,t[4]=o-s,t[5]=1-(n+h),t[6]=l+u,t[7]=0,t[8]=e+c,t[9]=l-u,t[10]=1-(n+a),t[11]=0,t[12]=i[0],t[13]=i[1],t[14]=i[2],t[15]=1,t},vs=function(t,s){var i=new vh(3),e=-s[0],h=-s[1],r=-s[2],n=s[3],o=s[4],a=s[5],l=s[6],u=s[7],c=e*e+h*h+r*r+n*n;return 0<c?(i[0]=2*(o*n+u*e+a*r-l*h)/c,i[1]=2*(a*n+u*h+l*e-o*r)/c,i[2]=2*(l*n+u*r+o*h-a*e)/c):(i[0]=2*(o*n+u*e+a*r-l*h),i[1]=2*(a*n+u*h+l*e-o*r),i[2]=2*(l*n+u*r+o*h-a*e)),f(t,s,i),t},a=function(t,s){return t[0]=s[12],t[1]=s[13],t[2]=s[14],t},d=function(t,s){var i=s[0],e=s[4],h=s[5],r=s[6],n=s[8],o=s[9],a=s[10];return t[0]=Math.hypot(i,s[1],s[2]),t[1]=Math.hypot(e,h,r),t[2]=Math.hypot(n,o,a),t},l=function(t,s){var i=new vh(3),e=(d(i,s),1/i[0]),h=s[0]*e,r=s[1]*(u=1/i[1]),n=s[2]*(i=1/i[2]),o=s[4]*e,a=s[5]*u,l=s[6]*i,e=s[8]*e,u=s[9]*u,c=0;return 0<(i=h+a+(s=s[10]*i))?(c=2*Math.sqrt(1+i),t[3]=.25*c,t[0]=(l-u)/c,t[1]=(e-n)/c,t[2]=(r-o)/c):a<h&&s<h?(c=2*Math.sqrt(1+h-a-s),t[3]=(l-u)/c,t[0]=.25*c,t[1]=(r+o)/c,t[2]=(e+n)/c):s<a?(c=2*Math.sqrt(1+a-h-s),t[3]=(e-n)/c,t[0]=(r+o)/c,t[1]=.25*c,t[2]=(l+u)/c):(c=2*Math.sqrt(1+s-h-a),t[3]=(r-o)/c,t[0]=(e+n)/c,t[1]=(l+u)/c,t[2]=.25*c),t},Ts=function(t,s,i,e){s[0]=e[12],s[1]=e[13],s[2]=e[14];var s=e[0],h=e[1],r=e[2],n=e[4],o=e[5],a=e[6],l=e[8],u=e[9],e=e[10],c=(i[0]=Math.hypot(s,h,r),i[1]=Math.hypot(n,o,a),i[2]=Math.hypot(l,u,e),1/i[0]),f=1/i[1],s=s*c,h=h*f,r=r*(i=1/i[2]),n=n*c,a=a*i,l=l*c,c=u*f,u=e*i,e=0;return 0<(f=s+(o=o*f)+u)?(e=2*Math.sqrt(1+f),t[3]=.25*e,t[0]=(a-c)/e,t[1]=(l-r)/e,t[2]=(h-n)/e):o<s&&u<s?(e=2*Math.sqrt(1+s-o-u),t[3]=(a-c)/e,t[0]=.25*e,t[1]=(h+n)/e,t[2]=(l+r)/e):u<o?(e=2*Math.sqrt(1+o-s-u),t[3]=(l-r)/e,t[0]=(h+n)/e,t[1]=.25*e,t[2]=(a+c)/e):(e=2*Math.sqrt(1+u-s-o),t[3]=(h-n)/e,t[0]=(l+r)/e,t[1]=(a+c)/e,t[2]=.25*e),t},xs=function(t,s,i,e){var h=(n=s[0])*(u=n+n),r=n*(c=(a=s[1])+a),n=n*(f=(l=s[2])+l),o=a*c,a=a*f,l=l*f,u=(s=s[3])*u,c=s*c,s=s*f,f=e[0],d=e[1],e=e[2];return t[0]=(1-(o+l))*f,t[1]=(r+s)*f,t[2]=(n-c)*f,t[3]=0,t[4]=(r-s)*d,t[5]=(1-(h+l))*d,t[6]=(a+u)*d,t[7]=0,t[8]=(n+c)*e,t[9]=(a-u)*e,t[10]=(1-(h+o))*e,t[11]=0,t[12]=i[0],t[13]=i[1],t[14]=i[2],t[15]=1,t},Gs=function(t,s,i,e,h){var r=(o=s[0])*(c=o+o),n=o*(f=(l=s[1])+l),o=o*(d=(u=s[2])+u),a=l*f,l=l*d,u=u*d,c=(s=s[3])*c,f=s*f,s=s*d,d=e[0],p=e[1],e=e[2],m=h[0],g=h[1],h=h[2],y=(1-(a+u))*d,S=(n+s)*d,d=(o-f)*d,n=(n-s)*p,s=(1-(r+u))*p,u=(l+c)*p,p=(o+f)*e,o=(l-c)*e,f=(1-(r+a))*e;return t[0]=y,t[1]=S,t[2]=d,t[3]=0,t[4]=n,t[5]=s,t[6]=u,t[7]=0,t[8]=p,t[9]=o,t[10]=f,t[11]=0,t[12]=i[0]+m-(y*m+n*g+p*h),t[13]=i[1]+g-(S*m+s*g+o*h),t[14]=i[2]+h-(d*m+u*g+f*h),t[15]=1,t},_s=function(t,s){var i=s[0],e=s[2],h=e+e,i=i*(l=i+i),r=(n=s[1])*l,n=n*(u=n+n),o=e*l,a=e*u,l=(s=s[3])*l,u=s*u,s=s*h;return t[0]=1-n-(e=e*h),t[1]=r+s,t[2]=o-u,t[3]=0,t[4]=r-s,t[5]=1-i-e,t[6]=a+l,t[7]=0,t[8]=o+u,t[9]=a-l,t[10]=1-i-n,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t},Is=function(t,s,i,e,h,r,n){var o=1/(i-s),a=1/(h-e),l=1/(r-n);return t[0]=2*r*o,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=2*r*a,t[6]=0,t[7]=0,t[8]=(i+s)*o,t[9]=(h+e)*a,t[10]=(n+r)*l,t[11]=-1,t[12]=0,t[13]=0,t[14]=n*r*2*l,t[15]=0,t},u=function(t,s,i,e,h){return s=1/Math.tan(s/2),t[0]=s/i,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=s,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[11]=-1,t[12]=0,t[13]=0,t[15]=0,null!=h&&h!==1/0?(t[10]=(h+e)*(i=1/(e-h)),t[14]=2*h*e*i):(t[10]=-1,t[14]=-2*e),t},Cs=function(t,s,i,e,h){return s=1/Math.tan(s/2),t[0]=s/i,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=s,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[11]=-1,t[12]=0,t[13]=0,t[15]=0,null!=h&&h!==1/0?(t[10]=h*(i=1/(e-h)),t[14]=h*e*i):(t[10]=-1,t[14]=-e),t},Ps=function(t,s,i,e){var h=Math.tan(s.upDegrees*Math.PI/180),r=Math.tan(s.downDegrees*Math.PI/180),n=Math.tan(s.leftDegrees*Math.PI/180),o=2/(n+(s=Math.tan(s.rightDegrees*Math.PI/180))),a=2/(h+r);return t[0]=o,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=a,t[6]=0,t[7]=0,t[8]=-(n-s)*o*.5,t[9]=(h-r)*a*.5,t[10]=e/(i-e),t[11]=-1,t[12]=0,t[13]=0,t[14]=e*i/(i-e),t[15]=0,t},c=function(t,s,i,e,h,r,n){var o=1/(s-i),a=1/(e-h),l=1/(r-n);return t[0]=-2*o,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=-2*a,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=2*l,t[11]=0,t[12]=(s+i)*o,t[13]=(h+e)*a,t[14]=(n+r)*l,t[15]=1,t},Rs=function(t,s,i,e,h,r,n){var o=1/(s-i),a=1/(e-h),n=1/(r-n);return t[0]=-2*o,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=-2*a,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=n,t[11]=0,t[12]=(s+i)*o,t[13]=(h+e)*a,t[14]=r*n,t[15]=1,t},As=function(t,s,i,e){var h,r,n,o,a=s[0],l=s[1],s=s[2],u=e[0],c=e[1],e=e[2],f=i[0],d=i[1],i=i[2];return Math.abs(a-f)<Mh&&Math.abs(l-d)<Mh&&Math.abs(s-i)<Mh?p(t):(f=a-f,d=l-d,i=s-i,h=c*(i*=o=1/Math.hypot(f,d,i))-e*(d*=o),e=e*(f*=o)-u*i,u=u*d-c*f,(o=Math.hypot(h,e,u))?(h*=o=1/o,e*=o,u*=o):u=e=h=0,c=d*u-i*e,r=i*h-f*u,n=f*e-d*h,(o=Math.hypot(c,r,n))?(c*=o=1/o,r*=o,n*=o):n=r=c=0,t[0]=h,t[1]=c,t[2]=f,t[3]=0,t[4]=e,t[5]=r,t[6]=d,t[7]=0,t[8]=u,t[9]=n,t[10]=i,t[11]=0,t[12]=-(h*a+e*l+u*s),t[13]=-(c*a+r*l+n*s),t[14]=-(f*a+d*l+i*s),t[15]=1,t)},Es=function(t,s,i,e){var h=s[0],r=s[1],s=s[2],n=e[0],o=e[1],e=e[2],a=h-i[0],l=r-i[1],u=a*a+l*l+(i=s-i[2])*i,c=(0<u&&(a*=u=1/Math.sqrt(u),l*=u,i*=u),o*i-e*l);return 0<(u=c*c+(e=e*a-n*i)*e+(n=n*l-o*a)*n)&&(c*=u=1/Math.sqrt(u),e*=u,n*=u),t[0]=c,t[1]=e,t[2]=n,t[3]=0,t[4]=l*n-i*e,t[5]=i*c-a*n,t[6]=a*e-l*c,t[7]=0,t[8]=a,t[9]=l,t[10]=i,t[11]=0,t[12]=h,t[13]=r,t[14]=s,t[15]=1,t},Fs=function(t){return"mat4("+t[0]+", "+t[1]+", "+t[2]+", "+t[3]+", "+t[4]+", "+t[5]+", "+t[6]+", "+t[7]+", "+t[8]+", "+t[9]+", "+t[10]+", "+t[11]+", "+t[12]+", "+t[13]+", "+t[14]+", "+t[15]+")"},Ds=function(t){return Math.hypot(t[0],t[1],t[2],t[3],t[4],t[5],t[6],t[7],t[8],t[9],t[10],t[11],t[12],t[13],t[14],t[15])},ks=function(t,s,i){return t[0]=s[0]+i[0],t[1]=s[1]+i[1],t[2]=s[2]+i[2],t[3]=s[3]+i[3],t[4]=s[4]+i[4],t[5]=s[5]+i[5],t[6]=s[6]+i[6],t[7]=s[7]+i[7],t[8]=s[8]+i[8],t[9]=s[9]+i[9],t[10]=s[10]+i[10],t[11]=s[11]+i[11],t[12]=s[12]+i[12],t[13]=s[13]+i[13],t[14]=s[14]+i[14],t[15]=s[15]+i[15],t},Os=function(t,s,i){return t[0]=s[0]-i[0],t[1]=s[1]-i[1],t[2]=s[2]-i[2],t[3]=s[3]-i[3],t[4]=s[4]-i[4],t[5]=s[5]-i[5],t[6]=s[6]-i[6],t[7]=s[7]-i[7],t[8]=s[8]-i[8],t[9]=s[9]-i[9],t[10]=s[10]-i[10],t[11]=s[11]-i[11],t[12]=s[12]-i[12],t[13]=s[13]-i[13],t[14]=s[14]-i[14],t[15]=s[15]-i[15],t},Ls=function(t,s,i){return t[0]=s[0]*i,t[1]=s[1]*i,t[2]=s[2]*i,t[3]=s[3]*i,t[4]=s[4]*i,t[5]=s[5]*i,t[6]=s[6]*i,t[7]=s[7]*i,t[8]=s[8]*i,t[9]=s[9]*i,t[10]=s[10]*i,t[11]=s[11]*i,t[12]=s[12]*i,t[13]=s[13]*i,t[14]=s[14]*i,t[15]=s[15]*i,t},Ns=function(t,s,i,e){return t[0]=s[0]+i[0]*e,t[1]=s[1]+i[1]*e,t[2]=s[2]+i[2]*e,t[3]=s[3]+i[3]*e,t[4]=s[4]+i[4]*e,t[5]=s[5]+i[5]*e,t[6]=s[6]+i[6]*e,t[7]=s[7]+i[7]*e,t[8]=s[8]+i[8]*e,t[9]=s[9]+i[9]*e,t[10]=s[10]+i[10]*e,t[11]=s[11]+i[11]*e,t[12]=s[12]+i[12]*e,t[13]=s[13]+i[13]*e,t[14]=s[14]+i[14]*e,t[15]=s[15]+i[15]*e,t},Bs=function(t,s){return t[0]===s[0]&&t[1]===s[1]&&t[2]===s[2]&&t[3]===s[3]&&t[4]===s[4]&&t[5]===s[5]&&t[6]===s[6]&&t[7]===s[7]&&t[8]===s[8]&&t[9]===s[9]&&t[10]===s[10]&&t[11]===s[11]&&t[12]===s[12]&&t[13]===s[13]&&t[14]===s[14]&&t[15]===s[15]},Ws=function(t,s){var i=t[0],e=t[1],h=t[2],r=t[3],n=t[4],o=t[5],a=t[6],l=t[7],u=t[8],c=t[9],f=t[10],d=t[11],p=t[12],m=t[13],g=t[14],t=t[15],y=s[0],S=s[1],w=s[2],b=s[3],M=s[4],v=s[5],T=s[6],x=s[7],G=s[8],_=s[9],I=s[10],C=s[11],P=s[12],R=s[13],A=s[14],s=s[15];return Math.abs(i-y)<=Mh*Math.max(1,Math.abs(i),Math.abs(y))&&Math.abs(e-S)<=Mh*Math.max(1,Math.abs(e),Math.abs(S))&&Math.abs(h-w)<=Mh*Math.max(1,Math.abs(h),Math.abs(w))&&Math.abs(r-b)<=Mh*Math.max(1,Math.abs(r),Math.abs(b))&&Math.abs(n-M)<=Mh*Math.max(1,Math.abs(n),Math.abs(M))&&Math.abs(o-v)<=Mh*Math.max(1,Math.abs(o),Math.abs(v))&&Math.abs(a-T)<=Mh*Math.max(1,Math.abs(a),Math.abs(T))&&Math.abs(l-x)<=Mh*Math.max(1,Math.abs(l),Math.abs(x))&&Math.abs(u-G)<=Mh*Math.max(1,Math.abs(u),Math.abs(G))&&Math.abs(c-_)<=Mh*Math.max(1,Math.abs(c),Math.abs(_))&&Math.abs(f-I)<=Mh*Math.max(1,Math.abs(f),Math.abs(I))&&Math.abs(d-C)<=Mh*Math.max(1,Math.abs(d),Math.abs(C))&&Math.abs(p-P)<=Mh*Math.max(1,Math.abs(p),Math.abs(P))&&Math.abs(m-R)<=Mh*Math.max(1,Math.abs(m),Math.abs(R))&&Math.abs(g-A)<=Mh*Math.max(1,Math.abs(g),Math.abs(A))&&Math.abs(t-s)<=Mh*Math.max(1,Math.abs(t),Math.abs(s))},m=function(){var t=new vh(3);return vh!=Float32Array&&(t[0]=0,t[1]=0,t[2]=0),t},Vs=function(t){var s=new vh(3);return s[0]=t[0],s[1]=t[1],s[2]=t[2],s},js=function(t){var s=t[0];return Math.hypot(s,t[1],t[2])},g=function(t,s,i){var e=new vh(3);return e[0]=t,e[1]=s,e[2]=i,e},Hs=function(t,s){return t[0]=s[0],t[1]=s[1],t[2]=s[2],t},Us=function(t,s,i,e){return t[0]=s,t[1]=i,t[2]=e,t},zs=function(t,s,i){return t[0]=s[0]+i[0],t[1]=s[1]+i[1],t[2]=s[2]+i[2],t},Js=function(t,s,i){return t[0]=s[0]-i[0],t[1]=s[1]-i[1],t[2]=s[2]-i[2],t},qs=function(t,s,i){return t[0]=s[0]*i[0],t[1]=s[1]*i[1],t[2]=s[2]*i[2],t},Xs=function(t,s,i){return t[0]=s[0]/i[0],t[1]=s[1]/i[1],t[2]=s[2]/i[2],t},Ys=function(t,s){return t[0]=Math.ceil(s[0]),t[1]=Math.ceil(s[1]),t[2]=Math.ceil(s[2]),t},$s=function(t,s){return t[0]=Math.floor(s[0]),t[1]=Math.floor(s[1]),t[2]=Math.floor(s[2]),t},Ks=function(t,s,i){return t[0]=Math.min(s[0],i[0]),t[1]=Math.min(s[1],i[1]),t[2]=Math.min(s[2],i[2]),t},Zs=function(t,s,i){return t[0]=Math.max(s[0],i[0]),t[1]=Math.max(s[1],i[1]),t[2]=Math.max(s[2],i[2]),t},Qs=function(t,s){return t[0]=Math.round(s[0]),t[1]=Math.round(s[1]),t[2]=Math.round(s[2]),t},ti=function(t,s,i){return t[0]=s[0]*i,t[1]=s[1]*i,t[2]=s[2]*i,t},si=function(t,s,i,e){return t[0]=s[0]+i[0]*e,t[1]=s[1]+i[1]*e,t[2]=s[2]+i[2]*e,t},ii=function(t,s){var i=s[0]-t[0];return Math.hypot(i,s[1]-t[1],s[2]-t[2])},ei=function(t,s){var i=s[0]-t[0],e=s[1]-t[1];return i*i+e*e+(s=s[2]-t[2])*s},hi=function(t){var s=t[0],i=t[1];return s*s+i*i+(t=t[2])*t},ri=function(t,s){return t[0]=-s[0],t[1]=-s[1],t[2]=-s[2],t},ni=function(t,s){return t[0]=1/s[0],t[1]=1/s[1],t[2]=1/s[2],t},y=function(t,s){var i=s[0],e=s[1],h=s[2];return 0<(i=i*i+e*e+h*h)&&(i=1/Math.sqrt(i)),t[0]=s[0]*i,t[1]=s[1]*i,t[2]=s[2]*i,t},S=function(t,s){return t[0]*s[0]+t[1]*s[1]+t[2]*s[2]},w=function(t,s,i){var e=s[0],h=s[1],s=s[2],r=i[0],n=i[1],i=i[2];return t[0]=h*i-s*n,t[1]=s*r-e*i,t[2]=e*n-h*r,t},oi=function(t,s,i,e){var h=s[0],r=s[1],s=s[2];return t[0]=h+e*(i[0]-h),t[1]=r+e*(i[1]-r),t[2]=s+e*(i[2]-s),t},ai=function(t,s,i,e){var h=Math.acos(Math.min(Math.max(S(s,i),-1),1)),r=Math.sin(h),n=Math.sin((1-e)*h)/r,e=Math.sin(e*h)/r;return t[0]=n*s[0]+e*i[0],t[1]=n*s[1]+e*i[1],t[2]=n*s[2]+e*i[2],t},li=function(t,s,i,e,h,r){var n=r*r,o=n*(2*r-3)+1,a=n*(r-2)+r,l=n*(r-1);return t[0]=s[0]*o+i[0]*a+e[0]*l+h[0]*(n=n*(3-2*r)),t[1]=s[1]*o+i[1]*a+e[1]*l+h[1]*n,t[2]=s[2]*o+i[2]*a+e[2]*l+h[2]*n,t},ui=function(t,s,i,e,h,r){var n=1-r,o=n*n,a=r*r,l=o*n;return t[0]=s[0]*l+i[0]*(o=3*r*o)+e[0]*(n=3*a*n)+h[0]*(a=a*r),t[1]=s[1]*l+i[1]*o+e[1]*n+h[1]*a,t[2]=s[2]*l+i[2]*o+e[2]*n+h[2]*a,t},ci=function(t,s){s=s||1;var i=2*Dh()*Math.PI,e=2*Dh()-1,h=Math.sqrt(1-e*e)*s;return t[0]=Math.cos(i)*h,t[1]=Math.sin(i)*h,t[2]=e*s,t},fi=function(t,s,i){var e=s[0],h=s[1],s=s[2],r=i[3]*e+i[7]*h+i[11]*s+i[15];return t[0]=(i[0]*e+i[4]*h+i[8]*s+i[12])/(r=r||1),t[1]=(i[1]*e+i[5]*h+i[9]*s+i[13])/r,t[2]=(i[2]*e+i[6]*h+i[10]*s+i[14])/r,t},di=function(t,s,i){var e=s[0],h=s[1],s=s[2];return t[0]=e*i[0]+h*i[3]+s*i[6],t[1]=e*i[1]+h*i[4]+s*i[7],t[2]=e*i[2]+h*i[5]+s*i[8],t},pi=function(t,s,i){var e=i[0],h=i[1],r=s[0],n=s[1],o=h*(s=s[2])-(c=i[2])*n,a=c*r-e*s,l=e*n-h*r,u=h*l-c*a,c=c*o-e*l,e=e*a-h*o;return a*=h=2*i[3],l*=h,c*=2,e*=2,t[0]=r+(o*=h)+(u*=2),t[1]=n+a+c,t[2]=s+l+e,t},mi=function(t,s,i,e){var h=[],r=[];return h[0]=s[0]-i[0],h[1]=s[1]-i[1],h[2]=s[2]-i[2],r[0]=h[0],r[1]=h[1]*Math.cos(e)-h[2]*Math.sin(e),r[2]=h[1]*Math.sin(e)+h[2]*Math.cos(e),t[0]=r[0]+i[0],t[1]=r[1]+i[1],t[2]=r[2]+i[2],t},gi=function(t,s,i,e){var h=[],r=[];return h[0]=s[0]-i[0],h[1]=s[1]-i[1],h[2]=s[2]-i[2],r[0]=h[2]*Math.sin(e)+h[0]*Math.cos(e),r[1]=h[1],r[2]=h[2]*Math.cos(e)-h[0]*Math.sin(e),t[0]=r[0]+i[0],t[1]=r[1]+i[1],t[2]=r[2]+i[2],t},yi=function(t,s,i,e){var h=[],r=[];return h[0]=s[0]-i[0],h[1]=s[1]-i[1],h[2]=s[2]-i[2],r[0]=h[0]*Math.cos(e)-h[1]*Math.sin(e),r[1]=h[0]*Math.sin(e)+h[1]*Math.cos(e),r[2]=h[2],t[0]=r[0]+i[0],t[1]=r[1]+i[1],t[2]=r[2]+i[2],t},Si=function(t,s){var i=t[0],e=t[1],h=t[2],r=s[0],n=s[1],o=s[2],e=(i=Math.sqrt((i*i+e*e+h*h)*(r*r+n*n+o*o)))&&S(t,s)/i;return Math.acos(Math.min(Math.max(e,-1),1))},wi=function(t){return t[0]=0,t[1]=0,t[2]=0,t},bi=function(t){return"vec3("+t[0]+", "+t[1]+", "+t[2]+")"},Mi=function(t,s){return t[0]===s[0]&&t[1]===s[1]&&t[2]===s[2]},vi=function(t,s){var i=t[0],e=t[1],t=t[2],h=s[0],r=s[1],s=s[2];return Math.abs(i-h)<=Mh*Math.max(1,Math.abs(i),Math.abs(h))&&Math.abs(e-r)<=Mh*Math.max(1,Math.abs(e),Math.abs(r))&&Math.abs(t-s)<=Mh*Math.max(1,Math.abs(t),Math.abs(s))},b=function(){var t=new vh(4);return vh!=Float32Array&&(t[0]=0,t[1]=0,t[2]=0,t[3]=0),t},Ti=function(t){var s=new vh(4);return s[0]=t[0],s[1]=t[1],s[2]=t[2],s[3]=t[3],s},xi=function(t,s,i,e){var h=new vh(4);return h[0]=t,h[1]=s,h[2]=i,h[3]=e,h},Gi=function(t,s){return t[0]=s[0],t[1]=s[1],t[2]=s[2],t[3]=s[3],t},_i=function(t,s,i,e,h){return t[0]=s,t[1]=i,t[2]=e,t[3]=h,t},Ii=function(t,s,i){return t[0]=s[0]+i[0],t[1]=s[1]+i[1],t[2]=s[2]+i[2],t[3]=s[3]+i[3],t},Ci=function(t,s,i){return t[0]=s[0]-i[0],t[1]=s[1]-i[1],t[2]=s[2]-i[2],t[3]=s[3]-i[3],t},Pi=function(t,s,i){return t[0]=s[0]*i[0],t[1]=s[1]*i[1],t[2]=s[2]*i[2],t[3]=s[3]*i[3],t},Ri=function(t,s,i){return t[0]=s[0]/i[0],t[1]=s[1]/i[1],t[2]=s[2]/i[2],t[3]=s[3]/i[3],t},Ai=function(t,s){return t[0]=Math.ceil(s[0]),t[1]=Math.ceil(s[1]),t[2]=Math.ceil(s[2]),t[3]=Math.ceil(s[3]),t},Ei=function(t,s){return t[0]=Math.floor(s[0]),t[1]=Math.floor(s[1]),t[2]=Math.floor(s[2]),t[3]=Math.floor(s[3]),t},Fi=function(t,s,i){return t[0]=Math.min(s[0],i[0]),t[1]=Math.min(s[1],i[1]),t[2]=Math.min(s[2],i[2]),t[3]=Math.min(s[3],i[3]),t},Di=function(t,s,i){return t[0]=Math.max(s[0],i[0]),t[1]=Math.max(s[1],i[1]),t[2]=Math.max(s[2],i[2]),t[3]=Math.max(s[3],i[3]),t},ki=function(t,s){return t[0]=Math.round(s[0]),t[1]=Math.round(s[1]),t[2]=Math.round(s[2]),t[3]=Math.round(s[3]),t},Oi=function(t,s,i){return t[0]=s[0]*i,t[1]=s[1]*i,t[2]=s[2]*i,t[3]=s[3]*i,t},Li=function(t,s,i,e){return t[0]=s[0]+i[0]*e,t[1]=s[1]+i[1]*e,t[2]=s[2]+i[2]*e,t[3]=s[3]+i[3]*e,t},Ni=function(t,s){var i=s[0]-t[0];return Math.hypot(i,s[1]-t[1],s[2]-t[2],s[3]-t[3])},Bi=function(t,s){var i=s[0]-t[0],e=s[1]-t[1],h=s[2]-t[2];return i*i+e*e+h*h+(s=s[3]-t[3])*s},M=function(t){var s=t[0];return Math.hypot(s,t[1],t[2],t[3])},v=function(t){var s=t[0],i=t[1],e=t[2];return s*s+i*i+e*e+(t=t[3])*t},Wi=function(t,s){return t[0]=-s[0],t[1]=-s[1],t[2]=-s[2],t[3]=-s[3],t},Vi=function(t,s){return t[0]=1/s[0],t[1]=1/s[1],t[2]=1/s[2],t[3]=1/s[3],t},ji=function(t,s){var i=s[0],e=s[1],h=s[2],r=i*i+e*e+h*h+(s=s[3])*s;return 0<r&&(r=1/Math.sqrt(r)),t[0]=i*r,t[1]=e*r,t[2]=h*r,t[3]=s*r,t},T=function(t,s){return t[0]*s[0]+t[1]*s[1]+t[2]*s[2]+t[3]*s[3]},Hi=function(t,s,i,e){var h=i[0]*e[1]-i[1]*e[0],r=i[0]*e[2]-i[2]*e[0],n=i[0]*e[3]-i[3]*e[0],o=i[1]*e[2]-i[2]*e[1],a=i[1]*e[3]-i[3]*e[1],i=i[2]*e[3]-i[3]*e[2],e=s[0],l=s[1],u=s[2],s=s[3];return t[0]=l*i-u*a+s*o,t[1]=-e*i+u*n-s*r,t[2]=e*a-l*n+s*h,t[3]=-e*o+l*r-u*h,t},Ui=function(t,s,i,e){var h=s[0],r=s[1],n=s[2],s=s[3];return t[0]=h+e*(i[0]-h),t[1]=r+e*(i[1]-r),t[2]=n+e*(i[2]-n),t[3]=s+e*(i[3]-s),t},zi=function(t,s){var i,e,h,r,n,o;for(s=s||1;1<=(n=(i=2*Dh()-1)*i+(e=2*Dh()-1)*e););for(;1<=(o=(h=2*Dh()-1)*h+(r=2*Dh()-1)*r););var a=Math.sqrt((1-n)/o);return t[0]=s*i,t[1]=s*e,t[2]=s*h*a,t[3]=s*r*a,t},Ji=function(t,s,i){var e=s[0],h=s[1],r=s[2],s=s[3];return t[0]=i[0]*e+i[4]*h+i[8]*r+i[12]*s,t[1]=i[1]*e+i[5]*h+i[9]*r+i[13]*s,t[2]=i[2]*e+i[6]*h+i[10]*r+i[14]*s,t[3]=i[3]*e+i[7]*h+i[11]*r+i[15]*s,t},qi=function(t,s,i){var e=s[0],h=s[1],r=s[2],n=i[0],o=i[1],a=i[2],l=(i=i[3])*e+o*r-a*h,u=i*h+a*e-n*r,c=i*r+n*h-o*e;return t[0]=l*i+(e=-n*e-o*h-a*r)*-n+u*-a-c*-o,t[1]=u*i+e*-o+c*-n-l*-a,t[2]=c*i+e*-a+l*-o-u*-n,t[3]=s[3],t},Xi=function(t){return t[0]=0,t[1]=0,t[2]=0,t[3]=0,t},Yi=function(t){return"vec4("+t[0]+", "+t[1]+", "+t[2]+", "+t[3]+")"},$i=function(t,s){return t[0]===s[0]&&t[1]===s[1]&&t[2]===s[2]&&t[3]===s[3]},Ki=function(t,s){var i=t[0],e=t[1],h=t[2],t=t[3],r=s[0],n=s[1],o=s[2],s=s[3];return Math.abs(i-r)<=Mh*Math.max(1,Math.abs(i),Math.abs(r))&&Math.abs(e-n)<=Mh*Math.max(1,Math.abs(e),Math.abs(n))&&Math.abs(h-o)<=Mh*Math.max(1,Math.abs(h),Math.abs(o))&&Math.abs(t-s)<=Mh*Math.max(1,Math.abs(t),Math.abs(s))},x=function(){var t=new vh(4);return vh!=Float32Array&&(t[0]=0,t[1]=0,t[2]=0),t[3]=1,t},Zi=function(t){return t[0]=0,t[1]=0,t[2]=0,t[3]=1,t},G=function(t,s,i){i*=.5;var e=Math.sin(i);return t[0]=e*s[0],t[1]=e*s[1],t[2]=e*s[2],t[3]=Math.cos(i),t},Qi=function(t,s){var i=2*Math.acos(s[3]),e=Math.sin(i/2);return Mh<e?(t[0]=s[0]/e,t[1]=s[1]/e,t[2]=s[2]/e):(t[0]=1,t[1]=0,t[2]=0),i},te=function(t,s){return t=zh(t,s),Math.acos(2*t*t-1)},se=function(t,s,i){var e=s[0],h=s[1],r=s[2],s=s[3],n=i[0],o=i[1],a=i[2],i=i[3];return t[0]=e*i+s*n+h*a-r*o,t[1]=h*i+s*o+r*n-e*a,t[2]=r*i+s*a+e*o-h*n,t[3]=s*i-e*n-h*o-r*a,t},_=function(t,s,i){i*=.5;var e=s[0],h=s[1],r=s[2],s=s[3],n=Math.sin(i),i=Math.cos(i);return t[0]=e*i+s*n,t[1]=h*i+r*n,t[2]=r*i-h*n,t[3]=s*i-e*n,t},I=function(t,s,i){i*=.5;var e=s[0],h=s[1],r=s[2],s=s[3],n=Math.sin(i),i=Math.cos(i);return t[0]=e*i-r*n,t[1]=h*i+s*n,t[2]=r*i+e*n,t[3]=s*i-h*n,t},C=function(t,s,i){i*=.5;var e=s[0],h=s[1],r=s[2],s=s[3],n=Math.sin(i),i=Math.cos(i);return t[0]=e*i+h*n,t[1]=h*i-e*n,t[2]=r*i+s*n,t[3]=s*i-r*n,t},ie=function(t,s){var i=s[0],e=s[1],s=s[2];return t[0]=i,t[1]=e,t[2]=s,t[3]=Math.sqrt(Math.abs(1-i*i-e*e-s*s)),t},P=function(t,s){var i=s[0],e=s[1],h=s[2],s=s[3],r=Math.sqrt(i*i+e*e+h*h),s=Math.exp(s),n=0<r?s*Math.sin(r)/r:0;return t[0]=i*n,t[1]=e*n,t[2]=h*n,t[3]=s*Math.cos(r),t},R=function(t,s){var i=s[0],e=s[1],h=s[2],s=s[3],r=0<(r=Math.sqrt(i*i+e*e+h*h))?Math.atan2(r,s)/r:0;return t[0]=i*r,t[1]=e*r,t[2]=h*r,t[3]=.5*Math.log(i*i+e*e+h*h+s*s),t},ee=function(t,s,i){return R(t,s),Uh(t,t,i),P(t,t),t},A=function(t,s,i,e){var h,r,n=s[0],o=s[1],a=s[2],s=s[3],l=i[0],u=i[1],c=i[2],f=n*l+o*u+a*c+s*(i=i[3]);return f<0&&(f=-f,l=-l,u=-u,c=-c,i=-i),f=Mh<1-f?(f=Math.acos(f),h=Math.sin(f),r=Math.sin((1-e)*f)/h,Math.sin(e*f)/h):(r=1-e,e),t[0]=r*n+f*l,t[1]=r*o+f*u,t[2]=r*a+f*c,t[3]=r*s+f*i,t},he=function(t){var s=Dh(),i=Dh(),e=Dh(),h=Math.sqrt(1-s),s=Math.sqrt(s);return t[0]=h*Math.sin(2*Math.PI*i),t[1]=h*Math.cos(2*Math.PI*i),t[2]=s*Math.sin(2*Math.PI*e),t[3]=s*Math.cos(2*Math.PI*e),t},re=function(t,s){var i=s[0],e=s[1],h=s[2],r=i*i+e*e+h*h+(s=s[3])*s;return t[0]=-i*(r=r?1/r:0),t[1]=-e*r,t[2]=-h*r,t[3]=s*r,t},ne=function(t,s){return t[0]=-s[0],t[1]=-s[1],t[2]=-s[2],t[3]=s[3],t},E=function(t,s){var i,e,h,r=s[0]+s[4]+s[8];return 0<r?(h=Math.sqrt(r+1),t[3]=.5*h,t[0]=(s[5]-s[7])*(h=.5/h),t[1]=(s[6]-s[2])*h,t[2]=(s[1]-s[3])*h):(i=(1+(r=s[3*(r=s[4]>s[0]?1:0)+r]<s[8]?2:r))%3,e=(2+r)%3,h=Math.sqrt(s[3*r+r]-s[3*i+i]-s[3*e+e]+1),t[r]=.5*h,t[3]=(s[3*i+e]-s[3*e+i])*(h=.5/h),t[i]=(s[3*i+r]+s[3*r+i])*h,t[e]=(s[3*e+r]+s[3*r+e])*h),t},oe=function(t,s,i,e){var h=4<arguments.length&&void 0!==arguments[4]?arguments[4]:kh,r=Math.PI/360,n=(e*=r,i*=r,Math.sin(s*=r)),o=Math.cos(s),a=Math.sin(i),l=Math.cos(i),u=Math.sin(e),c=Math.cos(e);switch(h){case"xyz":t[0]=n*l*c+o*a*u,t[1]=o*a*c-n*l*u,t[2]=o*l*u+n*a*c,t[3]=o*l*c-n*a*u;break;case"xzy":t[0]=n*l*c-o*a*u,t[1]=o*a*c-n*l*u,t[2]=o*l*u+n*a*c,t[3]=o*l*c+n*a*u;break;case"yxz":t[0]=n*l*c+o*a*u,t[1]=o*a*c-n*l*u,t[2]=o*l*u-n*a*c,t[3]=o*l*c+n*a*u;break;case"yzx":t[0]=n*l*c+o*a*u,t[1]=o*a*c+n*l*u,t[2]=o*l*u-n*a*c,t[3]=o*l*c-n*a*u;break;case"zxy":t[0]=n*l*c-o*a*u,t[1]=o*a*c+n*l*u,t[2]=o*l*u+n*a*c,t[3]=o*l*c-n*a*u;break;case"zyx":t[0]=n*l*c-o*a*u,t[1]=o*a*c+n*l*u,t[2]=o*l*u-n*a*c,t[3]=o*l*c+n*a*u;break;default:throw new Error("Unknown angle order "+h)}return t},ae=function(t){return"quat("+t[0]+", "+t[1]+", "+t[2]+", "+t[3]+")"},le=function(t,s){return Math.abs(T(t,s))>=1-Mh},ue=function(){var t=new vh(8);return vh!=Float32Array&&(t[0]=0,t[1]=0,t[2]=0,t[4]=0,t[5]=0,t[6]=0,t[7]=0),t[3]=1,t},ce=function(t){var s=new vh(8);return s[0]=t[0],s[1]=t[1],s[2]=t[2],s[3]=t[3],s[4]=t[4],s[5]=t[5],s[6]=t[6],s[7]=t[7],s},fe=function(t,s,i,e,h,r,n,o){var a=new vh(8);return a[0]=t,a[1]=s,a[2]=i,a[3]=e,a[4]=h,a[5]=r,a[6]=n,a[7]=o,a},de=function(t,s,i,e,h,r,n){var o=new vh(8),h=(o[0]=t,o[1]=s,o[2]=i,o[3]=e,.5*h),r=.5*r,n=.5*n;return o[4]=h*e+r*i-n*s,o[5]=r*e+n*t-h*i,o[6]=n*e+h*s-r*t,o[7]=-h*t-r*s-n*i,o},F=function(t,s,i){var e=.5*i[0],h=.5*i[1],i=.5*i[2],r=s[0],n=s[1],o=s[2],s=s[3];return t[0]=r,t[1]=n,t[2]=o,t[3]=s,t[4]=e*s+h*o-i*n,t[5]=h*s+i*r-e*o,t[6]=i*s+e*n-h*r,t[7]=-e*r-h*n-i*o,t},pe=function(t,s){return t[0]=0,t[1]=0,t[2]=0,t[3]=1,t[4]=.5*s[0],t[5]=.5*s[1],t[6]=.5*s[2],t[7]=0,t},me=function(t,s){return t[0]=s[0],t[1]=s[1],t[2]=s[2],t[3]=s[3],t[4]=0,t[5]=0,t[6]=0,t[7]=0,t},ge=function(t,s){var i=x(),e=(l(i,s),new vh(3));return a(e,s),F(t,i,e),t},D=function(t,s){return t[0]=s[0],t[1]=s[1],t[2]=s[2],t[3]=s[3],t[4]=s[4],t[5]=s[5],t[6]=s[6],t[7]=s[7],t},ye=function(t){return t[0]=0,t[1]=0,t[2]=0,t[3]=1,t[4]=0,t[5]=0,t[6]=0,t[7]=0,t},Se=function(t,s,i,e,h,r,n,o,a){return t[0]=s,t[1]=i,t[2]=e,t[3]=h,t[4]=r,t[5]=n,t[6]=o,t[7]=a,t},we=function(t,s){return t[0]=s[4],t[1]=s[5],t[2]=s[6],t[3]=s[7],t},be=function(t,s){return t[4]=s[0],t[5]=s[1],t[6]=s[2],t[7]=s[3],t},Me=function(t,s){var i=s[4],e=s[5],h=s[6],r=s[7],n=-s[0],o=-s[1],a=-s[2],s=s[3];return t[0]=2*(i*s+r*n+e*a-h*o),t[1]=2*(e*s+r*o+h*n-i*a),t[2]=2*(h*s+r*a+i*o-e*n),t},ve=function(t,s,i){var e=s[0],h=s[1],r=s[2],n=s[3],o=.5*i[0],a=.5*i[1],i=.5*i[2],l=s[4],u=s[5],c=s[6],s=s[7];return t[0]=e,t[1]=h,t[2]=r,t[3]=n,t[4]=n*o+h*i-r*a+l,t[5]=n*a+r*o-e*i+u,t[6]=n*i+e*a-h*o+c,t[7]=-e*o-h*a-r*i+s,t},Te=function(t,s,i){var e=-s[0],h=-s[1],r=-s[2],n=s[3],o=s[4],a=s[5],l=s[6],u=o*n+(d=s[7])*e+a*r-l*h,c=a*n+d*h+l*e-o*r,f=l*n+d*r+o*h-a*e,d=d*n-o*e-a*h-l*r;return _(t,s,i),e=t[0],t[4]=u*(n=t[3])+d*e+c*(r=t[2])-f*(h=t[1]),t[5]=c*n+d*h+f*e-u*r,t[6]=f*n+d*r+u*h-c*e,t[7]=d*n-u*e-c*h-f*r,t},xe=function(t,s,i){var e=-s[0],h=-s[1],r=-s[2],n=s[3],o=s[4],a=s[5],l=s[6],u=o*n+(d=s[7])*e+a*r-l*h,c=a*n+d*h+l*e-o*r,f=l*n+d*r+o*h-a*e,d=d*n-o*e-a*h-l*r;return I(t,s,i),e=t[0],t[4]=u*(n=t[3])+d*e+c*(r=t[2])-f*(h=t[1]),t[5]=c*n+d*h+f*e-u*r,t[6]=f*n+d*r+u*h-c*e,t[7]=d*n-u*e-c*h-f*r,t},Ge=function(t,s,i){var e=-s[0],h=-s[1],r=-s[2],n=s[3],o=s[4],a=s[5],l=s[6],u=o*n+(d=s[7])*e+a*r-l*h,c=a*n+d*h+l*e-o*r,f=l*n+d*r+o*h-a*e,d=d*n-o*e-a*h-l*r;return C(t,s,i),e=t[0],t[4]=u*(n=t[3])+d*e+c*(r=t[2])-f*(h=t[1]),t[5]=c*n+d*h+f*e-u*r,t[6]=f*n+d*r+u*h-c*e,t[7]=d*n-u*e-c*h-f*r,t},_e=function(t,s,i){var e=i[0],h=i[1],r=i[2],i=i[3],n=s[0],o=s[1],a=s[2],l=s[3];return t[0]=n*i+l*e+o*r-a*h,t[1]=o*i+l*h+a*e-n*r,t[2]=a*i+l*r+n*h-o*e,t[3]=l*i-n*e-o*h-a*r,t[4]=(n=s[4])*i+(l=s[7])*e+(o=s[5])*r-(a=s[6])*h,t[5]=o*i+l*h+a*e-n*r,t[6]=a*i+l*r+n*h-o*e,t[7]=l*i-n*e-o*h-a*r,t},Ie=function(t,s,i){var e=s[0],h=s[1],r=s[2],s=s[3],n=i[0],o=i[1],a=i[2],l=i[3];return t[0]=e*l+s*n+h*a-r*o,t[1]=h*l+s*o+r*n-e*a,t[2]=r*l+s*a+e*o-h*n,t[3]=s*l-e*n-h*o-r*a,t[4]=e*(l=i[7])+s*(n=i[4])+h*(a=i[6])-r*(o=i[5]),t[5]=h*l+s*o+r*n-e*a,t[6]=r*l+s*a+e*o-h*n,t[7]=s*l-e*n-h*o-r*a,t},Ce=function(t,s,i,e){var h,r,n,o,a,l;return Math.abs(e)<Mh?D(t,s):(l=Math.hypot(i[0],i[1],i[2]),e*=.5,h=(n=Math.sin(e))*i[0]/l,r=n*i[1]/l,n=n*i[2]/l,i=Math.cos(e),l=s[0],t[0]=l*i+(e=s[3])*h+(o=s[1])*n-(a=s[2])*r,t[1]=o*i+e*r+a*h-l*n,t[2]=a*i+e*n+l*r-o*h,t[3]=e*i-l*h-o*r-a*n,t[4]=(e=s[4])*i+(l=s[7])*h+(o=s[5])*n-(a=s[6])*r,t[5]=o*i+l*r+a*h-e*n,t[6]=a*i+l*n+e*r-o*h,t[7]=l*i-e*h-o*r-a*n,t)},Pe=function(t,s,i){return t[0]=s[0]+i[0],t[1]=s[1]+i[1],t[2]=s[2]+i[2],t[3]=s[3]+i[3],t[4]=s[4]+i[4],t[5]=s[5]+i[5],t[6]=s[6]+i[6],t[7]=s[7]+i[7],t},Re=function(t,s,i){var e=s[0],h=s[1],r=s[2],n=s[3],o=i[4],a=i[5],l=i[6],u=i[7],c=s[4],f=s[5],d=s[6],s=s[7],p=i[0],m=i[1],g=i[2],i=i[3];return t[0]=e*i+n*p+h*g-r*m,t[1]=h*i+n*m+r*p-e*g,t[2]=r*i+n*g+e*m-h*p,t[3]=n*i-e*p-h*m-r*g,t[4]=e*u+n*o+h*l-r*a+c*i+s*p+f*g-d*m,t[5]=h*u+n*a+r*o-e*l+f*i+s*m+d*p-c*g,t[6]=r*u+n*l+e*a-h*o+d*i+s*g+c*m-f*p,t[7]=n*u-e*o-h*a-r*l+s*i-c*p-f*m-d*g,t},Ae=function(t,s,i){return t[0]=s[0]*i,t[1]=s[1]*i,t[2]=s[2]*i,t[3]=s[3]*i,t[4]=s[4]*i,t[5]=s[5]*i,t[6]=s[6]*i,t[7]=s[7]*i,t},Ee=function(t,s,i,e){var h=1-e;return $h(s,i)<0&&(e=-e),t[0]=s[0]*h+i[0]*e,t[1]=s[1]*h+i[1]*e,t[2]=s[2]*h+i[2]*e,t[3]=s[3]*h+i[3]*e,t[4]=s[4]*h+i[4]*e,t[5]=s[5]*h+i[5]*e,t[6]=s[6]*h+i[6]*e,t[7]=s[7]*h+i[7]*e,t},Fe=function(t,s){var i=Kh(s);return t[0]=-s[0]/i,t[1]=-s[1]/i,t[2]=-s[2]/i,t[3]=s[3]/i,t[4]=-s[4]/i,t[5]=-s[5]/i,t[6]=-s[6]/i,t[7]=s[7]/i,t},De=function(t,s){return t[0]=-s[0],t[1]=-s[1],t[2]=-s[2],t[3]=s[3],t[4]=-s[4],t[5]=-s[5],t[6]=-s[6],t[7]=s[7],t},ke=function(t,s){var i,e,h,r,n,o,a,l,u=Kh(s);return 0<u&&(u=Math.sqrt(u),l=(i=s[0]/u)*(n=s[4])+(e=s[1]/u)*(o=s[5])+(h=s[2]/u)*(a=s[6])+(r=s[3]/u)*(s=s[7]),t[0]=i,t[1]=e,t[2]=h,t[3]=r,t[4]=(n-i*l)/u,t[5]=(o-e*l)/u,t[6]=(a-h*l)/u,t[7]=(s-r*l)/u),t},Oe=function(t){return"quat2("+t[0]+", "+t[1]+", "+t[2]+", "+t[3]+", "+t[4]+", "+t[5]+", "+t[6]+", "+t[7]+")"},Le=function(t,s){return t[0]===s[0]&&t[1]===s[1]&&t[2]===s[2]&&t[3]===s[3]&&t[4]===s[4]&&t[5]===s[5]&&t[6]===s[6]&&t[7]===s[7]},Ne=function(t,s){var i=t[0],e=t[1],h=t[2],r=t[3],n=t[4],o=t[5],a=t[6],t=t[7],l=s[0],u=s[1],c=s[2],f=s[3],d=s[4],p=s[5],m=s[6],s=s[7];return Math.abs(i-l)<=Mh*Math.max(1,Math.abs(i),Math.abs(l))&&Math.abs(e-u)<=Mh*Math.max(1,Math.abs(e),Math.abs(u))&&Math.abs(h-c)<=Mh*Math.max(1,Math.abs(h),Math.abs(c))&&Math.abs(r-f)<=Mh*Math.max(1,Math.abs(r),Math.abs(f))&&Math.abs(n-d)<=Mh*Math.max(1,Math.abs(n),Math.abs(d))&&Math.abs(o-p)<=Mh*Math.max(1,Math.abs(o),Math.abs(p))&&Math.abs(a-m)<=Mh*Math.max(1,Math.abs(a),Math.abs(m))&&Math.abs(t-s)<=Mh*Math.max(1,Math.abs(t),Math.abs(s))},k=function(){var t=new vh(2);return vh!=Float32Array&&(t[0]=0,t[1]=0),t},Be=function(t){var s=new vh(2);return s[0]=t[0],s[1]=t[1],s},We=function(t,s){var i=new vh(2);return i[0]=t,i[1]=s,i},Ve=function(t,s){return t[0]=s[0],t[1]=s[1],t},je=function(t,s,i){return t[0]=s,t[1]=i,t},He=function(t,s,i){return t[0]=s[0]+i[0],t[1]=s[1]+i[1],t},Ue=function(t,s,i){return t[0]=s[0]-i[0],t[1]=s[1]-i[1],t},ze=function(t,s,i){return t[0]=s[0]*i[0],t[1]=s[1]*i[1],t},Je=function(t,s,i){return t[0]=s[0]/i[0],t[1]=s[1]/i[1],t},qe=function(t,s){return t[0]=Math.ceil(s[0]),t[1]=Math.ceil(s[1]),t},Xe=function(t,s){return t[0]=Math.floor(s[0]),t[1]=Math.floor(s[1]),t},Ye=function(t,s,i){return t[0]=Math.min(s[0],i[0]),t[1]=Math.min(s[1],i[1]),t},$e=function(t,s,i){return t[0]=Math.max(s[0],i[0]),t[1]=Math.max(s[1],i[1]),t},Ke=function(t,s){return t[0]=Math.round(s[0]),t[1]=Math.round(s[1]),t},Ze=function(t,s,i){return t[0]=s[0]*i,t[1]=s[1]*i,t},Qe=function(t,s,i,e){return t[0]=s[0]+i[0]*e,t[1]=s[1]+i[1]*e,t},th=function(t,s){var i=s[0]-t[0];return Math.hypot(i,s[1]-t[1])},sh=function(t,s){var i=s[0]-t[0];return i*i+(s=s[1]-t[1])*s},ih=function(t){var s=t[0];return Math.hypot(s,t[1])},eh=function(t){var s=t[0];return s*s+(t=t[1])*t},hh=function(t,s){return t[0]=-s[0],t[1]=-s[1],t},rh=function(t,s){return t[0]=1/s[0],t[1]=1/s[1],t},nh=function(t,s){var i=s[0],e=s[1];return 0<(i=i*i+e*e)&&(i=1/Math.sqrt(i)),t[0]=s[0]*i,t[1]=s[1]*i,t},oh=function(t,s){return t[0]*s[0]+t[1]*s[1]},ah=function(t,s,i){return s=s[0]*i[1]-s[1]*i[0],t[0]=t[1]=0,t[2]=s,t},lh=function(t,s,i,e){var h=s[0],s=s[1];return t[0]=h+e*(i[0]-h),t[1]=s+e*(i[1]-s),t},uh=function(t,s){s=s||1;var i=2*Dh()*Math.PI;return t[0]=Math.cos(i)*s,t[1]=Math.sin(i)*s,t},ch=function(t,s,i){var e=s[0],s=s[1];return t[0]=i[0]*e+i[2]*s,t[1]=i[1]*e+i[3]*s,t},fh=function(t,s,i){var e=s[0],s=s[1];return t[0]=i[0]*e+i[2]*s+i[4],t[1]=i[1]*e+i[3]*s+i[5],t},dh=function(t,s,i){var e=s[0],s=s[1];return t[0]=i[0]*e+i[3]*s+i[6],t[1]=i[1]*e+i[4]*s+i[7],t},ph=function(t,s,i){var e=s[0],s=s[1];return t[0]=i[0]*e+i[4]*s+i[12],t[1]=i[1]*e+i[5]*s+i[13],t},mh=function(t,s,i,e){var h=s[0]-i[0],s=s[1]-i[1],r=Math.sin(e),e=Math.cos(e);return t[0]=h*e-s*r+i[0],t[1]=h*r+s*e+i[1],t},gh=function(t,s){var i=t[0],t=t[1],e=s[0],s=s[1],h=Math.sqrt((i*i+t*t)*(e*e+s*s));return Math.acos(Math.min(Math.max(h&&(i*e+t*s)/h,-1),1))},yh=function(t){return t[0]=0,t[1]=0,t},Sh=function(t){return"vec2("+t[0]+", "+t[1]+")"},wh=function(t,s){return t[0]===s[0]&&t[1]===s[1]},bh=function(t,s){var i=t[0],t=t[1],e=s[0],s=s[1];return Math.abs(i-e)<=Mh*Math.max(1,Math.abs(i),Math.abs(e))&&Math.abs(t-s)<=Mh*Math.max(1,Math.abs(t),Math.abs(s))};h,p,f,a,d,l,m,g,y,S,w,b,T,x,G,_,I,C,P,R,A,E,F,D,k,Mh=1e-6,vh="undefined"!=typeof Float32Array?Float32Array:Array,Dh=Math.random,kh="zyx",Oh=Math.PI/180,Math.hypot||(Math.hypot=function(){for(var t=0,s=arguments.length;s--;)t+=arguments[s]*arguments[s];return Math.sqrt(t)}),Lh={__proto__:null,EPSILON:Mh,get S(){return vh},M:Dh,T:kh,G:O,_:L,equals:N},Nh=Object.freeze({__proto__:null,create:B,clone:W,I:V,identity:j,C:H,set:U,P:z,R:J,A:q,F:X,multiply:t,rotate:Y,scale:$,D:K,O:Z,L:Q,N:tt,B:st,add:it,W:s,V:et,equals:ht,j:rt,H:nt,mul:t,sub:s}),Bh=Object.freeze({__proto__:null,create:ot,clone:at,I:lt,identity:ut,C:ct,set:ft,R:dt,F:pt,multiply:i,rotate:mt,scale:gt,translate:yt,D:St,O:wt,U:bt,L:Mt,N:vt,add:Tt,W:e,j:xt,H:Gt,V:_t,equals:It,mul:i,sub:e}),Wh=Object.freeze({__proto__:null,create:h,J:Ct,clone:Pt,I:Rt,C:At,set:Et,identity:Ft,P:Dt,R:kt,A:Ot,F:Lt,multiply:r,translate:Nt,rotate:Bt,scale:Wt,U:Vt,D:jt,O:Ht,X:Ut,Y:zt,$:Jt,K:qt,L:Xt,N:Yt,add:$t,W:n,j:Kt,H:Zt,V:Qt,equals:ts,mul:r,sub:n}),Th=Object.freeze({__proto__:null,create:ss,clone:is,I:es,C:hs,set:rs,identity:p,P:ns,R:os,A:as,F:ls,multiply:o,translate:us,scale:cs,rotate:fs,Z:ds,tt:ps,it:ms,U:gs,O:ys,D:Ss,et:ws,ht:bs,nt:Ms,ot:f,lt:vs,ut:a,ct:d,gt:l,yt:Ts,St:xs,bt:Gs,Y:_s,Mt:Is,vt:u,perspective:u,Tt:Cs,xt:Ps,Gt:c,ortho:c,_t:Rs,It:As,Ct:Es,L:Fs,N:Ds,add:ks,W:Os,j:Ls,H:Ns,V:Bs,equals:Ws,mul:o,sub:Os}),Yh=Js,Zh=qs,Hh=Xs,Qh=ii,tr=ei,Vh=js,sr=hi,Fh=m(),xh=Object.freeze({__proto__:null,create:m,clone:Vs,length:js,C:g,I:Hs,set:Us,add:zs,W:Js,multiply:qs,Pt:Xs,ceil:Ys,floor:$s,min:Ks,max:Zs,round:Qs,scale:ti,Rt:si,At:ii,Et:ei,Ft:hi,Dt:ri,inverse:ni,normalize:y,kt:S,Ot:w,Lt:oi,Nt:ai,Bt:li,Wt:ui,random:ci,Vt:fi,jt:di,Ht:pi,Z:mi,tt:gi,it:yi,angle:Si,Ut:wi,L:bi,V:Mi,equals:vi,sub:Yh,mul:Zh,div:Hh,zt:Qh,Jt:tr,qt:Vh,Xt:sr,forEach:function(t,s,i,e,h,r){var n,o;for(s=s||3,i=i||0,o=e?Math.min(e*s+i,t.length):t.length,n=i;n<o;n+=s)Fh[0]=t[n],Fh[1]=t[n+1],Fh[2]=t[n+2],h(Fh,Fh,r),t[n]=Fh[0],t[n+1]=Fh[1],t[n+2]=Fh[2];return t}}),Yh=Ci,Zh=Pi,Hh=Ri,Qh=Ni,tr=Bi,sr=M,ir=v,Eh=b(),jh=Object.freeze({__proto__:null,create:b,clone:Ti,C:xi,I:Gi,set:_i,add:Ii,W:Ci,multiply:Pi,Pt:Ri,ceil:Ai,floor:Ei,min:Fi,max:Di,round:ki,scale:Oi,Rt:Li,At:Ni,Et:Bi,length:M,Ft:v,Dt:Wi,inverse:Vi,normalize:ji,kt:T,Ot:Hi,Lt:Ui,random:zi,Vt:Ji,Ht:qi,Ut:Xi,L:Yi,V:$i,equals:Ki,sub:Yh,mul:Zh,div:Hh,zt:Qh,Jt:tr,qt:sr,Xt:ir,forEach:function(t,s,i,e,h,r){var n,o;for(s=s||4,i=i||0,o=e?Math.min(e*s+i,t.length):t.length,n=i;n<o;n+=s)Eh[0]=t[n],Eh[1]=t[n+1],Eh[2]=t[n+2],Eh[3]=t[n+3],h(Eh,Eh,r),t[n]=Eh[0],t[n+1]=Eh[1],t[n+2]=Eh[2],t[n+3]=Eh[3];return t}}),Yh=Ti,Zh=xi,Hh=Gi,Qh=_i,tr=Ii,sr=se,Uh=Oi,zh=T,ir=Ui,er=Jh=M,hr=qh=v,Xh=ji,rr=$i,Ph=m(),Rh=g(1,0,0),Ah=g(0,1,0),nr=function(t,s,i){var e=S(s,i);return e<-.999999?(w(Ph,Rh,s),Vh(Ph)<1e-6&&w(Ph,Ah,s),y(Ph,Ph),G(t,Ph,Math.PI),t):.999999<e?(t[0]=0,t[1]=0,t[2]=0,t[3]=1,t):(w(Ph,s,i),t[0]=Ph[0],t[1]=Ph[1],t[2]=Ph[2],t[3]=1+e,Xh(t,t))},Ih=x(),Ch=x(),or=function(t,s,i,e,h,r){return A(Ih,s,h,r),A(Ch,i,e,r),A(t,Ih,Ch,2*r*(1-r)),t},_h=h(),Yh=Object.freeze({__proto__:null,create:x,identity:Zi,Yt:G,$t:Qi,Kt:te,multiply:se,Z:_,tt:I,it:C,Zt:ie,exp:P,Qt:R,pow:ee,Nt:A,random:he,R:re,ts:ne,es:E,hs:oe,L:ae,clone:Yh,C:Zh,I:Hh,set:Qh,add:tr,mul:sr,scale:Uh,kt:zh,Lt:ir,length:Jh,qt:er,Ft:qh,Xt:hr,normalize:Xh,V:rr,equals:le,ns:nr,os:or,ls:function(t,s,i,e){return _h[0]=i[0],_h[3]=i[1],_h[6]=i[2],_h[1]=e[0],_h[4]=e[1],_h[7]=e[2],_h[2]=-s[0],_h[5]=-s[1],_h[8]=-s[2],Xh(t,E(t,_h))}}),$h=zh,Zh=Kh=qh,Qh=Object.freeze({__proto__:null,create:ue,clone:ce,C:fe,us:de,ot:F,U:pe,D:me,J:ge,I:D,identity:ye,set:Se,ds:Hh,gs:we,ys:Hh,Ss:be,ut:Me,translate:ve,Z:Te,tt:xe,it:Ge,ws:_e,bs:Ie,Ms:Ce,add:Pe,multiply:Re,mul:Re,scale:Ae,kt:$h,Lt:Ee,R:Fe,ts:De,length:Jh,qt:Jh,Ft:Kh,Xt:Zh,normalize:ke,L:Oe,V:Le,equals:Ne}),tr=ih,sr=Ue,ir=ze,er=Je,hr=th,rr=sh,nr=eh,Gh=k(),or=Object.freeze({__proto__:null,create:k,clone:Be,C:We,I:Ve,set:je,add:He,W:Ue,multiply:ze,Pt:Je,ceil:qe,floor:Xe,min:Ye,max:$e,round:Ke,scale:Ze,Rt:Qe,At:th,Et:sh,length:ih,Ft:eh,Dt:hh,inverse:rh,normalize:nh,kt:oh,Ot:ah,Lt:lh,random:uh,vs:ch,Ts:fh,jt:dh,Vt:ph,rotate:mh,angle:gh,Ut:yh,L:Sh,V:wh,equals:bh,qt:tr,sub:sr,mul:ir,div:er,zt:hr,Jt:rr,Xt:nr,forEach:function(t,s,i,e,h,r){var n,o;for(s=s||2,i=i||0,o=e?Math.min(e*s+i,t.length):t.length,n=i;n<o;n+=s)Gh[0]=t[n],Gh[1]=t[n+1],h(Gh,Gh,r),t[n]=Gh[0],t[n+1]=Gh[1];return t}}),globalThis.xs=Lh,globalThis.xs.Gs=Nh,globalThis.xs._s=Bh,globalThis.xs.Is=Wh,globalThis.xs.Cs=Th,globalThis.xs.Ps=Yh,globalThis.xs.Rs=Qh,globalThis.xs.As=or,globalThis.xs.Es=xh,globalThis.xs.Fs=jh}var Gh,_h,Ih,Ch,Ph,Rh,Ah,Eh,Fh,Mh,vh,Dh,kh,Oh,Lh,Nh,Bh,Wh,Th,Vh,xh,jh,Hh,Uh,zh,Jh,qh,Xh,Yh,$h,Kh,Zh,Qh,tr,sr,ir,er,hr,rr,nr,or,D,k,O,L;{let a=function(t,s,i){var e=[0,0],h=t[1][1]-t[0][1],r=t[0][0]-t[1][0],t=h*t[0][0]+r*t[0][1],n=s[1][1]-s[0][1],o=s[0][0]-s[1][0],s=n*s[0][0]+o*s[0][1],a=h*o-n*r;return m(a,0,i=i||0)||(e[0]=(o*t-r*s)/a,e[1]=(h*s-n*t)/a),e},h=function(t,s,i,e){var h,r=s[0]-t[0],s=s[1]-t[1],n=e[0]-i[0];return n*s-(e=e[1]-i[1])*r!=0&&(h=(n*(t[1]-i[1])+e*(i[0]-t[0]))/(e*r-n*s),0<=(t=(r*(i[1]-t[1])+s*(t[0]-i[0]))/(n*s-e*r)))&&t<=1&&0<=h&&h<=1},o=function(t,s,i){return(s[0]-t[0])*(i[1]-t[1])-(i[0]-t[0])*(s[1]-t[1])},T=function(t,s,i){return 0<o(t,s,i)},x=function(t,s,i){return 0<=o(t,s,i)},G=function(t,s,i){return o(t,s,i)<0},_=function(t,s,i){return o(t,s,i)<=0},r=function(t,s,i,e){var h,r,n;return e?(n=k,(r=D)[0]=s[0]-t[0],r[1]=s[1]-t[1],n[0]=i[0]-s[0],n[1]=i[1]-s[1],h=r[0]*n[0]+r[1]*n[1],r=Math.sqrt(r[0]*r[0]+r[1]*r[1]),n=Math.sqrt(n[0]*n[0]+n[1]*n[1]),Math.acos(h/(r*n))<e):0===o(t,s,i)},I=function(t,s){var i=s[0]-t[0];return i*i+(s=s[1]-t[1])*s},C=function(t,s){var i=t.length;return t[s<0?s%i+i:s%i]},n=function(t){t.length=0},P=function(t,s,i,e){for(var h=i;h<e;h++)t.push(s[h])},t=function(t){for(var s=0,i=t,e=1;e<t.length;++e)(i[e][1]<i[s][1]||i[e][1]===i[s][1]&&i[e][0]>i[s][0])&&(s=e);return!T(C(t,s-1),C(t,s),C(t,s+1))&&(l(t),!0)},l=function(t){for(var s=[],i=t.length,e=0;e!==i;e++)s.push(t.pop());for(e=0;e!==i;e++)t[e]=s[e]},R=function(t,s){return G(C(t,s-1),C(t,s),C(t,s+1))},u=function(t,s,i){var e,h=O,r=L;if(x(C(t,s+1),C(t,s),C(t,i))&&_(C(t,s-1),C(t,s),C(t,i)))return!1;for(var n=I(C(t,s),C(t,i)),o=0;o!==t.length;++o)if((o+1)%t.length!==s&&o!==s&&x(C(t,s),C(t,i),C(t,o+1))&&_(C(t,s),C(t,i),C(t,o))&&(h[0]=C(t,s),h[1]=C(t,i),r[0]=C(t,o),r[1]=C(t,o+1),e=a(h,r),I(C(t,s),e)<n))return!1;return!0},A=function(t,s,i){for(var e=0;e!==t.length;++e)if(e!==s&&e!==i&&(e+1)%t.length!==s&&(e+1)%t.length!==i&&h(C(t,s),C(t,i),C(t,e),C(t,e+1)))return!1;return!0},c=function(t,s,i,e){var h=e||[];if(n(h),s<i)for(var r=s;r<=i;r++)h.push(t[r]);else{for(r=0;r<=i;r++)h.push(t[r]);for(r=s;r<t.length;r++)h.push(t[r])}return h},f=function(t){for(var s=[],i=[],e=[],h=Number.MAX_VALUE,r=0;r<t.length;++r)if(R(t,r))for(var n=0;n<t.length;++n)if(u(t,r,n)){for(var i=f(c(t,r,n,e)),o=f(c(t,n,r,e)),a=0;a<o.length;a++)i.push(o[a]);i.length<h&&(h=(s=i).length,s.push([C(t,r),C(t,n)]))}return s},s=function(t){var s=f(t);return 0<s.length?d(t,s):[t]},d=function(t,s){if(0===s.length)return[t];if(s instanceof Array&&s.length&&s[0]instanceof Array&&2===s[0].length&&s[0][0]instanceof Array){for(var i=[t],e=0;e<s.length;e++)for(var h=s[e],r=0;r<i.length;r++){var n=d(i[r],h);if(n){i.splice(r,1),i.push(n[0],n[1]);break}}return i}return e=t.indexOf((h=s)[0]),r=t.indexOf(h[1]),-1!==e&&-1!==r&&[c(t,e,r),c(t,r,e)]},i=function(t){for(var s=t,i=0;i<s.length-1;i++)for(var e=0;e<i-1;e++)if(h(s[i],s[i+1],s[e],s[e+1]))return!1;for(i=1;i<s.length-2;i++)if(h(s[0],s[s.length-1],s[i],s[i+1]))return!1;return!0},E=function(t,s,i,e,h){var r=s[1]-t[1],s=t[0]-s[0],t=r*t[0]+s*t[1],n=e[1]-i[1],e=i[0]-e[0],i=n*i[0]+e*i[1],o=r*e-n*s;return m(o,0,h=h||0)?[0,0]:[(e*t-s*i)/o,(r*i-n*t)/o]},F=function(t,s,i,e,h,r,n){r=r||100,n=n||0,h=h||25,s=void 0!==s?s:[],i=i||[],e=e||[];var o=[0,0],a=[0,0],l=[0,0],u=0,c=0,f=0,d=0,p=0,m=0,g=0,y=[],S=[],w=t,b=t;if(!(b.length<3))if(r<++n)console.warn("quickDecomp: max level ("+r+") reached.");else{for(var M=0;M<t.length;++M)if(R(w,M)){i.push(w[M]);for(var u=c=Number.MAX_VALUE,v=0;v<t.length;++v)T(C(w,M-1),C(w,M),C(w,v))&&_(C(w,M-1),C(w,M),C(w,v-1))&&(l=E(C(w,M-1),C(w,M),C(w,v),C(w,v-1)),G(C(w,M+1),C(w,M),l))&&(f=I(w[M],l))<c&&(c=f,a=l,m=v),T(C(w,M+1),C(w,M),C(w,v+1))&&_(C(w,M+1),C(w,M),C(w,v))&&(l=E(C(w,M+1),C(w,M),C(w,v),C(w,v+1)),T(C(w,M-1),C(w,M),l))&&(f=I(w[M],l))<u&&(u=f,o=l,p=v);if(m===(p+1)%t.length)l[0]=(a[0]+o[0])/2,l[1]=(a[1]+o[1])/2,e.push(l),M<p?(P(y,w,M,p+1),y.push(l),S.push(l),0!==m&&P(S,w,m,w.length),P(S,w,0,M+1)):(0!==M&&P(y,w,M,w.length),P(y,w,0,p+1),y.push(l),S.push(l),P(S,w,m,M+1));else{if(p<m&&(p+=t.length),d=Number.MAX_VALUE,p<m)return s;for(v=m;v<=p;++v)x(C(w,M-1),C(w,M),C(w,v))&&_(C(w,M+1),C(w,M),C(w,v))&&(f=I(C(w,M),C(w,v)))<d&&A(w,M,v)&&(d=f,g=v%t.length);M<g?(P(y,w,M,g+1),0!==g&&P(S,w,g,b.length),P(S,w,0,M+1)):(0!==M&&P(y,w,M,b.length),P(y,w,0,g+1),P(S,w,g,M+1))}return y.length<S.length?(F(y,s,i,e,h,r,n),F(S,s,i,e,h,r,n)):(F(S,s,i,e,h,r,n),F(y,s,i,e,h,r,n)),s}s.push(t)}return s},e=function(t,s){for(var i=0,e=t.length-1;3<t.length&&0<=e;--e)r(C(t,e-1),C(t,e),C(t,e+1),s)&&(t.splice(e%t.length,1),i++);return i},p=function(t,s){for(var i=t.length-1;1<=i;--i)for(var e=t[i],h=i-1;0<=h;--h)g(e,t[h],s)&&t.splice(i,1)},m=function(t,s,i){return i=i||0,Math.abs(t-s)<=i},g=function(t,s,i){return m(t[0],s[0],i)&&m(t[1],s[1],i)};a,h,o,T,x,G,_,r,I,C,n,P,l,R,u,A,c,f,d,E,F,m,g,D=[],k=[],O=[],L=[],self.Ds={ks:s,Os:F,Ls:i,Ns:e,Bs:p,Ws:t}}{let t=!1,s=!1,i="dev",e=Symbol("Construct internal API token"),h=14,r=self.Vs=class{constructor(){throw TypeError("static class can't be instantiated")}static Hs(){if(h<=0)throw new Error("cannot obtain internal API token");return--h,e}static Us(){t=!0}static zs(){return t}static Js(){s=!0}static qs(){return s}static Xs(t){i=t}static Ys(){return i}static $s(){return"final"===i}};r.isDebug=!1,r.Ks=!1,r.hardwareConcurrency=navigator.hardwareConcurrency||2,self.Zs={}}{const s=self.Vs;s.Qs=class{constructor(t){this.ti=t,this.si=new Map,this.ei()}ei(){let t=this.ti,s=(t=t.startsWith("?")||t.startsWith("#")?t.substr(1):t).split("&");for(const i of s)this.hi(i)}hi(t){if(t)if(t.includes("=")){const s=t.indexOf("="),i=decodeURIComponent(t.substring(0,s)),e=decodeURIComponent(t.substring(s+1));this.si.set(i,e)}else this.si.set(t,null)}ri(){for(const t of this.si)console.log("[QueryParser] Parameter '"+t[0]+"' = "+(null===t[1]?"null":"'"+t[1]+"'"))}ni(t){return this.si.has(t)}oi(t){const s=this.si.get(t);return void 0===s?null:s}ai(){history.replaceState("",document.title,location.pathname+location.search)}li(t){this.ti=t,this.si.clear(),this.ei()}},s.ci=new s.Qs(location.search),s.fi=new s.Qs(location.hash),s.ci.ni("perf")&&(s.di=!0),"dev"!==s.ci.oi("mode")&&s.Xs("final")}{let e=function(t){const s=parseFloat(t),i=V.get(s);return i||(13<=s?"11":"NT "+t)};e;const a=self.Vs,W="(unknown)",V=(a.mi={gi:W,yi:W,Si:W,wi:W,bi:NaN,Mi:W,vi:"browser",Ti:!0,xi:!1,Gi:!1,_i:!1,Ii:async()=>{}},new Map([[5,"2000"],[5.1,"XP"],[5.2,"XP"],[6,"Vista"],[6.1,"7"],[6.2,"8"],[6.3,"8.1"],[10,"10"]])),j=navigator.userAgent,H=navigator.userAgentData;if(H&&0<H.brands.length){let s=function(t){let s="",i="",e="",h="";for(const r of t){const n=U.get(r.brand),o=(!s&&n&&(s=n,i=r.version),z.get(r.brand));!e&&o&&(e=o,h=r.version)}s||"Chromium"!==e||(a.mi.Si="Chromium",a.mi.wi=h),a.mi.Si=s||W,a.mi.wi=i||W,a.mi.Mi=e||W};s,a.mi.gi=H.platform,a.mi.xi=H.mobile,a.mi.Ti=!a.mi.xi;const U=new Map([["Google Chrome","Chrome"],["Microsoft Edge","Edge"],["Opera","Opera"],["Opera GX","Opera GX"],["Mozilla Firefox","Firefox"],["Apple Safari","Safari"],["NW.js","NW.js"]]),z=new Map([["Chromium","Chromium"],["Gecko","Gecko"],["WebKit","WebKit"]]);s(H.brands);let i=!1;a.mi.Ii=async()=>{if(!i)try{const t=await navigator.userAgentData.getHighEntropyValues(["platformVersion","fullVersionList"]);s(t.fullVersionList),"Windows"===a.mi.gi?a.mi.yi=e(t.platformVersion):a.mi.yi=t.platformVersion,i=!0}catch(t){console.warn("Failed to get detailed user agent information: ",t)}}}else{let t=function(t,s){const i=Array.isArray(t)?t:[t];for(const e of i){const h=e.exec(j);if(h){s(h);break}}};t(/windows\s+nt\s+([\d\.]+)/i,t=>{a.mi.gi="Windows";const s=t[1];a.mi.yi=e(s)}),t(/mac\s+os\s+x\s+([\d\._]+)/i,t=>{a.mi.gi="macOS",a.mi.yi=t[1].replace(/_/g,".")}),t(/CrOS/,()=>{a.mi.gi="Chrome OS"}),t(/linux|openbsd|freebsd|netbsd/i,()=>{a.mi.gi="Linux"}),t(/android/i,()=>{a.mi.gi="Android"}),t(/android\s+([\d\.]+)/i,t=>{a.mi.gi="Android",a.mi.yi=t[1]}),a.mi.gi===W&&(t(/(iphone|ipod|ipad)/i,t=>{a.mi.gi="iOS"}),t([/iphone\s+os\s+([\d\._]+)/i,/ipad[^)]*os\s+([\d\._]+)/i],t=>{a.mi.gi="iOS",a.mi.yi=t[1].replace(/_/g,".")}));const J=/chrome\//i.test(j),q=/chromium\//i.test(j),X=/edg\//i.test(j),Y=/OPR\//.test(j),$=/nwjs/i.test(j),K=/safari\//i.test(j),Z=/webkit/i.test(j),Q=(X||Y||t(/chrome\/([\d\.]+)/i,t=>{a.mi.Si="Chrome",a.mi.wi=t[1],a.mi.Mi="Chromium"}),t(/edg\/([\d\.]+)/i,t=>{a.mi.Si="Edge",a.mi.wi=t[1],a.mi.Mi="Chromium"}),t(/OPR\/([\d\.]+)/,t=>{a.mi.Si="Opera",a.mi.wi=t[1],a.mi.Mi="Chromium"}),t(/chromium\/([\d\.]+)/i,t=>{a.mi.Si="Chromium",a.mi.wi=t[1],a.mi.Mi="Chromium"}),t(/nwjs\/[0-9.]+/i,t=>{a.mi.Si="NW.js",a.mi.wi=t[1],a.mi.Mi="Chromium",a.mi.vi="nwjs"}),t(/firefox\/([\d\.]+)/i,t=>{a.mi.Si="Firefox",a.mi.wi=t[1],a.mi.Mi="Gecko"}),!K||J||q||X||Y||$||(a.mi.Si="Safari",a.mi.Mi="WebKit",t(/version\/([\d\.]+)/i,t=>{a.mi.wi=t[1]}),t(/crios\/([\d\.]+)/i,t=>{a.mi.Si="Chrome for iOS",a.mi.wi=t[1]}),t(/fxios\/([\d\.]+)/i,t=>{a.mi.Si="Firefox for iOS",a.mi.wi=t[1]}),t(/edgios\/([\d\.]+)/i,t=>{a.mi.Si="Edge for iOS",a.mi.wi=t[1]})),a.mi.Mi===W&&Z&&(a.mi.Mi="WebKit"),"Android"===a.mi.gi&&"Safari"===a.mi.Si&&(a.mi.Si="Stock"),new Set(["Windows","macOS","Linux","Chrome OS"])),tt=Q.has(a.mi.gi)||"nwjs"===a.mi.vi;a.mi.Ti=tt,a.mi.xi=!tt}"Chrome"===a.mi.Si&&"browser"===a.mi.vi&&/wv\)/.test(j)&&(a.mi.vi="webview"),"nwjs"!==a.mi.vi&&"undefined"!=typeof window&&(window.matchMedia&&window.matchMedia("(display-mode: standalone)").matches||navigator.standalone)&&(a.mi.vi="webapp"),a.mi.bi=parseFloat(a.mi.wi);const i="macOS"===a.mi.gi&&navigator.maxTouchPoints&&2<navigator.maxTouchPoints;i&&(a.mi.gi="iOS",a.mi.yi=a.mi.wi,a.mi.Ti=!1,a.mi.xi=!0,a.mi._i=!0),a.mi.Gi="macOS"===a.mi.gi||"iOS"===a.mi.gi}{let n=function(i){return new Promise((t,s)=>{i.onsuccess=()=>t(i.result),i.onerror=()=>s(i.error)})},o=function(i){return new Promise((t,s)=>{i.oncomplete=()=>t(),i.onerror=()=>s(i.error),i.onabort=()=>s(i.error)})},t=function(t,s){return N(t,s)},s=function(t,s){return N(t,s,!0)},a=function(s){e(s);let t=et.get(s);return t instanceof Promise||(t=(async i=>{e(i);const t=indexedDB.open(i,st);return t.addEventListener("upgradeneeded",t=>{try{const s=t.target.result;s.createObjectStore(it)}catch(t){console.error("Failed to create objectstore for database "+i,t)}}),n(t)})(s),et.set(s,t),t.catch(t=>et.delete(s))),t},e=function(t){if("string"!=typeof t)throw new TypeError("expected string")},r=function(t,h){const s=t.objectStore(it).openCursor();return new Promise(i=>{const e=[];s.onsuccess=t=>{const s=t.target.result;if(s){switch(h){case"entries":e.push([s.key,s.value]);break;case"keys":e.push(s.key);break;case"values":e.push(s.value)}s.continue()}else i(e)}})};n,o,t,s,a,e,r;const st=2,it="keyvaluepairs",et=new Map,ht="undefined"!=typeof IDBObjectStore&&"function"==typeof IDBObjectStore.prototype.getAll,rt="undefined"!=typeof IDBObjectStore&&"function"==typeof IDBObjectStore.prototype.getAllKeys;async function N(s,i,e=!1,h=!0){const t=await a(s);try{const r=t.transaction([it],e?"readwrite":"readonly");return i(r)}catch(t){if(h&&"InvalidStateError"===t.name)return et.delete(s),N(s,i,e,!1);throw t}}class nt{constructor(t){e(t),this.name=t}async ready(){await a(this.name)}set(h,r){return e(h),s(this.name,async t=>{const s=t.objectStore(it).put(r,h),i=n(s),e=o(t);await Promise.all([e,i])})}get(r){return e(r),t(this.name,async t=>{const s=t.objectStore(it).get(r),i=n(s),e=o(t),[,h]=await Promise.all([e,i]);return h})}delete(h){return e(h),s(this.name,async t=>{const s=t.objectStore(it).delete(h),i=n(s),e=o(t);await Promise.all([e,i])})}clear(){return s(this.name,async t=>{const s=t.objectStore(it).clear(),i=n(s),e=o(t);await Promise.all([e,i])})}keys(){return t(this.name,async t=>{let s;if(rt){const h=t.objectStore(it).getAllKeys();s=n(h)}else s=r(t,"keys");const i=o(t),[,e]=await Promise.all([i,s]);return e})}values(){return t(this.name,async t=>{let s;if(ht){const h=t.objectStore(it).getAll();s=n(h)}else s=r(t,"values");const i=o(t),[,e]=await Promise.all([i,s]);return e})}entries(){return t(this.name,async t=>{const s=r(t,"entries"),i=o(t),[,e]=await Promise.all([i,s]);return e})}}self.Ci=nt}{let i=function(t){throw new Error(`"${t}" is not implemented`)},e=function(t){if("function"==typeof t)throw new Error("localforage callback API is not implemented; please use the promise API instead")},h=function(e){return"object"==typeof e?new Promise(s=>{const{port1:t,port2:i}=new MessageChannel;i.onmessage=t=>s(t.data),t.postMessage(e)}):Promise.resolve(e)};i,e,h;const ot=self.Ci,at=[/no available storage method found/i,/an attempt was made to break through the security policy of the user agent/i,/the user denied permission to access the database/i,/a mutation operation was attempted on a database that did not allow mutations/i,/idbfactory\.open\(\) called in an invalid security context/i];new WeakMap;class lt{constructor(t){this.Pi=t,this.Ri=!this.Pi,this.Ri||"undefined"!=typeof indexedDB||(this.Ri=!0,console.warn("Unable to use local storage because IndexedDB API is not available")),this.Ai=new Map}Ei(t){if(!this.Ri)for(const s of at)if(t&&s.test(t.message)){console.error("Unable to use local storage, reverting to in-memory store: ",t,t.message),this.Ri=!0;break}}async Fi(t){const s=this.Ai.get(t),i=await h(s);return void 0===i?null:i}async Di(t,s){s=await h(s),this.Ai.set(t,s)}ki(t){this.Ai.delete(t)}Oi(){this.Ai.clear()}Li(){return Array.from(this.Ai.keys())}Ni(){return this.Ri}Bi(){return this.Ai}Wi(t){this.Ai=t}async getItem(s,t){if(e(t),this.Ri)return this.Fi(s);let i;try{i=await this.Pi.get(s)}catch(t){return this.Ei(t),this.Ri?this.Fi(s):(console.error(`Error reading '${s}' from storage, returning null: `,t),null)}return void 0===i?null:i}async setItem(s,i,t){if(e(t),void 0===i&&(i=null),this.Ri)await this.Di(s,i);else try{await this.Pi.set(s,i)}catch(t){if(this.Ei(t),!this.Ri)throw t;await this.Di(s,i)}}async removeItem(s,t){if(e(t),this.Ri)this.ki(s);else try{await this.Pi.delete(s)}catch(t){this.Ei(t),this.Ri?this.ki(s):console.error(`Error removing '${s}' from storage: `,t)}}async clear(t){if(e(t),this.Ri)this.Oi();else try{await this.Pi.clear()}catch(t){this.Ei(t),this.Ri?this.Oi():console.error("Error clearing storage: ",t)}}async keys(t){if(e(t),this.Ri)return this.Li();let s=[];try{s=await this.Pi.keys()}catch(t){if(this.Ei(t),this.Ri)return this.Li();console.error("Error getting storage keys: ",t)}return s}ready(t){return e(t),this.Ri?Promise.resolve(!0):this.Pi.ready()}Vi(t){if(t.forceInMemoryFallback)return new lt(null);{const s=t.name;if("string"!=typeof s)throw new TypeError("invalid store name");const i=new ot(s);return new lt(i)}}length(t){i("localforage.length()")}key(t,s){i("localforage.key()")}iterate(t,s){i("localforage.iterate()")}ji(t){i("localforage.setDriver()")}config(t){i("localforage.config()")}Hi(t){i("localforage.defineDriver()")}Ui(){i("localforage.driver()")}supports(t){i("localforage.supports()")}dropInstance(){i("localforage.dropInstance()")}}self.localforage=new lt(new ot("localforage"))}{const e=self.Vs;if(e.Ji={},e.Ji.Xi=(()=>{try{if("undefined"==typeof document)return!1;const t=document.createElement("div");if(void 0===t.animate)return!1;const s=t.animate([{opacity:"0"},{opacity:"1"}],1e3);return void 0!==s.reverse}catch(t){return!1}})(),e.Ji.Yi="undefined"!=typeof HTMLDialogElement,e.Ji.$i=!!self.requestIdleCallback,e.Ji.ImageBitmap=!!self.createImageBitmap,e.Ji.ImageBitmapOptions=!1,e.Ji.Ki=!1,e.Ji.ImageBitmap){try{self.createImageBitmap(new ImageData(32,32),{premultiplyAlpha:"none"}).then(()=>{e.Ji.ImageBitmapOptions=!0}).catch(()=>{e.Ji.ImageBitmapOptions=!1})}catch(t){e.Ji.ImageBitmapOptions=!1}try{self.createImageBitmap(new ImageData(32,32),{resizeWidth:10,resizeHeight:10}).then(t=>{e.Ji.Ki=10===t.width&&10===t.height}).catch(()=>{e.Ji.Ki=!1})}catch(t){e.Ji.Ki=!1}}if(e.Ji.Zi=!(!navigator.clipboard||!navigator.clipboard.readText),e.Ji.Qi=!(!navigator.permissions||!navigator.permissions.query),e.Ji.te=!1,e.Ji.Qi){const ut={name:"clipboard-read"};navigator.permissions.query(ut).then(()=>{e.Ji.te=!0}).catch(()=>{e.Ji.te=!1})}e.Ji.ie=!!(navigator.permissions&&navigator.clipboard&&self.ClipboardItem),e.Ji.he="undefined"!=typeof Proxy,e.Ji.ne=(()=>{if("undefined"==typeof document)return!1;const t=document.createElement("a");return void 0!==t.download})(),e.Ji.oe="function"==typeof fetch,e.Ji.ae=!!(self.isSecureContext&&"Opera"!==e.mi.Si&&navigator.storage&&navigator.storage.persist),e.Ji.le=!!(self.isSecureContext&&navigator.storage&&navigator.storage.estimate),e.Ji.ue=(()=>{if("undefined"==typeof document)return!1;if("iOS"===e.mi.gi)return!1;const t=document.documentElement;return!!(t.requestFullscreen||t.msRequestFullscreen||t.mozRequestFullScreen||t.webkitRequestFullscreen)})(),e.Ji.ImageDecoder=void 0!==self.ImageDecoder,e.Ji.fe=!!self.VideoEncoder,e.Ji.de=!!self.showOpenFilePicker,e.Ji.pe=!!self.queryLocalFonts,e.Ji.UserActivation=!!navigator.userActivation,e.Ji.me=!1,(async()=>{let s;"undefined"==typeof document?s=new OffscreenCanvas(32,32):((s=document.createElement("canvas")).width=32,s.height=32);const t=s.getContext("2d");t.fillStyle="blue",t.fillRect(0,0,32,32);let i=null;try{s.convertToBlob?i=await s.convertToBlob({type:"image/webp",quality:1}):s.toBlob&&(i=await new Promise(t=>s.toBlob(t,"image/webp",1))),e.Ji.me=i&&"image/webp"===i.type}catch(t){e.Ji.me=!1}})()}{let e=function(t,i){return t.reduce((t,s)=>(0<i&&Array.isArray(s)?Array.prototype.push.apply(t,e(s,i-1)):t.push(s),t),[])};e;const ct=self.Vs;if(!String.prototype.trimStart){const ft=/^[\x09\x0A\x0B\x0C\x0D\x20\xA0\u1680\u180E\u2000\u2001\u2002\u2003\u2004\u2005\u2006\u2007\u2008\u2009\u200A\u202F\u205F\u3000\u2028\u2029\uFEFF]*/;String.prototype.trimStart=function(){return this.replace(ft,"")}}if(!String.prototype.trimEnd){const dt=/[\x09\x0A\x0B\x0C\x0D\x20\xA0\u1680\u180E\u2000\u2001\u2002\u2003\u2004\u2005\u2006\u2007\u2008\u2009\u200A\u202F\u205F\u3000\u2028\u2029\uFEFF]*$/;String.prototype.trimEnd=function(){return this.replace(dt,"")}}String.prototype.replaceAll||(String.prototype.replaceAll=function(t,s){return this.replace(new RegExp(ct.ge(t),"g"),s)}),Array.prototype.values||(Array.prototype.values=function*(){for(const t of this)yield t}),Array.prototype.flat||(Array.prototype.flat=function(t=1){return e(this,t)}),Array.prototype.at||(Array.prototype.at=function(t){if((t=Math.trunc(t)||0)<0&&(t+=this.length),!(t<0||t>=this.length))return this[t]}),String.prototype.at||(String.prototype.at=function(t){if((t=Math.trunc(t)||0)<0&&(t+=this.length),!(t<0||t>=this.length))return this[t]}),RegExp.escape||(RegExp.escape=function(t){return String(t).replace(/[\\^$*+?.()|[\]{}]/g,"\\$&")}),Set.prototype.isSubsetOf||(Set.prototype.isSubsetOf=function(t){if(!(t instanceof Set))throw new TypeError("argument must be a Set");for(const s of this)if(!t.has(s))return!1;return!0}),navigator.storage&&!navigator.storage.estimate&&navigator.webkitTemporaryStorage&&navigator.webkitTemporaryStorage.queryUsageAndQuota&&(navigator.storage.estimate=function(){return new Promise((i,t)=>navigator.webkitTemporaryStorage.queryUsageAndQuota((t,s)=>i({usage:t,quota:s}),t))}),void 0===self.isSecureContext&&(self.isSecureContext="https:"===location.protocol),void 0===self.globalThis&&(self.globalThis=self)}{let i=function(t){let s=pt.ye(),i="Assertion failure: "+t+"\n\nStack trace:\n"+s;console.error(i)};i;const pt=self.Vs;self.assert=function(t,s){t||i(s)}}{const h=self.Vs,mt=self.Zs,gt=(h.Se=function(t){return"number"==typeof t},h.we=function(t){return h.Se(t)&&isFinite(t)},h.Me=function(t){if(!h.Se(t))throw new TypeError("expected number")},h.ve=function(t){h.Te(t)},h.xe=function(t,s,i){if(!h.Se(t)||isNaN(t)||t<s||i<t)throw new RangeError("number outside of range")},h.Ge=function(...s){for(let t of s);},h._e=function(t){if(!h.we(t))throw new TypeError("expected finite number")},h.Ie=function(t){h.Te(t)},h.Ce=function(...s){for(let t of s);},h.Pe=function(t){return"string"==typeof t},h.Re=function(t){if(!h.Pe(t))throw new TypeError("expected string")},h.Ae=function(t){h.Te(t)},h.Ee=function(...s){for(let t of s);},h.Fe=function(t){if("object"!=typeof t||null===t)return!1;let s=Object.getPrototypeOf(t);return s?s.constructor===Object:null===s},h.De=function(t){if(!h.Fe(t))throw new TypeError("expected simple object")},h.ke=function(t){if(!h.Te(t)&&!h.Fe(t))throw new TypeError("expected simple object")},h.Oe=function(t){return"object"==typeof t&&null!==t&&!Array.isArray(t)},h.Le=function(t){if(!h.Oe(t))throw new TypeError("expected object")},h.Ne=function(t){h.Te(t)},h.Be=function(...s){for(let t of s);},h.We=function(t){return h.Ve(t,Blob)&&"string"==typeof t.name},h.je=function(t){if(!h.We(t))throw new TypeError("expected file")},h.He=function(t){h.Te(t)},h.Ue=function(t){return Array.isArray(t)},h.Je=function(t){if(!h.Ue(t))throw new TypeError("expected array")},h.qe=function(t){h.Te(t)},h.Xe=function(...s){for(let t of s);},h.Ye=function(t){return!(!h.Ue(t)||t.length&&!h.Ue(t[0]))},h.$e=function(s){if(!h.Ye(s))throw new TypeError("expected 2d array");for(let t of s)if(!h.Ue(t))throw new TypeError("expected 2d array")},h.Ke=function(t){h.Te(t)},h.Ze=function(t){return"function"==typeof t},h.Qe=function(t,s){if(!h.Ze(t))throw new TypeError("expected function");if(!h.Te(s)&&t!==s)throw new TypeError("expected same function reference")},h.ih=function(t){h.Te(t)},h.eh=function(...s){for(let t of s);},h.hh=function(s,...i){if(!h.Ze(s))throw new TypeError("expected function");if(!i.length)throw new Error("missing comparison functions");for(let t of i)if(!h.Te(t)&&s===t)return;throw new TypeError("expected same function reference")},h.rh=function(...s){if(!h.Te(s))for(let t of s);},h.nh=function(t,s){return t instanceof s},h.oh=function(s,...i){for(let t of i)if(h.nh(s,t))return!0;return!1},h.ah=function(t,s){if(!h.nh(t,s))throw new TypeError("unexpected type")},h.uh=function(t,s){h.Te(t)},h.fh=function(t,...s){for(let t of s);},h.ph=function(t,...s){if(!h.oh(t,...s))throw new TypeError("unexpected type")},h.mh=function(t,...s){if(!h.Te(t)&&!h.oh(t,...s))throw new TypeError("unexpected type")},h.gh=function(s,i){for(let t of s)if(!h.nh(t,i))return!1;return!0},h.yh=function(s){for(let t of s)if(!h.we(t))return!1;return!0},h.Sh=function(s,t){for(let t of s);},h.wh=function(s,t){if(!h.Te(s))for(let t of s);},h.bh=function(s,t){if(!h.Te(s))for(let t of s);},h.Mh=function(s){for(let t of s);},h.Th=function(s){if(!h.Te(s))for(let t of s);},h.xh=function(t,s){return!(h.Te(t)||!h.Pe(t.nodeName))&&(!s||h.Gh(t.nodeName,s))},h._h=function(t,s){if(h.Te(t)||!h.Pe(t.nodeName))throw new TypeError("expected DOM node");if(s&&!h.Gh(t.nodeName,s))throw new TypeError(`expected DOM '${s}' node`)},h.Ih=function(t,s){h.Te(t)},h.Ch=function(t,s){return!(h.Te(t)||!h.Pe(t.tagName))&&(!s||h.Gh(t.tagName,s))},h.Ph=function(t,s){if(h.Te(t)||!h.Pe(t.tagName))throw new TypeError("expected HTML element");if(s&&!h.Gh(t.tagName,s))throw new TypeError(`expected HTML '${s}' element`)},h.Rh=function(t,s){h.Te(t)},h.Ah=function(t){return h.Ch(t,"img")||h.Ch(t,"canvas")||h.Ch(t,"video")||"undefined"!=typeof OffscreenCanvas&&t instanceof OffscreenCanvas||"undefined"!=typeof ImageBitmap&&t instanceof ImageBitmap},h.Eh=function(t){if(!h.Ah(t))throw new TypeError("expected drawable")},h.Fh=function(t){h.Te(t)},h.Dh=function(t){return t instanceof ImageData||h.Ah(t)},h.kh=function(t){if(!h.Dh(t))throw new TypeError("expected drawable or image data")},h.Oh=function(t){if(!h.Te(t)&&!h.Dh(t))throw new TypeError("expected drawable or image data")},h.Lh=function(t){return"string"==typeof t||h.HtmlString&&t instanceof h.HtmlString||t instanceof h.Nh},h.Bh=function(t){if(!h.Lh(t))throw new TypeError("expected string-like")},h.Wh=function(t){h.Te(t)},h.Vh=function(...s){for(let t of s);},h.jh=function(){throw new Error("must be overridden")},h.Hh=function(){throw new Error("not yet implemented")},h.Uh=function(t){return t.constructor===function*(){}.constructor},h.zh=function(t){if(!h.Uh(t))throw new Error("expected generator function")},h.Jh=function(t){return"function"===t[Symbol.iterator]},h.qh=function(t){if(!h.Jh(t))throw new Error("expected iterable")},h.Xh=function(t){return!h.Te(t)},h.Te=function(t){return null==t},h.Yh=function(s){let i=s[0].constructor;for(let t of s)if(t.constructor!==i)return!1;return i},h.$h=function(s,i){for(let t of s)if(!(t instanceof i))return!1;return!0},Object.getPrototypeOf(Uint8Array));h.Kh=function(t){return h.nh(t,gt)},h.Zh=function(t){},h.Qh=function(t){h.ir(t,gt)},h.er=function(t,...s){if(!h.hr(t,...s))throw new TypeError("unexpected type")},h.hr=function(t,...s){for(const i of s)if(h.Ve(t,i))return!0;return!1},h.ir=function(t,s){if(!h.Ve(t,s))throw new TypeError("unexpected type")},h.Ve=function(t,s){for(;t=Object.getPrototypeOf(t);)if(t.constructor.name===s.name)return!0;return!1},mt.Me=h.Me,mt.ve=h.ve,mt._e=h._e,mt.Ie=h.Ie,mt.Re=h.Re,mt.Ae=h.Ae,mt.Le=h.Le,mt.Ne=h.Ne,mt.Je=h.Je,mt.qe=h.qe,mt.Qe=h.Qe,mt.ih=h.ih,mt.ah=h.ah,mt.uh=h.uh,mt.Te=h.Te}{let e=function(t,s){let i=p.getType(t),e=p.getType(s);return"null"===i||"null"===e||"undefined"!==i&&"undefined"!==e&&i===e},h=function(t){console.warn("[Defence] "+t+" @",p.ye())},i=function(){if(f=-1,0<a.size||0<l.size){let t=new Set([...a.keys()].map(t=>p.rr(t))),s=[...t].join(",");console.warn("An object derived from DefendedBase was not protected with debugDefend(). This will disable some checks. See the coding guidelines! Possible affected class names: "+s),a.clear(),l.clear()}},r=function(s){let i=new Set;for(let t in s)i.add(t);return i},n=function(t,s){let i=r(s),e=d.get(t);if(e){let s=[];for(let t of e.values())i.has(t)?i.delete(t):s.push(t);p.nr(s,[...i]),s.length&&console.warn(`[Defence] '${p.rr(t)}' constructor creates inconsistent properties: `+s.join(", "))}else d.set(t,i)};e,h,i,r,n;const p=self.Vs,yt=new Map;p.lr=function(t,s){console.log("%c"+t,"font-weight: bold; color:"+s)},p.ur=function(t,...s){yt.has(t)||yt.set(t,-1),-1===yt.get(t)&&yt.set(t,requestAnimationFrame(()=>{console.log("%c"+t,"font-weight: bold",...s),yt.set(t,-1)}))};let o,a=(p.cr=function(t){performance.mark(t),(o=o||new Map).has(t)||o.set(t,{current:0,total:0,dr:0,mr:1,toString:function(){return`${t} :: current => ${this.current.toPrecision(3)} :: average => ${this.dr.toPrecision(3)} :: calls => `+this.mr}})},p.Sr=function(t){performance.measure("measure-"+t,t);const s=performance.getEntriesByName("measure-"+t)[0],i=o.get(t);i.current=s.duration,i.total+=i.current,i.dr=i.total/i.mr,console.log(i.toString()),i.mr++,performance.clearMarks(t),performance.clearMeasures("measure-"+t)},p.ye=function(){return(new Error).stack},p.wr=function(){},p.cast=function(t,s){return t&&t instanceof s?t:null},p.rr=function(t){return void 0===t?"undefined":null===t?"null":"boolean"==typeof t?"<boolean>":p.Se(t)?"<number>":p.Pe(t)?"<string>":p.Ue(t)?"<array>":"symbol"==typeof t?"<"+t.toString()+">":p.Ze(t)?t.name&&"Function"!==t.name?t.name:"<anonymous function>":"object"==typeof t?t.constructor&&t.constructor.name&&"Object"!==t.constructor.name?t.constructor.name:"<anonymous object>":"<unknown>"},p.getType=function(t){return null===t?"null":Array.isArray(t)?"array":typeof t},p.range=function*(s,i){if(!isFinite(Math.abs(s-i)))throw new Error("Invalid parameters");if(i<s)for(let t=s-1;t>=i;t--)yield t;else for(let t=s;t<i;t++)yield t},new Map),l=new Map,u=new WeakMap,c=new WeakMap;p.br={};const St=new Set(["then","splice"]);p.br.get=function(t,s){return s in t||"symbol"==typeof s||St.has(s)||h(`Accessed missing property '${s}' from defended object '${p.rr(t)}', returning undefined`),c.has(t)&&"symbol"!=typeof s&&!St.has(s)&&h(`Accessed property '${s}' on a released object '${p.rr(t)}'
Object was originally released at: ${c.get(t)})
Call stack at access: `),t[s]},p.br.set=function(t,s,i){return s in t||a.has(t)||h(`Set non-existent property '${s}' to '${i}' on defended object '${p.rr(t)}'`),e(t[s],i)||a.has(t)||h(`Set '${p.getType(t[s])}' property '${s}' to type '${p.getType(i)}' on defended object '${p.rr(t)}'`),c.has(t)&&h(`Set property '${s}' on a released object '${p.rr(t)}'
Object was originally released at: ${c.get(t)})
Call stack at access: `),t[s]=i,!0},p.br.deleteProperty=function(t,s){throw new ReferenceError(`Cannot delete property '${s}' from defended object '${p.rr(t)}'`)},p.br.defineProperty=function(t,s,i){throw new ReferenceError(`Cannot define property '${s}' on defended object '${p.rr(t)}'`)},p.br.enumerate=function(t){throw new ReferenceError(`Cannot enumerate defended object '${p.rr(t)}'`)};let f=-1,d=(p.Mr=class{constructor(){if(p.Ks&&p.Ji.he){let t=Object.create(new.target.prototype),s=new Proxy(t,p.br);return a.set(t,s),l.set(s,t),u.set(s,t),-1===f&&(f=requestAnimationFrame(i)),s}}},p.vr=function(s){if(p.Ks&&p.Ji.he&&s instanceof p.Mr){if(l.has(s)){let t=l.get(s);l.delete(s),a.delete(t)}return s}return p.isDebug?Object.seal(s):s},p.Tr=function(t,...s){let i;try{i=new t(...s)}catch(t){throw l.clear(),a.clear(),t}return p.Ks&&n(t,i),p.vr(i)},p.Gr=function(t){let s=u.get(t);s&&c.set(s,p.ye())},p._r=function(t){let s=u.get(t);return!!s&&!!c.get(s)},new Map);p.Ir=class{constructor(t){this.Cr="",t&&this.start(t)}start(t){p.di&&(this.Cr=t,performance.mark(this.Cr+"-Start"))}end(){p.di&&(performance.mark(this.Cr+"-End"),performance.measure(this.Cr,this.Cr+"-Start",this.Cr+"-End"))}next(t){p.di&&(this.end(),this.Cr=t,performance.mark(this.Cr+"-Start"))}}}{let i=function(t){return 0===t&&1/t<0};i;const y=self.Vs,wt=2*Math.PI,bt=Math.PI/180,Mt=180/Math.PI,vt=(y.wrap=function(t,s,i){t=Math.floor(t),s=Math.floor(s);const e=(i=Math.floor(i))-s;if(0==e)return i;if(t<s){const h=i-(s-t)%e;return h===i?0:h}return s+(t-s)%e},y.Pr=function(t,s,i,e,h){const r=i-s;if(0==r&&0===e)return t;const n=h-e;return(t-s)*n/r+e},y.normalize=function(t,s,i){return s-i==0?1:(t-s)/(i-s)},y.Rr=function(t,s,i){return t<s?s:i<t?i:t},y.Ar=function(t){return(t%=wt)<0&&(t+=wt),t},y.Er=function(t){return t*bt},y.Fr=function(t){return t*Mt},y.Dr=function(t,s){return Math.sqrt(t*t+s*s)},y.kr=function(t,s,i){return Math.sqrt(t*t+s*s+i*i)},y.Or=function(t,s,i,e){return y.Dr(i-t,e-s)},y.Lr=function(t,s,i,e){const h=i-t,r=e-s;return h*h+r*r},y.Nr=function(t,s,i,e){return Math.atan2(e-s,i-t)},y.Br=function(t,s){if(t===s)return 0;let i=Math.sin(t),e=Math.cos(t),h=Math.sin(s),r=Math.cos(s),n=i*h+e*r;return 1<=n?0:n<=-1?Math.PI:Math.acos(n)},y.Wr=function(t,s,i){let e=Math.sin(t),h=Math.cos(t),r=Math.sin(s),n=Math.cos(s);return Math.acos(e*r+h*n)>i?0<h*r-e*n?y.Ar(t+i):y.Ar(t-i):y.Ar(s)},y.Vr=function(t,s){let i=Math.sin(t),e=Math.cos(t),h=Math.sin(s),r=Math.cos(s);return e*h-i*r<=0},y.jr=function(t,s,i,e=0){let h=y.Br(t,s),r=wt*e;return y.Vr(s,t)?y.Ar(t+(h+r)*i):y.Ar(t-(h+r)*i)},y.Hr=function(t,s,i,e=0){const h=y.Br(t,s),r=wt*e;return y.Vr(s,t)?y.Ar(t+(h+r)*i):y.Ar(t+(wt-h+r)*i)},y.Ur=function(t,s,i,e=0){const h=y.Br(t,s),r=wt*e;return y.Vr(s,t)?y.Ar(t-(-wt+h-r)*i):y.Ar(t-(h+r)*i)},y.zr=function(t,s){const i=y.Br(t,s);return y.Vr(t,s)?y.Ar(s-i):y.Ar(s+i)},y.Lt=function(t,s,i){return t+i*(s-t)},y.Jr=function(t,s,i){return t===s?0:(i-t)/(s-t)},y.qr=function(t,s,i,e,h){return y.Lt(e,h,y.Jr(t,s,i))},y.Xr=function(t,s,i,e){return y.Lt(y.Lt(t,s,e),y.Lt(s,i,e),e)},y.Yr=function(t,s,i,e,h){return y.Lt(y.Xr(t,s,i,h),y.Xr(s,i,e,h),h)},y.$r=function(t,s,i){return(t+s+(t-s)*Math.cos(i*Math.PI))/2},y.Kr=function(t){return 0<t&&0==(t-1&t)},y.Zr=function(s){--s;for(let t=1;t<32;t<<=1)s|=s>>t;return s+1},y.Qr=function(t,s){return Math.round(t*s)/s},y.tn=function(t,s){return Math.floor(t*s)/s},y.sn=function(t,s){s=Math.max(Math.floor(s),0);const i=Math.pow(10,s);return Math.round(t*i)/i},y.hn=function(t){return Math.floor(t)!==t&&t.toString().split(".")[1].length||0},y.toFixed=function(t,s){let i=t.toFixed(s),e=i.length-1;for(;0<=e&&"0"===i.charAt(e);--e);return 0<=e&&"."===i.charAt(e)&&--e,e<0?i:i.substr(0,e+1)},y.rn=function(t,s,i){return y.Rr(t,0,255)|y.Rr(s,0,255)<<8|y.Rr(i,0,255)<<16},1024),Tt=16384,xt=8191,Gt=(y.nn=function(t,s,i,e){return t=y.Rr(Math.floor(1024*t),-8192,xt),s=y.Rr(Math.floor(1024*s),-8192,xt),i=y.Rr(Math.floor(1024*i),-8192,xt),e=y.Rr(Math.floor(1023*e),0,1023),t<0&&(t+=Tt),s<0&&(s+=Tt),i<0&&(i+=Tt),-(t*Tt*Tt*vt+s*Tt*vt+i*vt+e)},y.an=function(t,s,i){return y.nn(t,s,i,1)},y.ln=function(s){if(0<=s)return(255&s)/255;{let t=Math.floor(-s/(Tt*Tt*vt));return t>xt&&(t-=Tt),t/1024}},y.un=function(s){if(0<=s)return((65280&s)>>8)/255;{let t=Math.floor(-s%(Tt*Tt*vt)/(Tt*vt));return t>xt&&(t-=Tt),t/1024}},y.cn=function(s){if(0<=s)return((16711680&s)>>16)/255;{let t=Math.floor(-s%(Tt*vt)/vt);return t>xt&&(t-=Tt),t/1024}},y.fn=function(t){if(i(t))return 0;if(0<=t)return 1;{const s=Math.floor(-t%vt);return s/1023}},y.dn=function(s,i){for(s=Math.floor(s),i=Math.floor(i);0!==i;){let t=i;i=s%i,s=t}return s},[[3,2],[4,3],[5,4],[5,3],[6,5],[14,9],[16,9],[16,10],[21,9]]);y.pn=function(i,e){if((i=Math.floor(i))===(e=Math.floor(e)))return[1,1];for(let s of Gt){let t=i/s[0]*s[1];if(Math.abs(e-t)<1)return s.slice(0);if(t=i/s[1]*s[0],Math.abs(e-t)<1)return[s[1],s[0]]}let t=y.dn(i,e);return[i/t,e/t]},y.mn=function(t,s,i,e,h,r,n,o){const a=Math.min(t,i),l=Math.max(t,i),u=Math.min(h,n),c=Math.max(h,n);if(l<u||c<a)return!1;const f=Math.min(s,e),d=Math.max(s,e),p=Math.min(r,o),m=Math.max(r,o);if(d<p||m<f)return!1;const g=h-t+n-i,y=r-s+o-e,S=i-t,w=e-s,b=n-h,M=o-r,v=Math.abs(w*b-M*S),T=b*y-M*g;if(Math.abs(T)>v)return!1;const x=S*y-w*g;return Math.abs(x)<=v},y.gn=function(t,s,i,e,h,r,n,o,a,l,u,c){const f=Math.min(a,u),d=Math.max(a,u);if(r<f||d<h)return!1;const p=Math.min(l,c),m=Math.max(l,c);if(o<p||m<n)return!1;const g=a-t+u-i,y=l-s+c-e,S=i-t,w=e-s,b=u-a,M=c-l,v=Math.abs(w*b-M*S),T=b*y-M*g;if(Math.abs(T)>v)return!1;const x=S*y-w*g;return Math.abs(x)<=v},y.yn=function(t,s,i,e,h){const r=Math.min(t,i),n=Math.max(t,i),o=Math.min(s,e),a=Math.max(s,e),l=h.Sn(),u=h.wn(),c=h.bn(),f=h.Mn(),d=h.vn(),p=h.Tn(),m=h.xn(),g=h.Gn();return y.gn(t,s,i,e,r,n,o,a,l,u,c,f)||y.gn(t,s,i,e,r,n,o,a,c,f,d,p)||y.gn(t,s,i,e,r,n,o,a,d,p,m,g)||y.gn(t,s,i,e,r,n,o,a,m,g,l,u)},y._n=function(s,i,e,h,r){let n=Math.min(s,e),o=Math.max(s,e),a=Math.min(i,h),l=Math.max(i,h),u=0;for(let t=r.length-4;u<=t;u+=2)if(y.gn(s,i,e,h,n,o,a,l,r[u],r[u+1],r[u+2],r[u+3]))return!0;return y.gn(s,i,e,h,n,o,a,l,r[u],r[u+1],r[0],r[1])};y.In=function(t,s,i,e,h,r,n,o){const a=i-t,l=e-s,u=n-h,c=o-r,f=a*c-l*u;if(0==f)return 2;const d=((s-e)*(n-t)+a*(o-s))/f;return 0<d&&d<1+1e-6?(c*(n-t)+(h-n)*(o-s))/f:2},y.Cn=function(t,s,i,e,h,r,n,o,a){const l=(n-h)*a,u=(o-r)*a;return y.In(t,s,i,e,h-l,r-u,n+l,o+u)},y.Pn=function(t,s,i,e,h,r,n,o){const a=h-i,l=r-e,u=n-i,c=o-e,f=t-i,d=s-e,p=a*a+l*l,m=a*u+l*c,g=a*f+l*d,y=u*u+c*c,S=u*f+c*d,w=1/(p*y-m*m),b=(y*g-m*S)*w,M=(p*S-m*g)*w;return 0<=b&&0<=M&&b+M<=1},y.Rn=function(t,s,i,e,h,r,n,o){const a=h-i,l=r-e,u=n-i,c=o-e,f=t-i,d=s-e,p=a*a+l*l,m=a*u+l*c,g=u*u+c*c,y=f*a+d*l,S=f*u+d*c,w=p*g-m*m,b=(g*y-m*S)/w,M=(p*S-m*y)/w,v=1-b-M;return[v,b,M]},y.An=function(t,s,i,e,h,r,n,o,a,l,u,c){return[t*e+s*n+i*l,t*h+s*o+i*u,t*r+s*a+i*c]}}{let l=self.Vs,s=null,i="";if("undefined"!=typeof document){const _t=(s=document).querySelector("base");(i=_t&&_t.hasAttribute("href")?_t.getAttribute("href"):"")&&!(i=i.startsWith("/")?i.substr(1):i).endsWith("/")&&(i+="/")}l.En=function(){return i},l.Fn=function(){if(!s)return"";const t=s.location;return l.Dn(t.origin+t.pathname)+i},l.Dn=function(t){if(!t.length)return t;if(t.endsWith("/")||t.endsWith("\\"))return t;const s=Math.max(t.lastIndexOf("/"),t.lastIndexOf("\\"));return-1===s?"":t.substr(0,s+1)},l.kn=function(t){if(!t.length)return t;if(t.endsWith("/")||t.endsWith("\\"))return"";const s=Math.max(t.lastIndexOf("/"),t.lastIndexOf("\\"));return-1===s?t:t.substr(s+1)},l.On=function(t){let s=t.lastIndexOf(".");return s<1?"":t.substr(s)},l.Ln=function(t,s){const i=t.lastIndexOf(".");return-1===i?t+"."+s:t.substr(0,i+1)+s},l.Nn=function(t){let s=t.lastIndexOf(".");return s<1?t:t.substr(0,s)},l.Bn=function(t){return t.replace(/\\/g,"/")},l.Wn=function(t,s){const i=t?l.On(t).slice(1):"";return s===i},l.Vn=function(t,s){let i,e;return l.We(t)&&(i=l.Nn(t.name)),l.Pe(t)&&(i=l.Nn(t)),l.We(s)&&(e=l.Nn(s.name)),l.Pe(s)&&(e=l.Nn(s)),i===e},l.jn=function(t){t=l.Bn(t);let s=/^\w\:\//.exec(t),i=(s?(s=s[0],"/"!==(t=t.slice(3))[0]&&(t="/"+t)):s="",(t=1<(t=t.replace(/\/{2,}/g,"/")).length&&"/"===t.slice(-1)?t.slice(0,-1):t).lastIndexOf("/")+1),e="",h=t,r,n="";0<i&&(e=t.slice(0,i),h=t.slice(i));const o=(r=h).lastIndexOf("."),a=(0<o&&(n=h.slice(o),r=h.slice(0,-n.length)),s+e+h);return{dir:e,Hn:h,name:r,root:s,ext:n,Un:a}},l.zn=function(i,e){return new Promise((t,s)=>{self.setTimeout(t,i,e)})},l.Jn=function(t){try{t()}catch(t){l.isDebug&&console.warn("Swallowed exception: ",t)}},l.qn=function(){},l.Gh=function(t,s){return"string"==typeof t&&"string"==typeof s&&(t===s||t.normalize().toLowerCase()===s.normalize().toLowerCase())},l.Xn=function(t,s){return"string"==typeof t&&"string"==typeof s&&(t===s||t.normalize()===s.normalize())},l.Yn=function(t,s,i){t[i++]=s[0],t[i++]=s[1],t[i++]=s[2],t[i++]=s[3],t[i++]=s[4],t[i++]=s[5],t[i++]=s[6],t[i++]=s[7],t[i++]=s[8],t[i++]=s[9],t[i++]=s[10],t[i++]=s[11],t[i++]=s[12],t[i++]=s[13],t[i++]=s[14],t[i]=s[15]},l.$n=function(t,s){t.length=s},l.Kn=function(t){t&&0!==t.length&&l.$n(t,0)},l.Zn=function(i){if(i){for(let s=0;s<i.length;s++){let t=i[s];l.$n(t,0)}l.$n(i,0)}},l.Qn=function(s,i,e){const h=s.length;if(!((i|=0)<=h))for(let t=h;t<i;++t)s.push(e)},l.eo=function(t,s,i){const e=t.length;(s|=0)<e?l.$n(t,s):e<s&&l.Qn(t,s,i)},l.ho=function(t,s){l.Kn(t),l.nr(t,s)},l.nr=function(i,e){if(e.length<1e4)i.push(...e);else for(let t=0,s=e.length;t<s;++t)i.push(e[t])},l.ro=function(i,e){if(!((e=Math.floor(e))<0||e>=i.length)){let s=i.length-1;for(let t=e;t<s;++t)i[t]=i[t+1];l.$n(i,s)}},l.no=function(t,s){let i=t.indexOf(s);0<=i&&t.splice(i,1)},l.ao=function(s,i){let e=s.length;if(i.length!==e)return!1;for(let t=0;t<e;++t)if(s[t]!==i[t])return!1;return!0},l.lo=function(i,e){let h=[],r=0;for(let s=0,t=i.length;s<t;++s){let t=i[s];e(t)?h.push(t):(i[r]=t,++r)}return l.$n(i,r),h},l.uo=function(i,e){let t=i.length,h=0;for(let s=0,t=i.length;s<t;++s){let t=i[s];e.has(t)||(i[h++]=t)}return l.$n(i,h),t-h},l.co=function(t,s){return t===Math.floor(t)&&0<=t&&t<s.length},l.fo=function(t,s){if(!l.co(t,s))throw new RangeError("array index out of bounds")},l.do=function(t){return t.slice()},l.po=function(t,i){let e=[];for(let s of t)if(l.Oe(s)){let t=i(s);if(!t)throw new Error("missing clone");if(t.constructor!==s.constructor)throw new Error("object is not a clone");e.push(t)}else l.Ue(s)?e.push(l.po(s,i)):e.push(s);return e},l.yo=function(s){let i=[];for(let t of s)i.push(t.slice());return i},l.So=function(t,s=" "){return t?t.split(s).map(t=>t.trim()).filter(t=>!!t):[]},l.wo=function(t,s,i){const e=new Set;for(const h of t.values())s(h)&&(i?e.add(i(h)):e.add(h));return e},l.bo=function(t,s){return t.union?t.union(s):new Set([...t,...s])},l.Mo=function(t,s){for(const i of s)t.add(i);return t},l.first=function(s){for(let t of s)return t;return null},l.xor=function(t,s){return!t!=!s},l.compare=function(t,s,i){switch(s){case 0:return t===i;case 1:return t!==i;case 2:return t<i;case 3:return t<=i;case 4:return i<t;case 5:return i<=t;default:return!1}},l.vo=function(s){for(let t in s)if(s.hasOwnProperty(t))return!0;return!1},l.To=function(o,a){return o.length?new Promise((i,e)=>{let h=[],r=0,n=!1;for(let s=0,t=o.length;s<t;++s)h.push(void 0),o[s].then(t=>{n||(h[s]=t,++r===o.length?i(h):a(r,o.length))}).catch(t=>{n=!0,e(t)})}):Promise.resolve([])};let e=[],h=(l.xo=function(t){e.push(t)},l.Go=function(){let i=0;for(let s of e){let t=s();i+=t}return Math.floor(i)},1),r=new Map,n=new MessageChannel,o=(n.port2.onmessage=function(t){const s=t.data,i=r.get(s);r.delete(s),i&&i(performance.now())},l._o=function(t){const s=h++;return r.set(s,t),n.port1.postMessage(s),s},l.Io=function(t){r.delete(t)},l.Co=l._o,l.Po=function(){return new Promise(t=>l.Co(t))},new Set);l.Ro=function(s){const i=self.requestAnimationFrame(async t=>{await l.Po(),o.has(i)&&(o.delete(i),s(t))});return o.add(i),i},l.Ao=function(t){o.has(t)&&(self.cancelAnimationFrame(t),o.delete(t))}}{const r=self.Vs;r.Eo=function(t){return/^(?:[a-z\-]+:)?\/\//.test(t)||"data:"===t.substr(0,5)||"blob:"===t.substr(0,5)},r.Fo=function(t){return!r.Eo(t)},r.Do=function(t){if(!t.ok)throw new Error(`fetch '${t.url}' response returned ${t.status} `+t.statusText)},r.ko=function(t,s){return fetch(t,s).then(t=>(r.Do(t),t))},r.Oo=function(t){return r.ko(t).then(t=>t.text())},r.Lo=function(t){return r.ko(t).then(t=>t.json())},r.No=function(t){return r.ko(t).then(t=>t.blob())},r.Bo=function(t){return r.ko(t).then(t=>t.arrayBuffer())},r.Wo=function(e){return new Promise((t,s)=>{const i=new Image;i.onload=()=>t(i),i.onerror=t=>s(t),i.src=e})},r.Vo=function(e){return"function"==typeof e.arrayBuffer?e.arrayBuffer():new Promise((t,s)=>{const i=new FileReader;i.onload=()=>t(i.result),i.onerror=()=>s(i.error),i.readAsArrayBuffer(e)})},r.jo=function(e){return"function"==typeof e.text?e.text():new Promise((t,s)=>{const i=new FileReader;i.onload=()=>t(i.result),i.onerror=()=>s(i.error),i.readAsText(e)})},r.Ho=function(t){return r.jo(t).then(t=>JSON.parse(t))},r.Uo=async function(t,s){let i=URL.createObjectURL(t);try{const e=await r.Wo(i);return URL.revokeObjectURL(i),i="",s&&"function"==typeof e.decode&&await e.decode(),e}finally{i&&URL.revokeObjectURL(i)}},r.zo=function(t,s){if("undefined"==typeof document||"function"!=typeof document.createElement)return new OffscreenCanvas(t,s);{const i=document.createElement("canvas");return i.width=t,i.height=s,i}},r.Jo=function(s,i,e){if("number"!=typeof e&&(e=1),i=i||"image/png",e=r.Rr(e,0,1),s.convertToBlob)return s.convertToBlob({type:i,quality:e});if(s.toBlob)return new Promise(t=>s.toBlob(t,i,e));throw new Error("could not convert canvas to blob")},r.qo=function(t,s,i){const e=r.zo(t.width,t.height),h=e.getContext("2d");return h.drawImage(t,0,0),r.Jo(e,s,i)},r.Xo=function(t,s,i){if(r.Ji.ImageBitmapOptions)return createImageBitmap(t,{premultiplyAlpha:"none"}).then(t=>r.qo(t,s,i));if(r.Ji.ImageBitmap)return createImageBitmap(t).then(t=>r.qo(t,s,i));{const e=r.zo(t.width,t.height),h=e.getContext("2d");return h.putImageData(t,0,0),r.Jo(e,s,i)}},r.Yo=function(t,s){t.clear();for(const i of s)t.add(i)},r.$o=function(t){const s=Object.create(null);for(const[i,e]of t.entries())s[i]=e;return s},r.Ko=function(t,s){s.clear();for(const[i,e]of Object.entries(t))s.set(i,e)},r.Zo=function s(t){if("object"!=typeof t||null===t)return t;if(t instanceof Set)return{_c3type_:"set",data:[...t].map(t=>s(t))};if(t instanceof Map)return{_c3type_:"map",data:[...t].map(t=>[t[0],s(t[1])])};{const i=Object.create(null);for(const[e,h]of Object.entries(t))i[e]=s(h);return i}},r.Qo=function s(t){if("object"==typeof t&null!==t){if("set"===t._c3type_)return new Set(t.data.map(t=>s(t)));if("map"===t._c3type_)return new Map(t.data.map(t=>[t[0],s(t[1])]));{const i=Object.create(null);for(const[e,h]of Object.entries(t))i[e]=s(h);return i}}return t},r.ta=function(t){if(t.startsWith("--"))return t;let s="",i=!1,e=0;for(const h of t)"-"===h?0<e&&(i=!0):i?(s+=h.toUpperCase(),i=!1):s+=h,++e;return s},r.ea=function(t){return"object"==typeof t&&"function"==typeof t.next},r.ra=function(s,i){const e=[];if("function"==typeof i)for(let t=0;t<s;++t)e.push(i());else for(let t=0;t<s;++t)e.push(i);return e}}{let e=function(t){return 0===t.length?"00":1===t.length?"0"+t:t},l=function(t,s,i){return i<0&&(i+=1),1<i&&--i,i<1/6?t+6*(s-t)*i:i<.5?s:i<2/3?t+(s-t)*(2/3-i)*6:t};e,l;const u=self.Vs,It=/([0-9.]+),([0-9.]+)\%?,([0-9.]+)\%?/i,Ct=/([0-9.]+),([0-9.]+)\%?,([0-9.]+)\%?,([0-9.])/i;u.na=class{constructor(t,s,i,e){this.oa=NaN,this.aa=NaN,this.la=NaN,this.ua=NaN,this.oa=0,this.aa=0,this.la=0,this.ua=0,t instanceof u.na?this.set(t):this.ca(t||0,s||0,i||0,e||0)}fa(t,s,i){return this.oa=+t,this.aa=+s,this.la=+i,this.Rr(),this}ca(t,s,i,e){return this.oa=+t,this.aa=+s,this.la=+i,this.ua=+e,this.Rr(),this}set(t){return this.oa=t.oa,this.aa=t.aa,this.la=t.la,this.ua=t.ua,this}I(t){return this.set(t)}add(t){this.oa+=t.oa,this.aa+=t.aa,this.la+=t.la,this.ua+=t.ua,this.Rr()}ya(t,s,i,e=0){this.oa+=+t,this.aa+=+s,this.la+=+i,this.ua+=+e,this.Rr()}Sa(t){this.wa(Math.max(this.oa,t.oa)-Math.min(this.oa,t.oa)),this.ba(Math.max(this.aa,t.aa)-Math.min(this.aa,t.aa)),this.Ma(Math.max(this.la,t.la)-Math.min(this.la,t.la)),this.Ta(Math.max(this.ua,t.ua)-Math.min(this.ua,t.ua)),this.Rr()}xa(t){this.oa=t.oa,this.aa=t.aa,this.la=t.la}wa(t){this.oa=u.Rr(+t,0,1)}Ga(){return this.oa}ba(t){this.aa=u.Rr(+t,0,1)}_a(){return this.aa}Ma(t){this.la=u.Rr(+t,0,1)}Ia(){return this.la}Ta(t){this.ua=u.Rr(+t,0,1)}Ca(){return this.ua}clone(){return u.Tr(u.na,this.oa,this.aa,this.la,this.ua)}toArray(){return[this.oa,this.aa,this.la,this.ua]}Pa(){return new Float64Array(this.toArray())}Ra(t,s){t[s++]=this.oa,t[s++]=this.aa,t[s++]=this.la,t[s]=this.ua}Aa(t,s){t[s++]=this.oa,t[s++]=this.aa,t[s]=this.la}equals(t){return this.oa===t.oa&&this.aa===t.aa&&this.la===t.la&&this.ua===t.ua}Ea(t){return this.oa===t.oa&&this.aa===t.aa&&this.la===t.la}Fa(t,s,i){return this.oa===t&&this.aa===s&&this.la===i}Da(t,s,i,e){return this.oa===t&&this.aa===s&&this.la===i&&this.ua===e}ka(t,s){return t[s]===Math.fround(this.oa)&&t[s+1]===Math.fround(this.aa)&&t[s+2]===Math.fround(this.la)&&t[s+3]===Math.fround(this.ua)}Oa(t,s){return t[s]===Math.fround(this.oa)&&t[s+1]===Math.fround(this.aa)&&t[s+2]===Math.fround(this.la)}multiply(t){this.oa*=t.oa,this.aa*=t.aa,this.la*=t.la,this.ua*=t.ua}La(t){this.oa*=t,this.aa*=t,this.la*=t,this.ua*=t}Na(){return this.oa*=this.ua,this.aa*=this.ua,this.la*=this.ua,this}Ba(){return this.oa/=this.ua,this.aa/=this.ua,this.la/=this.ua,this}Rr(){return this.oa=u.Rr(this.oa,0,1),this.aa=u.Rr(this.aa,0,1),this.la=u.Rr(this.la,0,1),this.ua=u.Rr(this.ua,0,1),this}Wa(t){this.oa=u.ln(t),this.aa=u.un(t),this.la=u.cn(t),this.ua=u.fn(t)}Va(t,s,i){const e=u.we(t)?t:this.Ga(),h=u.we(s)?s:this._a(),r=u.we(i)?i:this.Ia();return`rgb(${100*e}%, ${100*h}%, ${100*r}%)`}ja(t,s,i,e){const h=u.we(t)?t:this.Ga(),r=u.we(s)?s:this._a(),n=u.we(i)?i:this.Ia(),o=u.we(e)?e:this.Ca();return`rgba(${100*h}%, ${100*r}%, ${100*n}%, ${o})`}Ha(){const t=Math.round(255*this.Ga()),s=Math.round(255*this._a()),i=Math.round(255*this.Ia());return"#"+e(t.toString(16))+e(s.toString(16))+e(i.toString(16))}Ua(t){if("string"!=typeof t)return!1;let s,i,e;if(3===(t="#"===(t=t.trim()).charAt(0)?t.substr(1):t).length)s=parseInt(t[0],16)/15,i=parseInt(t[1],16)/15,e=parseInt(t[2],16)/15;else{if(6!==t.length)return!1;s=parseInt(t.substr(0,2),16)/255,i=parseInt(t.substr(2,2),16)/255,e=parseInt(t.substr(4,2),16)/255}return isFinite(s)&&this.wa(s),isFinite(i)&&this.ba(i),isFinite(e)&&this.Ma(e),this.Ta(1),!0}za(){const t=Math.round(255*this.Ga()),s=Math.round(255*this._a()),i=Math.round(255*this.Ia());return t+`, ${s}, `+i}Ja(){const t=Math.round(255*this.Ga()),s=Math.round(255*this._a()),i=Math.round(255*this.Ia());return[t,s,i]}qa(t){if("string"!=typeof t)return!1;const s=(t=t.replace(/^rgb\(|\)|%/,"")).split(",");if(s.length<3)return!1;const i=parseInt(s[0].trim(),10)/255,e=parseInt(s[1].trim(),10)/255,h=parseInt(s[2].trim(),10)/255;return isFinite(i)&&this.wa(i),isFinite(e)&&this.ba(e),isFinite(h)&&this.Ma(h),this.Ta(1),!0}Xa(t){if("string"!=typeof t)return!1;const s=(t=t.replace(/^rgb\(|\)|%/,"")).split(",");if(s.length<3)return!1;const i=parseInt(s[0].trim(),10)/100,e=parseInt(s[1].trim(),10)/100,h=parseInt(s[2].trim(),10)/100;return isFinite(i)&&this.wa(i),isFinite(e)&&this.ba(e),isFinite(h)&&this.Ma(h),this.Ta(1),!0}Ya(t){if("string"!=typeof t)return!1;const s=(t=t.replace(/^rgba\(|\)|%/,"")).split(",");if(s.length<4)return!1;const i=parseInt(s[0].trim(),10)/255,e=parseInt(s[1].trim(),10)/255,h=parseInt(s[2].trim(),10)/255,r=parseFloat(s[3].trim());return isFinite(i)&&this.wa(i),isFinite(e)&&this.ba(e),isFinite(h)&&this.Ma(h),isFinite(r)&&this.Ta(r),!0}$a(t){if("string"!=typeof t)return!1;const s=(t=t.replace(/^rgba\(|\)|%/,"")).split(",");if(s.length<4)return!1;const i=parseInt(s[0].trim(),10)/100,e=parseInt(s[1].trim(),10)/100,h=parseInt(s[2].trim(),10)/100,r=parseFloat(s[3].trim());return isFinite(i)&&this.wa(i),isFinite(e)&&this.ba(e),isFinite(h)&&this.Ma(h),isFinite(r)&&this.Ta(r),!0}Ka(t){if("string"!=typeof t)return!1;if((t=t.replace(/\s+/,"")).includes(",")){if(t.startsWith("rgb("))return t.includes("%")?this.Xa(t):this.qa(t);if(t.startsWith("rgba("))return t.includes("%")?this.$a(t):this.Ya(t);if(t.startsWith("hsl(")||t.startsWith("hsla("))return this.Za(t);{const s=t.split(",");return t.includes("%")?3===s.length?this.Xa(t):4===s.length&&this.$a(t):3===s.length?this.qa(t):4===s.length&&this.Ya(t)}}return this.Ua(t)}toJSON(){return[this.oa,this.aa,this.la,this.ua]}Qa(t,s,i,e){let h,r,n;if(t%=360,s=u.Rr(s,0,100),i=u.Rr(i,0,100),e=u.Rr(e,0,1),t/=360,i/=100,0==(s/=100))h=r=n=i;else{const o=i<.5?i*(1+s):i+s-i*s,a=2*i-o;h=l(a,o,t+1/3),r=l(a,o,t),n=l(a,o,t-1/3)}return this.wa(h),this.ba(r),this.Ma(n),this.Ta(e),this}Za(t){const s=t.replace(/ |hsl|hsla|\(|\)|;/gi,""),i=It.exec(s),e=Ct.exec(s);return i&&4===i.length?(this.Qa(+i[1],+i[2],+i[3],1),!0):!(!e||5!==e.length||(this.Qa(+i[1],+i[2],+i[3],+i[4]),0))}sl(){const t=this.oa,s=this.aa,i=this.la,e=this.ua,h=u.na.il(t,s,i),r=u.na.el(t,s,i),n=u.na.hl(t,s,i);return`hsla(${h}, ${r}%, ${n}%, ${e})`}rl(){const t=this.oa,s=this.aa,i=this.la;return[u.na.il(t,s,i),u.na.el(t,s,i),u.na.hl(t,s,i),this.ua]}nl(t){!Array.isArray(t)||t.length<3||(this.oa=t[0],this.aa=t[1],this.la=t[2],this.ua=4<=t.length?t[3]:1)}set r(t){this.wa(t)}get r(){return this.Ga()}set g(t){this.ba(t)}get g(){return this._a()}set b(t){this.Ma(t)}get b(){return this.Ia()}set a(t){this.Ta(t)}get a(){return this.Ca()}ol(t,s){switch(t){case 0:this.wa(s);break;case 1:this.ba(s);break;case 2:this.Ma(s);break;case 3:this.Ta(s);break;default:throw new RangeError("invalid color index")}}al(t){switch(t){case 0:return this.Ga();case 1:return this._a();case 2:return this.Ia();case 3:return this.Ca();default:throw new RangeError("invalid color index")}}static ll(t,s){let i,e;if(Array.isArray(t))(i=new u.na).nl(t);else{if(!(t instanceof u.na))throw new Error("unexpected type");i=t}if(Array.isArray(s))(e=new u.na).nl(s);else{if(!(s instanceof u.na))throw new Error("unexpected type");e=s}return i.equals(e)}static ul(t,s){return u.Rr(Math.max(t,s)-Math.min(t,s),0,1)}static cl(t,s){const i=new u.na;return i.wa(Math.max(t.oa,s.oa)-Math.min(t.oa,s.oa)),i.ba(Math.max(t.aa,s.aa)-Math.min(t.aa,s.aa)),i.Ma(Math.max(t.la,s.la)-Math.min(t.la,s.la)),i.Ta(Math.max(t.ua,s.ua)-Math.min(t.ua,s.ua)),i}static fl(t,s){const i=new u.na(0,0,0,1);return i.wa(Math.max(t.oa,s.oa)-Math.min(t.oa,s.oa)),i.ba(Math.max(t.aa,s.aa)-Math.min(t.aa,s.aa)),i.Ma(Math.max(t.la,s.la)-Math.min(t.la,s.la)),i}static il(t,s,i){const e=Math.max(t,s,i),h=Math.min(t,s,i);if(e===h)return 0;let r=0;switch(e){case t:r=(s-i)/(e-h)+(s<i?6:0);break;case s:r=(i-t)/(e-h)+2;break;case i:r=(t-s)/(e-h)+4}return Math.round(r/6*360)}static el(t,s,i){const e=Math.max(t,s,i),h=Math.min(t,s,i);if(e===h)return 0;const r=(e+h)/2,n=e-h,o=.5<r?n/(2-e-h):n/(e+h);return Math.round(100*o)}static hl(t,s,i){const e=Math.max(t,s,i),h=Math.min(t,s,i),r=(e+h)/2;return e?Math.round(100*r):0}},u.na.dl=Object.freeze(u.Tr(u.na,1,1,1,1)),u.na.pl=Object.freeze(u.Tr(u.na,0,0,0,1)),u.na.ml=Object.freeze(u.Tr(u.na,0,0,0,0))}{const Pt=self.Vs;Pt.gl=class{constructor(t,s){this.yl=0,this.Sl=0,t instanceof Pt.gl?this.I(t):this.set(t||0,s||0)}set(t,s){this.yl=+t,this.Sl=+s}I(t){this.yl=t.yl,this.Sl=t.Sl}equals(t){return this.yl===t.yl&&this.Sl===t.Sl}wl(t,s){return this.yl===t&&this.Sl===s}ka(t,s){return t[s]===Math.fround(this.yl)&&t[s+1]===Math.fround(this.Sl)}bl(t){this.yl=+t}Ml(){return this.yl}vl(t){this.Sl=+t}Tl(){return this.Sl}toArray(){return[this.yl,this.Sl]}Pa(){return new Float64Array(this.toArray())}Ra(t,s){t[s++]=this.yl,t[s]=this.Sl}offset(t,s){this.yl+=+t,this.Sl+=+s}scale(t,s){this.yl*=t,this.Sl*=s}Pt(t,s){this.yl/=t,this.Sl/=s}round(){this.yl=Math.round(this.yl),this.Sl=Math.round(this.Sl)}floor(){this.yl=Math.floor(this.yl),this.Sl=Math.floor(this.Sl)}ceil(){this.yl=Math.ceil(this.yl),this.Sl=Math.ceil(this.Sl)}angle(){return Pt.Nr(0,0,this.yl,this.Sl)}xl(){return this.yl*this.yl+this.Sl*this.Sl}length(){return Pt.Dr(this.yl,this.Sl)}Gl(t,s){const i=this.yl*s-this.Sl*t;this.Sl=this.Sl*s+this.yl*t,this.yl=i}rotate(t){0!==t&&this.Gl(Math.sin(t),Math.cos(t))}_l(t,s,i){0===t||s===this.yl&&i===this.Sl||(this.yl-=s,this.Sl-=i,this.Gl(Math.sin(t),Math.cos(t)),this.yl+=+s,this.Sl+=+i)}move(t,s){0!==s&&(this.yl+=Math.cos(t)*s,this.Sl+=Math.sin(t)*s)}normalize(){const t=this.length();0!==t&&1!==t&&(this.yl/=t,this.Sl/=t)}Rr(t,s){this.yl=Pt.Rr(this.yl,t,s),this.Sl=Pt.Rr(this.Sl,t,s)}kt(t){return this.yl*t.yl+this.Sl*t.Sl}reverse(){this.yl=-this.yl,this.Sl=-this.Sl}Il(){let t=this.yl;return this.yl=this.Sl,this.Sl=-t,this}}}{const Rt=self.Vs;Rt.Rect=class{constructor(t,s,i,e){this.Cl=NaN,this.Pl=NaN,this.Rl=NaN,this.Al=NaN,this.Cl=0,this.Pl=0,this.Rl=0,this.Al=0,t instanceof Rt.Rect?this.I(t):this.set(t||0,s||0,i||0,e||0)}set(t,s,i,e){this.Cl=+t,this.Pl=+s,this.Rl=+i,this.Al=+e}El(t,s,i,e){s=+s,this.Cl=t=+t,this.Pl=s,this.Rl=t+ +i,this.Al=s+ +e}I(t){this.Cl=+t.Cl,this.Pl=+t.Pl,this.Rl=+t.Rl,this.Al=+t.Al}clone(){return new Rt.Rect(this.Cl,this.Pl,this.Rl,this.Al)}static Fl(t,s){const i=new Rt.Rect;return i.Dl(Math.min(t.Cl,s.Cl)),i.kl(Math.min(t.Pl,s.Pl)),i.Ol(Math.max(t.Rl,s.Rl)),i.Ll(Math.max(t.Al,s.Al)),i}static Nl(t){return new Rt.Rect(t.left,t.top,t.right,t.bottom)}equals(t){return this.Cl===t.Cl&&this.Pl===t.Pl&&this.Rl===t.Rl&&this.Al===t.Al}Bl(t,s,i,e){return this.Cl===t&&this.Pl===s&&this.width()===i&&this.height()===e}ka(t,s){return t[s]===Math.fround(this.Cl)&&t[s+1]===Math.fround(this.Pl)&&t[s+2]===Math.fround(this.Rl)&&t[s+3]===Math.fround(this.Al)}Dl(t){this.Cl=+t}Wl(){return this.Cl}kl(t){this.Pl=+t}Vl(){return this.Pl}Ol(t){this.Rl=+t}jl(){return this.Rl}Ll(t){this.Al=+t}Hl(){return this.Al}toArray(){return[this.Cl,this.Pl,this.Rl,this.Al]}Pa(){return new Float64Array(this.toArray())}Ul(){return new DOMRect(this.Cl,this.Pl,this.width(),this.height())}static zl(t){return Rt.Tr(Rt.Rect,t.left,t.top,t.right,t.bottom)}Ra(t,s){t[s++]=this.Cl,t[s++]=this.Pl,t[s++]=this.Rl,t[s]=this.Al}Jl(t,s){t[s++]=this.Cl,t[s++]=this.Pl,t[s++]=this.Rl,t[s++]=this.Pl,t[s++]=this.Rl,t[s++]=this.Al,t[s++]=this.Cl,t[s]=this.Al}ql(t,s,i){t[s++]=this.Cl,t[s++]=this.Pl,t[s++]=i,t[s++]=this.Rl,t[s++]=this.Pl,t[s++]=i,t[s++]=this.Rl,t[s++]=this.Al,t[s++]=i,t[s++]=this.Cl,t[s++]=this.Al,t[s]=i}width(){return this.Rl-this.Cl}height(){return this.Al-this.Pl}Xl(){return(this.Cl+this.Rl)/2}Yl(){return(this.Pl+this.Al)/2}offset(t,s){s=+s,this.Cl+=t=+t,this.Pl+=s,this.Rl+=t,this.Al+=s}offsetLeft(t){this.Cl+=+t}offsetTop(t){this.Pl+=+t}$l(t){this.Rl+=+t}Kl(t){this.Al+=+t}Zl(t){if("x"!==t)throw new Error("invalid axis, only 'x' supported");this.Pl<this.Al?this.Cl<this.Rl?this.Al=this.Pl+this.width():this.Al=this.Pl-this.width():this.Cl<this.Rl?this.Al=this.Pl-this.width():this.Al=this.Pl+this.width()}Ql(t,s){s=+s,this.Cl-=t=+t,this.Pl-=s,this.Rl+=t,this.Al+=s}tu(t,s){s=+s,this.Cl+=t=+t,this.Pl+=s,this.Rl-=t,this.Al-=s}multiply(t,s){this.Cl*=t,this.Pl*=s,this.Rl*=t,this.Al*=s}Pt(t,s){this.Cl/=t,this.Pl/=s,this.Rl/=t,this.Al/=s}su(t){this.Cl=+t-this.Cl,this.Rl=+t-this.Rl}iu(t){this.Pl=+t-this.Pl,this.Al=+t-this.Al}eu(t,s){const i=this.width(),e=this.height(),h=this.Wl()+i*t,r=this.Vl()+e*s;this.El(h-e*s,r-i*t,e,i)}hu(){const t=this.Cl;this.Cl=this.Rl,this.Rl=t}ru(){const t=this.Pl;this.Pl=this.Al,this.Al=t}nu(t){const s=this.Pl;this.Pl=+t-this.Al,this.Al=+t-s}round(){this.Cl=Math.round(this.Cl),this.Pl=Math.round(this.Pl),this.Rl=Math.round(this.Rl),this.Al=Math.round(this.Al)}ou(){this.Cl=Math.ceil(this.Cl),this.Pl=Math.ceil(this.Pl),this.Rl=Math.floor(this.Rl),this.Al=Math.floor(this.Al)}au(){this.Cl=Math.floor(this.Cl),this.Pl=Math.floor(this.Pl),this.Rl=Math.ceil(this.Rl),this.Al=Math.ceil(this.Al)}floor(){this.Cl=Math.floor(this.Cl),this.Pl=Math.floor(this.Pl),this.Rl=Math.floor(this.Rl),this.Al=Math.floor(this.Al)}ceil(){this.Cl=Math.ceil(this.Cl),this.Pl=Math.ceil(this.Pl),this.Rl=Math.ceil(this.Rl),this.Al=Math.ceil(this.Al)}Rr(t,s,i,e){this.Cl=Math.max(this.Cl,+t),this.Pl=Math.max(this.Pl,+s),this.Rl=Math.min(this.Rl,+i),this.Al=Math.min(this.Al,+e)}lu(t,s,i,e){t=+t,s=+s,i=+i,e=+e,this.Cl=Rt.Rr(this.Cl,t,i),this.Pl=Rt.Rr(this.Pl,s,e),this.Rl=Rt.Rr(this.Rl,t,i),this.Al=Rt.Rr(this.Al,s,e)}normalize(){this.Cl>this.Rl&&this.hu(),this.Pl>this.Al&&this.ru()}uu(t){return!(t.Rl<this.Cl||t.Al<this.Pl||t.Cl>this.Rl||t.Pl>this.Al)}cu(t,s,i){return!(t.Rl+s<this.Cl||t.Al+i<this.Pl||t.Cl+s>this.Rl||t.Pl+i>this.Al)}fu(t,s){return t>=this.Cl&&t<=this.Rl&&s>=this.Pl&&s<=this.Al}du(t){return t.Cl>=this.Cl&&t.Pl>=this.Pl&&t.Rl<=this.Rl&&t.Al<=this.Al}pu(t){t.Cl<this.Cl&&(this.Cl=+t.Cl),t.Pl<this.Pl&&(this.Pl=+t.Pl),t.Rl>this.Rl&&(this.Rl=+t.Rl),t.Al>this.Al&&(this.Al=+t.Al)}mu(t){this.Cl=Rt.Lt(t.Cl,t.Rl,this.Cl),this.Pl=Rt.Lt(t.Pl,t.Al,this.Pl),this.Rl=Rt.Lt(t.Cl,t.Rl,this.Rl),this.Al=Rt.Lt(t.Pl,t.Al,this.Al)}}}{const At=self.Vs;At.gu=class{constructor(t,s,i,e,h,r,n,o){this.yu=NaN,this.Su=NaN,this.wu=NaN,this.bu=NaN,this.Mu=NaN,this.vu=NaN,this.Tu=NaN,this.xu=NaN,this.yu=0,this.Su=0,this.wu=0,this.bu=0,this.Mu=0,this.vu=0,this.Tu=0,this.xu=0,t instanceof At.gu?this.I(t):this.set(t||0,s||0,i||0,e||0,h||0,r||0,n||0,o||0)}set(t,s,i,e,h,r,n,o){this.yu=+t,this.Su=+s,this.wu=+i,this.bu=+e,this.Mu=+h,this.vu=+r,this.Tu=+n,this.xu=+o}Gu(t,s,i,e){this.set(t,s,i,s,i,e,t,e)}I(t){this.yu=t.yu,this.Su=t.Su,this.wu=t.wu,this.bu=t.bu,this.Mu=t.Mu,this.vu=t.vu,this.Tu=t.Tu,this.xu=t.xu}equals(t){return this.yu===t.yu&&this.Su===t.Su&&this.wu===t.wu&&this.bu===t.bu&&this.Mu===t.Mu&&this.vu===t.vu&&this.Tu===t.Tu&&this.xu===t.xu}_u(t){this.yu=+t}Sn(){return this.yu}Iu(t){this.Su=+t}wn(){return this.Su}Cu(t){this.wu=+t}bn(){return this.wu}Pu(t){this.bu=+t}Mn(){return this.bu}Ru(t){this.Mu=+t}vn(){return this.Mu}Au(t){this.vu=+t}Tn(){return this.vu}Eu(t){this.Tu=+t}xn(){return this.Tu}Fu(t){this.xu=+t}Gn(){return this.xu}Du(){return new DOMQuad(new DOMPoint(this.yu,this.Su),new DOMPoint(this.wu,this.bu),new DOMPoint(this.Mu,this.vu),new DOMPoint(this.Tu,this.xu))}static ku(t){return At.Tr(At.gu,t.p1.x,t.p1.y,t.p2.x,t.p2.y,t.p3.x,t.p3.y,t.p4.x,t.p4.y)}toArray(){return[this.yu,this.Su,this.wu,this.bu,this.Mu,this.vu,this.Tu,this.xu]}Pa(){return new Float64Array(this.toArray())}Ra(t,s){t[s++]=this.yu,t[s++]=this.Su,t[s++]=this.wu,t[s++]=this.bu,t[s++]=this.Mu,t[s++]=this.vu,t[s++]=this.Tu,t[s]=this.xu}Ou(t,s,i){t[s++]=this.yu,t[s++]=this.Su,t[s++]=i,t[s++]=this.wu,t[s++]=this.bu,t[s++]=i,t[s++]=this.Mu,t[s++]=this.vu,t[s++]=i,t[s++]=this.Tu,t[s++]=this.xu,t[s]=i}offset(t,s){s=+s,this.yu+=t=+t,this.Su+=s,this.wu+=t,this.bu+=s,this.Mu+=t,this.vu+=s,this.Tu+=t,this.xu+=s}round(){this.yu=Math.round(this.yu),this.Su=Math.round(this.Su),this.wu=Math.round(this.wu),this.bu=Math.round(this.bu),this.Mu=Math.round(this.Mu),this.vu=Math.round(this.vu),this.Tu=Math.round(this.Tu),this.xu=Math.round(this.xu)}floor(){this.yu=Math.floor(this.yu),this.Su=Math.floor(this.Su),this.wu=Math.floor(this.wu),this.bu=Math.floor(this.bu),this.Mu=Math.floor(this.Mu),this.vu=Math.floor(this.vu),this.Tu=Math.floor(this.Tu),this.xu=Math.floor(this.xu)}ceil(){this.yu=Math.ceil(this.yu),this.Su=Math.ceil(this.Su),this.wu=Math.ceil(this.wu),this.bu=Math.ceil(this.bu),this.Mu=Math.ceil(this.Mu),this.vu=Math.ceil(this.vu),this.Tu=Math.ceil(this.Tu),this.xu=Math.ceil(this.xu)}Lu(t){this.yu=t.Cl,this.Su=t.Pl,this.wu=t.Rl,this.bu=t.Pl,this.Mu=t.Rl,this.vu=t.Al,this.Tu=t.Cl,this.xu=t.Al}Nu(t,s){0===s?this.Lu(t):this.Bu(t,Math.sin(s),Math.cos(s))}Bu(t,s,i){const e=t.Cl*s,h=t.Pl*s,r=t.Rl*s,n=t.Al*s,o=t.Cl*i,a=t.Pl*i,l=t.Rl*i,u=t.Al*i;this.yu=o-h,this.Su=a+e,this.wu=l-h,this.bu=a+r,this.Mu=l-n,this.vu=u+r,this.Tu=o-n,this.xu=u+e}Wu(t){t.set(Math.min(this.yu,this.wu,this.Mu,this.Tu),Math.min(this.Su,this.bu,this.vu,this.xu),Math.max(this.yu,this.wu,this.Mu,this.Tu),Math.max(this.Su,this.bu,this.vu,this.xu))}fu(t,s){let i=this.wu-this.yu,e=this.bu-this.Su,h=this.Mu-this.yu,r=this.vu-this.Su,n=t-this.yu,o=s-this.Su,a=i*i+e*e,l=i*h+e*r,u=i*n+e*o,c=h*h+r*r,f=h*n+r*o,d=1/(a*c-l*l),p=(c*u-l*f)*d,m=(a*f-l*u)*d;return 0<=p&&0<m&&p+m<1||(m=((a=(i=this.Tu-this.yu)*i+(e=this.xu-this.Su)*e)*f-(l=i*h+e*r)*(u=i*n+e*o))*(d=1/(a*c-l*l)),0<=(p=(c*u-l*f)*d)&&0<m&&p+m<1)}Xl(){return(this.yu+this.wu+this.Mu+this.Tu)/4}Yl(){return(this.Su+this.bu+this.vu+this.xu)/4}Vu(t,s,i,e){return!(!this.fu(t,s)&&!this.fu(i,e))||At.yn(t,s,i,e,this)}ju(t){let s=t.Xl(),i=t.Yl();if(this.fu(s,i))return!0;if(s=this.Xl(),i=this.Yl(),t.fu(s,i))return!0;const e=this.yu,h=this.Su,r=this.wu,n=this.bu,o=this.Mu,a=this.vu,l=this.Tu,u=this.xu;return At.yn(e,h,r,n,t)||At.yn(r,n,o,a,t)||At.yn(o,a,l,u,t)||At.yn(l,u,e,h,t)}Hu(){const t=this.yu,s=this.Su;this.yu=this.wu,this.Su=this.bu,this.wu=this.Mu,this.bu=this.vu,this.Mu=this.Tu,this.vu=this.xu,this.Tu=t,this.xu=s}Uu(){this.zu(0,2),this.zu(1,3),this.zu(6,4),this.zu(7,5)}Ju(){this.zu(0,6),this.zu(1,7),this.zu(2,4),this.zu(3,5)}qu(){this.zu(2,6),this.zu(3,7)}zu(t,s){const i=this.Xu(t);this.Yu(t,this.Xu(s)),this.Yu(s,i)}Xu(t){switch(t){case 0:return this.yu;case 1:return this.Su;case 2:return this.wu;case 3:return this.bu;case 4:return this.Mu;case 5:return this.vu;case 6:return this.Tu;case 7:return this.xu;default:throw new RangeError("invalid quad point index")}}Yu(t,s){switch(s=+s,t){case 0:this.yu=s;break;case 1:this.Su=s;break;case 2:this.wu=s;break;case 3:this.bu=s;break;case 4:this.Mu=s;break;case 5:this.vu=s;break;case 6:this.Tu=s;break;case 7:this.xu=s;break;default:throw new RangeError("invalid quad point index")}}}}{const Et=self.Vs,Ft=[0,0,1,0,1,1,0,1],Dt=Et.Tr(Et.gu);Et.$u=class extends Et.Mr{constructor(t,s=!0){super(),t=t||Ft,this.Ku=Float64Array.from(t),this.Zu=new Et.Rect,this.Qu=!0,this.tc=s}Gr(){}ic(){return this.Ku}ec(){return this.Ku.length/2}hc(t){this.Ku.length===t.length?this.Ku.set(t):this.Ku=Float64Array.from(t),this.Qu=!0}rc(){this.hc(Ft)}I(t){this.hc(t.Ku)}nc(){this.Qu=!0}oc(){if(this.Qu){let i=this.Ku,e=i[0],h=i[1],r=e,n=h;for(let t=0,s=i.length;t<s;t+=2){const o=i[t],a=i[t+1];o<e&&(e=o),o>r&&(r=o),a<h&&(h=a),a>n&&(n=a)}this.Zu.set(e,h,r,n),this.Qu=!1}}Lu(t,s,i){let e=this.Ku;8!==e.length&&(e=new Float64Array(8),this.Ku=e),e[0]=t.Wl()-s,e[1]=t.Vl()-i,e[2]=t.jl()-s,e[3]=t.Vl()-i,e[4]=t.jl()-s,e[5]=t.Hl()-i,e[6]=t.Wl()-s,e[7]=t.Hl()-i,this.Zu.I(t),0===s&&0===i||this.Zu.offset(-s,-i),this.Qu=!1}ac(t,s,i){Dt.I(t),Dt.offset(s,i),this.hc(Dt.toArray()),this.Qu=!0}transform(t,s,i){let e=0,h=1;0!==i&&(e=Math.sin(i),h=Math.cos(i)),this.lc(t,s,e,h)}lc(i,e,h,r){const n=this.Ku;for(let t=0,s=n.length;t<s;t+=2){const o=t+1,a=n[t]*i,l=n[o]*e;n[t]=a*r-l*h,n[o]=l*r+a*h}this.Qu=!0}offset(i,e){const h=this.Ku;for(let t=0,s=h.length;t<s;t+=2)h[t]+=i,h[t+1]+=e}fu(i,e){const h=this.Ku;if(i===h[0]&&e===h[1])return!0;this.oc();let t=this.Zu,r=t.Wl()-110,n=t.Vl()-101,o=t.jl()+131,a=t.Hl()+120,l=0,u=0,c,f,d=0,p=0,m,g,y=(c=r<i?(l=r,i):(l=i,r),f=n<e?(u=n,e):(u=e,n),m=o<i?(d=o,i):(d=i,o),g=a<e?(p=a,e):(p=e,a),0),S=0;for(let t=0,s=h.length;t<s;t+=2){const w=(t+2)%s,b=h[t],M=h[t+1],v=h[w],T=h[1+w];Et.gn(r,n,i,e,l,c,u,f,b,M,v,T)&&++y,Et.gn(o,a,i,e,d,m,p,g,b,M,v,T)&&++S}return y%2==1||S%2==1}uc(t,c,f){const d=t.Ku,p=this.Ku;if(this.fu(d[0]+c,d[1]+f))return!0;if(t.fu(p[0]-c,p[1]-f))return!0;for(let s=0,u=p.length;s<u;s+=2){let t=(s+2)%u,i=p[s],e=p[s+1],h=p[t],r=p[1+t],n=0,o=0,a,l;a=i<h?(n=i,h):(n=h,i),l=e<r?(o=e,r):(o=r,e);for(let t=0,s=d.length;t<s;t+=2){const m=(t+2)%s,g=d[t]+c,y=d[t+1]+f,S=d[m]+c,w=d[1+m]+f;if(Et.gn(i,e,h,r,n,a,o,l,g,y,S,w))return!0}}return!1}Vu(i,e,h,r,n,o){if(this.fu(h-i,r-e))return!0;if(this.fu(n-i,o-e))return!0;let a=0,l=0,u,c;u=h<n?(a=h,n):(a=n,h),c=r<o?(l=r,o):(l=o,r);const f=this.Ku;for(let t=0,s=f.length;t<s;t+=2){const d=(t+2)%s,p=f[t]+i,m=f[t+1]+e,g=f[d]+i,y=f[1+d]+e;if(Et.gn(h,r,n,o,a,u,l,c,p,m,g,y))return!0}return!1}Uu(i){const e=this.Ku;for(let t=0,s=e.length;t<s;t+=2)e[t]=2*i-e[t];this.Qu=!0}Ju(i){const e=this.Ku;for(let t=0,s=e.length;t<s;t+=2){const h=t+1;e[h]=2*i-e[h]}this.Qu=!0}qu(){const i=this.Ku;for(let t=0,s=i.length;t<s;t+=2){const e=t+1,h=i[t];i[t]=i[e],i[e]=h}this.Qu=!0}fc(){let i=this.Ku,e=0;for(let t=0,s=i.length;t<s;t+=2)e+=i[t];return e/this.ec()}mc(){let i=this.Ku,e=0;for(let t=0,s=i.length;t<s;t+=2)e+=i[t+1];return e/this.ec()}yc(){return this.Ku}Sc(){return this.ec()}wc(){return this.tc}}}{const kt=self.Vs;kt.Mc=class extends kt.Mr{constructor(t){if(super(),this.vc=new Map,t)for(const[s,i,e]of t)this.Set(s,i,e)}Gr(){this.Tc(),this.vc=null}xc(){return 0===this.vc.size}Tc(){const t=this.vc;for(const s of t.values())s.clear();t.clear()}Set(t,s,i){let e=this.vc,h=e.get(t);h||(h=new Map,e.set(t,h)),h.set(s,i)}oi(t,s){const i=this.vc.get(t);return i&&i.get(s)}ni(t,s){const i=this.vc.get(t);return!!i&&i.has(s)}Gc(t,s){const i=this.vc,e=i.get(t);if(!e)return!1;const h=e.delete(s);return h&&0===e.size&&i.delete(t),h}_c(t){const s=this.vc,i=s.get(t);i&&(i.clear(),s.delete(t));for(const[e,h]of s.entries())h.delete(t)&&0===h.size&&s.delete(e)}Ic(){let t=0;for(const s of this.vc.values())t+=s.size;return t}*values(){for(const t of this.vc.values())yield*t.values()}*Cc(){for(const[t,s]of this.vc.entries())for(const i of s.keys())yield[t,i]}*entries(){for(const[t,s]of this.vc.entries())for(const[i,e]of s.entries())yield[t,i,e]}}}{const Ot=self.Vs;Ot.Pc=class extends Ot.Mr{constructor(){super(),this.Rc=new Set,this.Ac=[],this.Ec=!1}Gr(){this.Tc()}Tc(){this.Rc.clear(),Ot.Kn(this.Ac),this.Ec=!1}Fc(t){this.Rc.has(t)||(this.Rc.add(t),this.Ec)||this.Ac.push(t)}ni(t){return this.Rc.has(t)}Gc(t){this.Rc.delete(t)&&(this.Ec=!0)}Ic(){return this.Rc.size}xc(){return 0===this.Rc.size}Dc(){return this.Ec&&(this.kc(),this.Ec=!1),this.Ac}kc(){const t=this.Ac;Ot.Kn(t);for(const s of this.Rc)t.push(s)}}}{const Lt=self.Vs,Nt=new Map,Bt=new Map,Wt=new Map,Vt=new Map,jt=new Map,Ht=new Map,Ut=new Map,zt=new Map,Jt=new Map,qt=(Jt.set("linear","noease"),Jt.set("default","noease"),["default","noease","easeinquad","easeoutquad","easeinoutquad","easeincubic","easeoutcubic","easeinoutcubic","easeinquart","easeoutquart","easeinoutquart","easeinquint","easeoutquint","easeinoutquint","easeinsine","easeoutsine","easeinoutsine","easeinexpo","easeoutexpo","easeinoutexpo","easeincirc","easeoutcirc","easeinoutcirc","easeinelastic","easeoutelastic","easeinoutelastic","easeinback","easeoutback","easeinoutback","easeinbounce","easeoutbounce","easeinoutbounce"]),Xt=["default","noease","quad","cubic","quart","quint","sine","expo","circ","elastic","back","bounce"],Yt=new Map([["linear","noease"],["in-sine","easeinsine"],["out-sine","easeoutsine"],["in-out-sine","easeinoutsine"],["in-elastic","easeinelastic"],["out-elastic","easeoutelastic"],["in-out-elastic","easeinoutelastic"],["in-back","easeinback"],["out-back","easeoutback"],["in-out-back","easeinoutback"],["in-bounce","easeinbounce"],["out-bounce","easeoutbounce"],["in-out-bounce","easeinoutbounce"],["in-cubic","easeincubic"],["out-cubic","easeoutcubic"],["in-out-cubic","easeinoutcubic"],["in-quadratic","easeinquad"],["out-quadratic","easeoutquad"],["in-out-quadratic","easeinoutquad"],["in-quartic","easeinquart"],["out-quartic","easeoutquart"],["in-out-quartic","easeinoutquart"],["in-quintic","easeinquint"],["out-quintic","easeoutquint"],["in-out-quintic","easeinoutquint"],["in-circular","easeincirc"],["out-circular","easeoutcirc"],["in-out-circular","easeinoutcirc"],["in-exponential","easeinexpo"],["out-exponential","easeoutexpo"],["in-out-exponential","easeinoutexpo"]]),$t=(self.Oc=class hs{constructor(){}static Lc(){return"default"}static Nc(){return"noease"}static Bc(t){return Yt.get(t)}static Wc(s,...i){this.Vc();let t,e=(s?(Wt.has(s)||Wt.set(s,new Map),[...(t=Wt.get(s)).keys()].filter(t=>!hs.jc(t,s)||hs.jc(t,s).transition.IsForAnyPurpose())):[...(t=jt).keys()]).sort();return[...Bt.keys()].concat(e).filter(t=>!i.includes(t))}static Hc(){this.Vc();const t=[...jt.keys()];return t.sort(),[...Bt.keys()].concat(t)}static Uc(){this.Vc();const t=[...jt.keys()];return t.sort(),t}static zc(t){for(const s of qt){const i=self.lang("ui.bars.timeline.eases."+s);if(i===t)return!0}for(const e of Xt){const h=self.lang("ui.bars.timeline.short-eases."+e);if(h===t)return!0}}static Jc(t){return this.Vc(),[...Bt.keys()].includes(t)}static qc(t){const s=Jt.get(t);return s?Nt.get(s):hs.Jc(t)?Nt.get(t):Ut.has(t)?Ut.get(t):void 0}static Xc(t){return this.Vc(),zt.get(t)}static Yc(t,s){this.Vc();const i=hs.qc(t);if(i)return i;if(s)return Wt.get(s).get(t);throw new Error("missing ease function")}static jc(t,s){this.Vc();const i=Vt.get(s);if(i)return i.get(t)}static $c(t,s){this.Vc();const i=hs.qc(t);return!!i||!!Wt.get(s).get(t)}static Kc(t){this.Vc();const s=hs.qc(t);return s||jt.get(t)}static Zc(t){return this.Vc(),Ht.get(t)}static Qc(t){this.Vc();const s=this.Hc();return s[t]}static tf(t,s){this.Vc();const i=this.Wc(s);return i.indexOf(t)}static if(t){return this.tf(t)}static Vc(){0===Nt.size&&(this.ef("default",()=>{}),this.ef("noease",[{x:0,y:0,sax:.336,say:0,eax:0,eay:0,se:!0,ee:!1},{x:1,y:1,sax:0,say:0,eax:-.336,eay:0,se:!1,ee:!0}],!0),this.ef("easeinsine",[{x:0,y:0,sax:.485,say:0,eax:0,eay:0,se:!0,ee:!1},{x:1,y:1,sax:0,say:0,eax:-.038,eay:0,se:!1,ee:!0}]),this.ef("easeoutsine",[{x:0,y:0,sax:.038,say:0,eax:0,eay:0,se:!0,ee:!1},{x:1,y:1,sax:0,say:0,eax:-.485,eay:0,se:!1,ee:!0}]),this.ef("easeinoutsine",[{x:0,y:0,sax:.336,say:0,eax:0,eay:0,se:!0,ee:!1},{x:1,y:1,sax:0,say:0,eax:-.336,eay:0,se:!1,ee:!0}]),this.ef("easeinelastic",[{x:0,y:0,sax:.018,say:0,eax:0,eay:0,se:!0,ee:!1},{x:.116,y:.002,sax:.025,say:0,eax:-.025,eay:0,se:!0,ee:!0},{x:.266,y:-.005,sax:.024,say:0,eax:-.021,eay:0,se:!0,ee:!0},{x:.416,y:.016,sax:.024,say:0,eax:-.026,eay:0,se:!0,ee:!0},{x:.566,y:-.045,sax:.061,say:0,eax:-.025,eay:0,se:!0,ee:!0},{x:.716,y:.132,sax:.072,say:-.004,eax:-.045,eay:0,se:!0,ee:!0},{x:.866,y:-.373,sax:.06,say:0,eax:-.049,eay:-.002,se:!0,ee:!0},{x:1,y:1,sax:0,say:0,eax:-.038,eay:-.263,se:!1,ee:!0}]),this.ef("easeoutelastic",[{x:0,y:0,sax:.038,say:.263,eax:0,eay:0,se:!0,ee:!1},{x:.136,y:1.373,sax:.049,say:.002,eax:-.06,eay:0,se:!0,ee:!0},{x:.286,y:.868,sax:.045,say:0,eax:-.072,eay:.004,se:!0,ee:!0},{x:.436,y:1.045,sax:.025,say:0,eax:-.061,eay:0,se:!0,ee:!0},{x:.586,y:.984,sax:.026,say:0,eax:-.024,eay:0,se:!0,ee:!0},{x:.736,y:1.005,sax:.021,say:0,eax:-.024,eay:0,se:!0,ee:!0},{x:.886,y:.998,sax:.025,say:0,eax:-.025,eay:0,se:!0,ee:!0},{x:1,y:1,sax:0,say:0,eax:-.018,eay:0,se:!1,ee:!0}]),this.ef("easeinoutelastic",[{x:0,y:0,sax:.025,say:0,eax:0,eay:0,se:!0,ee:!1},{x:.067,y:.001,sax:.025,say:0,eax:-.025,eay:0,se:!0,ee:!0},{x:.18,y:-.005,sax:.025,say:0,eax:-.025,eay:0,se:!0,ee:!0},{x:.292,y:.025,sax:.053,say:0,eax:-.025,eay:0,se:!0,ee:!0},{x:.405,y:-.118,sax:.069,say:0,eax:-.027,eay:0,se:!0,ee:!0},{x:.597,y:1.118,sax:.027,say:0,eax:-.069,eay:0,se:!0,ee:!0},{x:.71,y:.975,sax:.025,say:0,eax:-.053,eay:0,se:!0,ee:!0},{x:.822,y:1.005,sax:.025,say:0,eax:-.025,eay:0,se:!0,ee:!0},{x:.935,y:.999,sax:.025,say:0,eax:-.025,eay:0,se:!0,ee:!0},{x:1,y:1,sax:0,say:0,eax:-.025,eay:0,se:!1,ee:!0}]),this.ef("easeinback",[{x:0,y:0,sax:.35,say:0,eax:0,eay:0,se:!0,ee:!1},{x:1,y:1,sax:0,say:0,eax:-.34,eay:-1.579,se:!1,ee:!0}]),this.ef("easeoutback",[{x:0,y:0,sax:.34,say:1.579,eax:0,eay:0,se:!0,ee:!1},{x:1,y:1,sax:0,say:0,eax:-.35,eay:0,se:!1,ee:!0}]),this.ef("easeinoutback",[{x:0,y:0,sax:.035,say:0,eax:0,eay:0,se:!0,ee:!1},{x:.242,y:-.1,sax:.258,say:0,eax:-.025,eay:0,se:!0,ee:!0},{x:.76,y:1.1,sax:.025,say:0,eax:-.26,eay:0,se:!0,ee:!0},{x:1,y:1,sax:0,say:0,eax:-.035,eay:0,se:!1,ee:!0}]),this.ef("easeinbounce",[{x:0,y:0,sax:.033,say:.025,eax:0,eay:0,se:!0,ee:!1},{x:.092,y:0,sax:.026,say:.078,eax:-.033,eay:.025,se:!0,ee:!0},{x:.274,y:0,sax:.097,say:.319,eax:-.026,eay:.078,se:!0,ee:!0},{x:.637,y:0,sax:.105,say:.625,eax:-.097,eay:.319,se:!0,ee:!0},{x:1,y:1,sax:0,say:0,eax:-.125,eay:-.004,se:!1,ee:!0}]),this.ef("easeoutbounce",[{x:0,y:0,sax:.125,say:.004,eax:0,eay:0,se:!0,ee:!1},{x:.365,y:1,sax:.097,say:-.319,eax:-.105,eay:-.625,se:!0,ee:!0},{x:.728,y:1,sax:.026,say:-.078,eax:-.097,eay:-.319,se:!0,ee:!0},{x:.91,y:1,sax:.033,say:-.025,eax:-.026,eay:-.078,se:!0,ee:!0},{x:1,y:1,sax:0,say:0,eax:-.033,eay:-.025,se:!1,ee:!0}]),this.ef("easeinoutbounce",[{x:0,y:0,sax:.01,say:.006,eax:0,eay:0,se:!0,ee:!1},{x:.046,y:0,sax:.021,say:.038,eax:-.01,eay:.006,se:!0,ee:!0},{x:.137,y:0,sax:.059,say:.158,eax:-.021,eay:.038,se:!0,ee:!0},{x:.319,y:0,sax:.117,say:.744,eax:-.059,eay:.158,se:!0,ee:!0},{x:.683,y:1,sax:.059,say:-.158,eax:-.117,eay:-.744,se:!0,ee:!0},{x:.865,y:1,sax:.021,say:-.038,eax:-.059,eay:-.158,se:!0,ee:!0},{x:.956,y:1,sax:.01,say:-.006,eax:-.021,eay:-.038,se:!0,ee:!0},{x:1,y:1,sax:0,say:0,eax:-.01,eay:-.006,se:!1,ee:!0}]),this.ef("easeincubic",[{x:0,y:0,sax:.75,say:0,eax:0,eay:0,se:!0,ee:!1},{x:1,y:1,sax:0,say:0,eax:-.138,eay:-.321,se:!1,ee:!0}]),this.ef("easeoutcubic",[{x:0,y:0,sax:.138,say:.321,eax:0,eay:0,se:!0,ee:!1},{x:1,y:1,sax:0,say:0,eax:-.75,eay:0,se:!1,ee:!0}]),this.ef("easeinoutcubic",[{x:0,y:0,sax:.285,say:0,eax:0,eay:0,se:!0,ee:!1},{x:.5,y:.5,sax:.081,say:.272,eax:-.081,eay:-.272,se:!0,ee:!0},{x:1,y:1,sax:0,say:0,eax:-.285,eay:0,se:!1,ee:!0}]),this.ef("easeinquad",[{x:0,y:0,sax:.4,say:0,eax:0,eay:0,se:!0,ee:!1},{x:1,y:1,sax:0,say:0,eax:-.178,eay:-.392,se:!1,ee:!0}]),this.ef("easeoutquad",[{x:0,y:0,sax:.178,say:.392,eax:0,eay:0,se:!0,ee:!1},{x:1,y:1,sax:0,say:0,eax:-.4,eay:0,se:!1,ee:!0}]),this.ef("easeinoutquad",[{x:0,y:0,sax:.25,say:0,eax:0,eay:0,se:!0,ee:!1},{x:.5,y:.5,sax:.03,say:.065,eax:-.03,eay:-.065,se:!0,ee:!0},{x:1,y:1,sax:0,say:0,eax:-.25,eay:0,se:!1,ee:!0}]),this.ef("easeinquart",[{x:0,y:0,sax:.25,say:1,eax:0,eay:0,se:!0,ee:!1},{x:1,y:1,sax:0,say:0,eax:-.5,eay:0,se:!1,ee:!0}]),this.ef("easeoutquart",[{x:0,y:0,sax:.5,say:0,eax:0,eay:0,se:!0,ee:!1},{x:1,y:1,sax:0,say:0,eax:-.25,eay:-1,se:!1,ee:!0}]),this.ef("easeinoutquart",[{x:0,y:0,sax:.765,say:.03,eax:0,eay:0,se:!0,ee:!1},{x:1,y:1,sax:0,say:0,eax:-.765,eay:-.03,se:!1,ee:!0}]),this.ef("easeinquint",[{x:0,y:0,sax:.6,say:0,eax:0,eay:0,se:!0,ee:!1},{x:1,y:1,sax:0,say:0,eax:-.2,eay:-1,se:!1,ee:!0}]),this.ef("easeoutquint",[{x:0,y:0,sax:.2,say:1,eax:0,eay:0,se:!0,ee:!1},{x:1,y:1,sax:0,say:0,eax:-.6,eay:0,se:!1,ee:!0}]),this.ef("easeinoutquint",[{eax:0,eay:0,ee:!1,sax:.84,say:0,se:!0,x:0,y:0},{eax:-.84,eay:0,ee:!0,sax:0,say:0,se:!1,x:1,y:1}]),this.ef("easeincirc",[{x:0,y:0,sax:.25,say:0,eax:0,eay:0,se:!0,ee:!1},{x:1,y:1,sax:0,say:0,eax:-.024,eay:-.808,se:!1,ee:!0}]),this.ef("easeoutcirc",[{x:0,y:0,sax:.024,say:.808,eax:0,eay:0,se:!0,ee:!1},{x:1,y:1,sax:0,say:0,eax:-.25,eay:0,se:!1,ee:!0}]),this.ef("easeinoutcirc",[{x:0,y:0,sax:.125,say:0,eax:0,eay:0,se:!0,ee:!1},{x:.5,y:.5,sax:.02,say:.428,eax:-.02,eay:-.428,se:!0,ee:!0},{x:1,y:1,sax:0,say:0,eax:-.125,eay:0,se:!1,ee:!0}]),this.ef("easeinexpo",[{x:0,y:0,sax:.66,say:0,eax:0,eay:0,se:!0,ee:!1},{x:1,y:1,sax:0,say:0,eax:-.14,eay:-1,se:!1,ee:!0}]),this.ef("easeoutexpo",[{x:0,y:0,sax:.14,say:1,eax:0,eay:0,se:!0,ee:!1},{x:1,y:1,sax:0,say:0,eax:-.66,eay:0,se:!1,ee:!0}]),this.ef("easeinoutexpo",[{eax:0,eay:0,ee:!1,sax:.345,say:0,se:!0,x:0,y:0},{eax:-.06,eay:-.5,ee:!0,sax:.06,say:.5,se:!0,x:.5,y:.5},{eax:-.335,eay:0,ee:!0,sax:0,say:0,se:!1,x:1,y:1}]),this.hf("cubicbezier",this.rf),this.hf("spline",this.nf))}static ef(t,s,i=!1){if("function"==typeof s)hs.lf(t,s,"predefined");else{if(!Lt.Ue(s))throw new Error("unexpected arguments");if(self.BuiltInTransition){const h=Lt.Tr(self.BuiltInTransition,t,i);h.SetFromJson(s),hs.lf(t,(t,s,i,e)=>h.uf(t,s,i,e),"predefined"),zt.set(t,h)}else{const r=Lt.Tr(Lt.cf,[t,s.map(t=>[t.x,t.y,t.sax,t.say,t.eax,t.eay,t.se,t.ee])],!1);r.ff(i),hs.lf(t,(t,s,i,e)=>r.uf(t,s,i,e),"predefined")}}}static hf(t,s){hs.lf(t,s,"private")}static df(t,s,i,e){this.Vc(),hs.lf(t,s,"custom",i,e)}static pf(t,s){if(!this.Jc(t)&&![...Ut.keys()].includes(t)){const i=Wt.get(s),e=(i&&i.delete(t),Vt.get(s));e&&e.delete(t)}}static lf(t,s,i,e,h){switch(i){case"predefined":Nt.set(t,s),Bt.set(t,s);break;case"custom":if(e){Wt.has(e)||Wt.set(e,new Map),Vt.has(e)||Vt.set(e,new Map);const r=Wt.get(e),n=(r.set(t,s),Vt.get(e));n.set(t,h)}else jt.set(t,s),Ht.set(t,h);break;case"private":Nt.set(t,s),Ut.set(t,s);break;default:throw new Error("unexpected ease mode")}}static gf(t,s,i,e){return 0===e?s:i*t/e+s}static rf(t,s,i,e,h){const r=s,n=3*t*(i-s),o=3*t**2*(s+e-2*i),a=t**3*(h-s+3*i-3*e);return r+n+o+a}static nf(t,s,i,e,h,r,n,o,a,l){if(e===h&&r===n)return t;const u=es(t,s,e,r,o,l),c=Zt(i,h,n,a),f=Qt(i,h,n,a),d=ts(i,h,n,a);return ss(u,c,f,d)}static yf(t,s,i,e){const h=[],r=Zt(t,s,i,e),n=Qt(t,s,i,e),o=ts(t,s,i,e);for(let t=0;t<$t;++t){const a=ss(t*Kt,r,n,o);h.push(a)}return h}},11),Kt=1/($t-1),Zt=(t,s,i,e)=>e-3*i+3*s-t,Qt=(t,s,i,e)=>3*i-6*s+3*t,ts=(t,s,i,e)=>3*(s-t),ss=(t,s,i,e)=>((s*t+i)*t+e)*t,is=(t,s,i,e)=>3*s*t*t+2*i*t+e,es=(n,t,s,i,e,h)=>{if(1==n)return 1;let o=0,r=1,a=h[r],l=$t-1;for($t;r!=l&&a<=n;)r++,a=h[r],o+=Kt;r--;let u=(n-(a=h[r]))/(h[r+1]-a),c=o+u*Kt,f=Zt(t,s,i,e),d=Qt(t,s,i,e),p=ts(t,s,i,e),m=is(c,f,d,p);if(0===m)return c;if(.01<=m){for(let t=0;t<4;++t){const g=ss(c,f,d,p)-n,y=is(c,f,d,p);c-=g/y}return c}{let s=o,i=o+Kt,e=0,h,r;do{c=s+(i-s)/2;let t=ss(c,f,d,p)-n;0<t?i=c:s=c,h=1e-7<Math.abs(t),r=++e<10}while(h&&r);return c}}}{let o=function(t){rs.Pe(t)};o;const rs=self.Vs;rs.Sf=class{constructor(t){this.wf=[],this.Cr=t||"",this.bf=0}Gr(){this.Tc(),this.wf=null}Mf(){return this.Cr}Tc(){rs.Zn(this.wf),this.bf=0}vf(){return this.bf}Tf(t=Math.random()*this.vf()){let s=0;for(const[i,e]of this.wf)if(t<(s+=i))return e;return 0}xf(t,s){o(s),this.bf+=t,this.wf.push([t,s])}Gf(s,i){o(i);const e=0===s;for(let t=0;t<this.wf.length;t++){const h=this.wf[t],r=e||h[0]===s,n=h[1]===i;if(r&&n){this.wf.splice(t,1),this.bf-=h[0];break}}}_f(){return JSON.stringify(this.wf)}static If(t,s){const i=new rs.Sf(s),e=JSON.parse(t);for(const h of e){const r=h[0],n=h[1];i.xf(r,n)}return i}}}{let t=self.Vs,i=0;t.Cf=class{constructor(t,s){this.Pf=t,this.Rf=s,this.Af=i++,this.Pf.Ef("runtime","screen-reader-text",{type:"create",id:this.Af,text:this.Rf})}Gr(){this.Pf.Ef("runtime","screen-reader-text",{type:"release",id:this.Af}),this.Pf=null,this.Rf="",this.Af=-1}Ff(t){this.Rf!==t&&(this.Rf=t,this.Pf.Ef("runtime","screen-reader-text",{type:"update",id:this.Af,text:this.Rf}))}}}{const ns=self.Vs;ns.Event=class{constructor(t,s){this.type=t,this.cancelable=!!s,this.defaultPrevented=!1,this.Df=!1,this.kf=!1}preventDefault(){if(!this.cancelable)throw new Error(`event '${this.type}' is not cancelable`);this.defaultPrevented=!0}stopPropagation(){if(!this.cancelable)throw new Error(`event '${this.type}' cannot be stopped`);if(this.kf)throw new Error(`cannot stop async event '${this.type}' propagation`);this.Df=!0}}}{const os=self.Vs;os.Event.Of=class extends os.Mr{constructor(t){super(),this.Lf=t,this.Nf=[],this.Bf=new Set,this.Wf=[],this.Vf=new Set,this.jf=0,this.Hf=[]}Gr(){0<this.jf||(os.Kn(this.Nf),this.Bf.clear(),os.Kn(this.Wf),this.Vf.clear(),os.Kn(this.Hf),os.Gr(this))}Uf(t,s){this.zf()?this.Hf.push({Jf:"add",qf:t,capture:s}):s?this.Bf.has(t)||(this.Nf.push(t),this.Bf.add(t)):this.Vf.has(t)||(this.Wf.push(t),this.Vf.add(t))}Xf(t,s){this.zf()?this.Hf.push({Jf:"remove",qf:t,capture:s}):s?this.Bf.has(t)&&(this.Bf.delete(t),os.no(this.Nf,t)):this.Vf.has(t)&&(this.Vf.delete(t),os.no(this.Wf,t))}Yf(){return!this.Nf.length&&!this.Wf.length}zf(){return 0<this.jf}$f(){const t=new Set,s=new Set;for(const i of this.Hf)if("add"===i.Jf)this.Uf(i.qf,i.capture),(i.capture?s:t).delete(i.qf);else{if("remove"!==i.Jf)throw new Error("invalid op");(i.capture?(this.Bf.delete(i.qf),s):(this.Vf.delete(i.qf),t)).add(i.qf)}os.uo(this.Wf,t),os.uo(this.Nf,s),os.Kn(this.Hf)}Kf(i){this.Zf();let e=!1;for(let t=0,s=this.Nf.length;t<s;++t)if(this.Nf[t](i),i.Df){e=!0;break}if(!e)for(let t=0,s=this.Wf.length;t<s&&(this.Wf[t](i),!i.Df);++t);return this.Qf(),!i.defaultPrevented}t0(i){this.Zf();for(let t=0,s=this.Nf.length;t<s;++t)this.Nf[t](i);for(let t=0,s=this.Wf.length;t<s;++t)this.Wf[t](i);return this.Qf(),!0}Zf(){this.jf++}Qf(){this.jf--,0===this.jf&&0<this.Hf.length&&this.$f()}s0(t){t?this.Zf():this.Qf()}i0(i){let e=[];for(let s=0,t=this.Nf.length;s<t;++s){let t=this.Nf[s];e.push(os.e0(()=>t(i)))}for(let s=0,t=this.Wf.length;s<t;++s){let t=this.Wf[s];e.push(os.e0(()=>t(i)))}return Promise.all(e).then(()=>!i.defaultPrevented)}h0(i){const e=[];this.Zf();for(let t=0,s=this.Nf.length;t<s;++t){const h=this.Nf[t](i);h instanceof Promise&&e.push(h)}for(let t=0,s=this.Wf.length;t<s;++t){const r=this.Wf[t](i);r instanceof Promise&&e.push(r)}return this.Qf(),e.length?Promise.all(e).then(()=>!i.defaultPrevented):!i.defaultPrevented}async r0(t){return this.h0(t)}async n0(i){this.Zf();for(let t=0,s=this.Nf.length;t<s;++t){const e=this.Nf[t](i);e instanceof Promise&&await e}for(let t=0,s=this.Wf.length;t<s;++t){const h=this.Wf[t](i);h instanceof Promise&&await h}return this.Qf(),!i.defaultPrevented}*o0(i){this.Zf();for(let t=0,s=this.Nf.length;t<s;++t){const e=this.Nf[t](i);os.ea(e)&&(yield*e)}for(let t=0,s=this.Wf.length;t<s;++t){const h=this.Wf[t](i);os.ea(h)&&(yield*h)}this.Qf()}}}{const as=self.Vs;as.Event.a0=class extends as.Mr{constructor(){super(),this.l0=new Map,this.u0=!1}Gr(){if(this.u0)throw new Error("already released");this.c0(),this.u0=!0,as.Gr(this)}_r(){return this.u0}c0(){if(this.l0){for(let t of this.l0.values())t.Gr();this.l0.clear()}}f0(t,s){let i=this.l0.get(t);return i||(s?(i=as.Tr(as.Event.Of,t),this.l0.set(t,i),i):null)}d0(t){return this.l0.has(t)}addEventListener(t,s,i){let e=this.f0(t,!0);e.Uf(s,!!i)}removeEventListener(t,s,i){let e=this.f0(t,!1);e&&(e.Xf(s,!!i),e.Yf())&&this.l0.delete(t)}dispatchEvent(t){const s=this.f0(t.type,!1);return!s||(t.cancelable?s.Kf(t):s.t0(t))}p0(t){const s=this.f0(t.type,!1);return s?(t.kf=!0,s.i0(t)):Promise.resolve(!0)}async m0(t){const s=this.f0(t.type,!1);if(!s)return!0;this.l0.delete(t.type),t.kf=!0;const i=await s.i0(t);return s.Gr(),i}async g0(t){const s=this.f0(t.type,!1);return!s||s.r0(t)}y0(t){const s=this.f0(t.type,!1);return!s||s.h0(t)}async S0(t){const s=this.f0(t.type,!1);return!s||s.n0(t)}w0(t){const s=this.f0(t.type,!1);if(!s)return null;if(t.cancelable)throw new Error("not supported");return s.o0(t)}s0(t){for(const s of this.l0.values())s.s0(t)}}}{let r=function(t){c=l&&0===f?requestIdleCallback(s,{timeout:i}):setTimeout(s,0<f?1:t)},s=function(h){if(c=-1,u.length){let i=performance.now(),e=i,t=0,s;for(;n(u.shift()),e=performance.now(),++t,s=(e-i)/t*1.1,u.length&&(l&&0===f&&void 0!==h?s<h.timeRemaining():e-i+s<o););if(-1===c&&u.length){let t=e-i,s=Math.max(a-t,4);r(s)}}},n=function(s){let t;try{t=s.qf()}catch(t){return void s.reject(t)}s.resolve(t)},t=(r,s,n,self.Vs),o=12,a=16,i=35,l="undefined"!=typeof requestIdleCallback,u=[],c=-1,f=0,h=t.ci.ni("disable-asyncify");h&&console.warn("[Asyncify] Asyncify has been disabled due to disable-asyncify in the query string. Some work will now be done synchronously."),t.e0=function(i){let e=null;return t.isDebug&&(e=t.ye()),new Promise((t,s)=>{u.push({qf:i,resolve:t,reject:s,stack:e}),h?n(u.pop()):-1===c&&r(a)})},t.e0.b0=function(t){if(t)++f;else if(--f<0)throw new Error("already turned off high throughput mode")}}{let t=function(){r=-1},s=function(){n=-1,o=-1;let i=Date.now();for(let s of a)if(s.M0(i)){let t=s.v0();(-1===o||t<o)&&(o=t)}else a.delete(s);if(-1!==o){let t=Math.max(o-i+h,e);n=self.setTimeout(s,t)}},i=(t,s,self.Vs),e=1e3,h=100,r=-1,n=(i.T0=function(){return-1===r&&(r=Date.now(),self.setTimeout(t,16)),r},-1),o=-1,a=new Set;i.x0=class{constructor(t,s){this.G0=t,this._0=1e3*s,this.I0=0,this.C0=!1}P0(){let t=i.T0();this.I0=t+this._0,this.C0||(a.add(this),this.C0=!0),-1===n?(o=this.I0,n=self.setTimeout(s,this._0+h)):this.I0<o&&o>t+e&&(self.clearTimeout(n),o=this.I0,n=self.setTimeout(s,this._0+h))}M0(t){return!(t>=this.I0)||(this.G0()?(this.I0=t+this._0,!0):this.C0=!1)}v0(){return this.I0}R0(){this.C0&&(a.delete(this),this.C0=!1,0===a.size)&&-1!==n&&(self.clearTimeout(n),n=-1,o=-1)}Gr(){this.R0(),this.G0=null}}}{const ls=self.Vs;ls.A0=class us{constructor(t){this.E0=!1,this.F0=t}D0(){this.E0||(this.E0=!0,this.F0&&(this.F0(),this.F0=null))}k0(){return this.E0}Gr(){this.D0()}static Gr(t){return new us(()=>t.Gr())}static O0(s,i,e,h,t){if(null==h)h=!1;else if("boolean"!=typeof h&&"object"!=typeof h)throw new TypeError("invalid event listener options");if(t&&(e=e.bind(t)),i.includes(" ")){i=i.split(" ");const r=new ls.L0;for(let t of i)s.addEventListener(t,e,h),r.Fc(ls.Tr(ls.A0,()=>s.removeEventListener(t,e,h)));return r}return s.addEventListener(i,e,h),ls.Tr(ls.A0,()=>s.removeEventListener(i,e,h))}},ls.N0=class extends ls.A0{B0(t){this.F0=t}},ls.L0=class extends ls.A0{constructor(...s){super(),this.W0=new Set;for(let t of s)this.Fc(t)}Fc(...s){if(this.E0)throw new Error("already disposed");for(let t of s)this.W0.add(t)}V0(t){if(this.E0)throw new Error("already disposed");this.W0.delete(t)}j0(){if(this.E0)throw new Error("already disposed");if(this.W0){for(let t of this.W0)t.D0();this.W0.clear()}}k0(){return this.E0}D0(){if(this.E0)throw new Error("already disposed");this.E0=!0;for(let t of this.W0)t.D0();this.W0.clear(),this.W0=null}Gr(){this.D0()}}}{const cs=self.Vs;cs.H0=class extends cs.Mr{constructor(){super(),this.U0=0,this.Sl=0,this.z0=0,this.J0=0}Fc(t){this.Sl=(t=+t)-this.U0,this.z0=this.J0+this.Sl,this.U0=this.z0-this.J0-this.Sl,this.J0=this.z0}q0(t){this.J0-=+t}oi(){return this.J0}P0(){this.U0=0,this.Sl=0,this.z0=0,this.J0=0}Set(t){this.U0=0,this.Sl=0,this.z0=0,this.J0=+t}X0(t){this.U0=t.U0,this.Sl=t.Sl,this.z0=t.z0,this.J0=t.J0}Gr(){}}}{const fs=self.Vs,n={};n.Y0=function(t){this.$0=t,this.right=this.$0.K0,this.left=this.$0.K0,this.parent=null,this.color=!1,this.key=null},n.Z0=function(t){this.size=0,this.K0=new n.Y0(this),this.K0.color=!1,this.root=this.K0,this.root.parent=this.K0,this.compare=t||this.Q0},n.Z0.prototype.Q0=function(t,s){return t<s?-1:s<t?1:0},n.Z0.prototype.clone=function(){var t=new n.Z0(this.compare);return t.td(this),t},n.Z0.prototype.clear=function(){this.size=0,this.K0=new n.Y0(this),this.K0.color=!1,this.root=this.K0,this.root.parent=this.K0},n.Z0.prototype.ed=function(t){var s=t.right;t.right=s.left,s.left!=this.K0&&(s.left.parent=t),s.parent=t.parent,t.parent==this.K0?this.root=s:t==t.parent.left?t.parent.left=s:t.parent.right=s,(s.left=t).parent=s},n.Z0.prototype.hd=function(t){var s=t.left;t.left=s.right,s.right!=this.K0&&(s.right.parent=t),s.parent=t.parent,t.parent==this.K0?this.root=s:t==t.parent.right?t.parent.right=s:t.parent.left=s,(s.right=t).parent=s},n.Z0.prototype.rd=function(t){if(this.contains(t))this.nd(t).key=t;else{for(var s=new n.Y0(this),i=(s.key=t,this.K0),e=this.root;e!=this.K0;)i=e,e=this.compare(s.key,e.key)<0?e.left:e.right;(s.parent=i)==this.K0?this.root=s:this.compare(s.key,i.key)<0?i.left=s:i.right=s,s.left=this.K0,s.right=this.K0,s.color=!0,this.od(s),this.size++}},n.Z0.prototype.od=function(t){for(;t!=this.K0&&t!=this.root&&1==t.parent.color;){var s;t.parent==t.parent.parent.left?1==(s=t.parent.parent.right).color?(t.parent.color=!1,s.color=!1,t.parent.parent.color=!0,t=t.parent.parent):(t==t.parent.right&&(t=t.parent,this.ed(t)),t.parent.color=!1,t.parent.parent.color=!0,t.parent.parent!=this.K0&&this.hd(t.parent.parent)):1==(s=t.parent.parent.left).color?(t.parent.color=!1,s.color=!1,t.parent.parent.color=!0,t=t.parent.parent):(t==t.parent.left&&(t=t.parent,this.hd(t)),t.parent.color=!1,t.parent.parent.color=!0,t.parent.parent!=this.K0&&this.ed(t.parent.parent))}this.root.color=!1},n.Z0.prototype.ud=function(t){var s=t.left==this.K0||t.right==this.K0?t:this.fd(t),i=s.left!=this.K0?s.left:s.right;i.parent=s.parent,s.parent==this.K0?this.root=i:s==s.parent.left?s.parent.left=i:s.parent.right=i,s!=t&&(t.key=s.key),0==s.color&&this.dd(i),this.size--},n.Z0.prototype.dd=function(t){for(;t!=this.root&&0==t.color;){var s;t=t==t.parent.left?(1==(s=t.parent.right).color&&(s.color=!1,t.parent.color=!0,this.ed(t.parent),s=t.parent.right),0==s.left.color&&0==s.right.color?(s.color=!0,t.parent):(0==s.right.color&&(s.left.color=!1,s.color=!0,this.hd(s),s=t.parent.right),s.color=t.parent.color,t.parent.color=!1,s.right.color=!1,this.ed(t.parent),this.root)):(1==(s=t.parent.left).color&&(s.color=!1,t.parent.color=!0,this.hd(t.parent),s=t.parent.left),0==s.right.color&&0==s.left.color?(s.color=!0,t.parent):(0==s.left.color&&(s.right.color=!1,s.color=!0,this.ed(s),s=t.parent.left),s.color=t.parent.color,t.parent.color=!1,s.left.color=!1,this.hd(t.parent),this.root))}t.color=!1},n.Z0.prototype.remove=function(t){var s;return(t=this.nd(t))!=this.K0?(s=t.key,this.ud(t),s):null},n.Z0.prototype.md=function(t,s){this.remove(s)},n.Z0.prototype.min=function(t){for(;t.left!=this.K0;)t=t.left;return t},n.Z0.prototype.max=function(t){for(;t.right!=this.K0;)t=t.right;return t},n.Z0.prototype.fd=function(t){if(t.right!=this.K0)return this.min(t.right);for(var s=t.parent;s!=this.K0&&t==s.right;)s=(t=s).parent;return s},n.Z0.prototype.gd=function(t){if(t.left!=this.K0)return this.max(t.left);for(var s=t.parent;s!=this.K0&&t==s.left;)s=(t=s).parent;return s},n.Z0.prototype.yd=function(t){if(0<this.size){var s=this.nd(t);if(s==this.K0)return null;if(s.right!=this.K0)return this.min(s.right).key;for(var i=s.parent;i!=this.K0&&s==i.right;)i=(s=i).parent;return i!=this.K0?i.key:null}return null},n.Z0.prototype.Sd=function(t){if(0<this.size){var s=this.nd(t);if(s==this.K0)return null;if(s.left!=this.K0)return this.max(s.left).key;for(var i=s.parent;i!=this.K0&&s==i.left;)i=(s=i).parent;return i!=this.K0?i.key:null}return null},n.Z0.prototype.wd=function(){return this.min(this.root).key},n.Z0.prototype.bd=function(){return this.max(this.root).key},n.Z0.prototype.nd=function(t){for(var s=this.root;s!=this.K0&&0!=this.compare(s.key,t);)s=this.compare(t,s.key)<0?s.left:s.right;return s},n.Z0.prototype.contains=function(t){return null!=this.nd(t).key},n.Z0.prototype.getValues=function(){var s=[];return this.forEach(function(t){s.push(t)}),s},n.Z0.prototype.td=function(t){if("array"==n.typeOf(t))for(var s=0;s<t.length;s++)this.rd(t[s]);else if("function"==n.typeOf(t.forEach))t.forEach(this.rd,this);else if("function"==n.typeOf(t.getValues))for(var i=t.getValues(),s=0;s<i.length;s++)this.rd(i[s]);else if("object"==n.typeOf(t))for(var e in t)this.rd(t[e])},n.Z0.prototype.Md=function(t){if("array"==n.typeOf(t))for(var s=0;s<t.length;s++)this.remove(t[s]);else if("function"==n.typeOf(t.forEach))t.forEach(this.md,this);else if("function"==n.typeOf(t.getValues))for(var i=t.getValues(),s=0;s<i.length;s++)this.remove(i[s]);else if("object"==n.typeOf(t))for(var e in t)this.remove(t[e])},n.Z0.prototype.vd=function(t){if("array"==n.typeOf(t)){for(var s=0;s<t.length;s++)if(!this.contains(t[s]))return!1;return!0}if("function"==n.typeOf(t.forEach))return t.every(this.contains,this);if("function"==n.typeOf(t.getValues)){for(var i=t.getValues(),s=0;s<i.length;s++)if(!this.contains(i[s]))return!1;return!0}if("object"==n.typeOf(t)){for(var e in t)if(!this.contains(t[e]))return!1;return!0}},n.Z0.prototype.range=function(t,s){var i=[];return this.Td(function(t){i.push(t)},t,s),i},n.Z0.prototype.xd=function(t,s){if(!this.Gd())for(var i=this.min(this.root);i!=this.K0;){if(t.call(s,i.key,this))return;i=this.fd(i)}},n.Z0.prototype._d=function(t,s,i){if(!this.Gd())for(var e=this.nd(s);e!=this.K0;){if(t.call(i,e.key,this))return;e=this.fd(e)}},n.Z0.prototype.Id=function(t,s,i){if(!this.Gd())for(var e=this.min(this.root),h=this.nd(s);e!=h;){if(t.call(i,e.key,this))return;e=this.fd(e)}},n.Z0.prototype.Td=function(t,s,i,e){if(!this.Gd())for(var h=this.nd(s),r=this.nd(i);h!=r;){if(t.call(e,h.key,this))return;h=this.fd(h)}},n.Z0.prototype.Cd=function(t,s){if(!this.Gd())for(var i=this.max(this.root);i!=this.K0;){if(t.call(s,i.key,this))return;i=this.gd(i)}},n.Z0.prototype.forEach=function(t,s){if(!this.Gd())for(var i=this.min(this.root);i!=this.K0;i=this.fd(i))t.call(s,i.key,i.key,this)},n.Z0.prototype.some=function(t,s){if(!this.Gd())for(var i=this.min(this.root);i!=this.K0;i=this.fd(i))if(t.call(s,i.key,i.key,this))return!0;return!1},n.Z0.prototype.every=function(t,s){if(this.Gd())return!1;for(var i=this.min(this.root);i!=this.K0;i=this.fd(i))if(!t.call(s,i.key,i.key,this))return!1;return!0},n.Z0.prototype.map=function(t,s){var i=[];if(!this.Gd())for(var e=this.min(this.root);e!=this.K0;e=this.fd(e))i.push(t.call(s,e.key,e.key,this));return i},n.Z0.prototype.filter=function(t,s){var i=[];if(!this.Gd())for(var e=this.min(this.root);e!=this.K0;e=this.fd(e))t.call(s,e.key,e.key,this)&&i.push(e.key);return i},n.Z0.prototype.getCount=function(){return this.size},n.Z0.prototype.Gd=function(){return 0==this.size},n.Z0.prototype.isSubsetOf=function(t){var s=n.getCount(t);if(this.getCount()>s)return!1;var i=0;if(this.Gd())return!0;for(var e=this.min(this.root);e!=this.K0;e=this.fd(e))n.contains.call(t,t,e.key)&&i++;return i==this.getCount()},n.Z0.prototype.intersection=function(t){var s=new n.Z0(this.compare);if(!this.Gd())for(var i=this.min(this.root);i!=this.K0;i=this.fd(i))t.contains.call(t,i.key,i.key,this)&&s.rd(i.key);return s},fs.Z0=class extends fs.Mr{constructor(t){super(),this.Pd=new n.Z0(t),this.Rd=!1,this.Ad=new Set,this.Ed=new Set}Fc(t){this.Rd?this.Pd.contains(t)?this.Ed.delete(t):this.Ad.add(t):this.Pd.rd(t)}V0(t){this.Rd?this.Pd.contains(t)?this.Ed.add(t):this.Ad.delete(t):this.Pd.remove(t)}ni(t){return this.Rd?!!this.Ad.has(t)||!this.Ed.has(t)&&this.Pd.contains(t):this.Pd.contains(t)}Tc(){this.Pd.clear(),this.Ad.clear(),this.Ed.clear()}toArray(){if(this.Rd)throw new Error("cannot be used in queueing mode");return this.Pd.getValues()}Ic(){return this.Pd.getCount()+this.Ad.size-this.Ed.size}xc(){return 0===this.Ic()}Fd(){if(this.xc())throw new Error("empty set");if(this.Rd)throw new Error("cannot be used in queueing mode");const t=this.Pd,s=t.min(t.root);return s.key}Dd(){if(this.xc())throw new Error("empty set");if(this.Rd)throw new Error("cannot be used in queueing mode");const t=this.Fd();return this.V0(t),t}kd(t){if(this.Rd!==(t=!!t)&&!(this.Rd=t)){for(const s of this.Ed)this.Pd.remove(s);this.Ed.clear();for(const i of this.Ad)this.Pd.rd(i);this.Ad.clear()}}Od(t){this.Pd.forEach(t)}*values(){if(!this.xc()){const s=this.Pd;for(let t=s.min(s.root);t!=s.K0;t=s.fd(t))yield t.key}}[Symbol.iterator](){return this.values()}}}{const ds=self.Vs;ds.Ld=class{constructor(t=ds.hardwareConcurrency){this.Nd=t,this.Bd=[],this.Wd=0}Fc(i){return new Promise((t,s)=>{this.Bd.push({qf:i,resolve:t,reject:s}),this.Vd()})}jd(i){for(let t=0,s=this.Bd.length;t<s;++t)if(this.Bd[t].qf===i)return t;return-1}Hd(t,s){const i=this.jd(t);if(-1===i)throw new Error("cannot find promise to resolve");this.Bd[i].resolve(s),this.Bd.splice(i,1)}Ud(t,s){const i=this.jd(t);if(-1===i)throw new Error("cannot find promise to reject");this.Bd[i].reject(s),this.Bd.splice(i,1)}async Vd(){if(this.Bd.length&&!(this.Wd>=this.Nd)){this.Wd++;const s=this.Bd.shift();try{const t=await s.qf();s.resolve(t)}catch(t){s.reject(t)}this.Wd--,this.Vd()}}static async zd(t,s){let i=[],e=!1,h=[];for(;t--;)h.push((async()=>{let t;for(;t=s.pop();){if(e)return;try{i.push(await t())}catch(t){throw e=!0,t}}})());return await Promise.all(h),i}}}{const ps=self.Vs;ps.Jd=class{constructor(t,s,i){this.G0=t,this.qd=s,this.Xd=i||2*s,this.Yd=-1,this.$d=-1/0,this.Kd=()=>this.Zd(),this.Qd=!1,this.t1=!1,this.s1=null}i1(t){this.t1=!!t}e1(){return void 0!==ps.Battery&&ps.Battery.IsOnBatteryPower()?this.Xd:this.qd}h1(...e){if(-1===this.Yd){this.s1=e;let t=ps.T0(),s=t-this.$d,i=this.e1();i<=s&&this.t1?(this.$d=t,this.n1()):this.Yd=self.setTimeout(this.Kd,Math.max(i-s,4))}}n1(){this.Qd=!0;const t=this.s1;this.s1=null,t?this.G0(...t):this.G0(),this.Qd=!1}P0(){this.Qd||(this.o1(),this.s1=null,this.$d=ps.T0())}Zd(){this.Yd=-1,this.$d=ps.T0(),this.n1()}o1(){-1!==this.Yd&&(self.clearTimeout(this.Yd),this.Yd=-1)}Gr(){this.o1(),this.G0=null,this.s1=null,this.Kd=null}}}{const ms=self.Vs;ms.a1=class{constructor(){this.l1=new Map,this.u1=!1,this.c1=null,this.f1=null,this.d1=null,this.m1=null}S1(t){this.u1=!!t}w1(){return this.u1}b1(t){this.c1=t}M1(t){if(this.c1)return this.c1(t);throw new Error("no get base size callback set")}v1(t){this.f1=t}T1(t,s,i,e,h,r){if(this.f1)return this.f1(t,s,i,e,h,r);throw new Error("no raster at size callback set")}G1(t){this.d1=t}_1(t){if(!this.d1)throw new Error("no release result callback set");this.d1(t)}I1(t){this.m1=t}C1(){if(!this.m1)throw new Error("no redraw callback set");this.m1()}P1(t){let s=this.l1.get(t);return s||(s=ms.Tr(ms.R1,this,t),this.l1.set(t,s)),s.A1(),s}E1(t){this.l1.delete(t.F1())}D1(){for(const t of this.l1.values())t.O1(),t.L1()}}}{const gs=self.Vs;gs.R1=class{constructor(t,s){this.N1=t,this.B1=s,this.W1=0,this.V1=0,this.j1=0,this.H1=this.N1.M1(s).then(t=>{this.N1&&(this.V1=t[0],this.j1=t[1],this.N1.C1())}).catch(t=>{console.error("[SVG] Error loading SVG: ",t),this.U1=!0,this.N1&&this.N1.C1()}),this.z1=0,this.J1=0,this.q1=0,this.X1=0,this.Y1=!1,this.K1=null,this.Z1=!1,this.U1=!1}Gr(){if(this.W1<=0)throw new Error("already released");this.W1--,0===this.W1&&this.Q1()}O1(){this.K1&&(this.N1._1(this.K1),this.K1=null)}Q1(){this.O1(),this.N1.E1(this),this.N1=null}F1(){return this.B1}A1(){this.W1++}tp(){return 0<this.W1}sp(){return this.K1}L1(){this.Z1=!0}async ep(e,h,r){if(0!==h&&0!==r&&!this.U1&&!this.Y1){let t=gs.Zr(Math.ceil(h)),s=gs.Zr(Math.ceil(r)),i=Math.max(t,s);if(4096<i){const n=4096/i;h*=n,r*=n,t=Math.min(Math.ceil(t*n),4096),s=Math.min(Math.ceil(s*n),4096)}if(h<t&&r<s){const o=h/r,a=t/s;r=o<a?(h=s*o,s):(h=t)/o}if(this.N1.w1()&&(t=Math.ceil(h),s=Math.ceil(r)),!(t<=this.z1&&s<=this.J1)||this.Z1){this.Y1=!0,this.z1=t,this.J1=s;const l=await this.N1.T1(this.B1,e,this.z1,this.J1,h,r);this.N1&&(this.O1(),this.K1=l,this.q1=h,this.X1=r,this.Y1=!1,this.Z1=!1,this.N1.C1())}}}hp(){return this.H1}rp(){return this.V1}np(){return this.j1}op(){return this.q1}lp(){return this.X1}up(){return this.U1}}}{let s=function(t){return bs.get(t)};s;const c=self.Vs,ys=(c.cp="\ufeff",new Set("0123456789")),Ss=(c.fp=function(t){return ys.has(t)},new Set(" \t\n\r\u2028\u2029"));c.pp=function(t){return Ss.has(t)},c.mp=function(t){return[...t].filter(t=>!c.pp(t)).join("")},c.gp=function(t){for(const s of t)if(!c.pp(s))return!1;return!0},c.yp=function(t){for(const s of t)if(!c.pp(s))return!1;return!0},c.Sp=function(t){return 1===t.length&&t.charCodeAt(0)<32},c.bp=function(t){return[...t].filter(t=>!c.Sp(t)).join("")};let i=null;try{i=new RegExp("\\p{P}(?<=[\\u3000-\\u303F\\uFF00-\\uFFEF])","u")}catch(t){console.warn("Unable to detect CJK punctuation: ",t)}c.Mp=function(t){return!c.pp(t)&&i&&i.test(t)};const ws=new Set("0123456789.+-e"),bs=(c.vp=function(s){if(!(s=s.trim()).length)return!1;let t=s.charAt(0);if("-"!==t&&!ys.has(t))return!1;for(let t of s)if(!ws.has(t))return!1;return!0},c.Tp=function(s){let i=s.length;for(;0<i;){let t=s.charAt(i-1);if(!c.fp(t))break;--i}return s.substr(0,i)},c.xp=function(t){let s=c.Tp(t),i=t.substr(s.length);return s+(i?(parseInt(i,10)+1).toString():"2")},new Map([["&","&amp;"],["<","&lt;"],[">","&gt;"],['"',"&quot;"],["'","&#39;"]])),Ms=/[&<>"']/g,vs=(c.Gp=function(t){return t.replace(Ms,s)},c._p=function(t){let s=c.Ip(t,"\\","\\\\");return s=c.Ip(s,'"','\\"'),s=c.Ip(s,"\t","\\t"),s=c.Ip(s,"\r",""),c.Ip(s,"\n","\\n")},c.Cp=function(t){let s=c.Ip(t,"&","&amp;");return s=c.Ip(s,"<","&lt;"),s=c.Ip(s,">","&gt;"),c.Ip(s,'"',"&quot;")},/[-[\]{}()*+?.,\\^$|#\s]/g),Ts=(c.ge=function(t){return t.replace(vs,"\\$&")},c.Pp=function(t,s){let i=0;for(const e of t)e===s&&++i;return i},c.Rp=function(t,s,i=!1){if(!s)return[];i||(t=t.toLowerCase(),s=s.toLowerCase());let e=s.length,h=0,r,n=[];for(;-1<(r=t.indexOf(s,h));)n.push(r),h=r+e;return n},c.Ip=function(t,s,i){return t.replaceAll(s,()=>i)},c.Ap=function(t,s,i){return t.replace(new RegExp(c.ge(s),"gi"),()=>i)},c.Ep=function(t,s){"string"==typeof s?t.textContent=s:s.Fp()?t.textContent=s.toString():(t.innerHTML=s.Dp(),s instanceof c.Nh&&s.kp(t))},c.Op=function(t,s){return t instanceof c.HtmlString||t instanceof c.Nh?t.equals(s):s instanceof c.HtmlString||s instanceof c.Nh?s.equals(t):t===s},c.Lp=function(i,...e){let h=i;for(let t=0,s=e.length;t<s;++t){const r=`{${t}}`;if(!i.includes(r))throw new Error(`missing placeholder '${r}' in string substitution`);h=h.replace(r,e[t].toString())}return h},c.Np=function(i,...e){let h=i,r=-1,n=-1;for(let t=0,s=e.length;t<s;++t){const o=`{${t}}`;i.includes(o)?(n=t,h=h.replace(o,e[t].toString())):-1===r&&(r=t)}if(0<=r&&0<=n&&r<n)throw new Error(`missing placeholder '${r}' in string substitution`);return h},c.Bp=function(t,i){let e=t;for(let[t,s]of Object.entries(i))e=e.replaceAll(t,s.toString());return e},c.Wp=function(t,s){return s<t?1:t<s?-1:0},c.Vp=function(t,s){let i=t.toLowerCase(),e=s.toLowerCase();return e<i?1:i<e?-1:0},new self.Intl.Segmenter),xs=(c.jp=function(t){const s=[];for(const i of Ts.segment(t))s.push(i.segment);return s},c.Hp=function*(t){for(const s of Ts.segment(t))yield s.segment},c.Up=function(t){let s=0;for(const i of Ts.segment(t))++s;return s},1073741824),Gs=1024*xs,_s={zp:!(c.Jp=function(s,t){let i="common."+(t?"dataRates":"dataSizes")+".",e=self.langSub;if(s<1024)return e(i+"bytes",s);if(s<1048576){let t=s/1024;return t=t<10?Math.round(10*t)/10:Math.round(t),e(i+"kilobytes",t)}if(s<xs){let t=s/1048576;return t=t<10?Math.round(10*t)/10:Math.round(t),e(i+"megabytes",t)}if(s<Gs){let t=s/xs;return t=t<10?Math.round(10*t)/10:Math.round(t),e(i+"gigabytes",t)}{let t=s/Gs;return t=t<10?Math.round(10*t)/10:Math.round(t),e(i+"terabytes",t)}}),qp:!0,Xp:!0,Yp:!0,$p:!0};c.Kp=function(t,s){s=Object.assign({},_s,s),c.Lang.PushContext("common.time");const i=[],e=self.lang,h=self.langPluralSub;if(s.qp){const n=Math.floor(t/86400);0<n&&(t-=24*n*3600,i.push(h(".days",null,n)))}if(s.Xp){const o=Math.floor(t/3600);(0<o||i.length)&&(t-=3600*o,i.push(h(".hours",null,o)))}if(s.Yp){const a=Math.floor(t/60);(0<a||i.length||!s.$p)&&(t-=60*a,i.push(h(".minutes",null,a)))}if(s.$p){const l=Math.floor(t%60);i.push(h(".seconds",null,l))}const r=(s.zp?e(".approx-prefix"):"")+i.join(e(".separator"));return c.Lang.PopContext(),r},c.Zp=function(t,s){let i=t<0?"-":"",e=(t=Math.abs(t)).toString(),h=s-e.length;for(let t=0;t<h;++t)i+="0";return i+e},c.Qp=function(t){return t.toLowerCase().replace(/\b\w/g,t=>t.toUpperCase())},c.tm=function(t,s){let i=t.split(".").map(t=>t.trim()),e=s.split(".").map(t=>t.trim());c.eo(i,4,"0"),c.eo(e,4,"0"),i=i.map(t=>parseInt(t,10)),e=e.map(t=>parseInt(t,10));for(let t=0;t<4;++t){const h=i[t]-e[t];if(0!=h)return h<0?-1:1}return 0},c.hm=function(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,t=>{const s=Math.floor(16*Math.random()),i="x"===t?s:3&s|8;return i.toString(16)})},c.rm=function(i,e){if(i.length!==e.length)throw new Error("strings must be same length");let h=0;for(let t=0,s=i.length;t<s;++t)i.charAt(t)!==e.charAt(t)&&++h;return h},c.nm=function(t,s){if(0===t.length)return s.length;if(0===s.length)return t.length;let i,e,h,r,n,o;for(s.length<t.length&&(i=t,t=s,s=i),o=Array(t.length+1),e=0;e<=t.length;e++)o[e]=e;for(e=1;e<=s.length;e++){for(r=e,h=1;h<=t.length;h++)n=s[e-1]===t[h-1]?o[h-1]:Math.min(o[h-1]+1,Math.min(r+1,o[h]+1)),o[h-1]=r,r=n;o[t.length]=r}return o[t.length]}}{let s=function(t,i,e){const h=o.get(e);if(!h)return"class"===e?i?"</span>":`<span class="bbclass${u++}">`:t;if("string"==typeof h){if("a"===h&&0===a.length||"abbr"===h&&0===l.length)return t;if("a"!==h||i){if("abbr"!==h||i)return"<"+i+h+">";{const r=parseInt(e.substring(3),10)-1;if(r<0||r>=l.length)throw new Error("invalid bbcode tip substitution");let t=l[r],s="";if("string"==typeof t?s=t:"function"==typeof t&&(s=t()),"string"!=typeof s)throw new TypeError("invalid bbcode tip");return`<abbr title="${f.Ip(s,'"',"&quot;")}">`}}{const s=parseInt(e.substring(1),10)-1;if(s<0||s>=a.length)throw new Error("invalid bbcode link substitution");const n=a[s];if("string"==typeof n)return`<a href="${a[s]}">`;if("function"==typeof n)return`<a class="bblink${s}">`;throw new TypeError("invalid bbcode link action")}}if(Array.isArray(h)){let t=h[0],s=h[1];return i?"</"+t+">":`<${t} class="${s}">`}},f=(s,self.Vs),o=new Map([["b","strong"],["i","em"],["s","s"],["u","u"],["sub","sub"],["sup","sup"],["small","small"],["mark","mark"],["code","code"],["a1","a"],["a2","a"],["a3","a"],["a4","a"],["a5","a"],["a6","a"],["a7","a"],["a8","a"],["a9","a"],["tip1","abbr"],["tip2","abbr"],["tip3","abbr"],["tip4","abbr"],["tip5","abbr"],["tip6","abbr"],["tip7","abbr"],["tip8","abbr"],["tip9","abbr"],["bad",["span","bbCodeBad"]],["good",["span","bbCodeGood"]],["info",["span","bbCodeInfo"]],["h1",["span","bbCodeH1"]],["h2",["span","bbCodeH2"]],["h3",["span","bbCodeH3"]],["h4",["span","bbCodeH4"]],["item",["span","bbCodeItem"]]]),d=new Set(["icon"]),i=/\[(\/?)([a-zA-Z0-9]+)\]/g,p=/\[(\/?)([^\[\n]*?)\]/g,a=null,l=null,u=0,e=/\n/g;f.Nh=class{constructor(t,s){if(this.lm=s&&s.um?t:f.Gp(t),this.fm="",this.pm=!1,this.gm=[],this.ym=[],s){if(this.pm=!!s.convertLineBreaks,s.links){if(9<s.links.length)throw new Error("too many links");this.gm=s.links}if(s.tips){if(9<s.tips.length)throw new Error("too many tips");this.ym=s.tips}}this.Sm=this.lm.includes("["),this.wm=this.pm&&this.lm.includes("\n"),this.Mm=!this.Sm&&!this.wm&&!this.lm.includes("&"),this.vm=!1,this.Tm=[]}toString(){return this.lm}valueOf(){return this.lm}Fp(){return this.Mm}xm(){return this.Sm?this.lm.replace(i,""):this.lm}Dp(){if(this.Mm)return this.lm;if(!this.fm&&this.lm){let t=this.lm;this.Sm&&(u=0,a=this.gm,l=this.ym,t=t.replace(i,s),a=null,l=null),this.wm&&(t=t.replace(e,"<br>")),this.fm=t}return this.fm}kp(i){if(this.gm.length)for(let t=0,s=this.gm.length;t<s;++t){const e=this.gm[t];if("function"==typeof e){const h=i.querySelector(".bblink"+t);if(!h)throw new Error("unable to attach BBString link handler");h.onclick=e}}}equals(t){return t instanceof f.HtmlString?this.Dp()===t.Dp():t instanceof f.Nh?this.lm===t.lm:this.lm===t}Gm(){if(!this.vm){let e=[],t=this.lm,h=[],s=p.lastIndex=0,i;for(;null!==(i=p.exec(t));){const r=i.index;if(!(0<r&&"\\"===t.charAt(r-1))){const n=i[0],o=i[1],a=i[2],l=t.substring(s,r);if(s=r+n.length,l&&e.push({text:l,_m:h.slice(0)}),a)if(o){const u=a.toLowerCase();for(let t=h.length-1;0<=t;--t)if(h[t].tag===u){h.splice(t,1);break}}else{let t=a,s=null,i=a.indexOf("=");if(-1!==i?(t=a.substring(0,i).toLowerCase(),s=a.substring(i+1)):t=t.toLowerCase(),d.has(t)){if("icon"!==t)throw new Error("unknown self-closing tag "+t);e.push({icon:s,_m:h.slice(0)})}else h.push({tag:t,param:s})}}}s<t.length&&e.push({text:t.substring(s),_m:h.slice(0)});for(const c of e)c.text&&(c.text=this.Im(c.text));this.Tm=e.map(t=>t.icon?f.Tr(f.Cm,{icon:t.icon,_m:t._m}):f.Tr(f.Pm,{Rm:f.jp(t.text),_m:t._m})),this.vm=!0}return this.Tm}Im(t){return t=f.Ip(t,"\\[","["),f.Ip(t,"\\\\","\\")}static Am(t){return f.Tr(f.Nh,t,{um:!0}).xm()}static Em(t){return t.replace(p,"")}}}{let l=function(t){return""!==t&&""!==t&&S.pp(t)},a=function(t){return Is.has(t)},u=function(t){return S.Mp(t)&&!a(t)},c=function(t){for(;0<t.length&&l(t.at(-1));)t.pop()},y=function(t){return"\n"===t||"\r\n"===t};l,a,u,c,y;const S=self.Vs,Is=new Set("");S.Fm=class{constructor(){this.Dm=[],this.km=null}Om(){return this.Dm}Lm(){return this.Dm.length}Nm(t){this.km=t}Bm(t,s){let i=0,e=0,h=0,r=0,n=0;for(const o of t){if(-1===o.Wm()){const a=s(o);o.Vm(a.height),o.jm(a.fontBoundingBoxAscent||0),o.Hm(a.fontBoundingBoxDescent||0),o.Um(a.zm||0),o.Jm()?o.qm(a.width):o.Xm()&&o.Ym(this.km)}i+=o.Wm(),e=Math.max(e,o.$m()),h=Math.max(h,o.Km()),r=Math.max(r,o.Zm()),n=Math.max(n,o.Qm())}return{width:i,height:e,fontBoundingBoxAscent:h,fontBoundingBoxDescent:r,zm:n}}tg(t,s,i,e,h,r){this.Dm.push(S.Tr(S.Fm.sg,{ig:t,width:s,height:i,fontBoundingBoxAscent:e,fontBoundingBoxDescent:h,zm:r}))}Fm(s,r,n,i,o){if("string"==typeof s&&(s=[S.Tr(S.Pm,{Rm:S.jp(s)})]),S.Kn(this.Dm),!(!s.length||1===s.length&&s[0].Jm()&&s[0].xc()||n<2)){if(1===s.length){const a=s[0];if(a.Jm()&&a.eg()<=100&&!a.hg()){let{width:t,height:s,fontBoundingBoxAscent:i,fontBoundingBoxDescent:e,zm:h}=r(a);if(t+=o,a.qm(t),a.Vm(s),a.jm(i||0),a.Hm(e||0),a.Um(h||0),t<=n)return void this.tg([a],t,s,i,e,h)}}let t;t="word"===i?this.rg(s):"cjk"===i?this.ng(s):this.og(s),this.ag(t,r,n,o)}}rg(t){let s=[],i=[],e=!1;for(const h of t){const r=h.lg();if(h.Xm())0<i.length&&s.push(i),s.push([h]),i=[];else for(const n of h.ug())if(y(n))0<i.length&&s.push(i),s.push([S.Tr(S.Pm,{Rm:["\n"],_m:r})]),i=[];else if(0===i.length)i.push(S.Tr(S.Pm,{Rm:[n],_m:r})),e=l(n);else{const o=l(n);if(o===e){const a=i.at(-1);a.lg()===r?a.fg(n):i.push(S.Tr(S.Pm,{Rm:[n],_m:r}))}else s.push(i),i=[S.Tr(S.Pm,{Rm:[n],_m:r})],e=o}}return 0<i.length&&s.push(i),s}ng(t){let s=[],i=[],e=!1;for(const h of t){const r=h.lg();if(h.Xm())0<i.length&&s.push(i),s.push([h]),i=[];else for(const n of h.ug())if(y(n))0<i.length&&s.push(i),s.push([S.Tr(S.Pm,{Rm:["\n"],_m:r})]),i=[];else{if(0===i.length)i.push(S.Tr(S.Pm,{Rm:[n],_m:r}));else if(e||u(n)){const o=i.at(-1);o.lg()===r?o.fg(n):i.push(S.Tr(S.Pm,{Rm:[n],_m:r}))}else s.push(i),i=[S.Tr(S.Pm,{Rm:[n],_m:r})];e=a(n)}}return 0<i.length&&s.push(i),s}og(t){const s=[];for(const i of t)if(i.Jm()){const e=i.ug();S.nr(s,e.map(t=>[S.Tr(S.Pm,{Rm:[t],_m:i.lg()})]))}else s.push([i]);return s}dg(t){return t.map(t=>t.pg())}mg(s,i){let t=s.length?s.at(-1):null,e=0;t&&t.Jm()&&i[0].Jm()&&i[0].lg()===t.lg()&&(t.gg(i[0].ug()),e=1);for(let t=i.length;e<t;++e){const h=i[e];s.push(h.pg())}}ag(t,s,i,e){let h=[],r=0,n=0,o=0,a=0,l=0;for(const u of t)if(1===u.length&&u[0].Jm()&&1===u[0].eg()&&y(u[0].ug()[0])){if(0===n){const c=S.Tr(S.Pm,{Rm:[" "],_m:u[0].lg()}),f=s(c);n=f.height,o=f.fontBoundingBoxAscent||0,a=f.fontBoundingBoxDescent||0,l=f.zm||0}this.tg(h,r,n,o,a,l),h=[],r=0,n=0,o=0,a=0,l=0}else{const d=this.dg(h),p=(this.mg(d,u),this.Bm(d,s)),m=p.width;if(i<=m)if(0<h.length&&this.tg(h,r,n,o,a,l),h=[],u[0].Jm()&&S.yp(u[0].ug()))r=0,n=0,o=0,a=0,l=0;else{this.mg(h,u);const g=this.Bm(h,s);r=g.width,n=g.height,o=g.fontBoundingBoxAscent,a=g.fontBoundingBoxDescent,l=g.zm}else h=d,r=m,n=p.height,o=p.fontBoundingBoxAscent,a=p.fontBoundingBoxDescent,l=p.zm}0<h.length&&this.tg(h,r,n,o,a,l),this.yg(s,e)}yg(s,i){for(const e of this.Dm){const h=e.Sg();if(h.length){let t=h.at(-1);if(t.Jm()){const r=t.ug(),n=r.slice(0);if(c(n),0===n.length)e.wg(-t.Wm()),h.pop();else if(n.length<r.length){t.bg(n);const o=s(t).width,a=t.Wm()-o;t.qm(o),e.wg(-a)}0!==i&&0<h.length&&((t=h.at(-1)).wg(i),e.wg(i))}}}}Tc(){S.Kn(this.Dm)}Mg(){return this.Dm.reduce((t,s)=>Math.max(t,s.Wm()),0)}vg(){return this.Dm.reduce((t,s)=>t+s.$m(),0)}}}{const Cs=self.Vs;Cs.Fm.sg=class{constructor(t){this.Tm=t.ig||[],this.Tg=t.width||-1,this.xg=t.height||-1,this.Gg=t.fontBoundingBoxAscent||-1,this._g=t.fontBoundingBoxDescent||-1,this.Ig=t.zm||-1,this.Cg=0,this.Pg=0}ig(){return this.Tm.values()}*Rg(){const s=this.Tm;for(let t=s.length-1;0<=t;--t)yield s[t]}Sg(){return this.Tm}wg(t){this.Tg+=t}Wm(){return this.Tg}$m(){return this.xg}Ag(){return this.Gg}Zm(){return this._g}Qm(){return this.Ig}Eg(t){this.Cg=t}Fg(){return this.Cg}Dg(t){this.Pg=t}kg(){return this.Pg}}}{const Ps=self.Vs;Ps.Og=class{constructor(t){this.Lg=t._m||[],this.Tg=t.width||-1,this.xg=t.height||-1,this.Gg=t.fontBoundingBoxAscent||-1,this._g=t.fontBoundingBoxDescent||-1,this.Ig=t.zm||-1,this.Cg=0,this.Pg=0}Jm(){return!1}Xm(){return!1}lg(){return this.Lg}Ng(s){const i=this.Lg;for(let t=i.length-1;0<=t;--t){const e=i[t];if(e.tag===s)return e}return null}Bg(t){return!!this.Ng(t)}Wg(){const t=new Map;for(const s of this.Lg)t.set(s.tag,s.param);return t}wg(t){this.Tg+=t}qm(t){this.Tg=t}Wm(){return this.Tg}Vm(t){this.xg=t}$m(){return this.xg}jm(t){this.Gg=t}Km(){return this.Gg}Hm(t){this._g=t}Zm(){return this._g}Um(t){this.Ig=t}Qm(){return this.Ig}Eg(t){this.Cg=t}Fg(){return this.Cg}Dg(t){this.Pg=t}kg(){return this.Pg}}}{const Rs=self.Vs;Rs.Pm=class extends Rs.Og{constructor(t){super(t),this.Vg=t.Rm}Jm(){return!0}gg(t){Rs.nr(this.Vg,t),this.Tg=-1,this.xg=-1,this.Gg=-1,this._g=-1,this.Ig=-1}fg(t){this.Vg.push(t)}pg(){return Rs.Tr(Rs.Pm,{Rm:this.Vg.slice(0),_m:this.Lg,width:this.Tg,height:this.xg,fontBoundingBoxAscent:this.Gg,fontBoundingBoxDescent:this._g,zm:this.Ig})}ug(){return this.Vg}bg(t){this.Vg=t}eg(){return this.Vg.length}xc(){return 0===this.Vg.length}hg(){return this.Vg.includes("\n")}}}{const As=self.Vs;As.Cm=class extends As.Og{constructor(t){super(t),this.jg=t.icon}Xm(){return!0}Hg(){return this.jg}pg(){return As.Tr(As.Cm,{icon:this.jg,_m:this.Lg,width:this.Tg,height:this.xg,fontBoundingBoxAscent:this.Gg,fontBoundingBoxDescent:this._g,zm:this.Ig})}Ug(t){if(!t)return null;let s=Number(this.jg);return String(s)===this.jg?(s=Math.floor(s),t.zg(s)):t.Jg(this.jg)}Ym(t){const s=this.Ug(t);this.Tg=s?this.xg*s.Wm()/s.$m():0}qg(t){const s=this.Ug(t);return s?s.qg():null}eg(){return 1}}}{const Es=self.Vs;Es.Xg=class{constructor(t){this.Yg=new Map,this.$g=t.Kg,this.Zg=t.Qg}Gr(){for(const t of this.Yg.values())t.Gr();this.Yg.clear()}ty(t){let s=this.Yg.get(t);if(!s){const i=this.$g(t);s=Es.Tr(Es.iy,this,{source:t,ey:i}),this.Yg.set(t,s)}return s}hy(t){return this.Yg.has(t)}ny(t){const s=this.Yg.get(t);s&&s.Gr(),this.Yg.delete(t)}async oy(t){return this.Zg(t)}}}{const Fs=self.Vs;Fs.iy=class{constructor(t,s){this.uy=t,this.my=s.source,this.gy=[],this.yy=new Map,this.Sy=!1,this.wy=!1,this.by=null;const i=s.ey.My;for(let t=0,s=i.length;t<s;++t){const e=i[t],h=Fs.Tr(Fs.Ty,this,{index:t,tag:e.tag,source:e.source,width:e.width,height:e.height});this.gy.push(h),e.tag&&this.yy.set(e.tag.toLowerCase(),h)}}Gr(){for(const t of this.gy)t.Gr();Fs.Kn(this.gy),this.yy.clear(),this.uy=null,this.my=null}xy(){return this.Sy}Gy(){return this.wy}_y(){return this.by||(this.by=this.Iy()),this.by}async Iy(){if(!this.Sy){this.Sy=!0,this.wy=!0;const t=await this.uy.oy(this.my);if(this.uy){const i=t.My;for(let t=0,s=Math.min(i.length,this.gy.length);t<s;++t){const e=i[t].Cy;this.gy[t].Py(e)}this.wy=!1}}}zg(t){return(t=Math.floor(t))<0||t>=this.gy.length?null:this.gy[t]}Jg(t){return this.yy.get(t.toLowerCase())||null}}}{const Ds=self.Vs;Ds.Ty=class{constructor(t,s){this.Ry=t,this.my=s.source||null,this.Ay=s.index,this.Ey=s.tag,this.Tg=s.width,this.xg=s.height,this.Fy=null}Gr(){this.Tg=0,this.xg=0,this.Ry=null}Dy(){return this.my}Wm(){return this.Tg}$m(){return this.xg}Py(t){this.Fy=t}qg(){return this.Fy}}}{let e=function(t,s,i,e){const h=Bs;xh.W(Ls,i,s),xh.W(Ns,t,s),xh.Ot(h,Ls,Ns),xh.normalize(h,h),e.set(h[0],h[1],h[2],xh.kt(t,h))},n=function(t,s,i,e,h,r,n){const o=n.x,a=n.y,l=n.z,u=n.w,c=n.ky,f=n.Oy,d=n.Ly,p=1-c,m=1-f,g=1-d,y=o*t*c+o*e*p+a*s*f+a*h*m+l*i*d+l*r*g;if(u<=y)return!0;const S=o*e*c+o*t*p+a*h*f+a*s*m+l*r*d+l*i*g;return u<S},h=function(t,s,i,e){const h=e.x,r=e.y,n=e.z,o=e.w,a=h*t+r*s+n*i;return o<=a};e,n,h;const ks=self.Vs,Os=self.xs,xh=Os.Es,jh=Os.Fs,Th=Os.Cs,Ls=xh.create(),Ns=xh.create(),Bs=xh.create(),Ws=jh.create(),Vs=Th.create(),js=xh.create(),Hs=xh.create(),Us=xh.create(),zs=xh.create(),Js=xh.create(),qs=xh.create(),Xs=xh.create(),Ys=xh.create(),$s=jh.C(0,0,1,1);ks.Ny={By(t,s,i,e,h,r,n){let o=e[0]*t+e[4]*s+e[8]*i+e[12],a=e[1]*t+e[5]*s+e[9]*i+e[13],l=e[2]*t+e[6]*s+e[10]*i+e[14],u=e[3]*t+e[7]*s+e[11]*i+e[15],c=h[0]*o+h[4]*a+h[8]*l+h[12]*u,f=h[1]*o+h[5]*a+h[9]*l+h[13]*u,d=h[2]*o+h[6]*a+h[10]*l+h[14]*u,p=h[3]*o+h[7]*a+h[11]*l+h[15]*u;return 0!=p&&(f*=p=1/p,d*=p,n[0]=(.5*(c*=p)+.5)*r[2]+r[0],n[1]=(.5*f+.5)*r[3]+r[1],n[2]=.5*(1+d),!0)},Wy(t,s,i,e,h,r,n){const o=Vs,a=Ws;return Th.multiply(o,h,e),null!==Th.R(o,o)&&(a[0]=(t-r[0])/r[2]*2-1,a[1]=(s-r[1])/r[3]*2-1,a[2]=2*i-1,a[3]=1,jh.Vt(a,a,o),0!==a[3])&&(a[3]=1/a[3],n[0]=a[0]*a[3],n[1]=a[1]*a[3],n[2]=a[2]*a[3],!0)},Vy(t,s,i,e,h,r,n){const o=Ls,a=Ns;if(!ks.Ny.Wy(t,s,0,e,h,r,o))return!1;if(!ks.Ny.Wy(t,s,1,e,h,r,a))return!1;let l=Ns,u=(xh.W(l,a,o),Bs),c=(xh.set(u,0,0,1),-i),f=xh.kt(u,l),d=0;if(0===f){const p=xh.kt(u,o)+c;if(0!==p)return!1}else if((d=-(xh.kt(o,u)+c)/f)<0)return!1;return xh.Rt(n,o,l,d),!0}};class Ks{constructor(){this.x=NaN,this.y=NaN,this.z=NaN,this.w=NaN,this.ky=NaN,this.Oy=NaN,this.Ly=NaN}set(t,s,i,e){this.x=t,this.y=s,this.z=i,this.w=e,this.ky=0<t?1:0,this.Oy=0<s?1:0,this.Ly=0<i?1:0}}ks.Ny.jy=class{constructor(){this.Hy=new Ks,this.Uy=new Ks,this.zy=new Ks,this.Jy=new Ks,this.qy=new Ks,this.Xy=new Ks}Yy(t,s){const i=$s;ks.Ny.Wy(0,1,0,t,s,i,js),ks.Ny.Wy(1,1,0,t,s,i,Hs),ks.Ny.Wy(0,0,0,t,s,i,Us),ks.Ny.Wy(1,0,0,t,s,i,zs),ks.Ny.Wy(0,1,1,t,s,i,Js),ks.Ny.Wy(1,1,1,t,s,i,qs),ks.Ny.Wy(0,0,1,t,s,i,Xs),ks.Ny.Wy(1,0,1,t,s,i,Ys),e(Us,js,Js,this.Hy),e(js,Hs,qs,this.Uy),e(Hs,zs,Ys,this.zy),e(zs,Us,Xs,this.Jy),e(Xs,Js,qs,this.Xy),e(zs,Hs,js,this.qy)}$y(t,s,i,e,h,r){return n(t,s,i,e,h,r,this.Hy)&&n(t,s,i,e,h,r,this.Uy)&&n(t,s,i,e,h,r,this.zy)&&n(t,s,i,e,h,r,this.Jy)&&n(t,s,i,e,h,r,this.qy)&&n(t,s,i,e,h,r,this.Xy)}Ky(t,s,i){return!h(t,s,i,this.qy)}}}{const Zs=self.Vs,Qs=self.xs,xh=Qs.Es,jh=Qs.Fs,Th=Qs.Cs,ti=Th.create(),si=xh.C(0,0,0),ii=xh.C(0,0,0),ei=xh.C(0,0,0),hi=xh.C(0,1,0),ri=(jh.C(0,0,0,0),new Zs.gu),ni=new Zs.Rect,oi=new Zs.gu(0,0,1,0,1,1,0,1),ai={Zy:1,Qy:1e4},li=Th.C(1,0,0,0,0,1,0,0,0,0,.5,0,0,0,.5,1);Zs.Ny.tS=class{constructor(t){t=Object.assign({},ai,t),this.Tg=0,this.xg=0,this.sS=Zs.Er(45),this.iS=Math.tan(this.sS/2),this.eS=Th.create(),this.hS=Th.create(),this.rS=!1,this.nS=t.Zy,this.oS=t.Qy,this.aS=[],this.lS=new Map,this.uS=null,this.cS=null,this.fS=null,this.dS=null,this.pS=null,this.mS=null,this.gS=null,this.yS=null,this.SS=null,this.wS=null,this.bS=null,this.MS=null,this.vS=new Map,this.TS=null,this.xS=[],this.GS=new Map,this._S=0,this.IS=0,this.CS=1,this.PS=[this.CS],this.RS=1,this.AS=[this.RS],this.ES=.5,this.FS=[this.ES],this.DS=0,this.kS=!0,this.OS=!1}LS(t){let s=0,i=t.length,e=0;for(;s<i;)t[s++]=e,t[s++]=e+1,t[s++]=e+2,t[s++]=e,t[s++]=e+2,t[s++]=e+3,e+=4}NS(){this._S=0,this.IS=0,this.uS=null,this.cS=null,this.fS=null,this.dS=null,this.pS=null,this.mS=null,this.gS=null,this.yS=null,this.SS=null,this.wS=null,this.bS=null,this.MS=null,this.BS()}WS(){this.NS(),this.TS=null}VS(){for(const t of this.aS)t.Gr();this.NS()}Wm(){return this.Tg}$m(){return this.xg}jS(t){return this.HS()?100:t/(2*this.US())}zS(t){if(this.HS()){const s=t/(2*this.US());return s/this.jS(t)}return 1}JS(t){this.nS=t}qS(){return this.nS}XS(t){this.oS=t}YS(){return this.oS}$S(t){this.sS=t,this.iS=Math.tan(this.sS/2)}KS(){return this.sS}US(){return this.iS}ZS(){this.rS=!1}QS(){this.rS=!0}HS(){return!this.rS}iw(){return this.rS}ew(t,s,i=.5,e=.5){const h=this.qS(),r=this.YS(),n=this.KS();if(.5===i&&.5===e)this.hw()?Th.Tt(t,n,s,h,r):Th.perspective(t,n,s,h,r);else{const o=2*(i=1-i)-2,a=2*i,l=2*e-2,u=2*e,c=this.US()*h,f=c*s;Th.Mt(t,o*f,a*f,l*c,u*c,h,r),this.hw()&&Th.mul(t,li,t)}}rw(t,s,i,e=1){const h=self.devicePixelRatio,r=2*this.jS(i)*h*this.US()/i,n=s*r/(2*h*e),o=i*r/(2*h*e),a=-n,l=n,u=-o,c=o;this.hw()?Th._t(t,a,l,u,c,this.qS(),this.YS()):Th.ortho(t,a,l,u,c,this.qS(),this.YS())}ow(t,s,i,e,h,r=1){let n=1;this.HS()&&(n=200*this.US()/h);const o=ei,a=(xh.set(o,n,-n,1),si),l=ii;xh.multiply(a,s,o),xh.multiply(l,i,o),Th.It(t,a,l,e||hi),o[2]=r,Th.scale(t,t,o)}aw(t,s,i,e,h,r,n,o){return xh.set(si,t,s,i),xh.set(ii,e,h,r),this.ow(ti,si,ii,hi,n,o),ti}lw(t){this.aS.push(t),this.lS.set(t.Mf(),t)}uw(t){const s=this.aS.indexOf(t);-1!==s&&this.aS.splice(s,1),this.lS.delete(t.Mf())}BS(){Zs.Kn(this.aS),this.lS.clear()}fw(t){return this.lS.get(t)||null}pw(){return this.uS}mw(){this.gw(this.uS)}yw(){return this.cS}Sw(){this.gw(this.cS)}ww(){this.gw(this.fS)}bw(){this.gw(this.dS)}Mw(){this.gw(this.pS)}Tw(){this.gw(this.mS)}xw(){this.gw(this.gS)}Gw(){this.gw(this.yS)}_w(){this.gw(this.SS)}Iw(){this.gw(this.wS)}Cw(){this.gw(this.bS)}Pw(){this.gw(this.MS)}Rw(t){this.TS=t}Aw(){return this.TS}Ew(t,s,i,e){let h=Zs.Ny.Dw.Fw(t,s,i,e),r=this.vS.get(h);return r||(r=Zs.Tr(Zs.Ny.Dw,this,t,s,i,e),this.vS.set(h,r)),r.kw(),r}Ow(t){t.Lw(),0===t.Nw()&&(this.TS===t&&(this.TS=null),this.vS.delete(t.Bw()),t.Gr())}Ww(t){Zs.Kn(this.xS),this.GS.clear();let s=0;for(const i of t){const e=i[0],h=i[1],r=i[2];this.xS.push([h,r]),this.GS.set(e,{number:s,Vw:h,jw:r}),s++}}Hw(t){return this.xS[t]}Uw(t){return this.Hw(t)[0]}zw(t){return this.Hw(t)[1]}Jw(t){const s=this.GS.get(t);if(void 0===s)throw new Error("invalid blend name");return s}qw(t){const s=this.GS.get(t);if(void 0===s)throw new Error("invalid blend name");return s.number}Xw(t){this._S=t}Yw(){return this._S}$w(t){this.IS=t,this.TS=null}Kw(){return this.IS}sg(t,s,i,e){const h=Zs.Nr(t,s,i,e),r=Math.sin(h),n=Math.cos(h),o=.5*this.CS,a=r*o,l=n*o,u=this.RS;2===u?this.Zw(t,s,0,i,e,0,a,l):1===u?this.Qw(t,s,0,i,e,0,a,l):this.tb(t,s,0,i,e,0,a,l)}sb(t,s,i,e,h,r){const n=Zs.Nr(t,s,e,h),o=Math.sin(n),a=Math.cos(n),l=.5*this.CS,u=o*l,c=a*l,f=this.RS;2===f?this.Zw(t,s,i,e,h,r,u,c):1===f?this.Qw(t,s,i,e,h,r,u,c):this.tb(t,s,i,e,h,r,u,c)}Zw(t,s,i,e,h,r,n,o){const a=this.ES,l=t+a-o,u=s+a-n,c=e+a+o,f=h+a+n,d=2*o,p=2*n,m=l+n,g=u-o,y=l-n+d,S=u+o+p,w=c+n,b=f-o,M=c-n-d,v=f+o-p;this.ib(m,g,i,w,b,r,M,v,r,y,S,i,oi)}Qw(t,s,i,e,h,r,n,o){const a=this.ES,l=t+a-o,u=s+a-n,c=e+a+o,f=h+a+n,d=l+n,p=u-o,m=l-n,g=u+o,y=c+n,S=f-o,w=c-n,b=f+o;this.ib(d,p,i,y,S,r,w,b,r,m,g,i,oi)}tb(t,s,i,e,h,r,n,o){const a=this.ES,l=t+a,u=s+a,c=e+a,f=h+a,d=l+n,p=u-o,m=l-n,g=u+o,y=c+n,S=f-o,w=c-n,b=f+o;this.ib(d,p,i,y,S,r,w,b,r,m,g,i,oi)}eb(t,s,i,e,h,r){const n=Zs.Nr(t,s,i,e),o=Math.sin(n),a=Math.cos(n),l=.5*this.CS,u=o*l,c=a*l,f=this.RS;2===f?this.hb(t,s,i,e,u,c,h,r):1===f?this.rb(t,s,i,e,u,c,h,r):this.nb(t,s,i,e,u,c,h,r)}hb(t,s,i,e,h,r,n,o){const a=this.ES,l=t+a-r,u=s+a-h,c=i+a+r,f=e+a+h,d=2*r,p=2*h,m=l+h,g=u-r,y=l-h+d,S=u+r+p,w=c+h,b=f-r,M=c-h-d,v=f+r-p;ri.set(m,g,w,b,M,v,y,S),ni.set(n,0,o,0),this.ob(ri,ni)}rb(t,s,i,e,h,r,n,o){const a=this.ES,l=t+a-r,u=s+a-h,c=i+a+r,f=e+a+h,d=l+h,p=u-r,m=l-h,g=u+r,y=c+h,S=f-r,w=c-h,b=f+r;ri.set(d,p,y,S,w,b,m,g),ni.set(n,0,o,0),this.ob(ri,ni)}nb(t,s,i,e,h,r,n,o){const a=this.ES,l=t+a,u=s+a,c=i+a,f=e+a,d=l+h,p=u-r,m=l-h,g=u+r,y=c+h,S=f-r,w=c-h,b=f+r;ri.set(d,p,y,S,w,b,m,g),ni.set(n,0,o,0),this.ob(ri,ni)}ab(t,s,i,e){const h=.5*this.CS,r=this.RS;2===r?this.lb(t,s,i,e,h):1===r?this.ub(t,s,i,e,h):this.cb(t,s,i,e,h)}lb(t,s,i,e,h){this.Zw(t,s,0,i,s,0,0,h),this.Zw(i,s,0,i,e,0,h,0),this.Zw(i,e,0,t,e,0,0,-h),this.Zw(t,e,0,t,s,0,-h,0)}ub(t,s,i,e,h){this.Qw(t,s,0,i,s,0,0,h),this.Qw(i,s,0,i,e,0,h,0),this.Qw(i,e,0,t,e,0,0,-h),this.Qw(t,e,0,t,s,0,-h,0)}cb(t,s,i,e,h){this.tb(t,s,0,i,s,0,0,h),this.tb(i,s,0,i,e,0,h,0),this.tb(i,e,0,t,e,0,0,-h),this.tb(t,e,0,t,s,0,-h,0)}fb(t){this.ab(t.Wl(),t.Vl(),t.jl(),t.Hl())}pb(t){const s=Zs.Nr(t.Sn(),t.wn(),t.bn(),t.Mn()),i=Math.sin(s),e=Math.cos(s),h=.5*this.CS,r=i*h,n=e*h,o=this.RS;2===o?this.mb(t,r,n):1===o?this.gb(t,r,n):this.yb(t,r,n)}mb(t,s,i){this.Zw(t.Sn(),t.wn(),0,t.bn(),t.Mn(),0,s,i),this.Zw(t.bn(),t.Mn(),0,t.vn(),t.Tn(),0,i,-s),this.Zw(t.vn(),t.Tn(),0,t.xn(),t.Gn(),0,-s,-i),this.Zw(t.xn(),t.Gn(),0,t.Sn(),t.wn(),0,-i,s)}gb(t,s,i){this.Qw(t.Sn(),t.wn(),0,t.bn(),t.Mn(),0,s,i),this.Qw(t.bn(),t.Mn(),0,t.vn(),t.Tn(),0,i,-s),this.Qw(t.vn(),t.Tn(),0,t.xn(),t.Gn(),0,-s,-i),this.Qw(t.xn(),t.Gn(),0,t.Sn(),t.wn(),0,-i,s)}yb(t,s,i){this.tb(t.Sn(),t.wn(),0,t.bn(),t.Mn(),0,s,i),this.tb(t.bn(),t.Mn(),0,t.vn(),t.Tn(),0,i,-s),this.tb(t.vn(),t.Tn(),0,t.xn(),t.Gn(),0,-s,-i),this.tb(t.xn(),t.Gn(),0,t.Sn(),t.wn(),0,-i,s)}Sb(t){this.CS=t,this.PS[this.PS.length-1]=t}wb(){return this.CS}bb(t){if(100<=this.PS.length)throw new Error("pushed too many line widths - check push/pop pairs");this.PS.push(t),this.CS=t}Mb(){if(this.PS.length<=1)throw new Error("cannot pop last line width - check push/pop pairs");this.PS.pop(),this.CS=this.PS.at(-1)}vb(){this.RS=0,this.AS[this.AS.length-1]=0}Tb(){this.RS=1,this.AS[this.AS.length-1]=0}xb(){this.RS=2,this.AS[this.AS.length-1]=0}Gb(t){if("butt"===t)this._b();else if("square"===t)this.Ib();else{if("zag"!==t)throw new Error("invalid line cap");this.Cb()}}_b(){if(100<=this.AS.length)throw new Error("pushed too many line caps - check push/pop pairs");this.AS.push(0),this.RS=0}Ib(){if(100<=this.AS.length)throw new Error("pushed too many line caps - check push/pop pairs");this.AS.push(1),this.RS=1}Cb(){if(100<=this.AS.length)throw new Error("pushed too many line caps - check push/pop pairs");this.AS.push(2),this.RS=2}Pb(){if(this.AS.length<=1)throw new Error("cannot pop last line cap - check push/pop pairs");this.AS.pop(),this.RS=this.AS.at(-1)}Rb(t){this.ES=t,this.FS[this.FS.length-1]=t}Ab(){return this.ES}Eb(t){if(100<=this.FS.length)throw new Error("pushed too many line offsets - check push/pop pairs");this.FS.push(t),this.ES=t}Fb(){if(this.FS.length<=1)throw new Error("cannot pop last line offset - check push/pop pairs");this.FS.pop(),this.ES=this.FS.at(-1)}Db(s){const t=s.length/2;if(t<3)throw new Error("need at least 3 points");const i=t-2,e=i-1,h=s[0],r=s[1];for(let t=0;t<i;t+=2){const n=2*t,o=s[2+n],a=s[3+n],l=s[4+n],u=s[5+n];if(t===e)this.kb(h,r,o,a,l,u,l,u);else{const c=s[6+n],f=s[7+n];this.kb(h,r,o,a,l,u,c,f)}}}Ob(){return 3}Lb(){this.Nb(!0),this.DS++}Bb(){return this.DS}Wb(){this.DS++}Vb(t){this.kS=!!t}jb(){return this.kS}Hb(t){this.OS=!!t}Ub(){return this.OS}zb(){return!1}hw(){return!1}Jb(){}qb(){}Xb(){}Yb(){return this.Jb()+this.qb()+this.Xb()}$b(){return Zs.Tr(Zs.Ny.Kb,this)}}}{const ui=self.Vs;ui.Ny.Zb=class{constructor(t,s){this.Cr=s.name,this.Qb=t,this.tM=s.sM||0,this.iM=s.eM||0,this.hM=!!s.rM,this.nM=!!s.oM,this.aM=!!s.lM,this.uM=!!s.cM,this.fM=!!s.dM,this.pM=!!s.mM,this.gM=!!s.yM,this.SM=!1,this.wM=this.hM||this.pM||0!==this.tM||0!==this.iM}Gr(){this.Qb=null}bM(){return this.Qb}Mf(){return this.Cr}MM(){return 0!==this.tM||0!==this.iM}vM(){return this.tM}TM(){return this.iM}xM(){return this.hM}GM(){return this.nM}_M(){return this.aM}IM(){return this.uM}CM(){return this.fM}PM(){return this.pM}RM(){return this.gM}AM(){return this.SM}EM(){return this.wM}FM(){return!1}}}{const ci=self.Vs;ci.Ny.Dw=class{constructor(t,s,i,e,h){this.Qb=t,this.W1=0,this.DM=null,this.kM="",this.OM=i,this.LM=ci.Tr(ci.na),this.LM.set(e),this.NM=h,"string"==typeof s?this.kM=s:(this.DM=s,this.kM=this.DM.Mf())}Gr(){if(0<this.W1)throw new Error("releasing state group still in use");this.Qb=null,this.DM=null,this.kM=""}BM(){const t=this.Qb;t.gw(this.DM),t.WM(this.OM),t.VM(this.LM),t.$w(this.NM),t.Rw(this)}Bw(){return ci.Ny.Dw.Fw(this.kM,this.OM,this.LM,this.NM)}kw(){++this.W1}Lw(){--this.W1}Nw(){return this.W1}jM(){this.DM=null}HM(t){if(this.DM=t.fw(this.kM),!this.DM)throw new Error("failed to restore shader program")}static Fw(t,s,i,e){const h="string"==typeof t?t:t.Mf();return h+","+s+","+i.Ga()+","+i._a()+","+i.Ia()+","+i.Ca()+","+e}}}{let e=function(t,s,i){const e=i.Sn(),h=i.wn(),r=i.bn()-e,n=i.Mn()-h,o=i.xn()-e,a=i.Gn()-h,l=r*t,u=n*t,c=o*s,f=a*s;return[e+l+c,h+u+f]};e;const _=self.Vs,fi=_.Tr(_.gu);_.Ny.UM=class{constructor(t,s,i){this.zM=t,this.JM=s,this.qM=i,this.yl=NaN,this.Sl=NaN,this.NM=NaN,this.XM=NaN,this.YM=NaN,this.yl=0,this.Sl=0,this.NM=0,this.XM=0,this.YM=0}$M(t,s,i,e){this.yl=t,this.Sl=s,this.XM=i,this.YM=e}KM(){return this.yl}ZM(t){this.yl!==t&&(this.yl=t,this.zM.QM())}tv(){return this.Sl}sv(t){this.Sl!==t&&(this.Sl=t,this.zM.QM())}hv(){return this.NM}rv(t){this.NM!==t&&(this.NM=Math.max(t,0),this.zM.QM())}nv(){return this.XM}ov(t){this.XM=t}av(){return this.YM}lv(t){this.YM=t}uv(t,s,i){[this.yl,this.Sl]=e(t.yl,t.Sl,s),this.NM=t.NM,this.XM=_.Lt(i.Wl(),i.jl(),t.XM),this.YM=_.Lt(i.Vl(),i.Hl(),t.YM)}cv(t,s,i){[this.yl,this.Sl]=e(t.yl,t.Sl,s),this.NM=t.NM,[this.XM,this.YM]=e(t.XM,t.YM,i)}dv(){return{x:this.KM(),y:this.tv(),z:this.hv(),u:this.nv(),v:this.av()}}pv(t){this.ZM(t.x),this.sv(t.y),t.hasOwnProperty("z")&&this.rv(t.z),this.ov(t.u),this.lv(t.v)}gv(){return this.zM}yv(){return this.JM}Sv(){return this.qM}},_.Ny.wv=class{constructor(i,t,s){if(i<2||t<2)throw new Error("invalid mesh size");this.bv=i,this.Mv=t,this.vv=s||null,this.Tv=[],this.xv=0,this.Gv=0,this._v=1,this.Iv=1,this.Cv=0,this.Pv=!1;const e=i-1,h=t-1;for(let s=0;s<t;++s){const r=[];for(let t=0;t<i;++t){const n=_.Tr(_.Ny.UM,this,t,s),o=t/e,a=s/h;n.$M(o,a,o,a),r.push(n)}this.Tv.push(r)}}Gr(){_.Kn(this.Tv)}Rv(){return this.bv}Av(){return this.Mv}Ev(){return this.vv}Fv(){return this.Tv}QM(){this.Pv=!0}Dv(){if(this.Pv){let t=1/0,s=1/0,i=-1/0,e=-1/0,h=0;for(const r of this.Tv)for(const n of r){const o=n.KM(),a=n.tv();t=Math.min(t,o),s=Math.min(s,a),i=Math.max(i,o),e=Math.max(e,a),h=Math.max(h,n.hv())}this.xv=t,this.Gv=s,this._v=i,this.Iv=e,this.Cv=h,this.Pv=!1}}kv(){return this.Dv(),this.xv}Ov(){return this.Dv(),this.Gv}Lv(){return this.Dv(),this._v}Nv(){return this.Dv(),this.Iv}Bv(){return this.Dv(),this.Cv}Wv(){return 0<this.Bv()}Vv(t,s){return t=Math.floor(t),s=Math.floor(s),t<0||t>=this.bv||s<0||s>=this.Mv?null:this.Tv[s][t]}jv(t,i,e){const h=e instanceof _.Rect;if(t.Rv()!==this.Rv()||t.Av()!==this.Av())throw new Error("source mesh wrong size");const r=t.Tv,n=this.Tv;for(let t=0,s=n.length;t<s;++t){const o=r[t],a=n[t];for(let t=0,s=a.length;t<s;++t){const l=o[t],u=a[t];h?u.uv(l,i,e):u.cv(l,i,e)}}}Hv(r){let n=this.Tv,o=n[0];for(let t=1,s=n.length;t<s;++t){let i=n[t],e=o[0],h=i[0];for(let t=1,s=i.length;t<s;++t){const a=o[t],l=i[t];fi.set(e.nv(),e.av(),a.nv(),a.av(),l.nv(),l.av(),h.nv(),h.av()),r.ib(e.KM(),e.tv(),e.hv(),a.KM(),a.tv(),a.hv(),l.KM(),l.tv(),l.hv(),h.KM(),h.tv(),h.hv(),fi),e=a,h=l}o=i}}Uv(o,a){a=a||((t,s,i)=>[t,s,i]);let t=this.Tv,l=t[0];for(let r=1,n=t.length;r<n;++r){let i=t[r],e=l[0],h=i[0];for(let t=1,s=i.length;t<s;++t){const u=l[t],c=i[t],[f,d,p]=a(e.KM(),e.tv(),e.hv()),[m,g,y]=a(u.KM(),u.tv(),u.hv()),[S,w,b]=a(c.KM(),c.tv(),c.hv()),[M,v,T]=a(h.KM(),h.tv(),h.hv());o.sb(f,d,p,m,g,y),o.sb(f,d,p,S,w,b),o.sb(f,d,p,M,v,T),t===s-1&&o.sb(m,g,y,S,w,b),r===n-1&&o.sb(M,v,T,S,w,b),e=u,h=c}l=i}}zv(t){let i=.99999999,e=t.ic(),h=[],r=this.Rv()-1,n=this.Av()-1,o=1/r,a=1/n,l=r-1,u=n-1,c=e[0],f=e[1],d=_.Rr(Math.floor(c*r),0,l),p=_.Rr(Math.floor(f*n),0,u),m=!0,g=0,y=0,S=0,w=-1,b=()=>{c=_.Rr(_.Lt(c,g,S),0,1),f=_.Rr(_.Lt(f,y,S),0,1),h.push(c,f)};for(let t=0,s=e.length;t<s;t+=2){c=e[t],f=e[t+1],h.push(c,f),d=_.Rr(Math.floor(c*r),0,l),p=_.Rr(Math.floor(f*n),0,u);const M=(t+2)%s;for(g=e[M],y=e[1+M],w=-1;;){if(1e6<h.length)throw new Error("Too many mesh poly points");const v=d*o,T=p*a,x=(d+1)*o,G=(p+1)*a;if(m=_.Pn(c,f,v,T,x,T,x,G),0!==w&&0<=(S=_.Cn(c,f,g,y,v,T,x,G,-.001))&&S<=i)b(),m=!m,w=0;else if(0<p&&2!==w&&0<=(S=_.Cn(c,f,g,y,v,T,x,T,.001))&&S<=i)b(),p--,m=!1,w=4;else if(d<l&&3!==w&&0<=(S=_.Cn(c,f,g,y,x,T,x,G,.001))&&S<=i)b(),d++,m=!1,w=1;else if(0<d&&1!==w&&0<=(S=_.Cn(c,f,g,y,v,T,v,G,.001))&&S<=i)b(),d--,m=!0,w=3;else{if(!(p<u&&4!==w&&0<=(S=_.Cn(c,f,g,y,v,G,x,G,.001))&&S<=i))break;b(),p++,m=!0,w=2}}}return _.Tr(_.$u,h)}Jv(t,s){const i=this.qv(t);this.Xv(i),s.hc(i)}qv(t){const i=[],e=t.ic();for(let t=0,s=e.length;t<s;t+=2){const h=e[t],r=e[t+1],[n,o]=this.Yv(h,r);i.push(n,o)}return i}Yv(t,s){const i=this.Rv()-1,e=this.Av()-1,h=1/i,r=1/e,n=_.Rr(Math.floor(t*i),0,i-1),o=_.Rr(Math.floor(s*e),0,e-1),a=n*h,l=o*r,u=(n+1)*h,c=(o+1)*r,f=this.Vv(n,o),d=this.Vv(n+1,o+1),p=_.Pn(t,s,a,l,u,l,u,c),m=p?a+h:a,g=p?l:l+r,y=this.Vv(n+(p?1:0),o+(p?0:1)),[S,w,b]=_.Rn(t,s,a,l,m,g,u,c);return _.An(S,w,b,f.KM(),f.tv(),f.hv(),y.KM(),y.tv(),y.hv(),d.KM(),d.tv(),d.hv())}Xv(i){let e=[],h=i[0],r=i[1],n=h-i.at(-2),o=r-i.at(-1);for(let t=0,s=i.length;t<s;t+=2){const a=(t+2)%s,l=i[a],u=i[1+a],c=l-h,f=u-r,d=Math.abs(c)<1e-7&&Math.abs(n)<1e-7&&Math.sign(f)===Math.sign(o),p=Math.abs(f)<1e-7&&Math.abs(o)<1e-7&&Math.sign(c)===Math.sign(n);(!d&&!p&&.001<Math.abs(c/n-f/o)||0==c&&0==f)&&e.push(h,r),h=l,r=u,n=c,o=f}6<=e.length&&e.length<i.length&&_.ho(i,e)}dv(){return{cols:this.Rv(),rows:this.Av(),points:this.Tv.map(t=>t.map(t=>t.dv()))}}pv(t){const i=this.Rv(),e=this.Av();if(t.cols!==i||t.rows!==e)throw new Error("mesh data wrong size");const h=t.points;for(let s=0;s<e;++s){const r=h[s];for(let t=0;t<i;++t){const n=this.Vv(t,s);n.pv(r[t])}}}}}{let d=function(t,s){let i,e,h,r;switch(t){case"rgba8":i=s.RGBA8,e=s.RGBA,h=s.RGBA,r=s.UNSIGNED_BYTE;break;case"rgb8":i=s.RGB8,e=s.RGB,h=s.RGB,r=s.UNSIGNED_BYTE;break;case"rgba4":i=s.RGBA4,e=s.RGBA,h=s.RGBA,r=s.UNSIGNED_SHORT_4_4_4_4;break;case"rgb5_a1":i=s.RGB5_A1,e=s.RGBA,h=s.RGBA,r=s.UNSIGNED_SHORT_5_5_5_1;break;case"rgb565":i=s.RGB565,e=s.RGB,h=s.RGB,r=s.UNSIGNED_SHORT_5_6_5;break;default:throw new Error("invalid pixel format")}return{$v:i,Kv:e,format:h,type:r}};d;const di=self.Vs,pi=new Set(["rgba8","rgb8","rgba4","rgb5_a1","rgb565"]),mi=new Set(["nearest","bilinear","trilinear"]),gi=new Set(["default","low","high"]),yi=new Set(["clamp-to-edge","repeat","mirror-repeat"]),Si={Zv:"clamp-to-edge",Qv:"clamp-to-edge",t2:"trilinear",s2:0,i2:"rgba8",e2:!0,h2:"default",premultiplyAlpha:!0,n2:!1,width:-1,height:-1},wi={premultiplyAlpha:!0,flipY:!1},bi=new Set;di.Ny.o2=class{constructor(t){this.Qb=t,this.a2=null,this.Tg=0,this.xg=0,this.l2=!0,this.u2="clamp-to-edge",this.c2="clamp-to-edge",this.f2="trilinear",this.d2=0,this.m2="rgba8",this.g2=!1,this.S2="default",this.W1=0}w2(s,t){if(!("undefined"!=typeof HTMLImageElement&&s instanceof HTMLImageElement||"undefined"!=typeof HTMLCanvasElement&&s instanceof HTMLCanvasElement||"undefined"!=typeof ImageBitmap&&s instanceof ImageBitmap||"undefined"!=typeof OffscreenCanvas&&s instanceof OffscreenCanvas||s instanceof ImageData||s instanceof ArrayBuffer||null===s))throw new Error("invalid texture source");if(t=Object.assign({},Si,t),this.a2)throw new Error("already created texture");if(this.u2=t.Zv,this.c2=t.Qv,this.f2=t.t2,this.d2=t.s2,this.m2=t.i2,this.g2=!!t.e2&&this.Qb.jb(),this.S2=t.h2,!yi.has(this.u2)||!yi.has(this.c2))throw new Error("invalid wrap mode");if(!mi.has(this.f2))throw new Error("invalid sampling");if(!pi.has(this.m2))throw new Error("invalid pixel format");if(!gi.has(this.S2))throw new Error("invalid mipmap quality");if(this.l2=!0,s instanceof ArrayBuffer||null===s||t.n2){if(this.Tg=t.width,this.xg=t.height,s instanceof ArrayBuffer&&s.byteLength!==this.Tg*this.xg*4)throw new Error("ArrayBuffer wrong size")}else this.Tg=s.width,this.xg=s.height;if(this.Tg<=0||this.xg<=0)throw new Error("invalid texture data size");if(t.n2){const o=di.zo(this.Tg,this.xg),a=o.getContext("2d");a.drawImage(s,0,0,this.Tg,this.xg),s=o}const i=di.Kr(this.Tg)&&di.Kr(this.xg),e=this.Qb.b2();if(this.Tg>e||this.xg>e)throw new Error("texture data exceeds maximum texture size");const h=this.Qb.M2(),r=this.Qb.v2(),n=(this.a2=h.createTexture(),h.bindTexture(h.TEXTURE_2D,this.a2),h.pixelStorei(h.UNPACK_PREMULTIPLY_ALPHA_WEBGL,t.premultiplyAlpha),h.pixelStorei(h.UNPACK_FLIP_Y_WEBGL,!1),d(this.m2,h));if(this.Qb.T2()||i||!this.G2())if(2<=r){let t;t=this.g2?Math.floor(Math.log2(Math.max(this.Tg,this.xg))+1):1,h.texStorage2D(h.TEXTURE_2D,t,n.$v,this.Tg,this.xg),s instanceof ArrayBuffer?h.texSubImage2D(h.TEXTURE_2D,0,0,0,this.Tg,this.xg,n.format,n.type,new Uint8Array(s)):null!==s&&h.texSubImage2D(h.TEXTURE_2D,0,0,0,n.format,n.type,s)}else s instanceof ArrayBuffer?h.texImage2D(h.TEXTURE_2D,0,n.Kv,this.Tg,this.xg,0,n.format,n.type,new Uint8Array(s)):null===s?h.texImage2D(h.TEXTURE_2D,0,n.Kv,this.Tg,this.xg,0,n.format,n.type,null):h.texImage2D(h.TEXTURE_2D,0,n.Kv,n.format,n.type,s);else{if(null===s)throw new Error("cannot pass null data when creating a NPOT tiled texture without NPOT support");if((s=s instanceof ArrayBuffer?new ImageData(new Uint8ClampedArray(s),this.Tg,this.xg):s)instanceof ImageData){const c=di.zo(this.Tg,this.xg),f=c.getContext("2d");f.putImageData(s,0,0),s=c}const l=di.zo(di.Zr(this.Tg),di.Zr(this.xg)),u=l.getContext("2d");u.imageSmoothingEnabled="nearest"!==this.f2,u.drawImage(s,0,0,this.Tg,this.xg,0,0,l.width,l.height),h.texImage2D(h.TEXTURE_2D,0,n.Kv,n.format,n.type,l)}null!==s&&this._2(h),h.bindTexture(h.TEXTURE_2D,null),this.Qb.I2(),this.W1=1,bi.add(this)}C2(t,s,i){if(i=Object.assign({},Si,i),this.a2)throw new Error("already created texture");if(this.u2=i.Zv,this.c2=i.Qv,this.f2=i.t2,this.m2=i.i2,this.g2=!!i.e2&&this.Qb.jb(),this.S2=i.h2,!yi.has(this.u2)||!yi.has(this.c2))throw new Error("invalid wrap mode");if(!mi.has(this.f2))throw new Error("invalid sampling");if(!pi.has(this.m2))throw new Error("invalid pixel format");if(!gi.has(this.S2))throw new Error("invalid mipmap quality");this.l2=!1,this.Tg=Math.floor(t),this.xg=Math.floor(s);const e=di.Kr(this.Tg)&&di.Kr(this.xg),h=this.Qb.b2();if(this.Tg<=0||this.xg<=0)throw new Error("invalid texture size");if(this.Tg>h||this.xg>h)throw new Error("texture exceeds maximum texture size");if(!this.Qb.T2()&&this.G2()&&!e)throw new Error("non-power-of-two tiled textures not supported");const r=this.Qb.M2(),n=this.Qb.v2(),o=(this.a2=r.createTexture(),r.bindTexture(r.TEXTURE_2D,this.a2),r.pixelStorei(r.UNPACK_PREMULTIPLY_ALPHA_WEBGL,i.premultiplyAlpha),r.pixelStorei(r.UNPACK_FLIP_Y_WEBGL,!1),d(this.m2,r)),a=2<=n?o.$v:o.Kv;r.texImage2D(r.TEXTURE_2D,0,a,this.Tg,this.xg,0,o.format,o.type,null),this._2(r),r.bindTexture(r.TEXTURE_2D,null),this.Qb.I2(),this.W1=1,bi.add(this)}P2(t){if("default"===this.S2)return this.l2?t.NICEST:t.FASTEST;if("low"===this.S2)return t.FASTEST;if("high"===this.S2)return t.NICEST;throw new Error("invalid mipmap quality")}G2(){return"clamp-to-edge"!==this.u2||"clamp-to-edge"!==this.c2}R2(t,s){if("clamp-to-edge"===s)return t.CLAMP_TO_EDGE;if("repeat"===s)return t.REPEAT;if("mirror-repeat"===s)return t.MIRRORED_REPEAT;throw new Error("invalid wrap mode")}_2(t){const s=di.Kr(this.Tg)&&di.Kr(this.xg);if(t.texParameteri(t.TEXTURE_2D,t.TEXTURE_WRAP_S,this.R2(t,this.u2)),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_WRAP_T,this.R2(t,this.c2)),"nearest"===this.f2)t.texParameteri(t.TEXTURE_2D,t.TEXTURE_MAG_FILTER,t.NEAREST),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_MIN_FILTER,t.NEAREST),this.g2=!1;else if(t.texParameteri(t.TEXTURE_2D,t.TEXTURE_MAG_FILTER,t.LINEAR),(s||this.Qb.T2())&&this.g2){t.hint(t.GENERATE_MIPMAP_HINT,this.P2(t)),t.generateMipmap(t.TEXTURE_2D);const e="trilinear"===this.f2&&!this.Qb.Ub();t.texParameteri(t.TEXTURE_2D,t.TEXTURE_MIN_FILTER,e?t.LINEAR_MIPMAP_LINEAR:t.LINEAR_MIPMAP_NEAREST)}else t.texParameteri(t.TEXTURE_2D,t.TEXTURE_MIN_FILTER,t.LINEAR),this.g2=!1;const i=this.Qb.A2();i&&0<this.d2&&"nearest"!==this.f2&&t.texParameterf(t.TEXTURE_2D,i.TEXTURE_MAX_ANISOTROPY_EXT,Math.min(this.d2,this.Qb.E2()))}F2(t,s){if(!("undefined"!=typeof HTMLImageElement&&t instanceof HTMLImageElement||"undefined"!=typeof HTMLVideoElement&&t instanceof HTMLVideoElement||"undefined"!=typeof HTMLCanvasElement&&t instanceof HTMLCanvasElement||"undefined"!=typeof ImageBitmap&&t instanceof ImageBitmap||"undefined"!=typeof OffscreenCanvas&&t instanceof OffscreenCanvas||t instanceof ImageData))throw new Error("invalid texture source");if(!this.a2||this.W1<=0)throw new Error("texture not created");if(this.l2)throw new Error("cannot update static texture");s=Object.assign({},wi,s);const i=t.width||t.videoWidth,e=t.height||t.videoHeight,h=this.Qb.v2(),r=this.Qb.M2(),n=(r.bindTexture(r.TEXTURE_2D,this.a2),r.pixelStorei(r.UNPACK_PREMULTIPLY_ALPHA_WEBGL,s.premultiplyAlpha),r.pixelStorei(r.UNPACK_FLIP_Y_WEBGL,!!s.flipY),d(this.m2,r)),o=2<=h?n.$v:n.Kv;try{if(this.Tg===i&&this.xg===e){const a=di.Kr(this.Tg)&&di.Kr(this.xg);r.texSubImage2D(r.TEXTURE_2D,0,0,0,n.format,n.type,t),(a||this.Qb.T2())&&this.g2&&(r.hint(r.GENERATE_MIPMAP_HINT,this.P2(r)),r.generateMipmap(r.TEXTURE_2D))}else{this.Tg=i,this.xg=e;const l=di.Kr(this.Tg)&&di.Kr(this.xg);if(!this.Qb.T2()&&this.G2()&&!l)throw new Error("non-power-of-two tiled textures not supported");r.texImage2D(r.TEXTURE_2D,0,o,n.format,n.type,t),(l||this.Qb.T2())&&this.g2&&(r.hint(r.GENERATE_MIPMAP_HINT,this.P2(r)),r.generateMipmap(r.TEXTURE_2D))}}catch(t){console.error("Error updating WebGL texture: ",t)}r.bindTexture(r.TEXTURE_2D,null),this.Qb.I2()}D2(){if(0<this.W1)throw new Error("texture still has references");if(!this.a2)throw new Error("already deleted texture");bi.delete(this);const t=this.Qb.M2();t.deleteTexture(this.a2),this.a2=null}O2(){return!!this.a2}L2(){return this.a2}bM(){return this.Qb}N2(){this.W1++}B2(){if(this.W1<=0)throw new Error("no more references");this.W1--}W2(){return this.W1}Wm(){return this.Tg}$m(){return this.xg}V2(){return this.l2}j2(){let t=this.Tg*this.xg;switch(this.m2){case"rgba8":t*=4;break;case"rgb8":t*=3;break;case"rgba4":case"rgb5_a1":case"rgb565":t*=2}return this.g2&&(t+=Math.floor(t/3)),t}static jM(){bi.clear()}static H2(){return bi.values()}}}{const Mi=self.Vs,vi=self.xs,xh=vi.Es,Th=vi.Cs,Ti=new Set(["nearest","bilinear","trilinear"]),xi={t2:"trilinear",alpha:!0,depth:!1,U2:!0,z2:!0,J2:0},Gi=new Set;Mi.Ny.q2=class{constructor(t){this.Qb=t,this.X2=null,this.Y2=null,this.a2=null,this.K2=null,this.Tg=0,this.xg=0,this.Z2=!0,this.f2="trilinear",this.Q2=!0,this.tT=!1,this.sT=!0,this.iT=0,this.eT=Th.create(),this.hT=0,this.rT=0,this.nT=0}oT(t,s,i){i=Object.assign({},xi,i);const e=this.Qb.v2();if(this.a2||this.K2)throw new Error("already created render target");if(this.f2=i.t2,this.Q2=!!i.alpha,this.tT=!!i.depth,this.sT=!!i.U2,this.Z2=!!i.z2,this.iT=i.J2,!Ti.has(this.f2))throw new Error("invalid sampling");if(0<this.iT&&(e<2||this.sT))throw new Error("invalid use of multisampling");if(e<2&&(this.sT=!0),this.Tg=t,this.xg=s,this.Tg<=0||this.xg<=0)throw new Error("invalid render target size");this.aT();const h=this.Qb.M2();if(this.X2=h.createFramebuffer(),this.tT&&(this.Y2=h.createFramebuffer()),this.sT){this.a2=this.Qb.lT(this.Tg,this.xg,{t2:this.f2,i2:this.Q2?"rgba8":"rgb8",e2:!1});const n=this.a2.L2();h.bindFramebuffer(h.FRAMEBUFFER,this.X2),h.framebufferTexture2D(h.FRAMEBUFFER,h.COLOR_ATTACHMENT0,h.TEXTURE_2D,n,0),this.tT&&(h.bindFramebuffer(h.FRAMEBUFFER,this.Y2),h.framebufferTexture2D(h.FRAMEBUFFER,h.COLOR_ATTACHMENT0,h.TEXTURE_2D,n,0))}else{this.K2=h.createRenderbuffer(),h.bindRenderbuffer(h.RENDERBUFFER,this.K2);const o=this.Q2?h.RGBA8:h.RGB8;if(0<this.iT){const a=h.getInternalformatParameter(h.RENDERBUFFER,o,h.SAMPLES);if(a&&a[0]){const l=a[0];this.iT>l&&(this.iT=l)}else this.iT=0}0===this.iT?h.renderbufferStorage(h.RENDERBUFFER,o,this.Tg,this.xg):h.renderbufferStorageMultisample(h.RENDERBUFFER,this.iT,o,this.Tg,this.xg),h.bindFramebuffer(h.FRAMEBUFFER,this.X2),h.framebufferRenderbuffer(h.FRAMEBUFFER,h.COLOR_ATTACHMENT0,h.RENDERBUFFER,this.K2),this.tT&&(h.bindFramebuffer(h.FRAMEBUFFER,this.Y2),h.framebufferRenderbuffer(h.FRAMEBUFFER,h.COLOR_ATTACHMENT0,h.RENDERBUFFER,this.K2)),h.bindRenderbuffer(h.RENDERBUFFER,null)}const r=this.Qb.uT();this.tT&&r&&(h.bindFramebuffer(h.FRAMEBUFFER,this.X2),this.Qb.cT()?h.framebufferTexture2D(h.FRAMEBUFFER,h.DEPTH_STENCIL_ATTACHMENT,h.TEXTURE_2D,r,0):h.framebufferRenderbuffer(h.FRAMEBUFFER,h.DEPTH_STENCIL_ATTACHMENT,h.RENDERBUFFER,r)),h.bindFramebuffer(h.FRAMEBUFFER,null),Gi.add(this)}fT(t,s){if(this.Tg!==t||this.xg!==s){this.Tg=t,this.xg=s,this.aT();const i=this.Qb.M2(),e=(i.bindFramebuffer(i.FRAMEBUFFER,this.X2),this.a2?this.a2.F2(new ImageData(this.Tg,this.xg)):(i.bindRenderbuffer(i.RENDERBUFFER,this.K2),i.renderbufferStorage(i.RENDERBUFFER,this.Q2?i.RGBA8:i.RGB8,this.Tg,this.xg),i.bindRenderbuffer(i.RENDERBUFFER,null)),this.Qb.uT());this.tT&&e&&(this.Qb.cT()?i.framebufferTexture2D(i.FRAMEBUFFER,i.DEPTH_STENCIL_ATTACHMENT,i.TEXTURE_2D,e,0):i.framebufferRenderbuffer(i.FRAMEBUFFER,i.DEPTH_STENCIL_ATTACHMENT,i.RENDERBUFFER,e)),i.bindFramebuffer(i.FRAMEBUFFER,null)}}D2(){if(!this.a2&&!this.K2)throw new Error("already deleted render target");Gi.delete(this);const t=this.Qb.M2(),s=(this.a2?(t.bindFramebuffer(t.FRAMEBUFFER,this.X2),t.framebufferTexture2D(t.FRAMEBUFFER,t.COLOR_ATTACHMENT0,t.TEXTURE_2D,null,0),this.tT&&(t.bindFramebuffer(t.FRAMEBUFFER,this.Y2),t.framebufferTexture2D(t.FRAMEBUFFER,t.COLOR_ATTACHMENT0,t.TEXTURE_2D,null,0)),this.Qb.dT(this.a2),this.a2=null):this.K2&&(t.bindFramebuffer(t.FRAMEBUFFER,this.X2),t.framebufferRenderbuffer(t.FRAMEBUFFER,t.COLOR_ATTACHMENT0,t.RENDERBUFFER,null),this.tT&&(t.bindFramebuffer(t.FRAMEBUFFER,this.Y2),t.framebufferRenderbuffer(t.FRAMEBUFFER,t.COLOR_ATTACHMENT0,t.RENDERBUFFER,null)),t.deleteRenderbuffer(this.K2),this.K2=null),t.bindFramebuffer(t.FRAMEBUFFER,null),2<=this.Qb.v2()&&(t.bindFramebuffer(t.READ_FRAMEBUFFER,null),t.bindFramebuffer(t.DRAW_FRAMEBUFFER,null)),t.deleteFramebuffer(this.X2),this.tT&&t.deleteFramebuffer(this.Y2),this.Qb.pT());s.mT=null,this.X2=s.gT=null}aT(){this.Qb.ew(this.eT,this.Tg/this.xg),this.hT=this.Qb.KS(),this.rT=this.Qb.qS(),this.nT=this.Qb.YS()}yT(){return this.X2}ST(){return this.Y2}bM(){return this.Qb}wT(){return this.a2}bT(){return this.Qb.KS()===this.hT&&this.Qb.qS()===this.rT&&this.Qb.YS()===this.nT||this.aT(),this.eT}MT(){return"nearest"!==this.f2}vT(){return this.Q2}TT(){return this.sT}xT(){return this.tT}Wm(){return this.Tg}$m(){return this.xg}GT(){return this.Z2}_T(){return this.iT}IT(){const t={t2:this.f2,alpha:this.Q2,U2:this.sT};return this.Z2||(t.width=this.Tg,t.height=this.xg),t}CT(t){return"nearest"!==(t=Object.assign({},xi,t)).t2===this.MT()&&!!t.alpha===this.vT()&&!!t.depth===this.xT()&&!(2<=this.Qb.v2()&&!!t.U2!==this.TT())&&("number"==typeof t.width||"number"==typeof t.height?!this.GT()&&this.Wm()===Math.floor(t.width)&&this.$m()===Math.floor(t.height):this.GT())}PT(){return this.a2?this.a2.L2():null}j2(){return this.a2?this.a2.j2():this.Tg*this.xg*(this.Q2?4:3)}static async RT(t,s){const i=await t.AT(s,!0);return Mi.Xo(i)}static jM(){Gi.clear()}static ET(){return Gi.values()}static FT(t,s){for(const i of Gi)i.GT()&&i.fT(t,s)}}}{const m=self.Vs,_i=self.xs,xh=_i.Es,Th=_i.Cs,Ii=new Set(["aPos","aTex","aPoints","matP","matMV","samplerFront","samplerBack","samplerDepth","destStart","destEnd","srcStart","srcEnd","srcOriginStart","srcOriginEnd","pixelSize","seconds","devicePixelRatio","layerScale","layerAngle","layoutStart","layoutEnd","color","color2_","pointTexStart","pointTexEnd","zElevation","tileSize","tileSpacing","outlineThickness","zNear","zFar"]);m.Ny.DT=class extends m.Ny.Zb{static async kT(t,s){const i=t.M2(),e=s.src,h=s.OT,r=s.name,n=i.createShader(i.FRAGMENT_SHADER),o=(i.shaderSource(n,e),i.compileShader(n),i.createShader(i.VERTEX_SHADER)),a=(i.shaderSource(o,h),i.compileShader(o),i.createProgram()),l=(i.attachShader(a,n),i.attachShader(a,o),i.bindAttribLocation(a,0,"aPos"),i.bindAttribLocation(a,1,"aTex"),i.bindAttribLocation(a,2,"aPoints"),i.linkProgram(a),t.LT());if(l?await t.NT(()=>i.getProgramParameter(a,l.COMPLETION_STATUS_KHR)):await m.zn(5),!i.getShaderParameter(n,i.COMPILE_STATUS)){const c=i.getShaderInfoLog(n);throw i.deleteShader(n),i.deleteShader(o),i.deleteProgram(a),new Error("Error compiling fragment shader: "+c)}if(!i.getShaderParameter(o,i.COMPILE_STATUS)){const f=i.getShaderInfoLog(o);throw i.deleteShader(n),i.deleteShader(o),i.deleteProgram(a),new Error("Error compiling vertex shader: "+f)}if(!i.getProgramParameter(a,i.LINK_STATUS)){const d=i.getProgramInfoLog(a);throw i.deleteShader(n),i.deleteShader(o),i.deleteProgram(a),new Error("Error linking shader program: "+d)}const u=m.bp(i.getProgramInfoLog(a)||"").trim();return u&&!m.gp(u)&&console.info(`[WebGL] Shader program '${r}' compilation log: `,u),i.deleteShader(n),i.deleteShader(o),a}static async BT(t,s){const i=await m.Ny.DT.kT(t,s);return new m.Ny.DT(t,i,s)}constructor(t,s,i){super(t,i);const e=t.M2(),h=t.pT(),r=(t.Nb(),e.useProgram(s),this.WT=e,this.DM=s,this.VT="<default-device-transform>"===i.name,e.getAttribLocation(s,"aPos")),n=e.getAttribLocation(s,"aTex"),o=(this.jT=e.getAttribLocation(s,"aPoints"),-1!==r&&(e.bindBuffer(e.ARRAY_BUFFER,t.HT),e.vertexAttribPointer(r,t.Ob(),e.FLOAT,!1,0,0),e.enableVertexAttribArray(r)),-1!==n&&(e.bindBuffer(e.ARRAY_BUFFER,t.UT),e.vertexAttribPointer(n,2,e.FLOAT,!1,0,0),e.enableVertexAttribArray(n)),-1!==this.jT&&(e.bindBuffer(e.ARRAY_BUFFER,t.zT),e.vertexAttribPointer(this.jT,4,e.FLOAT,!1,0,0),e.enableVertexAttribArray(this.jT)),e.bindBuffer(e.ARRAY_BUFFER,null),this.JT=new m.Ny.qT(this,"matP","mat4"),this.XT=new m.Ny.qT(this,"matMV","mat4"),this.YT=new m.Ny.qT(this,"color","vec4"),this.$T=new m.Ny.qT(this,"samplerFront","sampler"),this.KT=new m.Ny.qT(this,"pointTexStart","vec2"),this.ZT=new m.Ny.qT(this,"pointTexEnd","vec2"),this.QT=new m.Ny.qT(this,"zElevation","float"),this.tx=new m.Ny.qT(this,"tileSize","vec2"),this.ix=new m.Ny.qT(this,"tileSpacing","vec2"),this.hx=new m.Ny.qT(this,"color2_","vec4"),this.nx=new m.Ny.qT(this,"outlineThickness","float"),this.ox=new m.Ny.qT(this,"samplerBack","sampler"),this.ux=new m.Ny.qT(this,"samplerDepth","sampler"),this.mx=new m.Ny.qT(this,"destStart","vec2"),this.gx=new m.Ny.qT(this,"destEnd","vec2"),this.yx=new m.Ny.qT(this,"srcStart","vec2"),this.Sx=new m.Ny.qT(this,"srcEnd","vec2"),this.wx=new m.Ny.qT(this,"srcOriginStart","vec2"),this.bx=new m.Ny.qT(this,"srcOriginEnd","vec2"),this.Mx=new m.Ny.qT(this,"pixelSize","vec2"),this.Tx=new m.Ny.qT(this,"seconds","float"),this.xx=new m.Ny.qT(this,"devicePixelRatio","float"),this.Gx=new m.Ny.qT(this,"layerScale","float"),this._x=new m.Ny.qT(this,"layerAngle","float"),this.Ix=new m.Ny.qT(this,"layoutStart","vec2"),this.Cx=new m.Ny.qT(this,"layoutEnd","vec2"),this.Px=new m.Ny.qT(this,"zNear","float"),this.Rx=new m.Ny.qT(this,"zFar","float"),this.Ax=!!(this.Mx.Ex()||this.Tx.Ex()||this.ox.Ex()||this.mx.Ex()||this.gx.Ex()||this.yx.Ex()||this.Sx.Ex()||this.wx.Ex()||this.bx.Ex()||this.xx.Ex()||this.Gx.Ex()||this._x.Ex()||this.Ix.Ex()||this.Cx.Ex()),i.parameters||[]);this.Fx=[],this.SM=this.Mx.Ex()||this.yx.Ex()||this.Sx.Ex()||this.wx.Ex()||this.bx.Ex(),this.Dx=!1,this.kx=!1,this.YT.Ox(1,1,1,1),this.hx.Ox(1,1,1,1),this.$T.Lx(0),this.ox.Lx(1),this.ux.Lx(2),this.KT.Nx(0,0),this.ZT.Nx(1,1),this.QT.Bx(0),this.tx.Nx(0,0),this.ix.Nx(0,0),this.mx.Nx(0,0),this.gx.Nx(1,1),this.yx.Nx(0,0),this.Sx.Nx(0,0),this.wx.Nx(0,0),this.bx.Nx(0,0),this.Mx.Nx(0,0),this.xx.Bx(1),this.Px.Bx(t.qS()),this.Rx.Bx(t.YS()),this.Gx.Bx(1),this._x.Bx(0),this.Tx.Bx(0),this.Ix.Nx(0,0),this.Cx.Nx(0,0),this.nx.Bx(1);for(const l of o){const u=l[0],c=l[2],f=new m.Ny.qT(this,u,c);"color"===c?f.Wx(0,0,0):f.Bx(0),this.Fx.push(f)}this.VT?this.Vx(h.jx):(this.Hx(h.jx,!0),this.Ux(h.zx,!0));const a=h.Jx;e.useProgram(a?a.DM:null)}Gr(){this.WT.deleteProgram(this.DM),this.DM=null,this.Qb.uw(this),this.WT=null,super.Gr()}qx(){return this.WT}Xx(){return this.DM}Yx(){return this.Fx.length}$x(t){return t<0||t>=this.Fx.length?null:this.Fx[t].Kx()}Zx(i){for(let t=0,s=i.length;t<s;++t)if(!this.Fx[t].Qx(i[t]))return!1;return!0}tG(i){for(let t=0,s=i.length;t<s;++t)this.Fx[t].sG(i[t])}iG(t,s,i,e,h,r,n,o,a,l){return!this.ox.Ex()&&!(this.Mx.Ex()&&!this.Mx.eG(h,r)||this.mx.Ex()&&!this.mx.eG(t.Wl(),t.Vl())||this.gx.Ex()&&!this.gx.eG(t.jl(),t.Hl())||this.xx.Ex()&&!this.xx.hG(n)||this.Gx.Ex()&&!this.Gx.hG(o)||this._x.Ex()&&!this._x.hG(a)||this.yx.Ex()&&!this.yx.eG(s.Wl(),s.Vl())||this.Sx.Ex()&&!this.Sx.eG(s.jl(),s.Hl())||this.wx.Ex()&&!this.wx.eG(i.Wl(),i.Vl())||this.bx.Ex()&&!this.bx.eG(i.jl(),i.Hl())||this.Ix.Ex()&&!this.Ix.eG(e.Wl(),e.Vl())||this.Cx.Ex()&&!this.Cx.eG(e.Vl(),e.Hl())||this.Tx.Ex()&&!this.Tx.hG(l))}rG(t,s,i,e,h,r,n,o,a,l){this.ox.Ex()||(this.Mx.Ex()&&this.Mx.nG(h,r),this.mx.Ex()&&this.mx.nG(t.Wl(),t.Vl()),this.gx.Ex()&&this.gx.nG(t.jl(),t.Hl()),this.xx.Ex()&&this.xx.oG(n),this.Gx.Ex()&&this.Gx.oG(o),this._x.Ex()&&this._x.oG(a),this.yx.Ex()&&this.yx.nG(s.Wl(),s.Vl()),this.Sx.Ex()&&this.Sx.nG(s.jl(),s.Hl()),this.wx.Ex()&&this.wx.nG(i.Wl(),i.Vl()),this.bx.Ex()&&this.bx.nG(i.jl(),i.Hl()),this.Ix.Ex()&&this.Ix.nG(e.Wl(),e.Vl()),this.Cx.Ex()&&this.Cx.nG(e.Vl(),e.Hl()),this.Tx.Ex()&&this.Tx.oG(l))}Hx(t,s){this.Dx&&!s||this.VT||(this.JT.Ex()&&this.JT.aG(t),this.Dx=!0)}lG(){this.Dx=!1}Ux(t,s){this.kx&&!s||this.VT||(this.XT.Ex()&&this.XT.aG(t),this.kx=!0)}uG(){this.kx=!1}Vx(t){if(!this.VT)throw new Error("not device transform shader");this.JT.aG(t);const s=this.Qb,i=s.Wm()/2,e=s.$m()/2,h=s.aw(i,e,s.jS(s.$m()),i,e,0,s.$m());this.XT.aG(h)}cG(t){this.YT.Ex()&&this.YT.fG(t[0],t[1],t[2],t[3])}static dG(){return Ii}static pG(t){const s=t?"highmedp":"mediump";return["#ifdef GL_FRAGMENT_PRECISION_HIGH","#define highmedp highp","#else","#define highmedp mediump","#endif","attribute highp vec3 aPos;",`attribute ${s} vec2 aTex;`,`varying ${s} vec2 vTex;`,"uniform highp mat4 matP;","uniform highp mat4 matMV;","void main(void) {",`	gl_Position = matP * matMV * vec4(aPos, 1.0);`,`	vTex = aTex;`,"}"].join("\n")}static mG(t){const s=t?"highp":"mediump";return["#version 300 es","in highp vec3 aPos;",`in ${s} vec2 aTex;`,`out ${s} vec2 vTex;`,"uniform highp mat4 matP;","uniform highp mat4 matMV;","void main(void) {",`	gl_Position = matP * matMV * vec4(aPos, 1.0);`,`	vTex = aTex;`,"}"].join("\n")}static gG(){return["varying mediump vec2 vTex;","uniform lowp vec4 color;","uniform lowp sampler2D samplerFront;","void main(void) {","\tgl_FragColor = texture2D(samplerFront, vTex) * color;","}"].join("\n")}static yG(){return["#extension GL_EXT_frag_depth : enable","varying mediump vec2 vTex;","uniform lowp vec4 color;","uniform lowp sampler2D samplerFront;","void main(void) {","\tgl_FragColor = texture2D(samplerFront, vTex) * color;","\tgl_FragDepthEXT = (gl_FragColor.a == 0.0 ? 1.0 : gl_FragCoord.z);","}"].join("\n")}static SG(){return["#version 300 es","in mediump vec2 vTex;","out lowp vec4 outColor;","uniform lowp vec4 color;","uniform lowp sampler2D samplerFront;","void main(void) {","\toutColor = texture(samplerFront, vTex) * color;","\tgl_FragDepth = (outColor.a == 0.0 ? 1.0 : gl_FragCoord.z);","}"].join("\n")}static wG(){return["#ifdef GL_FRAGMENT_PRECISION_HIGH","#define highmedp highp","#else","#define highmedp mediump","#endif","varying highmedp vec2 vTex;","uniform lowp vec4 color;","uniform lowp sampler2D samplerFront;","uniform highmedp vec2 srcStart;","uniform highmedp vec2 pixelSize;","uniform highmedp vec2 tileSize;","uniform highmedp vec2 tileSpacing;","void main(void) {","\thighmedp vec2 tile = floor(vTex);","\thighmedp vec2 tex = fract(vTex);","\thighmedp vec2 tileOrigin = srcStart + tile * (tileSize + tileSpacing);","\thighmedp vec2 lowerBound = tileOrigin + pixelSize / 2.0;","\thighmedp vec2 upperBound = tileOrigin + tileSize - pixelSize / 2.0;","\tgl_FragColor = texture2D(samplerFront, clamp(tex, lowerBound, upperBound), -16.0) * color;","}"].join("\n")}static bG(){return["#extension GL_EXT_frag_depth : enable","#ifdef GL_FRAGMENT_PRECISION_HIGH","#define highmedp highp","#else","#define highmedp mediump","#endif","varying highmedp vec2 vTex;","uniform lowp vec4 color;","uniform lowp sampler2D samplerFront;","uniform highmedp vec2 srcStart;","uniform highmedp vec2 pixelSize;","uniform highmedp vec2 tileSize;","uniform highmedp vec2 tileSpacing;","void main(void) {","\thighmedp vec2 tile = floor(vTex);","\thighmedp vec2 tex = fract(vTex);","\thighmedp vec2 tileOrigin = srcStart + tile * (tileSize + tileSpacing);","\thighmedp vec2 lowerBound = tileOrigin + pixelSize / 2.0;","\thighmedp vec2 upperBound = tileOrigin + tileSize - pixelSize / 2.0;","\tgl_FragColor = texture2D(samplerFront, clamp(tex, lowerBound, upperBound), -16.0) * color;","\tgl_FragDepthEXT = (gl_FragColor.a == 0.0 ? 1.0 : gl_FragCoord.z);","}"].join("\n")}static MG(){return["#version 300 es","in highp vec2 vTex;","out lowp vec4 outColor;","uniform lowp vec4 color;","uniform lowp sampler2D samplerFront;","uniform highp vec2 srcStart;","uniform highp vec2 pixelSize;","uniform highp vec2 tileSize;","uniform highp vec2 tileSpacing;","void main(void) {","\thighp vec2 tile = floor(vTex);","\thighp vec2 tex = fract(vTex);","\thighp vec2 tileOrigin = srcStart + tile * (tileSize + tileSpacing);","\thighp vec2 lowerBound = tileOrigin + pixelSize / 2.0;","\thighp vec2 upperBound = tileOrigin + tileSize - pixelSize / 2.0;","\toutColor = texture(samplerFront, clamp(tex, lowerBound, upperBound), -16.0) * color;","\tgl_FragDepth = (outColor.a == 0.0 ? 1.0 : gl_FragCoord.z);","}"].join("\n")}static vG(t,s,i){let e="";return 2<=t?e="#version 300 es\n":(s&&(e="#extension GL_EXT_frag_depth : enable\n"),i&&(e+="#extension GL_EXT_shader_texture_lod : enable\n#extension GL_OES_standard_derivatives : enable\n")),e+`
#ifdef GL_FRAGMENT_PRECISION_HIGH
#define highmedp highp
#else
#define highmedp mediump
#endif
precision highmedp float;
${2<=t?"in":"varying"} vec2 vTex;
${2<=t?"out lowp vec4 outColor;":""}
uniform lowp vec4 color;
uniform lowp sampler2D samplerFront;
uniform vec2 pixelSize;

uniform vec2 tileSize;
uniform vec2 tileSpacing;
uniform float outlineThickness;

const float PI = 3.1415926;

lowp vec4 cospVec4(lowp vec4 a, lowp vec4 b, float x)
{
	return (a + b + (a - b) * cos(x * PI)) / 2.0;
}

vec3 randVec3(vec2 seed)
{
	return vec3(fract(sin(dot(seed.xy + vec2(0.1, 0.1), vec2(12.9898,78.233))) * 43758.5453),
				fract(sin(dot(seed.yx + vec2(0.1, 0.1), vec2(12.9898,-78.233))) * 43758.5453),
				fract(sin(dot(seed.xy + vec2(0.1, 0.1), vec2(-12.9898,-78.233))) * 43758.5453));
}

lowp vec4 sampleTile(vec2 tile, vec2 uv, vec2 ddx, vec2 ddy)
{
	vec2 posRandom = tileSize;
	float angleRandom = outlineThickness;
	
	vec3 rand = (randVec3(floor(tile + 0.5)) - 0.5) * 2.0;
	
	float angle = angleRandom * rand.z * PI;
	float sin_a = sin(angle);
	float cos_a = cos(angle);
	float aspect = pixelSize.x / pixelSize.y;

	vec2 mid = tile + vec2(0.5, 0.5);
	vec2 dp = uv - mid;
	dp.x /= aspect;
	vec2 r = vec2(dp.x * cos_a - dp.y * sin_a,
				  dp.y * cos_a + dp.x * sin_a);
	r.x *= aspect;

	vec2 p = mid + r + (posRandom * rand.xy / 2.0);
	
	${2<=t?"return textureGrad(samplerFront, p, ddx, ddy);":""}
	${t<2&&i?"return texture2DGradEXT(samplerFront, p, ddx, ddy);":""}
	${t<2&&!i?"return texture2D(samplerFront, p);":""}
}

void main(void) {
	
	${t<2?"lowp vec4 outColor;":""}
	
	float blendMarginX = tileSpacing.x;
	float blendMarginY = tileSpacing.y;
	
	vec2 tile = floor(vTex);
	vec2 tex = fract(vTex);
	vec2 ddx = ${2<=t||i?"dFdx(vTex)":"vec2(0.0, 0.0)"};
	vec2 ddy = ${2<=t||i?"dFdy(vTex)":"vec2(0.0, 0.0)"};
	
	vec4 curTile = sampleTile(tile, vTex, ddx, ddy);
	
	bool inLeftMargin = (tex.x < blendMarginX);
	bool inRightMargin = (tex.x > 1.0 - blendMarginX);
	bool inTopMargin = (tex.y < blendMarginY);
	bool inBottomMargin = (tex.y > 1.0 - blendMarginY);
	
	if (inLeftMargin)
	{
		lowp vec4 leftTile = sampleTile(tile + vec2(-1.0, 0.0), vTex, ddx, ddy);
		float leftMix = (tex.x / (blendMarginX * 2.0)) + 0.5;
		lowp vec4 leftMixedTile = cospVec4(leftTile, curTile, leftMix);
		
		if (inTopMargin)
		{
			lowp vec4 topTile =     sampleTile(tile + vec2(0.0,  -1.0), vTex, ddx, ddy);
			lowp vec4 topLeftTile = sampleTile(tile + vec2(-1.0, -1.0), vTex, ddx, ddy);
			lowp vec4 topLeftMixedTile = cospVec4(topLeftTile, topTile, leftMix);
			
			outColor = cospVec4(topLeftMixedTile, leftMixedTile, (tex.y / (blendMarginY * 2.0)) + 0.5);
		}
		else if (inBottomMargin)
		{
			lowp vec4 bottomTile =     sampleTile(tile + vec2(0.0,  1.0), vTex, ddx, ddy);
			lowp vec4 bottomLeftTile = sampleTile(tile + vec2(-1.0, 1.0), vTex, ddx, ddy);
			lowp vec4 bottomLeftMixedTile = cospVec4(bottomLeftTile, bottomTile, leftMix);
			
			outColor = cospVec4(leftMixedTile, bottomLeftMixedTile, (tex.y - (1.0 - blendMarginY)) / (blendMarginY * 2.0));
		}
		else
		{
			outColor = leftMixedTile;
		}
	}
	else if (inRightMargin)
	{
		lowp vec4 rightTile = sampleTile(tile + vec2(1.0, 0.0), vTex, ddx, ddy);
		float rightMix = (tex.x - (1.0 - blendMarginX)) / (blendMarginX * 2.0);
		lowp vec4 rightMixedTile = cospVec4(curTile, rightTile, rightMix);
		
		if (inTopMargin)
		{
			lowp vec4 topTile =      sampleTile(tile + vec2(0.0, -1.0), vTex, ddx, ddy);
			lowp vec4 topRightTile = sampleTile(tile + vec2(1.0, -1.0), vTex, ddx, ddy);
			lowp vec4 topRightMixedTile = cospVec4(topTile, topRightTile, rightMix);
			
			outColor = cospVec4(topRightMixedTile, rightMixedTile, (tex.y / (blendMarginY * 2.0)) + 0.5);
		}
		else if (inBottomMargin)
		{
			lowp vec4 bottomTile =      sampleTile(tile + vec2(0.0, 1.0), vTex, ddx, ddy);
			lowp vec4 bottomRightTile = sampleTile(tile + vec2(1.0, 1.0), vTex, ddx, ddy);
			lowp vec4 bottomRightMixedTile = cospVec4(bottomTile, bottomRightTile, rightMix);
			
			outColor = cospVec4(rightMixedTile, bottomRightMixedTile, (tex.y - (1.0 - blendMarginY)) / (blendMarginY * 2.0));
		}
		else
		{
			outColor = rightMixedTile;
		}
	}
	else if (inTopMargin)
	{
		lowp vec4 topTile = sampleTile(tile + vec2(0.0, -1.0), vTex, ddx, ddy);
		outColor = cospVec4(topTile, curTile, (tex.y / (blendMarginY * 2.0)) + 0.5);
	}
	else if (inBottomMargin)
	{
		lowp vec4 bottomTile = sampleTile(tile + vec2(0.0, 1.0), vTex, ddx, ddy);
		outColor = cospVec4(curTile, bottomTile, (tex.y - (1.0 - blendMarginY)) / (blendMarginY * 2.0));
	}
	else
	{
		outColor = curTile;
	}
	
	outColor *= color;
	${t<2?"gl_FragColor = outColor;":""}
	${2<=t?"gl_FragDepth = (outColor.a == 0.0 ? 1.0 : gl_FragCoord.z);":""}
	${t<2&&s?"gl_FragDepthEXT = (outColor.a == 0.0 ? 1.0 : gl_FragCoord.z);":""}
}
`}static TG(){return["attribute vec4 aPoints;","varying float pointOpacity;","uniform float zElevation;","uniform mat4 matP;","uniform mat4 matMV;","void main(void) {","\tgl_Position = matP * matMV * vec4(aPoints.xy, zElevation, 1.0);","\tgl_PointSize = aPoints.z;","\tpointOpacity = aPoints.w;","}"].join("\n")}static xG(){return["#version 300 es","in vec4 aPoints;","out float pointOpacity;","uniform float zElevation;","uniform mat4 matP;","uniform mat4 matMV;","void main(void) {","\tgl_Position = matP * matMV * vec4(aPoints.xy, zElevation, 1.0);","\tgl_PointSize = aPoints.z;","\tpointOpacity = aPoints.w;","}"].join("\n")}static GG(){return["uniform lowp sampler2D samplerFront;","varying lowp float pointOpacity;","uniform mediump vec2 pointTexStart;","uniform mediump vec2 pointTexEnd;","uniform lowp vec4 color;","void main(void) {","\tmediump vec2 pointTexMin = min(pointTexStart, pointTexEnd);","\tmediump vec2 pointTexMax = max(pointTexStart, pointTexEnd);","\tmediump vec2 pointCoord = (pointTexEnd.x > pointTexStart.x ? gl_PointCoord : vec2(1.0 - gl_PointCoord.y, gl_PointCoord.x));","\tgl_FragColor = texture2D(samplerFront, mix(pointTexMin, pointTexMax, pointCoord)) * color * pointOpacity;","}"].join("\n")}static _G(){return["#extension GL_EXT_frag_depth : enable","uniform lowp sampler2D samplerFront;","varying lowp float pointOpacity;","uniform mediump vec2 pointTexStart;","uniform mediump vec2 pointTexEnd;","uniform lowp vec4 color;","void main(void) {","\tmediump vec2 pointTexMin = min(pointTexStart, pointTexEnd);","\tmediump vec2 pointTexMax = max(pointTexStart, pointTexEnd);","\tmediump vec2 pointCoord = (pointTexEnd.x > pointTexStart.x ? gl_PointCoord : vec2(1.0 - gl_PointCoord.y, gl_PointCoord.x));","\tgl_FragColor = texture2D(samplerFront, mix(pointTexMin, pointTexMax, pointCoord)) * color * pointOpacity;","\tgl_FragDepthEXT = (gl_FragColor.a == 0.0 ? 1.0 : gl_FragCoord.z);","}"].join("\n")}static IG(){return["#version 300 es","uniform lowp sampler2D samplerFront;","in lowp float pointOpacity;","uniform mediump vec2 pointTexStart;","uniform mediump vec2 pointTexEnd;","uniform lowp vec4 color;","out lowp vec4 outColor;","void main(void) {","\tmediump vec2 pointTexMin = min(pointTexStart, pointTexEnd);","\tmediump vec2 pointTexMax = max(pointTexStart, pointTexEnd);","\tmediump vec2 pointCoord = (pointTexEnd.x > pointTexStart.x ? gl_PointCoord : vec2(1.0 - gl_PointCoord.y, gl_PointCoord.x));","\toutColor = texture(samplerFront, mix(pointTexMin, pointTexMax, pointCoord)) * color * pointOpacity;","\tgl_FragDepth = (outColor.a == 0.0 ? 1.0 : gl_FragCoord.z);","}"].join("\n")}static CG(){return["uniform lowp vec4 color;","void main(void) {","\tgl_FragColor = color;","}"].join("\n")}static PG(){return["precision lowp float;","varying mediump vec2 vTex;","uniform vec4 color;","uniform vec4 color2_;","vec3 fromLinear(vec3 linearRGB)","{","\tbvec3 cutoff = lessThan(linearRGB, vec3(0.0031308));","\tvec3 higher = vec3(1.055) * pow(abs(linearRGB), vec3(1.0/2.4)) - vec3(0.055);","\tvec3 lower = linearRGB * vec3(12.92);","\treturn mix(higher, lower, vec3(cutoff));","}","vec3 toLinear(vec3 sRGB)","{","\tbvec3 cutoff = lessThan(sRGB, vec3(0.04045));","\tvec3 higher = pow(abs((sRGB + vec3(0.055))/vec3(1.055)), vec3(2.4));","\tvec3 lower = sRGB/vec3(12.92);","\treturn mix(higher, lower, vec3(cutoff));","}","void main(void) {","\tvec3 linearGrad = mix(toLinear(color.rgb), toLinear(color2_.rgb), vTex.x);","\tfloat a = mix(color.a, color2_.a, vTex.x);","\tgl_FragColor = vec4(fromLinear(linearGrad) * a, a);","}"].join("\n")}static AG(){return["#ifdef GL_FRAGMENT_PRECISION_HIGH","#define highmedp highp","#else","#define highmedp mediump","#endif","precision lowp float;","varying highmedp vec2 vTex;","uniform vec4 color;","void main(void) {",`	highmedp float grad = vTex.x / (1.0 - vTex.y);`,`	gl_FragColor = color * (1.0 - (cos(grad * 3.141592653589793) + 1.0) / 2.0);`,"}"].join("\n")}static EG(){return["varying mediump vec2 vTex;","uniform lowp vec4 color;","void main(void) {","\tlowp float f = 1.0 - abs(vTex.y - 0.5) * 2.0;","\tgl_FragColor = color * f;","}"].join("\n")}static FG(){return["varying mediump vec2 vTex;","uniform lowp vec4 color;","void main(void) {","\tmediump vec2 diff = vTex - vec2(0.5, 0.5);","\tmediump vec2 diffSq = diff * diff;","\tmediump float f = step(diffSq.x + diffSq.y, 0.25);","\tgl_FragColor = color * f;","}"].join("\n")}static DG(){return["varying mediump vec2 vTex;","uniform lowp vec4 color;","uniform mediump vec2 pixelSize;","uniform mediump float outlineThickness;","void main(void) {","\tmediump vec2 diff = vTex - vec2(0.5, 0.5);","\tmediump vec2 diffSq = diff * diff;","\tmediump float distSq = diffSq.x + diffSq.y;","\tmediump vec2 norm = normalize(diff);","\tmediump vec2 halfNorm = norm * 0.5;","\tmediump float innerF = step(distSq, 0.25);","\tmediump vec2 innerEdge = halfNorm - pixelSize * norm * outlineThickness;","\tmediump vec2 innerEdgeSq = innerEdge * innerEdge;","\tmediump float outerF = step(innerEdgeSq.x + innerEdgeSq.y, distSq);","\tgl_FragColor = color * innerF * outerF;","}"].join("\n")}static kG(){return["varying mediump vec2 vTex;","uniform lowp vec4 color;","uniform mediump vec2 pixelSize;","void main(void) {","\tmediump vec2 diff = vTex - vec2(0.5, 0.5);","\tmediump vec2 diffSq = diff * diff;","\tmediump vec2 norm = normalize(diff);","\tmediump vec2 halfNorm = norm * 0.5;","\tmediump vec2 halfNormSq = halfNorm * halfNorm;","\tmediump vec2 innerEdge = halfNorm - pixelSize * norm;","\tmediump vec2 innerEdgeSq = innerEdge * innerEdge;","\tmediump float f = smoothstep(halfNormSq.x + halfNormSq.y, innerEdgeSq.x + innerEdgeSq.y, diffSq.x + diffSq.y);","\tgl_FragColor = color * f;","}"].join("\n")}static OG(){return["varying mediump vec2 vTex;","uniform lowp vec4 color;","uniform mediump vec2 pixelSize;","uniform mediump float outlineThickness;","void main(void) {","\tmediump vec2 diff = vTex - vec2(0.5, 0.5);","\tmediump vec2 diffSq = diff * diff;","\tmediump float distSq = diffSq.x + diffSq.y;","\tmediump vec2 norm = normalize(diff);","\tmediump vec2 halfNorm = norm * 0.5;","\tmediump vec2 halfNormSq = halfNorm * halfNorm;","\tmediump vec2 pxNorm = pixelSize * norm;","\tmediump vec2 innerEdge1 = halfNorm - pxNorm;","\tmediump vec2 innerEdge1Sq = innerEdge1 * innerEdge1;","\tmediump float innerF = smoothstep(halfNormSq.x + halfNormSq.y, innerEdge1Sq.x + innerEdge1Sq.y, distSq);","\tmediump vec2 innerEdge2 = halfNorm - pxNorm * outlineThickness;","\tmediump vec2 innerEdge2Sq = innerEdge2 * innerEdge2;","\tmediump vec2 innerEdge3 = halfNorm - pxNorm * (outlineThickness + 1.0);","\tmediump vec2 innerEdge3Sq = innerEdge3 * innerEdge3;","\tmediump float outerF = smoothstep(innerEdge3Sq.x + innerEdge3Sq.y, innerEdge2Sq.x + innerEdge2Sq.y, distSq);","\tgl_FragColor = color * innerF * outerF;","}"].join("\n")}}}{const Ci=self.Vs,Pi=self.xs,Th=Pi.Cs,Ri=new Map([["float",1],["percent",1],["sampler",1],["vec2",2],["vec3",3],["color",3],["vec4",4],["mat4",16]]);Ci.Ny.qT=class{constructor(t,s,i){if(!Ri.has(i))throw new Error("invalid uniform type");this.vv=t,this.WT=this.vv.qx(),this.Cr=s,this.Lf=i,this.LG="color"===this.Lf,this.NG=this.WT.getUniformLocation(this.vv.Xx(),s),this.BG=!!this.NG;const e=Ri.get(i);this.WG=new Float32Array(e),this.VG=new Float32Array(e)}Gr(){this.vv=null,this.WT=null,this.NG=null}Ex(){return this.BG}Kx(){return this.Lf}jG(){return this.LG}Bx(t){this.Ex()&&(this.WG[0]=t,this.VG.set(this.WG),this.WT.uniform1f(this.NG,t))}Lx(t){this.Ex()&&(this.WG[0]=t,this.VG.set(this.WG),this.WT.uniform1i(this.NG,t))}Nx(t,s){this.Ex()&&(this.WG[0]=t,this.WG[1]=s,this.VG.set(this.WG),this.WT.uniform2f(this.NG,t,s))}Wx(t,s,i){this.Ex()&&(this.WG[0]=t,this.WG[1]=s,this.WG[2]=i,this.VG.set(this.WG),this.WT.uniform3f(this.NG,t,s,i))}Ox(t,s,i,e){this.Ex()&&(this.WG[0]=t,this.WG[1]=s,this.WG[2]=i,this.WG[3]=e,this.VG.set(this.WG),this.WT.uniform4f(this.NG,t,s,i,e))}HG(t){t=Math.fround(t);const s=this.WG;s[0]!==t&&(s[0]=t,this.WT.uniform1f(this.NG,t))}UG(t){const s=this.WG;s[0]!==t&&this.WT.uniform1i(this.NG,s[0]=t)}zG(t,s){t=Math.fround(t),s=Math.fround(s);const i=this.WG;i[0]===t&&i[1]===s||(i[0]=t,i[1]=s,this.WT.uniform2f(this.NG,t,s))}JG(t,s,i){t=Math.fround(t),s=Math.fround(s),i=Math.fround(i);const e=this.WG;e[0]===t&&e[1]===s&&e[2]===i||(e[0]=t,e[1]=s,e[2]=i,this.WT.uniform3f(this.NG,t,s,i))}fG(t,s,i,e){t=Math.fround(t),s=Math.fround(s),i=Math.fround(i),e=Math.fround(e);const h=this.WG;h[0]===t&&h[1]===s&&h[2]===i&&h[3]===e||(h[0]=t,h[1]=s,h[2]=i,h[3]=e,this.WT.uniform4f(this.NG,t,s,i,e))}aG(t){const s=this.WG;Th.V(s,t)||(Ci.Yn(s,t,0),this.WT.uniformMatrix4fv(this.NG,!1,t))}Qx(t){const s=this.VG;return this.jG()?s[0]===Math.fround(t.Ga())&&s[1]===Math.fround(t._a())&&s[2]===Math.fround(t.Ia()):s[0]===Math.fround(t)}sG(t){const s=this.VG;this.jG()?(s[0]=t.Ga(),s[1]=t._a(),s[2]=t.Ia()):s[0]=t}hG(t){return this.VG[0]===Math.fround(t)}eG(t,s){const i=this.VG;return i[0]===Math.fround(t)&&i[1]===Math.fround(s)}oG(t){this.VG[0]=t}nG(t,s){const i=this.VG;i[0]=t,i[1]=s}}}{const Ai=self.Vs,Ei=self.xs,jh=Ei.Fs,Th=Ei.Cs;Ai.Ny.qG=class{constructor(t){this.renderer=t,this.zx=Th.create(),this.jx=Th.create(),this.mT=null,this.gT=null,this.XG=!1,this.YG=jh.C(1,1,1,1),this.Jx=null,this.$G=new Ai.Rect,this.clearColor=Ai.Tr(Ai.na,0,0,0,0)}},Ai.Ny.KG=class{constructor(t){const s=new ArrayBuffer(96);this.Lf=0,this.ZG=t,this.WT=t.renderer.M2(),this.QG=0,this.t_=0,this.s_=null,this.i_=new Float32Array(s,0,16),this.e_=new Float32Array(s,64,4),this.h_=new Float32Array(s,80,4),this.r_=[]}n_(t,s){this.Lf=1,this.QG=t,this.t_=s}o_(){const t=this.WT;t.drawElements(t.TRIANGLES,this.t_,t.UNSIGNED_SHORT,this.QG)}a_(t){this.Lf=2,this.s_=t}l_(){const t=this.WT,s=this.s_;t.bindTexture(t.TEXTURE_2D,s?s.L2():null)}u_(t){this.Lf=3,t.Ra(this.e_,0)}c_(){const t=this.e_,s=this.ZG;jh.I(s.YG,t),s.Jx.cG(t)}f_(t){this.Lf=21,t.Ra(this.e_,0)}d_(){const t=this.e_,s=this.ZG.Jx;s.hx.Ex()&&s.hx.fG(t[0],t[1],t[2],t[3])}p_(t,s){this.Lf=4,this.QG=t,this.t_=s}m_(){this.WT.blendFunc(this.QG,this.t_)}g_(t,s,i,e){this.Lf=5;const h=this.e_;h[0]=t,h[1]=s,h[2]=i,h[3]=e}y_(){const t=this.e_;this.WT.viewport(t[0],t[1],t[2],t[3])}S_(t){this.Lf=6,Th.I(this.i_,t)}w_(){const t=this.ZG,i=t.renderer.aS,e=t.Jx,h=this.i_;for(let t=0,s=i.length;t<s;++t){const r=i[t];r===e?r.Hx(h,!0):r.lG()}Th.I(t.jx,h)}b_(t){this.Lf=7,Th.I(this.i_,t)}M_(){const t=this.ZG,i=t.renderer.aS,e=t.Jx,h=this.i_;for(let t=0,s=i.length;t<s;++t){const r=i[t];r===e?r.Ux(h,!0):r.uG()}Th.I(t.zx,h)}v_(t){this.Lf=8,this.s_=t}T_(){const t=this.WT,s=this.s_,i=this.ZG;s?(i.mT=s.yT(),i.gT=s.ST(),i.XG&&i.gT?t.bindFramebuffer(t.FRAMEBUFFER,i.gT):t.bindFramebuffer(t.FRAMEBUFFER,i.mT)):(i.mT=null,i.gT=null,t.bindFramebuffer(t.FRAMEBUFFER,null))}x_(t){this.Lf=9,t.Ra(this.i_,0)}G_(t,s,i,e){this.Lf=9;const h=this.i_;h[0]=t,h[1]=s,h[2]=i,h[3]=e}__(){const t=this.WT,s=this.i_,i=this.ZG,e=i.clearColor,h=s[0],r=s[1],n=s[2],o=s[3];e.Da(h,r,n,o)||(t.clearColor(h,r,n,o),e.ca(h,r,n,o)),t.clear(t.COLOR_BUFFER_BIT)}I_(t){this.Lf=15,t.Ra(this.i_,0)}C_(){const t=this.i_;this.ZG.$G.set(t[0],t[1],t[2],t[3])}P_(t,s){this.Lf=10,this.QG=t,this.t_=1,this.i_[0]=s}R_(){const t=this.WT,s=this.ZG,i=s.renderer,e=i.cS,h=(t.useProgram(e.DM),e.Hx(s.jx,!1),e.Ux(s.zx,!1),s.$G),r=(e.KT.Ex()&&e.KT.zG(h.Wl(),h.Vl()),e.ZT.Ex()&&e.ZT.zG(h.jl(),h.Hl()),this.i_[0]);if(e.QT.Ex()&&e.QT.HG(r),e.YT.Ex()){const n=s.YG;e.YT.fG(n[0],n[1],n[2],n[3])}t.drawArrays(t.POINTS,this.QG/4,this.t_),t.useProgram(s.Jx.DM)}A_(t){this.Lf=11,this.s_=t}E_(){const t=this.WT,s=this.ZG,i=this.s_;if(s.Jx=i,t.useProgram(i.DM),i.Hx(s.jx,!1),i.Ux(s.zx,!1),i.YT.Ex()){const e=s.YG;i.YT.fG(e[0],e[1],e[2],e[3])}}F_(){this.Lf=12}D_(){const t=this.ZG.Jx,s=this.WT,i=this.i_,e=this.e_,h=this.h_;if(t.ox.Ex()){const r=this.ZG.renderer,n=this.s_;r.k_!==n&&(s.activeTexture(s.TEXTURE1),s.bindTexture(s.TEXTURE_2D,n?n.L2():null),r.k_=n,s.activeTexture(s.TEXTURE0))}t.Mx.Ex()&&t.Mx.zG(i[0],i[1]),t.mx.Ex()&&t.mx.zG(i[2],i[3]),t.gx.Ex()&&t.gx.zG(i[4],i[5]),t.xx.Ex()&&t.xx.HG(this.t_),t.Gx.Ex()&&t.Gx.HG(i[6]),t._x.Ex()&&t._x.HG(i[7]),t.yx.Ex()&&t.yx.zG(i[12],i[13]),t.Sx.Ex()&&t.Sx.zG(i[14],i[15]),t.wx.Ex()&&t.wx.zG(h[0],h[1]),t.bx.Ex()&&t.bx.zG(h[2],h[3]),t.Ix.Ex()&&t.Ix.zG(e[0],e[1]),t.Cx.Ex()&&t.Cx.zG(e[2],e[3]),t.Tx.Ex()&&t.Tx.HG(this.QG)}O_(){this.Lf=13}L_(){const t=this.ZG.Jx,i=t.Fx,e=this.r_;for(let t=0,s=i.length;t<s;++t){const h=i[t],r=e[t];h.jG()?h.JG(r.Ga(),r._a(),r.Ia()):h.HG(r)}}N_(t){this.Lf=14,this.s_=t}B_(){const t=this.WT,s=this.s_,i=this.ZG.mT;s!==i&&t.bindFramebuffer(t.FRAMEBUFFER,s),t.invalidateFramebuffer(t.FRAMEBUFFER,[t.COLOR_ATTACHMENT0]),s!==i&&t.bindFramebuffer(t.FRAMEBUFFER,i)}W_(t,s,i){this.Lf=17;const e=this.i_,h=this.ZG.renderer,r=(e[0]=t.Wm(),e[1]=t.$m(),e[2]=(s||h).Wm(),e[3]=(s||h).$m(),e[4]=t.MT()?1:0,e[5]="stretch"===i,this.r_);Ai.Kn(r),r.push(t.yT()),r.push(s?s.yT():null)}V_(){const t=this.i_,s=this.r_,i=this.WT,e=t[0],h=t[1],r=t[2],n=t[3],o=0!==t[4],a=0!==t[5],l=s[0],u=s[1];if(i.bindFramebuffer(i.READ_FRAMEBUFFER,l),i.bindFramebuffer(i.DRAW_FRAMEBUFFER,u),a)i.blitFramebuffer(0,0,e,h,0,0,r,n,i.COLOR_BUFFER_BIT,o?i.LINEAR:i.NEAREST);else{const c=Math.min(e,r),f=Math.min(h,n),d=Math.max(h-n,0),p=Math.max(n-h,0);i.blitFramebuffer(0,d,c,f+d,0,p,c,f+p,i.COLOR_BUFFER_BIT,i.NEAREST)}}j_(t){this.Lf=18,this.s_=t}H_(){this.s_.U_(),this.s_=null}z_(t){this.Lf=19,this.s_=t}J_(){this.s_.q_(),this.s_=null}X_(t,s,i){this.Lf=20;const e=this.i_;e[0]=t,e[1]=s,e[2]=i}Y_(){const t=this.ZG.Jx,s=this.i_;t.Mx.Ex()&&t.Mx.zG(s[0],s[1]),t.nx.Ex()&&t.nx.HG(s[2])}K_(t,s,i,e,h,r,n){this.Lf=16;const o=this.i_;t.Ra(o,0),o[4]=1/s,o[5]=1/i,o[6]=e/s,o[7]=h/i,o[8]=r/s,o[9]=n/i}Z_(){const t=this.ZG.Jx,s=this.i_;t.yx.Ex()&&t.yx.zG(s[0],s[1]),t.Mx.Ex()&&t.Mx.zG(s[4],s[5]),t.tx.Ex()&&t.tx.zG(s[6],s[7]),t.ix.Ex()&&t.ix.zG(s[8],s[9])}Q_(t,s,i,e,h,r,n){this.Lf=29;const o=this.i_;o[0]=1/t,o[1]=1/s,o[2]=i,o[3]=e,o[4]=h,o[5]=r,o[6]=n}tI(){const t=this.ZG.Jx,s=this.i_;t.Mx.Ex()&&t.Mx.zG(s[0],s[1]),t.tx.Ex()&&t.tx.zG(s[2],s[3]),t.nx.Ex()&&t.nx.HG(s[4]),t.ix.Ex()&&t.ix.zG(s[5],s[6])}sI(t){this.Lf=22,this.QG=t?1:0}iI(){const t=this.WT,s=0!==this.QG;s||t.depthMask(!0),t.clear(t.DEPTH_BUFFER_BIT),s||t.depthMask(!1)}eI(t){this.Lf=23,this.QG=t?1:0}hI(){const t=this.WT;0===this.QG?(t.disable(t.DEPTH_TEST),t.depthMask(!1)):(t.enable(t.DEPTH_TEST),t.depthMask(!0))}rI(t){this.Lf=24,this.QG=t?1:0}nI(){const t=this.WT,s=this.ZG,i=s.renderer,e=0!==this.QG;s.XG=e,t.activeTexture(t.TEXTURE2),e?(s.gT&&t.bindFramebuffer(t.FRAMEBUFFER,s.gT),t.bindTexture(t.TEXTURE_2D,i.uT())):(t.bindTexture(t.TEXTURE_2D,null),s.gT&&t.bindFramebuffer(t.FRAMEBUFFER,s.mT)),t.activeTexture(t.TEXTURE0)}oI(){this.Lf=25}aI(){const t=this.WT;t.clear(t.STENCIL_BUFFER_BIT),t.enable(t.STENCIL_TEST),t.stencilFunc(t.ALWAYS,1,1),t.stencilOp(t.KEEP,t.KEEP,t.REPLACE),t.colorMask(!1,!1,!1,!1)}lI(){this.Lf=26}uI(){const t=this.WT;t.colorMask(!0,!0,!0,!0),t.stencilFunc(t.EQUAL,1,1),t.stencilOp(t.KEEP,t.KEEP,t.KEEP)}cI(){this.Lf=27}fI(){const t=this.WT;t.disable(t.STENCIL_TEST)}dI(t,s,i,e,h){this.Lf=28,this.QG=t?1:0;const r=this.i_;r[0]=s,r[1]=i,r[2]=e,r[3]=h}pI(){const t=this.WT,s=this.i_;1===this.QG?(t.enable(t.SCISSOR_TEST),t.scissor(s[0],s[1],s[2],s[3])):t.disable(t.SCISSOR_TEST)}mI(){switch(this.Lf){case 1:return void this.o_();case 2:return void this.l_();case 3:return void this.c_();case 4:return void this.m_();case 5:return void this.y_();case 6:return void this.w_();case 7:return void this.M_();case 8:return void this.T_();case 9:return void this.__();case 10:return void this.R_();case 11:return void this.E_();case 12:return void this.D_();case 13:return void this.L_();case 14:return void this.B_();case 15:return void this.C_();case 16:return void this.Z_();case 17:return void this.V_();case 18:return void this.H_();case 19:return void this.J_();case 20:return void this.Y_();case 21:return void this.d_();case 22:return void this.iI();case 23:return void this.hI();case 24:return void this.nI();case 25:return void this.aI();case 26:return void this.uI();case 27:return void this.fI();case 28:return void this.pI();case 29:return void this.tI()}}}}{let I=function(t,s,i,e,h,r){s?t.strokeRect(i,e,h,r):t.fillRect(i,e,h,r)},t=function(t){return t*(4/3)},o=function(t,s){t=t.trim();const i=parseFloat(t);return isFinite(i)?t.endsWith("%")?s*i/100:i:0};I,t,o;const Fi=self.Vs,Di=new Set(["serif","sans-serif","monospace","cursive","fantasy","system-ui","ui-serif","ui-sans-serif","ui-monospace","ui-rounded","math","emoji","fangsong"]),ki={timeout:60},Oi=new Fi.na(0,0,0,1),Li=new Set(["left","center","right"]),Ni=new Set(["top","center","bottom"]),Bi=new Set(["word","cjk","character"]),Wi=new Set(["ltr","rtl"]),Vi=new Set;Fi.FontManager&&Fi.FontManager.addEventListener("fontload",t=>{const s=t.font.Mf();for(const i of Vi)(i.gI()||Fi.Gh(i.yI(),s))&&i.SI()});let s=!1,i=!1;Fi.Ny.Kb=class{constructor(t,s){s=Object.assign({},ki,s),this.Qb=t,this.wI="Arial",this.bI=16,this.MI=1,this.vI=0,this.TI=!1,this.xI=!1,this.GI="black",this._I=!1,this.km=null,this.II=!0,this.CI=null,this.RI=new Set,this.AI="left",this.EI="top",this.Rf="",this.FI=null,this.DI=Fi.Tr(Fi.Fm),this.kI="word",this.OI="ltr",this.LI=!1,this.NI=!1,this.BI=!1,this.WI=-1,this.VI=0,this.jI=0,this.HI=0,this.Tg=0,this.xg=0,this.UI=1,this.zI=null,this.JI=null,this.qI=null,this.XI=null,this.YI=-1,this.$I=-1,this.KI="",this.ZI="",this.QI="",this.tC=1,this.sC=1,this.iC=t=>this.eC(t),this.a2=null,this.hC=new Fi.Rect,this.rC=1,this.nC=new Fi.x0(()=>{this.oC(),this.aC(8,8)},s.timeout),this.lC=null,this.uC=!1,Vi.add(this)}Gr(){this.CI=null,this.RI.clear(),this.km=null,this.FI=null,this.zI=null,this.JI=null,this.qI=null,this.XI=null,this.iC=null,this.nC.Gr(),this.lC=null,this.oC(),this.DI.Tc(),this.DI=null,this.Qb=null,this.uC=!0,Vi.delete(this)}cC(){this.BI=!0}fC(){this.cC(),this.NI=!0}SI(){this.fC(),this.LI=!0}dC(t){if(this._I!==(t=!!t)){this._I=t;const s=this._I?"alphabetic":"top";this.JI&&(this.JI.textBaseline=s),this.qI&&(this.qI.textBaseline=s),this.SI()}}gI(){return this._I}Nm(t){this.km!==t&&(this.km=t,this.DI.Nm(t),this.km&&this.km.Gy()&&this.km._y().then(()=>this.cC()),this.SI())}pC(t){this.II!==(t=!!t)&&(this.II=t,this.cC())}mC(t){this.wI!==(t=t||"serif")&&(this.wI=t,this.SI())}yI(){return this.wI}gC(t){this.bI!==(t=t<.1?.1:t)&&(this.bI=t,this.SI())}yC(){return this.bI}SC(t){this.MI!==t&&(this.MI=t,this.SI())}wC(t){this.vI!==t&&(this.vI=t,this.fC())}bC(){return this.vI}MC(t){this.TI!==(t=!!t)&&(this.TI=t,this.SI())}vC(){return this.TI}TC(t){this.xI!==(t=!!t)&&(this.xI=t,this.SI())}xC(){return this.xI}GC(t){t=Math.floor(t),this.WI!==t&&(this.WI=t,this.cC())}_C(){return this.WI}IC(t,s){let i=[];(this.TI||s.Bg("b"))&&i.push("bold"),(this.xI||s.Bg("i"))&&i.push("italic");const e=s.Ng("size"),h=(e?parseFloat(e.param):this.bI)*this.MI;i.push(t?h+"pt":h*this.CC()+"pt");let r=this.wI,n=s.Ng("font");return n&&n.param&&(r=n.param,this.CI)&&!this.RI.has(r)&&(this.CI(r),this.RI.add(r)),r&&(Di.has(r)?i.push(r):i.push('"'+r+'"')),i.join(" ")}VM(t){t instanceof Fi.na&&(t=t.Va()),this.GI!==t&&(this.GI=t,this.cC())}PC(t,s,i){Oi.fa(t,s,i),this.VM(Oi)}RC(t){if(!Li.has(t))throw new Error("invalid horizontal alignment");this.AI!==t&&(this.AI=t,this.fC())}AC(){return this.AI}EC(t){if(!Ni.has(t))throw new Error("invalid vertical alignment");this.EI!==t&&(this.EI=t,this.fC())}FC(){return this.EI}DC(t){if(!Bi.has(t))throw new Error("invalid word wrap mode");this.kI!==t&&(this.kI=t,this.SI())}kC(){return this.kI}OC(t){if(!Wi.has(t))throw new Error("invalid text direction");this.OI!==t&&(this.OI=t,this.JI&&(this.JI.direction=this.OI),this.qI&&(this.qI.direction=this.OI),this.SI())}LC(){return this.OI}Ff(t){this.Rf!==t&&(this.Rf=t,this.SI())}NC(){return this.Rf}CC(){return this.rC*this.UI*self.devicePixelRatio}BC(r,n,o){if(void 0===o&&(o=1),!(r<=0||this.jI===r&&this.HI===n&&this.UI===o)){let t=this.jI,s=(this.jI=r,this.HI=n,this.UI=o,self.devicePixelRatio),i=(this.Tg=this.jI*this.UI*s,this.xg=this.HI*this.UI*s,Math.max(this.Tg,this.xg)),e=Math.min(this.Qb.b2(),4096),h=1;e<i&&(h=e/i,this.Tg=Math.min(this.Tg*h,e),this.xg=Math.min(this.xg*h,e)),this.rC=h,this.jI!==t?this.SI():this.fC()}}Wm(){return this.Tg}$m(){return this.xg}WC(){return this.UI}VC(){return this.jC(),this.DI.Mg()}HC(){return this.jC(),this.DI.vg()+this.DI.Lm()*(this.vI+4)-this.vI}UC(){this.jC();let t=0;for(const s of this.DI.Om())for(const i of s.ig())t+=i.eg();return t}wT(){return this.nC.P0(),this.zC(),this.a2}JC(t,s){this.jC();const i=this.CC(),e=this.DI.Om();for(const h of e){const r=h.Zm()*i;if(s>=h.kg()-h.$m()*i+r&&s<h.kg()+r)for(const n of h.ig())if(t>=n.Fg()&&t<n.Fg()+n.Wm()*i)return n}return null}*qC(t){this.jC();const s=this.DI.Om();for(const i of s)for(const e of i.ig()){const h=e.Ng("tag");h&&Fi.Gh(h.param,t)&&(yield e)}}XC(t,s){for(const i of this.qC(t)){if(0===s)return i;--s}return null}YC(t){let s=0;for(const i of this.qC(t))++s;return s}zC(){this.a2&&!this.BI&&!this.NI&&!this.LI||this.uC||this.Tg<=0||this.xg<=0||(this.BI=!1,this.$C())}$C(){this.uC||(this.jC(),this.aC(Math.max(Fi.Zr(Math.ceil(this.Tg)),128),Math.max(Fi.Zr(Math.ceil(this.xg)),64)),this.KC(),this.ZC(),this.nC.P0())}aC(t,s){this.zI||(this.zI=Fi.zo(16,16));let i=!1;this.YI===t&&this.$I===s||(this.YI=t,this.$I=s,this.zI.width=t,this.zI.height=s,i=!0),this.JI||(this.JI=this.zI.getContext("2d"),i=!0),i?(this.JI.textBaseline=this._I?"alphabetic":"top",this.JI.direction=this.OI,this.JI.font=this.KI,this.JI.fillStyle=this.QI,this.JI.strokeStyle=this.QI,this.JI.globalAlpha=this.tC,this.JI.lineWidth=this.sC):this.JI.clearRect(0,0,t,s)}QC(){this.qI||(this.qI=Fi.zo(16,16).getContext("2d"),this.XI=Fi.zo(16,16).getContext("2d"),this.qI.textBaseline=this._I?"alphabetic":"top",this.XI.textBaseline="top",this.qI.direction=this.OI,this.XI.direction=this.OI)}tP(t){this.ZI!==t&&(this.ZI=t,this.qI.font=t,this.XI.font=t)}sP(){if(!s){s=!0,this.QC();const t=this.qI.measureText("test");i="number"==typeof t.fontBoundingBoxAscent&&"number"==typeof t.fontBoundingBoxDescent}return i}jC(){this.iP(),this.eP()}iP(){this.LI&&(this.QC(),!this._I||this.FI&&this.FI.toString()===this.Rf||(this.FI=new Fi.Nh(this.Rf,{um:!0})),this.DI.Fm(this._I?this.FI.Gm():this.Rf,this.iC,this.jI,this.kI,0),this.LI=!1)}eP(){this.NI&&(this.hP(),this.NI=!1)}eC(t){let s=t.Jm()?t.ug().join(""):" ",i=(this.tP(this.IC(!0,t)),t.Ng("size")),e=(i?parseFloat(i.param):this.bI)*this.MI,h=this.qI.measureText(s),r=0;if(this._I&&this.sP()){const n=this.XI.measureText(s);r=h.fontBoundingBoxAscent-n.fontBoundingBoxAscent}return{width:h.width,height:4/3*e,fontBoundingBoxAscent:h.fontBoundingBoxAscent||0,fontBoundingBoxDescent:h.fontBoundingBoxDescent||0,zm:r}}rP(t){this.KI!==t&&(this.KI=t,this.JI.font=t)}nP(t){this.QI!==t&&(this.QI=t,this.JI.fillStyle=t,this.JI.strokeStyle=t)}oP(t){this.tC!==t&&(this.tC=t,this.JI.globalAlpha=t)}aP(t){this.sC!==t&&(this.sC=t,this.JI.lineWidth=t)}hP(){let e=this.CC(),h=(4+this.vI)*e,r=0,n=this.DI.Om();if(0!==n.length){for(const s of n){s.Eg(NaN),s.Dg(NaN);for(const o of s.ig())o.Eg(NaN),o.Dg(NaN)}let t=this._I&&this.sP(),i=n[0].$m()*e;if("center"===this.EI){const a=n.reduce((t,s)=>t+s.$m()*e+h,0)-h;r=Math.max(this.xg/2-a/2,0),t&&(i=n[0].Qm()*e)}else if("bottom"===this.EI){const l=n.reduce((t,s)=>t+s.$m()*e+h,0)-this.vI*e,u=t?n.at(-1).Zm()*e:0;r=this.xg-l-u-2}for(let t=0,s=n.length;t<s;++t){const c=n[t],f=c.$m()*e,d=r;if(this._I){if(r+=0===t?i:f,0<t&&r>this.xg-4*e)break}else if(0<t&&r>=this.xg-f)break;0<=d&&this.lP(c,r,e),this._I||(r+=f),r+=h}}}lP(t,s,i){let e=0;"center"===this.AI?e=Math.floor((this.Tg-t.Wm()*i)/2):"right"===this.AI&&(e=this.Tg-t.Wm()*i),t.Eg(e),t.Dg(s);for(const h of"ltr"===this.OI?t.ig():t.Rg())this.uP(h,e,s,i),e+=h.Wm()*i}uP(t,s,i,e){const h=t.Ng("offsetx"),r=(s+=h?o(h.param,t.$m())*e:0,t.Ng("offsety"));if(i+=r?o(r.param,t.$m())*e:0,t.Xm()){const n=t.Ng("iconoffsety");i+=n?o(n.param,t.$m())*e:.2*t.$m()*e}t.Eg(s),t.Dg(i)}KC(){this.JI.imageSmoothingEnabled=this.II,this.JI.imageSmoothingQuality="high",this.VI=0;const t=this.CC(),s=this.DI.Om();for(const i of s)this.cP(i,t)}cP(t,s){const i=t.Fg(),e=t.kg();if(Number.isFinite(i)&&Number.isFinite(e))for(const h of"ltr"===this.OI?t.ig():t.Rg())this.fP(h,s,t.$m())}fP(n,o,a){const l=this.JI,u=n.Fg(),c=n.kg();if(Number.isFinite(u)&&Number.isFinite(c)){let t=a/16,s=n.Wm()*o,i=n.$m()*o,e=n.$m()/16,h=(4+this.vI)*o,r=n.Jm()?n.ug():null;if(-1!==this.WI){if(this.VI>=this.WI)return;n.Jm()&&this.VI+r.length>this.WI&&(r=r.slice(0,this.WI-this.VI),s=this.eC(n).width*o),this.VI+=n.eg()}const f=n.Ng("background"),d=n.Bg("u"),p=n.Bg("s");if((!n.Jm()||!Fi.yp(r)||f||d||p)&&!n.Bg("hide")){const m=n.Ng("color"),g=n.Ng("opacity"),y=(this.oP(g?parseFloat(g.param)/100:1),f&&(this.nP(f.param),l.fillRect(u,c-i,s,i+h)),n.Ng("linethickness")),S=y?parseFloat(y.param):1,w=n.Bg("stroke");if(w&&this.aP(.5*e*S*this.CC()),n.Jm()){const b=r.join("");if(this.rP(this.IC(!1,n)),!w){this.aP(.5*e*S*this.CC());const M=n.Ng("outlineback");M&&(this.nP(M.param),this.dP(!0,b,u,c,s))}if(this.nP(m?m.param:this.GI),this.dP(w,b,u,c,s),!w){this.aP(.5*e*S*this.CC());const v=n.Ng("outline");v&&(this.nP(v.param),this.dP(!0,b,u,c,s))}}else if(n.Xm()&&0<n.Wm()){const T=n.qg(this.km);T&&l.drawImage(T,u,c-i,s,i)}if(this.nP(m?m.param:this.GI),d&&I(l,w,u,c+o*t,s,o*t*S),p){const x=c-i/4,G=o*e,_=x+G/2;l.fillRect(u,_-G*S/2,s,G*S)}}}}dP(t,s,i,e,h){"rtl"===this.OI&&(i+=h),t?"Gecko"===Fi.mi.Mi?this.JI.strokeText(s,i,e,h):this.JI.strokeText(s,i,e):"Gecko"===Fi.mi.Mi?this.JI.fillText(s,i,e,h):this.JI.fillText(s,i,e)}ZC(){this.Qb.pP()||(this.a2||(this.a2=this.Qb.lT(this.zI.width,this.zI.height,{e2:!0,h2:"high"})),this.Qb.mP(this.zI,this.a2),this.hC.set(0,0,this.Tg/this.a2.Wm(),this.xg/this.a2.$m()),this.lC&&this.lC())}gP(){return this.hC}oC(){this.a2&&(this.Qb.pP()||this.Qb.dT(this.a2),this.a2=null)}static jM(){for(const t of Vi)t.oC()}static yP(){return Vi.values()}}}{const ji=self.Vs;class Hi{constructor(t){this.WT=t.M2(),this.SP=t.v2(),this.wP=t.bP(),this.MP=null,this.C0=!1,this.vP=!1,this.TP=0,1===this.SP?this.MP=this.wP.createQueryEXT():this.MP=this.WT.createQuery()}Gr(){this.xP(),this.WT=null,this.wP=null,this.vP=!1}xP(){this.MP&&(1===this.SP?this.wP.deleteQueryEXT(this.MP):this.WT.deleteQuery(this.MP),this.MP=null)}U_(){if(this.C0)throw new Error("query already active");1===this.SP?this.wP.beginQueryEXT(this.wP.TIME_ELAPSED_EXT,this.MP):this.WT.beginQuery(this.wP.TIME_ELAPSED_EXT,this.MP),this.C0=!0}q_(){if(!this.C0)throw new Error("query not active");1===this.SP?this.wP.endQueryEXT(this.wP.TIME_ELAPSED_EXT):this.WT.endQuery(this.wP.TIME_ELAPSED_EXT),this.C0=!1}GP(){if(this.MP&&!this.vP&&!this.C0){let t;t=1===this.SP?this.wP.getQueryObjectEXT(this.MP,this.wP.QUERY_RESULT_AVAILABLE_EXT):this.WT.getQueryParameter(this.MP,this.WT.QUERY_RESULT_AVAILABLE);const s=this.WT.getParameter(this.wP.GPU_DISJOINT_EXT);t&&!s&&(1===this.SP?this.TP=this.wP.getQueryObjectEXT(this.MP,this.wP.QUERY_RESULT_EXT):this.TP=this.WT.getQueryParameter(this.MP,this.WT.QUERY_RESULT),this.TP/=1e9,this.vP=!0),(t||s)&&this.xP()}}_P(){return this.vP}IP(){if(this.vP)return this.TP;throw new Error("no result available")}}ji.Ny.CP=class{constructor(t){this.Qb=t,this.DS=t.Bb(),this.C0=!1,this.PP=null,this.RP=!1,this.AP=null,this.EP=[]}Gr(){for(const t of this.EP)t instanceof Hi&&t.Gr();ji.Kn(this.EP),this.PP=null,this.AP=null,this.Qb=null}U_(){if(this.C0)throw new Error("query already active");const t=this.Qb.FP();0<t.length?(this.RP=!0,this.PP=t.at(-1),this.PP.DP(),this.PP.EP.push(this)):(this.RP=!1,this.PP=null),this.C0=!0,t.push(this),this.kP()}q_(){if(!this.C0)throw new Error("query not active");const t=this.Qb.FP().pop();if(t!==this)throw new Error("can only end most nested query");this.C0=!1,this.DP(),this.PP&&(this.PP.kP(),this.PP=null)}kP(){this.AP=ji.Tr(Hi,this.Qb),this.EP.push(this.AP),this.AP.U_()}DP(){this.AP.q_(),this.AP=null}GP(){for(const t of this.EP)t.GP()}OP(){return this.RP}_P(){return this.EP.every(t=>t._P())}IP(){return this.EP.reduce((t,s)=>t+s.IP(),0)}Bb(){return this.DS}}}{const Ui=self.Vs;Ui.Ny.LP=class{constructor(t,s=1e3){this.Qb=t,this.NP=s,this.BP=[],this.Qb.WP(this)}Gr(){this.Tc(),this.Qb.VP(this),this.Qb=null}Tc(){for(const t of this.BP)t.Gr();Ui.Kn(this.BP)}jP(){const t=new Ui.Ny.CP(this.Qb);if(this.BP.push(t),this.BP.length>this.NP){const s=this.BP.shift();s.Gr()}return t}HP(t){for(const s of this.BP){if(s.Bb()>=t)return;if(s.OP())return;s.GP()}}UP(t,s){if(s<=t)return NaN;let i=0;for(const e of this.BP){if(e.Bb()>=s)break;if(!(e.Bb()<t)){if(!e._P())return NaN;i+=e.IP()}}return i}zP(i){for(let t=0,s=this.BP.length;t<s;++t){const e=this.BP[t];if(!(e.Bb()<i))return void(0<t&&this.BP.splice(0,t));e.Gr()}}}}{let i=function(){h=-1;for(const t of e)t.JP()&&(t.resolve(),e.delete(t));0<e.size&&(h=self.requestAnimationFrame(i))},b=(i,self.Vs),t=self.xs,M=(t.Es,t.Fs),y=t.Cs,r={powerPreference:"default",qP:!0,alpha:!1,depth:!1,XP:!1,YP:2,failIfMajorPerformanceCaveat:!1},n=new Set(["default","low-power","high-performance"]),c=new b.gu(0,0,1,0,1,1,0,1),S=y.create(),w=y.create(),v=new b.gu,T=new b.Rect,x=null,e=(b.isDebug&&(self.$P=function(){x?x.loseContext():console.warn("WEBGL_lose_context not supported")},self.KP=function(){x?x.restoreContext():console.warn("WEBGL_lose_context not supported")}),new Set),h=-1;b.Ny.ZP=class extends b.Ny.tS{constructor(t,s){if(super(s),s=Object.assign({},r,s),!n.has(s.powerPreference))throw new Error("invalid power preference");let i={alpha:!!s.alpha,depth:!1,antialias:!1,powerPreference:s.powerPreference,failIfMajorPerformanceCaveat:!!s.failIfMajorPerformanceCaveat},e=null,h=0;if(2<=s.YP&&(e=t.getContext("webgl2",i),h=2),e||(e=t.getContext("webgl",i),h=1),!e)throw new Error("renderer-unavailable (could not get WebGL context)");this.WT=e,this.QP=e.getContextAttributes(),this.tR=e.getParameter(e.VERSION),this.SP=h,this.sR=M.create(),this.iR=!1,this.eR=y.create(),this.hR=!!s.depth,this.rR=!(!s.depth||!s.XP),this.nR=this.hR,this.oR=!1,this.aR=null,this.lR=!0,this.uR=0,this.cR=0,this.HT=null,this.UT=null,this.fR=null,this.zT=null,this.dR=new Float32Array(8e3*this.Ob()),this.pR=new Uint16Array(12e3),this.mR=new Float32Array(16e3),this.gR=new Float32Array(32e3),this.yR=0,this.SR=0,this.wR=0,this.bR=0,this.MR=null,this.vR=null,this.TR=[],this.xR=0,this.GR=0,this._R=null,this.IR=0,this.ZG=b.Tr(b.Ny.qG,this),this.CR=b.Tr(b.na,1,1,1,1),this.PR=null,this.k_=null,this.RR=0,this.AR=0,this.ER=new b.Rect,this.FR=b.Tr(b.Rect,0,0,-1,-1),this.DR=0,this.kR=-1,this.OR=0,this.LR=0,this.NR=0,this.BR="(unavailable)",this.WR="(unavailable)",this.VR=[],this.jR=!1,this.HR=null,this.UR=null,this.zR=null,this.JR=null,this.qR=null,this.YR=null,this.$R=0,this.KR=!!s.qP,this.wP=null,this.ZR=new Set,this.QR=[],this.LS(this.pR)}zb(){return!0}async WS(){super.WS();const t=this.WT,s=this.Ob(),i=(this.CR.ca(1,1,1,1),this.PR=null,this.k_=null,this.yR=0,this.wR=0,this.bR=8e3*s-4*s,b.Kn(this.TR),this.xR=0,this.GR=0,this.MR=null,this._R=null,this.ER.set(0,0,1,1),this.IR=0,this.ZG),e=(i.Jx=null,i.mT=null,i.gT=null,M.set(i.YG,1,1,1,1),i.clearColor.ca(0,0,0,0),i.$G.set(0,0,1,1),t.clearColor(0,0,0,0),t.clear(t.COLOR_BUFFER_BIT),t.enable(t.BLEND),t.blendFunc(t.ONE,t.ONE_MINUS_SRC_ALPHA),this.RR=t.ONE,this.AR=t.ONE_MINUS_SRC_ALPHA,this.tA(t),t.disable(t.CULL_FACE),t.disable(t.STENCIL_TEST),t.disable(t.DITHER),this.hR?(t.enable(t.DEPTH_TEST),t.depthMask(!0),t.depthFunc(t.LEQUAL)):(t.disable(t.DEPTH_TEST),t.depthMask(!1)),this.nR=this.hR,this.oR=!1,this.zT=t.createBuffer(),t.bindBuffer(t.ARRAY_BUFFER,this.zT),t.bufferData(t.ARRAY_BUFFER,this.gR.byteLength,t.DYNAMIC_DRAW),this.HT=t.createBuffer(),t.bindBuffer(t.ARRAY_BUFFER,this.HT),t.bufferData(t.ARRAY_BUFFER,this.dR.byteLength,t.DYNAMIC_DRAW),this.UT=t.createBuffer(),t.bindBuffer(t.ARRAY_BUFFER,this.UT),t.bufferData(t.ARRAY_BUFFER,this.mR.byteLength,t.DYNAMIC_DRAW),this.fR=t.createBuffer(),t.bindBuffer(t.ELEMENT_ARRAY_BUFFER,this.fR),t.bufferData(t.ELEMENT_ARRAY_BUFFER,this.pR,t.STATIC_DRAW),t.activeTexture(t.TEXTURE0),t.bindTexture(t.TEXTURE_2D,null),this.kR=t.getParameter(t.MAX_TEXTURE_SIZE),t.getParameter(t.ALIASED_POINT_SIZE_RANGE)),h=(this.OR=e[0],this.LR=e[1],t.getShaderPrecisionFormat(t.VERTEX_SHADER,t.HIGH_FLOAT)),r=t.getShaderPrecisionFormat(t.FRAGMENT_SHADER,t.HIGH_FLOAT),n=(this.NR=h&&r?Math.min(h.precision,r.precision):0,2048<this.LR&&(this.LR=2048),this.VR=t.getSupportedExtensions(),t.getExtension("WEBGL_debug_renderer_info"));if(n&&(this.BR=t.getParameter(n.UNMASKED_VENDOR_WEBGL),this.WR=t.getParameter(n.UNMASKED_RENDERER_WEBGL)),this.HR=t.getExtension("KHR_parallel_shader_compile"),b.isDebug&&(x=t.getExtension("WEBGL_lose_context")),this.KR&&(1===this.v2()?this.wP=t.getExtension("EXT_disjoint_timer_query"):this.wP=t.getExtension("EXT_disjoint_timer_query_webgl2")||t.getExtension("EXT_disjoint_timer_query")),this.UR=t.getExtension("EXT_texture_filter_anisotropic"),this.UR?this.$R=t.getParameter(this.UR.MAX_TEXTURE_MAX_ANISOTROPY_EXT):this.$R=0,this.v2()<2&&this.hR&&this.rR&&(this.zR=t.getExtension("WEBGL_depth_texture"),!this.zR))throw new Error("no depth texture support");this.v2()<2&&(this.JR=t.getExtension("EXT_frag_depth"),this.qR=t.getExtension("OES_standard_derivatives"),this.YR=t.getExtension("EXT_shader_texture_lod"));let o=b.Ny.DT,a=o.pG(!1),l=o.gG(),u=a,c=o.GG(),f=o.TG(),d=o.wG(),p=o.pG(!0),m=!1;this.hR&&(this.v2()<2?this.JR&&(l=o.yG(),c=o._G(),d=o.bG(),m=!0):(u=o.mG(),l=o.SG(),c=o.IG(),f=o.xG(),d=o.MG(),p=o.mG(!0)));const g=o.vG(this.v2(),m,this.qR&&this.YR),y=2<=this.v2()?o.mG():a,S=[[l,u,"<default>"],[l,u,"<default-device-transform>"],[c,f,"<point>"],[o.CG(),a,"<fill>"],[o.PG(),a,"<lineargradient>"],[o.AG(),a,"<penumbra>"],[o.FG(),a,"<hardellipse>"],[o.DG(),a,"<hardellipseoutline>"],[o.kG(),a,"<smoothellipse>"],[o.OG(),a,"<smoothellipseoutline>"],[o.EG(),a,"<smoothline>"],[d,p,"<tilemap>"],[g,y,"<tilerandomization>"]],w=await Promise.all(S.map(t=>this.sA({src:t[0],OT:t[1],name:t[2]})));this.uS=w[0],this.vR=w[1],this.cS=w[2],this.pS=w[3],this.mS=w[4],this.gS=w[5],this.yS=w[6],this.SS=w[7],this.wS=w[8],this.bS=w[9],this.MS=w[10],this.fS=w[11],this.dS=w[12],this.mw()}async sA(t){const s=await b.Ny.DT.BT(this,t);return this.lw(s),s}iA(){this.MR=null}BC(t,s,i){if(this.Tg!==t||this.xg!==s||i){this.Nb();const e=this.WT,h=this.ZG;this.Tg=t,this.xg=s,this.eA(0,0,t,s),this.ew(this.eR,t/s),this.hA(this.eR),this.vR&&(e.useProgram(this.vR.Xx()),this.vR.Vx(this.eS),this.MR=this.vR,this.ZG.Jx=this.vR),e.bindTexture(e.TEXTURE_2D,null),e.activeTexture(e.TEXTURE1),e.bindTexture(e.TEXTURE_2D,null),e.activeTexture(e.TEXTURE0),this.PR=null,this.k_=null,this.hR&&this.lR&&this.rA(this.Tg,this.xg),this._R&&this._R.fT(this.Tg,this.xg),e.bindFramebuffer(e.FRAMEBUFFER,null),this._R=null,h.mT=null,h.gT=null}}rA(t,s){const i=this.WT;this.aR&&this.uR===t&&this.cR===s||(this.rR?(this.aR&&i.deleteTexture(this.aR),this.aR=i.createTexture(),i.bindTexture(i.TEXTURE_2D,this.aR),i.texParameteri(i.TEXTURE_2D,i.TEXTURE_MAG_FILTER,i.NEAREST),i.texParameteri(i.TEXTURE_2D,i.TEXTURE_MIN_FILTER,i.NEAREST),i.texParameteri(i.TEXTURE_2D,i.TEXTURE_WRAP_S,i.CLAMP_TO_EDGE),i.texParameteri(i.TEXTURE_2D,i.TEXTURE_WRAP_T,i.CLAMP_TO_EDGE),2<=this.v2()?i.texImage2D(i.TEXTURE_2D,0,i.DEPTH24_STENCIL8,t,s,0,i.DEPTH_STENCIL,i.UNSIGNED_INT_24_8,null):this.zR&&i.texImage2D(i.TEXTURE_2D,0,i.DEPTH_STENCIL,t,s,0,i.DEPTH_STENCIL,this.zR.UNSIGNED_INT_24_8_WEBGL,null),i.bindTexture(i.TEXTURE_2D,null)):(this.aR&&i.deleteRenderbuffer(this.aR),this.aR=i.createRenderbuffer(),i.bindRenderbuffer(i.RENDERBUFFER,this.aR),i.renderbufferStorage(i.RENDERBUFFER,2<=this.SP?i.DEPTH24_STENCIL8:i.DEPTH_STENCIL,t,s),i.bindRenderbuffer(i.RENDERBUFFER,null)),this.uR=t,this.cR=s)}nA(t,s){this.hR&&(this.lR=!1,this.rA(t,s))}oA(){this.hR&&(this.lR=!0,this.rA(this.Tg,this.xg))}eA(t,s,i,e){const h=this.sR;if(h[0]!==t||h[1]!==s||h[2]!==i||h[3]!==e){const r=this.aA();r.g_(t,s,i,e),M.set(h,t,s,i,e),this.GR=0}}$S(t){super.$S(t),this.ew(this.eR,this.Tg/this.xg)}JS(t){super.JS(t),this.ew(this.eR,this.Tg/this.xg)}XS(t){super.XS(t),this.ew(this.eR,this.Tg/this.xg)}hA(t){if(!y.V(this.eS,t)){const s=this.aA();s.S_(t),y.I(this.eS,t),this.GR=0,this.iR=!0}}lA(){let t,s,i,e=this._R;i=(null===e?(t=this.eR,s=this.Wm(),this):(t=e.bT(),s=e.Wm(),e)).$m(),this.hA(t),this.eA(0,0,s,i)}uA(t){if(!y.V(this.hS,t)){const s=this.aA();s.b_(t),y.I(this.hS,t),this.GR=0,this.iR=!0}}cA(){this.iR=!1}fA(){return this.iR}pT(){return this.ZG}aA(){const t=this.TR;return this.xR===t.length&&t.push(new b.Ny.KG(this.ZG)),t[this.xR++]}Nb(){0===this.xR||this.pP()||(this.dA(),this.pA(),this.xR=0,this.yR=0,this.SR=0,this.wR=0,this.GR=0)}dA(){const t=this.WT;0<this.wR&&(t.bindBuffer(t.ARRAY_BUFFER,this.zT),t.bufferSubData(t.ARRAY_BUFFER,0,this.gR.subarray(0,this.wR))),0<this.yR&&(t.bindBuffer(t.ARRAY_BUFFER,this.HT),t.bufferSubData(t.ARRAY_BUFFER,0,this.dR.subarray(0,this.yR)),t.bindBuffer(t.ARRAY_BUFFER,this.UT),t.bufferSubData(t.ARRAY_BUFFER,0,this.mR.subarray(0,this.SR)))}pA(){const i=this.TR;for(let t=0,s=this.xR;t<s;++t)i[t].mI()}mA(){return this.CR.Ca()}gA(t,s,i,e){const h=this.CR;if(!h.Da(t,s,i,e)){h.ca(t,s,i,e);const r=this.aA();r.u_(h),this.GR=0,this.TS=null}}yA(t){const s=this.CR;if(s.Ca()!==t){s.Ta(t);const i=this.aA();i.u_(s),this.GR=0,this.TS=null}}VM(t){const s=this.CR;if(!s.equals(t)){s.set(t);const i=this.aA();i.u_(s),this.GR=0,this.TS=null}}SA(){this.gA(1,1,1,1)}wA(){return this.CR}bA(t){if(t!==this.PR){const s=this.aA();s.a_(t),this.PR=t,this.GR=0}}I2(){this.PR=null}WM(t){const s=this.Hw(t);this.MA(s[0],s[1])}vA(t){const s=this.Jw(t);this.MA(s.Vw,s.jw)}MA(t,s){if(t!==this.RR||s!==this.AR){const i=this.aA();i.p_(t,s),this.RR=t,this.AR=s,this.GR=0,this.TS=null}}TA(){return this.RR===this.WT.ONE&&this.AR===this.WT.ONE_MINUS_SRC_ALPHA}xA(){this.MA(this.WT.ONE,this.WT.ONE_MINUS_SRC_ALPHA)}GA(){this.MA(this.WT.SRC_ALPHA,this.WT.ONE_MINUS_SRC_ALPHA)}_A(){this.MA(this.WT.ONE,this.WT.ZERO)}Rect(t){this.IA(t.Wl(),t.Vl(),t.jl(),t.Hl())}IA(t,s,i,e){this.kb(t,s,i,s,i,e,t,e)}CA(){let t=this.yR;if(t>=this.bR&&(this.Nb(),t=0),1===this.GR)this.TR[this.xR-1].t_+=6;else{const s=this.aA();s.n_(t,6),this.GR=1}}PA(t){t.Ou(this.dR,this.yR,this._S+this.IS),this.yR+=12}gu(t){this.CA(),this.PA(t),c.Ra(this.mR,this.SR),this.SR+=8}kb(t,s,i,e,h,r,n,o){this.CA();let a=this.dR,l=this.yR,u=this._S+this.IS;a[l++]=t,a[l++]=s,a[l++]=u,a[l++]=i,a[l++]=e,a[l++]=u,a[l++]=h,a[l++]=r,a[l++]=u,a[l++]=n,a[l++]=o,a[l++]=u,this.yR=l,c.Ra(this.mR,this.SR),this.SR+=8}ob(t,s){this.CA(),this.PA(t),s.Jl(this.mR,this.SR),this.SR+=8}RA(t,s){this.CA(),this.PA(t),s.Ra(this.mR,this.SR),this.SR+=8}AA(t,s,i,e,h,r,n,o,a,l,u,c,f){this.CA();let d=this.dR,p=this.yR,m=this._S+this.IS;d[p++]=t,d[p++]=s,d[p++]=m+i,d[p++]=e,d[p++]=h,d[p++]=m+r,d[p++]=n,d[p++]=o,d[p++]=m+a,d[p++]=l,d[p++]=u,d[p++]=m+c,this.yR=p,f.Jl(this.mR,this.SR),this.SR+=8}ib(t,s,i,e,h,r,n,o,a,l,u,c,f){this.CA();let d=this.dR,p=this.yR,m=this._S+this.IS;d[p++]=t,d[p++]=s,d[p++]=m+i,d[p++]=e,d[p++]=h,d[p++]=m+r,d[p++]=n,d[p++]=o,d[p++]=m+a,d[p++]=l,d[p++]=u,d[p++]=m+c,this.yR=p,f.Ra(this.mR,this.SR),this.SR+=8}EA(e,h,r){const n=this.dR,o=this.mR;if(r.length%3!=0)throw new Error("invalid index buffer length");for(let i=0,t=r.length;i<t;){const a=r[i++],l=r[i++],u=r[i++],c=3*a,f=3*l,d=3*u,p=2*a,m=2*l,g=2*u;this.CA();let t=this.yR,s=this.SR;n[t++]=e[0+c],n[t++]=e[1+c],n[t++]=e[2+c],n[t++]=e[0+f],n[t++]=e[1+f],n[t++]=e[2+f],n[t++]=e[0+d],n[t++]=e[1+d],n[t++]=e[2+d],n[t++]=e[0+d],n[t++]=e[1+d],n[t++]=e[2+d],o[s++]=h[0+p],o[s++]=h[1+p],o[s++]=h[0+m],o[s++]=h[1+m],o[s++]=h[0+g],o[s++]=h[1+g],o[s++]=h[0+g],o[s++]=h[1+g],this.yR=t,this.SR=s}}FA(t,s){this.$w(0),y.I(S,this.eS),y.I(w,this.hS),this.lA();const[i,e]=this.DA(this._R),h=this.aw(0,0,this.jS(e),0,0,0,e);if(this.uA(h),"crop"===t&&this._R&&s){const r=this.Tg/2,n=this.xg/2,o=s.Wm(),a=s.$m(),l=this._R.Wm(),u=this._R.$m(),c=Math.min(l,o),f=Math.min(u,a),d=Math.max(a-u,0),p=Math.max(u-a,0);T.set(-r,n-p,-r+c,n-f-p),v.Lu(T),T.set(0,d,c,f+d),T.Pt(o,a),this.ob(v,T)}else{const m=i/2,g=e/2;this.IA(-m,g,m,-g)}this.hA(S),this.uA(w)}kA(t){if(!this.ER.equals(t)){this.ER.I(t);const s=this.aA();s.I_(t),this.GR=0}}OA(){}LA(t,s,i,e){7996<=this.wR&&this.Nb();let h=this.wR,r=this._S+this.IS;if(2===this.GR&&this.IR===r)this.TR[this.xR-1].t_++;else{const o=this.aA();o.P_(h,r),this.GR=2,this.IR=r}const n=this.gR;n[h++]=t,n[h++]=s,n[h++]=i,n[h++]=e,this.wR=h}gw(t){if(this.MR!==t){const s=this.aA();s.A_(t),this.MR=t,this.GR=0,this.TS=null}}NA(){return this.MR}BA(){this.gw(this.vR)}WA(t){const s=this.aA();s.f_(t),this.GR=0}VA(t,s,i=1){const e=this.aA();e.X_(t,s,i),this.GR=0}jA(t,s,i,e,h,r,n){if(this.MR!==this.fS)throw new Error("must set tilemap fill mode first");const o=this.aA();o.K_(t,s,i,e,h,r,n),this.GR=0}HA(t,s,i,e,h,r,n){if(this.MR!==this.dS)throw new Error("must set tile randomization mode first");const o=this.aA();o.Q_(t,s,i,e,h,r,n),this.GR=0}UA(t,s,i,e,h,r,n,o,a,l,u){const c=this.MR;if(u%=10800,c.Ax&&!c.iG(s,i,e,h,r,n,o,a,l,u)){const f=this.aA(),d=(f.F_(),c.rG(s,i,e,h,r,n,o,a,l,u),f.i_),p=(d[0]=r,d[1]=n,s.Ra(d,2),d[6]=a,d[7]=l,i.Ra(d,12),f.e_),m=(h.Ra(p,0),p[1]);p[1]=p[3],p[3]=m,e.Ra(f.h_,0),f.QG=u,f.t_=o,c.ox.Ex()?f.s_=t?t.wT():null:f.s_=null,this.GR=0}}zA(t){const s=this.MR;if(0!==t.length&&!s.Zx(t)){const i=this.aA();i.O_(),s.tG(t),b.ho(i.r_,t),this.GR=0}}JA(t,s,i,e){const h=this.aA();h.G_(t,s,i,e),this.GR=0}Tc(t){const s=this.aA();s.x_(t),this.GR=0}qA(){}Lb(){super.Lb(),this.WT.flush()}XA(){if(this.hR&&this._R&&this._R.xT()){const t=this.aA();t.sI(this.nR),this.GR=0}}YA(t){if(this.nR!==(t=!!t)&&this.hR){this.nR=t;const s=this.aA();s.eI(t),this.GR=0}}$A(){return this.nR}uT(){return this.aR}cT(){return this.rR}KA(t){if(t=!!t,this.rR&&this.oR!==t){if(t&&this.$A())throw new Error("depth still enabled");this.oR=t;const s=this.aA();s.rI(t),this.GR=0}}ZA(t,s,i,e,h=0){if(t=Math.floor(t),s=Math.floor(s),i=Math.floor(i),e=Math.floor(e),!this.FR.Bl(t,s,i,e)){this.FR.El(t,s,i,e);const r=h||this.DA(this.QA())[1],n=(s=r-s-e,this.aA());n.dI(!0,t,s,i,e),this.GR=0}}tE(){if(-1!==this.FR.jl()){this.FR.set(0,0,-1,-1);const t=this.aA();t.dI(!1,0,0,0,0),this.GR=0}}sE(){for(const t of this.ZR)t.HP(this.DS)}pP(){return!this.WT||this.WT.isContextLost()||this.jR}jM(){super.VS(),b.Ny.o2.jM(),b.Ny.q2.jM(),b.Ny.Kb.jM();for(const t of this.ZR)t.Tc();this.VR=[],this.wP=null,this.HR=null,this.UR=null,this.zR=null,this.JR=null,this.qR=null,this.YR=null,this.$R=0,this.BR="(unavailable)",this.WR="(unavailable)",this.MR=null,this.vR=null,this.aR=null;for(const s of this.vS.values())s.jM()}async HM(){this.jR=!0,await this.WS(),this.jR=!1;for(const t of this.vS.values())t.HM(this);this.BC(this.Tg,this.xg,!0)}iE(t,s){if(this.pP())throw new Error("context lost");this.Nb();const i=b.Tr(b.Ny.o2,this);return i.w2(t,s),i}async eE(e,h){if(this.pP())throw new Error("context lost");if(h=Object.assign({},h),b.Ji.ImageBitmapOptions){let t=await createImageBitmap(e,{premultiplyAlpha:"premultiply"}),s=h.Zv&&"clamp-to-edge"!==h.Zv||h.Qv&&"clamp-to-edge"!==h.Qv,i=b.Kr(t.width)&&b.Kr(t.height);return this.T2()||i||!s?h.premultiplyAlpha=!1:b.Ji.Ki?(t=await createImageBitmap(e,{premultiplyAlpha:"premultiply",resizeWidth:b.Zr(t.width),resizeHeight:b.Zr(t.height)}),h.premultiplyAlpha=!1):t=await createImageBitmap(e,{premultiplyAlpha:"none"}),b.e0(()=>this.iE(t,h))}if(e instanceof Blob){if("undefined"==typeof Image)throw new Error("texture upload variant not supported in worker");const t=await b.Uo(e);e=t}return b.e0(()=>this.iE(e,h))}lT(t,s,i){this.Nb();const e=b.Tr(b.Ny.o2,this);return e.C2(t,s,i),e}mP(t,s,i){this.Nb(),s.F2(t,i)}dT(t){t&&(t.B2(),0<t.W2()||(this.Nb(),t===this.PR&&(this.WT.bindTexture(this.WT.TEXTURE_2D,null),this.PR=null),t===this.k_&&(this.WT.activeTexture(this.WT.TEXTURE1),this.WT.bindTexture(this.WT.TEXTURE_2D,null),this.WT.activeTexture(this.WT.TEXTURE0),this.k_=null),t.D2()))}hE(t){let s=this.Tg,i=this.xg,e=!0;if(t&&("number"==typeof t.width&&(s=Math.floor(t.width),e=!1),"number"==typeof t.height)&&(i=Math.floor(t.height),e=!1),s<=0||i<=0)throw new Error("invalid size");this.Nb();const h=b.Tr(b.Ny.q2,this);return h.oT(s,i,Object.assign({z2:e},t)),this._R=null,this.ZG.mT=null,this.ZG.gT=null,h}rE(t,s=!0){if(t!==this._R){t&&t.GT()&&t.fT(this.Tg,this.xg);const i=this.aA();i.v_(t),this._R=t,this.GR=0,s&&this.lA()}}QA(){return this._R}DA(t){return t?[t.Wm(),t.$m()]:[this.Tg,this.xg]}nE(t,s="stretch"){if(this.SP<2||this._R&&0<this._R._T())this._A(),this.SA(),this.oE(t,s);else{const i=this.aA();i.W_(t,this._R,s),this.GR=0}}oE(t,s="stretch"){const i=t.wT();if(!i)throw new Error("not a texture-backed render target");this.bA(i),this.FA(s,i)}aE(t){if(!(this.SP<2)){const s=this.aA();s.N_(t.yT()),this.GR=0}}lE(t){this.rE(null),this.Nb();const s=t.wT();s===this.PR&&(this.WT.bindTexture(this.WT.TEXTURE_2D,null),this.PR=null),s===this.k_&&(this.WT.activeTexture(this.WT.TEXTURE1),this.WT.bindTexture(this.WT.TEXTURE_2D,null),this.WT.activeTexture(this.WT.TEXTURE0),this.k_=null),t.D2()}async AT(t,s,i){this.Nb();let e=this._R,h,r,n,o=(n=t?(h=t.Wm(),r=t.$m(),t.yT()):(h=this.Wm(),r=this.$m(),null),0),a=0,l=h,u=r;if(i){o=b.Rr(Math.floor(i.Wl()),0,h-1),a=b.Rr(Math.floor(i.Vl()),0,r-1);let t=i.width(),s=(t=0===t?h-o:b.Rr(Math.floor(t),0,h-o),i.height());s=0===s?r-a:b.Rr(Math.floor(s),0,r-a),l=t,u=s,a=r-(a+u)}let c=this.WT,f=(c.bindFramebuffer(c.FRAMEBUFFER,n),()=>{c.bindFramebuffer(c.FRAMEBUFFER,null),this._R=null,this.ZG.mT=null,this.ZG.gT=null,this.rE(e)}),d;if(!s&&2<=this.v2()){c.bindFramebuffer(c.READ_FRAMEBUFFER,n);const p=c.createBuffer(),m=l*u*4,g=c.PIXEL_PACK_BUFFER,y=(c.bindBuffer(g,p),c.bufferData(g,m,c.STREAM_READ),c.readPixels(o,a,l,u,c.RGBA,c.UNSIGNED_BYTE,0),c.bindFramebuffer(c.READ_FRAMEBUFFER,null),c.bindBuffer(g,null),f(),c.fenceSync(c.SYNC_GPU_COMMANDS_COMPLETE,0));await this.NT(()=>c.getSyncParameter(y,c.SYNC_STATUS)===c.SIGNALED),c.deleteSync(y),d=new ImageData(l,u),c.bindBuffer(g,p),c.getBufferSubData(g,0,new Uint8Array(d.data.buffer),0,m),c.bindBuffer(g,null),c.deleteBuffer(p)}else d=new ImageData(l,u),c.readPixels(o,a,l,u,c.RGBA,c.UNSIGNED_BYTE,new Uint8Array(d.data.buffer)),f();return d}uE(){this.YA(!0);const t=this.aA();t.oI(),this.GR=0,this.DR=1}cE(){this.YA(!1);const t=this.aA();t.lI(),this.GR=0,this.DR=2}fE(){return 2===this.DR}dE(){this.YA(!0);const t=this.aA();t.cI(),this.GR=0,this.DR=0}pE(t){if(this.mE()){const s=this.aA();s.j_(t),this.GR=0}}gE(t){if(this.mE()){const s=this.aA();s.z_(t),this.GR=0}}NT(s){const t=new Promise(t=>e.add({resolve:t,JP:s}));return-1===h&&(h=self.requestAnimationFrame(i)),t}Jb(){return this.Tg*this.xg*(this.QP.alpha?4:3)}qb(){let t=0;for(const s of b.Ny.q2.ET())s.wT()||(t+=s.j2());return t}Xb(){let t=0;for(const s of b.Ny.o2.H2())t+=s.j2();return t}yE(){return this.tR}v2(){return this.SP}SE(){return"webgl"+this.v2()}T2(){return 2<=this.v2()}b2(){return this.kR}wE(){return this.OR}bE(){return this.LR}ME(){return 0!==this.NR}vE(){return this.NR}TE(){return this.BR}xE(){return this.WR}GE(){if(2<=this.v2())return"webgl2";{const t=[];return this.JR&&t.push("EXT_frag_depth"),this.qR&&t.push("OES_standard_derivatives"),this.YR&&t.push("EXT_shader_texture_lod"),0<t.length?"webgl1:"+t.join(","):"webgl1:none"}}_E(){return this.VR}mE(){return!!this.wP}bP(){return this.wP}LT(){return this.HR}A2(){return this.UR}E2(){return this.$R}WP(t){this.ZR.add(t)}VP(t){this.ZR.delete(t)}FP(){return this.QR}M2(){return this.WT}tA(t){this.Ww([["normal",t.ONE,t.ONE_MINUS_SRC_ALPHA],["additive",t.ONE,t.ONE],["xor",t.ONE,t.ONE_MINUS_SRC_ALPHA],["copy",t.ONE,t.ZERO],["destination-over",t.ONE_MINUS_DST_ALPHA,t.ONE],["source-in",t.DST_ALPHA,t.ZERO],["destination-in",t.ZERO,t.SRC_ALPHA],["source-out",t.ONE_MINUS_DST_ALPHA,t.ZERO],["destination-out",t.ZERO,t.ONE_MINUS_SRC_ALPHA],["source-atop",t.DST_ALPHA,t.ONE_MINUS_SRC_ALPHA],["destination-atop",t.ONE_MINUS_DST_ALPHA,t.SRC_ALPHA]])}IE(){return this.$b()}}}{const zi=self.Vs,Ji={CE:null,PE:null,RE:null,getTime:null,AE:null};zi.Ny.EE=class{constructor(t){t=Object.assign({},Ji,t),this.FE=t.CE,this.DE=t.PE,this.kE=t.RE,this.OE=t.getTime,this.LE=t.AE,this.NE=null,this.BE=new Set}WE(t){this.BE.add(t)}VE(t){this.BE.delete(t)}jM(){this.NE=null;for(const t of this.BE)t.jM()}jE(t){return this.FE?this.FE(t):[t.Wm(),t.$m()]}QA(t){return this.DE(t)}HE(t,s){this.kE(t,s)}UE(){return this.OE()}C1(t){this.LE(t)}zE(t,s,i){return s=Math.floor(s),i=Math.floor(i),!this.NE||this.NE.Wm()===s&&this.NE.$m()===i||(t.dT(this.NE),this.NE=null),null===this.NE&&(this.NE=t.iE(null,{width:s,height:i,t2:"nearest",e2:!1})),this.NE}}}{const o=self.Vs,qi=self.xs,Th=qi.Cs,Xi=o.Tr(o.Rect),Yi=o.Tr(o.Rect),$i=o.Tr(o.Rect),Ki=o.Tr(o.Rect),Zi=Th.create(),Qi=Th.create(),te={JE:null,qE:null,XE:null,YE:!1},se={$E:null,KE:!1,ZE:!1,QE:!1,t3:!1,s3:!1,i3:!1};o.Ny.e3=class{constructor(t,s){s=Object.assign({},te,s),this.N1=t,this.h3=s.JE,this.r3=s.qE,this.n3=s.XE,this.o3=null,this.a3=[],this.l3=[],this.u3=[],this.f3=!1,this.OM=0,this.d3=!1,this.m3=!1,this.g3=!1,this.y3=!1,this.S3=!1,this.w3=!1,this.iR=!1,this.b3=!1,this.M3=!1,this.v3=!1,this.T3=!1,this.x3=!1,this.G3=0,this._3=[null,null,null],this.I3=!!s.YE,this.C3=0,this.P3=0,this.R3=0,this.A3=0,this.E3=null,this.F3=null,this.D3=o.Tr(o.Rect),this.O3=o.Tr(o.Rect),this.L3=o.Tr(o.Rect),this.N3=o.Tr(o.Rect),this.B3=o.Tr(o.Rect),this.W3=1,this.V3=1,this.j3=0,this.H3=0,this.U3=null,this.z3=null,this.J3=0,this.q3=0,this.X3=!1,this.eT=Th.create(),this.Y3=Th.create(),this.N1.WE(this)}Gr(){this.N1.VE(this),o.Kn(this.u3),o.Kn(this.a3),o.Kn(this.l3),this.E3=null,this.F3=null,this.h3=null,this.r3=null,this.n3=null}jM(){this.f3=!0,o.Kn(this.u3),o.Kn(this.a3),o.Kn(this.l3)}K3(){return this.f3}Z3(h,t){if(t=Object.assign({},se,t),o.Kn(this.u3),this.C3=0,this.P3=0,this.d3=!1,this.m3=!1,this.g3=!1,this.y3=!1,this.S3=!1,this.w3=!1,this.G3=0,this.x3=!!t.t3,this.T3=!!t.i3,this.f3=!1,o.ho(this.a3,h),0!==h.length){if(t.$E){if(t.$E.length!==h.length)throw new Error("incorrect indexMap length");o.ho(this.l3,t.$E)}else{o.Kn(this.l3);for(let t=0,s=h.length;t<s;++t)this.l3.push(t)}for(const s of h)this.C3+=s.vM(),this.P3+=s.TM(),s.CM()&&(this.d3=!0),s.RM()&&(this.m3=!0),s.PM()&&(this.g3=!0),s.xM()&&(this.y3=!0),s.FM()&&(this.S3=!0);this.w3=this.Q3(h[0].bM());const r=this.tF(h[0],t),n=this.sF(h.at(-1),t);if(1!==h.length||r||n){this.v3=!1;let e=0;r&&(this.G3=1,this.u3.push(o.Tr(o.Ny.e3.Step.iF,this,-1,1)),e=1);for(let s=0,i=h.length;s<i;++s)if(0!==s||r){let t=1===e?2:1;s!==i-1||n||(t=0),this.G3=Math.max(this.G3,t),this.u3.push(o.Tr(o.Ny.e3.Step.eF,this,e,t,s)),e=t}else this.G3=1,this.u3.push(o.Tr(o.Ny.e3.Step.hF,this,-1,1,s)),e=1;n&&this.u3.push(o.Tr(o.Ny.e3.Step.rF,this,e,0))}else this.v3=!0}}tF(t,s){return!!(s.KE||t.GM()||s.QE&&!t.IM()||t.RM()&&!this.T3||0!==this.C3||0!==this.P3)||(t.bM().zb()?t.PM()&&(s.s3||s.t3)||t.AM()&&s.t3:t.PM()&&!this.w3&&s.s3)}sF(t,s){return!!s.ZE||(t.bM().zb()?t.PM()||t.xM():(t.PM()||t.xM())&&this.nF())}Q3(t){return t.hw()&&this.g3&&!this.y3}oF(t,s,i){t.hw()&&null===s&&(s=t.GetBackbufferRenderTarget()),this.U3=s,this.E3=i.aF||null,this.F3=i.contextObject||null,this.OM=i.lF||0,this.W3=i.devicePixelRatio||1,this.V3=i.uF||1,this.j3=i.cF||0,this.H3="number"==typeof i.time?i.time:this.N1.UE(),this.iR=!1,t.cA(),this.d3&&this.fF();let e=!1;if(this.dF()&&(this.pF(t,i),e=!0,this.z3=this.N1.zE(t,this.R3,this.A3),Xi.I(this.O3),Xi.au(),t.hw()&&t._MaybeDoPendingClearRenderPass(this.U3),t.CopyTextureToTexture(this.U3.wT(),this.z3,Xi.Wl(),Xi.Vl(),Xi.width(),Xi.height())),this.v3)this.mF(t,i);else if(e||this.pF(t,i),0!==this.L3.width()||0!==this.L3.height()){t.xA(),t.SA(),t.Xw(0),t.$w(0),this.o3=i.gF||null,this.J3=i.yF||0,this.q3=i.SF||0,this.X3=!!i.wF,this.bF(t),this._3[0]=s,this._3[1]=1<=this.G3?this.MF():null,this._3[2]=2===this.G3?this.MF():null;for(const h of this.u3){const r=this.vF(h.TF()),n=this.vF(h.xF());t.hw()?h.GF(t,r,n):h._F(t,r,n)}t.bA(null),this._3[1]&&this.IF(this._3[1]),this._3[2]&&this.IF(this._3[2]),this._3.fill(null),this.CF(t),this.U3=null,this.z3=null,this.E3=null,this.F3=null,this.o3=null}}pF(t,s){const[i,e]=this.N1.jE(t);this.PF(t,i,e),this.RF(s)}PF(t,s,i){if(s<=0||i<=0)throw new Error("invalid draw size");this.R3===s&&this.A3===i||this.AF(t,s,i,0,0,this.eT,this.Y3),this.R3=s,this.A3=i}AF(t,s,i,e,h,r,n){const o=s/2+e,a=i/2+h,l=(t.ew(r,s/i),t.aw(o,a,t.jS(i),o,a,0,i));Th.I(n,l)}RF(t){this.D3.I(t.EF),t.FF?this.O3.I(t.FF):this.O3.set(0,0,this.R3,this.A3),this.L3.I(this.O3),this.L3.Pt(this.R3,this.A3);const s=this.V3*this.W3;this.O3.Ql(this.C3*s,this.P3*s),this.B3.I(this.O3),this.B3.Pt(this.R3,this.A3),this.O3.lu(0,0,this.R3,this.A3),this.N3.I(this.O3),this.N3.Pt(this.R3,this.A3)}bF(t){if(this.b3=t.$A(),this.M3=t.fE(),this.T3)t.YA(!1),this.m3&&t.KA(!0);else{if(Xi.I(this.O3),t.zb()){const s=this.V3*this.W3;Xi.Ql(Math.max(this.C3,1)*s,Math.max(this.P3,1)*s),Xi.au(),Xi.Rr(0,0,this.R3,this.A3)}else Xi.au();t.ZA(Xi.Wl(),Xi.Vl(),Xi.width(),Xi.height(),this.A3)}}DF(t){t.SA(),this.T3||(this.M3&&t.dE(),t.YA(!1),this.m3&&t.KA(!0)),t.hw()&&t.SetNormalizedCoordsProgramVariant(!0)}CF(t){t.KA(!1),this.M3&&t.cE(),t.YA(this.b3),this.T3||t.tE(),t.hw()&&t.SetNormalizedCoordsProgramVariant(!1),this.iR=t.fA()}kF(){this.B3.Rr(0,0,1,1)}vF(t){return t<0?null:this._3[t]}MF(){return this.N1.QA(this)}OF(){return this.U3}IF(t){this.N1.HE(t,this)}LF(t){return this.a3[t]}NF(t){this.o3?this.o3(this,t,()=>this.h3(t,this)):this.h3(t,this),this.v3||this.DF(t)}BF(t){if(this.T3)return!0;if(0!==this.J3||0!==this.q3)return!1;const[s,i]=t.DA(t.QA());return s===this.R3&&i===this.A3}WF(t,s){let i=this.eT,e=this.Y3;if(s&&!this.BF(t)){i=Zi,e=Qi;const[h,r]=t.DA(t.QA());this.AF(t,h,r,this.J3,this.q3,i,e),this.T3||t.tE()}t.hA(i),t.uA(e)}fF(){this.N1.C1(this)}VF(t,s){return this.n3(this.l3[t],s)}jF(t,s){let i=this.B3,e=this.N3,h=this.L3;t.zb()&&(Yi.I(i),Yi.iu(1),i=Yi,$i.I(e),$i.iu(1),e=$i,Ki.I(h),Ki.iu(1),h=Ki),this.HF(t,s,e,h,i,1/this.R3,1/this.A3)}UF(t,s){let e=this.N3,h=this.L3,r=1/this.R3,n=1/this.A3;if(this.r3){let{zF:t,JF:s,qF:i}=this.r3(this.E3);t||(Xi.set(0,0,0,0),t=Xi),s=s||this.R3,i=i||this.A3,e=t,h=t,r=1/s,n=1/i}else t.zb()&&($i.I(e),$i.iu(1),e=$i,Ki.I(h),Ki.iu(1),h=Ki);let i=this.B3;t.zb()&&((i=Yi).I(this.B3),i.iu(1)),this.HF(t,s,e,h,i,r,n),t.hw()&&this.S3&&t.SetProgramParameter_IsSrcTexRotated(this.x3)}XF(t){return this.g3?t.hw()?this.dF()?this.z3:this.U3.wT():this.U3:null}HF(t,s,i,e,h,r,n){t.UA(this.XF(t),h,i,e,this.D3,r,n,this.W3,this.V3,this.j3,this.H3),t.zA(this.VF(s,t))}mF(t,s){const i=this.a3[0],e=t.$A(),h=i.RM();h&&(t.YA(!1),t.KA(!0),this.B3.set(0,0,1,1),this.L3.set(0,0,1,1)),t.gw(i),t.WM(this.OM),t.rE(this.U3);let r=0,n=1;if(this.L3.set(0,0,1,1),i.AM()&&this.r3){const{zF:o,JF:a,qF:l}=this.r3(this.E3);o&&this.L3.I(o),r=Number.isFinite(a)?1/a:0,n=Number.isFinite(l)?1/l:0}else{const[u,c]=this.N1.jE(t);r=1/u,n=1/c}s.EF?this.D3.I(s.EF):this.D3.set(0,0,0,0),t.UA(this.XF(t),this.B3,this.L3,this.L3,this.D3,r,n,this.W3,this.V3,this.j3,this.H3),t.zA(this.VF(0,t)),t.hw()&&this.S3&&t.SetProgramParameter_IsSrcTexRotated(this.x3),t.Xw(0),this.NF(t),h&&(t.KA(!1),t.YA(e))}dF(){return this.w3}nF(){return!this.w3}YF(){return this.g3}$F(){return!!this.v3&&!this.dF()}KF(){return this.T3}ZF(){return this.E3}QF(){return this.F3}tD(){return this.OM}sD(){return this.X3}fA(){return this.iR}iD(){return this.O3}eD(){return this.N3}hD(){return this.I3}async rD(t,s,i){}}}{const ie=self.Vs;ie.Ny.e3.Step=class{constructor(t,s,i,e=-1){this.nD=t,this.oD=s,this.aD=i,this.Ay=e}lD(){return this.nD}TF(){return this.oD}xF(){return this.aD}uD(){return this.Ay}Xx(){return this.lD().LF(this.uD())}_F(t,s,i){}GF(t,s,i){}}}{const ee=self.Vs;ee.Ny.e3.Step.iF=class extends ee.Ny.e3.Step{constructor(t,s,i,e){super(t,s,i,e)}_F(t,s,i){const e=this.lD();t.xA(),t.mw(),t.rE(i,e.sD()),t.JA(0,0,0,0),e.NF(t),e.kF()}GF(t,s,i){const e=this.lD();t.xA(),t.mw(),t.rE(i,!1),t.JA(0,0,0,0),e.NF(t),e.kF()}}}{const he=self.Vs,re=he.Tr(he.Rect),ne=he.Tr(he.gu);he.Ny.e3.Step.rF=class extends he.Ny.e3.Step{constructor(t,s,i,e){super(t,s,i,e)}_F(t,s,i){const e=this.lD();t.mw(),t.rE(i),e.WF(t,!0),t.WM(e.tD()),t.bA(s.wT()),ne.Lu(e.iD()),re.I(e.eD()),re.iu(1),t.ob(ne,re),e.hD()&&t.aE(s)}GF(t,s,i){const e=this.lD();t.mw(),t.rE(i,!1),e.BF(t)?ne.Lu(e.eD()):(t.SetNormalizedCoordsProgramVariant(!1),e.WF(t,!0),ne.Lu(e.iD())),t.SetBackTexture(null),t.WM(e.tD()),t.bA(s.wT()),e.KF()?t.FA():t.ob(ne,e.eD())}}}{const oe=self.Vs;oe.Ny.e3.Step.hF=class extends oe.Ny.e3.Step{constructor(t,s,i,e){super(t,s,i,e)}_F(t,s,i){const e=this.lD();t.rE(i,e.sD()),t.JA(0,0,0,0),t._A(),t.gw(this.Xx()),e.UF(t,this.uD()),e.NF(t),e.kF()}GF(t,s,i){const e=this.lD();t.rE(i,!1),t.JA(0,0,0,0),t._A(),t.gw(this.Xx()),e.UF(t,this.uD()),e.NF(t),e.kF()}}}{const ae=self.Vs,le=ae.Tr(ae.Rect),ue=ae.Tr(ae.gu);ae.Ny.e3.Step.eF=class extends ae.Ny.e3.Step{constructor(t,s,i,e){super(t,s,i,e)}_F(t,s,i){const e=this.lD(),h=(t.rE(i),0===this.xF());h?t.WM(e.tD()):(t.JA(0,0,0,0),t._A()),t.gw(this.Xx()),e.jF(t,this.uD()),t.bA(s.wT()),e.WF(t,h),ue.Lu(e.iD()),le.I(e.eD()),le.iu(1),t.ob(ue,le),e.hD()&&t.aE(s)}GF(t,s,i){const e=this.lD(),h=(t.rE(i,!1),0===this.xF());h?(t.WM(e.tD()),t.SetBackTexture(null),e.BF(t)?ue.Lu(e.eD()):(t.SetNormalizedCoordsProgramVariant(!1),e.WF(t,!0),ue.Lu(e.iD()))):(t.JA(0,0,0,0),t._A(),ue.Lu(e.eD())),t.gw(this.Xx()),e.jF(t,this.uD()),t.bA(s.wT()),e.KF()?t.FA():t.ob(ue,e.eD())}}}{let u=function(t,s){const i=t[0],e=s[0],h=i-e;if(0!=h)return h;const r=t[1],n=s[1];return r-n},c=(u,self.Vs),f=self.Zs,d=null,s=new Set,p=[],m=[],i=!1,t=!1,e=new Set(["vsync","unlimited-tick","unlimited-frame"]);self.cD=class{constructor(t){d=t,Object.defineProperties(this,{fD:{value:d.pD().dD(),writable:!1},mD:{value:d.yD().gD(),writable:!1},SD:{value:{},writable:!1},wD:{value:{},writable:!1},bD:{value:d.MD(),writable:!1},vD:{value:d.TD(),writable:!1},xD:{value:new Date(d.GD()),writable:!1},storage:{value:new self._D(d),writable:!1},isInWorker:{value:d.ID(),writable:!1},CD:{value:d.PD(),writable:!1},RD:{value:d.AD(),writable:!1},t2:{value:d.ED(),writable:!1},FD:{value:d.DD(),writable:!1},kD:{value:new self.OD(t),writable:!1},LD:{value:new self.ND(t),writable:!1}}),d.BD().addEventListener("keydown",t=>{s.has(t.key)?t.stopPropagation():s.add(t.key)}),d.BD().addEventListener("keyup",t=>s.delete(t.key)),d.a0().addEventListener("window-blur",()=>s.clear()),d.ID()&&(self.alert=t=>(i||(i=!0,console.warn("[Construct] alert() was called from a Web Worker, because the project 'Use worker' setting is enabled. This method is not normally available in a Web Worker. Construct has implemented the alert for you, but note that other features may be missing in worker mode. You may wish to disable 'Use worker', or use a more convenient function like console.log(). For more information please refer to the scripting section of the manual.")),this.alert(t)))}WD(t){Object.defineProperties(this.SD,t)}VD(t){Object.defineProperties(this.wD,t)}addEventListener(t,s){d.BD().addEventListener(t,s)}removeEventListener(t,s){d.BD().removeEventListener(t,s)}jD(t,...s){f.Re(t);const i=d.HD(),e=i.UD(t);if(!e)throw new Error(`cannot find function name '${t}'`);if(!e.wc())return e.zD();if(s.length<e.JD())throw new Error(`not enough function parameters passed for '${t}' (${s.length} passed, ${e.JD()} expected)`);let h=e.qD(),r=h.XD(),n=i.YD();if(n){r=r.slice(0);const a=new Set(r);for(const l of n.XD())a.has(l)||(r.push(l),a.add(l));for(const u of i.$D())a.has(u)||(r.push(u),a.add(u))}const o=h.KD(r,e.ZD(),e.QD(),e.zD(),...s);return o}sk(t){const s=d.ek().ik();if(!s)throw new Error("not in a function which returns a value");switch(s.hk()){case 1:"number"==typeof t&&s.rk(t);break;case 2:"string"==typeof t&&s.rk(t);break;case 3:"number"!=typeof t&&"string"!=typeof t||s.rk(t)}}signal(t){f.Re(t),d.HD().nk(t)}ak(t){return f.Re(t),d.HD().lk(t)}uk(){return[d.PD(),d.AD()]}get isSuspended(){return d.ck()}get dt(){return d.fk()}get dk(){return d.pk()}get gameTime(){return d.mk()}get gk(){return d.yk()}get timeScale(){return d.Sk()}set timeScale(t){f._e(t),d.wk(t)}get fps(){return t||(console.warn("IRuntime.fps is deprecated. Use IRuntime.framesPerSecond instead."),t=!0),d.bk()}get framesPerSecond(){return d.bk()}get Mk(){return d.vk()}get Tk(){return d.xk()}get Gk(){return d._k()}get Ik(){return d.Ck()}set Ik(t){if(!e.has(t))throw new Error("invalid framerate mode");d.Pk(t)}get Rk(){return d.Ak()}set Rk(t){f._e(t),d.Ek(t)}get Fk(){return d.Dk()}set Fk(t){d.kk(t)}get Ok(){return d.pD().Lk()}get Nk(){return d.pD().Bk()}random(){return d.Wk()}get layout(){const t=d.Vk();if(t)return t.jk();throw new Error("no layout is running - make sure a layout is loaded before accessing")}Hk(t){let s=d.Uk(),i=null;if("number"!=typeof t&&"string"!=typeof t)throw new TypeError("expected string or number");if(i=s.zk(t))return i.jk();throw new Error("invalid layout")}Jk(){return d.Uk().qk().map(t=>t.jk())}Xk(t){let s=d.Uk(),i;if("number"!=typeof t&&"string"!=typeof t)throw new TypeError("expected string or number");if(!(i=s.zk(t)))throw new Error("invalid layout");s.Yk()||s.$k(i)}get keyboard(){const t=d.Kk().keyboard;if(t)return t;throw new Error("runtime.keyboard used but Keyboard object missing - add it to your project first")}get Zk(){const t=d.Kk().Zk;if(t)return t;throw new Error("runtime.mouse used but Mouse object missing - add it to your project first")}get Qk(){const t=d.Kk().Qk;if(t)return t;throw new Error("runtime.touch used but Touch object missing - add it to your project first")}get tO(){const t=d.Kk().tO;if(t)return t;throw new Error("runtime.timelineController used but Timeline Controller object missing - add it to your project first")}sO(t,s){f.Re(t),f.Re(s),d.iO(t,s)}eO(t){f._e(t);const s=d.hO(t);return s?s.rO():null}nO(t,e){f.Qe(e);const h=d.oO();for(const s of t){const i=d.aO(s),r=i.lO();p.push([r.uO().uD(),r.cO()]),m.push(i)}if(0!==p.length){p.sort(u),m.sort((t,s)=>e(t.rO(),s.rO()));let i=!1;for(let t=0,s=p.length;t<s;++t){const n=m[t],o=h.fO(p[t][0]),a=p[t][1],l=o.dO();l[a]!==n&&((l[a]=n).lO().pO(o,!0),o.mO(n),i=!0)}i&&d.gO(),c.Kn(p),c.Kn(m)}}async yO(t,s){const i=new MessageChannel,e=i.port1,h=i.port2;return await d.SO("runtime","script-create-worker",{url:t,opts:s,port2:h},[h]),e}alert(t){return d.SO("runtime","alert",{message:t+(d.ID()?" [via Web Worker]":"")})}wO(t){return f._e(t),d.bO(t)}MO(t){d.vO(t)}}}{let s=self.Vs,i=null;self.TO=class{constructor(t){i=t,Object.defineProperties(this,{xO:{value:!0,writable:!1}})}GO(t){const s=self.IO._O(t);if(!s)throw new Error("invalid IImageInfo");s.CO(i.PO())}RO(t){return i.Oo(t)}AO(t){return i.Lo(t)}EO(t){return i.No(t)}FO(t){return i.Bo(t)}DO(t){return i.kO(t)}OO(t){return"flat"===i.LO()&&s.Fo(t)&&(t=t.toLowerCase()),i.NO(t)}get BO(){return i.WO()}async VO(t,s){throw new Error("decodeWebMOpus() is no longer supported - use Web Audio's decodeAudioData() directly as all supported platforms now support WebM Opus")}jO(...t){return i.HO(...t)}UO(t){return i.zO(t)}JO(t){return i.qO(t)}}}{let n=self.Vs,i=self.Zs,o=null;self.XO=class{constructor(t){o=t,Object.defineProperties(this,{runtime:{value:o.PO(),writable:!1}})}YO(t,s){const i=o.PO(),e=i.aO(t),h=i.aO(s);return o.$O(e,h)}KO(t,s){const i=o.PO(),e=i.aO(t);for(const h of s){const r=i.aO(h);if(o.$O(e,r))return h}return null}ZO(t){const s=o.PO().aO(t),i=o.QO(s);return i?i.rO():null}tL(t,s){if(i._e(t),i._e(s),t=Math.floor(t),s=Math.floor(s),t<=0||s<=0)throw new Error("invalid cell size");o.sL(t,s)}iL(){return o.eL()}hL(t,s){let i=o.PO(),e;e=Array.isArray(t)?t.map(t=>i.rL(t)):[i.rL(t)];const h=n.Rect.Nl(s),r=[];return o.nL(null,e,h,r),r.map(t=>t.rO())}}}{let s=self.Vs,i=null,e=new Map([["Windows","windows"],["macOS","macos"],["Linux","linux"],["Chrome OS","chrome-os"],["Android","android"],["iOS","ios"]]),h=new Map([["Chrome","chrome"],["Chromium","chromium"],["Edge","edge"],["Opera","opera"],["NW.js","nwjs"],["Firefox","firefox"],["Safari","safari"]]),r=new Map([["Chromium","chromium"],["Gecko","gecko"],["WebKit","webkit"]]);self.OD=class{constructor(t){i=t,Object.defineProperties(this,{oL:{value:s.mi.xi,writable:!1},aL:{value:e.get(s.mi.gi)||"unknown",writable:!1},lL:{value:s.mi.yi,writable:!1},uL:{value:h.get(s.mi.Si)||"unknown",writable:!1},cL:{value:s.mi.wi,writable:!1},fL:{value:r.get(s.mi.Mi)||"unknown",writable:!1}})}get exportType(){let t=i.dL();return i.pL()?t="nwjs":i.mL()?t="windows-webview2":"cordova"===t?t="Android"===s.mi.gi?"cordova-android":"cordova-ios":"playable-ad-single-file"!==t&&"playable-ad-zip"!==t||(t="playable-ad"),t}get renderer(){return i.yL().gL()}get SL(){return i.yL().wL()}get bL(){return i.yL().ML()}get vL(){return i.yL().TL()}get xL(){return i.yL().GL()}get _L(){return i.yL().IL()}get devicePixelRatio(){return i.CL()}}}{const ce=self.Zs;self._D=class{constructor(t){this.PL=t.RL()}getItem(t){return ce.Re(t),this.PL.getItem(t)}setItem(t,s){return ce.Re(t),this.PL.setItem(t,s)}removeItem(t){return ce.Re(t),this.PL.removeItem(t)}clear(){return this.PL.clear()}keys(){return this.PL.keys()}}}{const fe=self.Vs,de=fe.Hs();self.AL=class{#EL;constructor(){const t=fe.DL.FL(de);this.#EL=t,Object.defineProperties(this,{runtime:{value:t.PO().kL(),writable:!1},OL:{value:t.LL(),writable:!1},NL:{value:t.BL(),writable:!1},WL:{value:t.VL(),writable:!1},jL:{value:t.HL(),writable:!1},UL:{value:t.zL(),writable:!1},JL:{value:t.qL(),writable:!1},XL:{value:t.YL(),writable:!1},$L:{value:t.KL(),writable:!1}}),t.PO().ZL(this,t)}static QL(t){if(!t)return null;const s=fe.DL.t5(t);return s?s.s5():null}i5(){return this.#EL.h5().e5()}r5(){return this.#EL.n5().rO()}}}{const pe=self.Vs,me=self.Zs,ge=pe.Hs();self.o5=class{#EL;constructor(){const t=pe.DL.FL(ge);this.#EL=t,Object.defineProperties(this,{name:{value:t.Mf(),writable:!1},runtime:{value:t.PO().kL(),writable:!1},a5:{value:t.l5().s5(),writable:!1}}),t.PO().ZL(this,t)}addEventListener(t,s){me.Re(t),me.Qe(s),this.#EL.BD().addEventListener(t,s)}removeEventListener(t,s){me.Re(t),me.Qe(s),this.#EL.BD().removeEventListener(t,s)}u5(){return[...this.instances()]}c5(){return pe.first(this.instances())}f5(){return[...this.d5()]}p5(){return pe.first(this.d5())}m5(t){const s=this.#EL,i=s.PO().g5(t),e=s.y5(i);return e?e.rO():null}*instances(){for(const t of this.#EL.S5())yield t.rO()}*d5(){for(const t of this.#EL.b5().w5())yield t.rO()}M5(t){me.Qe(t);const s=this.#EL;if(0<s.v5())throw new Error("setInstanceClass() called too late, because instances have already been created - call in runOnStartup");s.T5(t)}Vi(t,s,i,e,h){if(me.Me(s),me.Me(i),"number"!=typeof t&&"string"!=typeof t)throw new TypeError("invalid layer parameter");const r=this.#EL,n=r.PO(),o=n.Vk().uO(t);if(!o)throw new Error("invalid layer");const a=n.x5(r,o,s,i,e,h),l=(e&&o.G5(a),n.HD());return l._5(!0),a.I5(),l._5(!1),l.C5()||n.Uk().P5()||n.R5(),a.rO()}}}{const ye=self.Zs,l=new WeakMap,Se=["above","below","top-sublayer","bottom-sublayer"];self.A5=class{constructor(t){l.set(this,t);const s=[],i=t.E5(),e=i.F5().length;for(let t=0;t<e;++t)s.push(new self.D5(i,t));Object.defineProperties(this,{name:{value:t.Mf(),writable:!1},index:{value:t.uD(),writable:!1},effects:{value:s,writable:!1}})}addEventListener(t,s){ye.Re(t),ye.Qe(s),l.get(this).BD().addEventListener(t,s)}removeEventListener(t,s){ye.Re(t),ye.Qe(s),l.get(this).BD().removeEventListener(t,s)}get width(){return l.get(this).Wm()}set width(t){ye._e(t),l.get(this).qm(t)}get height(){return l.get(this).$m()}set height(t){ye._e(t),l.get(this).Vm(t)}k5(t,s){ye._e(t),ye._e(s);const i=l.get(this);i.qm(t),i.Vm(s)}getSize(){const t=l.get(this);return[t.Wm(),t.$m()]}set scale(t){ye._e(t),l.get(this).O5(t)}get scale(){return l.get(this).L5()}set angle(t){ye._e(t),l.get(this).N5(t)}get angle(){return l.get(this).GetAngle()}set scrollX(t){ye.Me(t),l.get(this).B5(t)}get scrollX(){return l.get(this).W5()}set scrollY(t){ye.Me(t),l.get(this).V5(t)}get scrollY(){return l.get(this).j5()}scrollTo(t,s){ye.Me(t),ye.Me(s);const i=l.get(this);i.B5(t),i.V5(s)}H5(){const t=l.get(this);return[t.W5(),t.j5()]}U5(t){let s=l.get(this),i=null;if("number"!=typeof t&&"string"!=typeof t)throw new TypeError("expected string or number");return(i=s.uO(t))?i.z5():null}J5(){return l.get(this).q5().map(t=>t.z5())}*X5(){for(const t of l.get(this).X5())yield t.z5()}Y5(t,s,i){const e=l.get(this),h=self.K5,r=(ye.Re(t),ye.uh(s,h),s?e.PO().Z5(s):null),n=Se.indexOf(i);if(n<0)throw new Error("invalid location");e.Q5(t,r,n)}tN(t,s,i){const e=l.get(this),h=e.PO(),r=self.K5,n=(ye.ah(t,r),h.Z5(t));if(!n)throw new Error("invalid layer");ye.uh(s,r);const o=s?h.Z5(s):null,a=Se.indexOf(i);if(a<0)throw new Error("invalid location");e.sN(n,o,a)}iN(t){const s=l.get(this),i=self.K5,e=(ye.ah(t,i),s.PO().Z5(t));if(!e)throw new Error("invalid layer");const h=e.PO();s.eN(e),h.HD().C5()||h.R5()}hN(){const t=l.get(this),s=t.PO();t.rN(),s.HD().C5()||s.R5()}nN(t,s){ye._e(t),ye._e(s),l.get(this).oN(t,s)}aN(){return l.get(this).lN()}set K(t){ye.Re(t);const s=l.get(this);if("perspective"===t)s.uN();else{if("orthographic"!==t)throw new Error("invalid projection");s.cN()}}get K(){return l.get(this).fN()?"orthographic":"perspective"}}}{const we=self.Vs,be=self.Zs,f=new WeakMap,Me=new Map([["normal",0],["additive",1],["copy",3],["destination-over",4],["source-in",5],["destination-in",6],["source-out",7],["destination-out",8],["source-atop",9],["destination-atop",10]]),ve=new Map([...Me.entries()].map(t=>[t[1],t[0]])),Te=we.Tr(we.na);self.K5=class{constructor(t){f.set(this,t);const s=[],i=t.E5(),e=i.F5().length;for(let t=0;t<e;++t)s.push(new self.D5(i,t));Object.defineProperties(this,{name:{value:t.Mf(),writable:!1},layout:{value:t.zk().jk(),writable:!1},effects:{value:s,writable:!1}}),t.PO().ZL(this,t)}get dN(){const t=f.get(this).pN();return t?t.z5():null}*mN(){for(const t of f.get(this).mN())yield t.z5()}*gN(){for(const t of f.get(this).yN())yield t.z5()}*SN(){for(const t of f.get(this).yN())for(const s of t.wN())yield s.z5()}get index(){return f.get(this).uD()}get isVisible(){return f.get(this).bN()}set isVisible(t){f.get(this).MN(t)}get vN(){return f.get(this).TN()}get isInteractive(){return f.get(this).xN()}set isInteractive(t){f.get(this).GN(t)}get _N(){return f.get(this).IN()}set _N(t){f.get(this).CN(!!t)}get PN(){return f.get(this).RN()}get opacity(){return f.get(this).mA()}set opacity(t){t=we.Rr(+t,0,1),isNaN(t)||f.get(this).yA(t)}set scale(t){be._e(t),f.get(this).AN(t)}get scale(){return f.get(this).EN()}set scaleRate(t){be._e(t),f.get(this).FN(t)}get scaleRate(){return f.get(this).DN()}set angle(t){be._e(t),f.get(this).N5(t)}get angle(){return f.get(this).kN()}set parallaxX(t){be._e(t),f.get(this).ON(t)}get parallaxX(){return f.get(this).LN()}set parallaxY(t){be._e(t),f.get(this).NN(t)}get parallaxY(){return f.get(this).BN()}set WN(t){be._e(t),f.get(this).rv(t)}get WN(){return f.get(this).hv()}set VN(t){f.get(this).jN(t)}get VN(){return f.get(this).HN()}set UN(t){f.get(this).zN(t)}get UN(){return f.get(this).JN()}set lF(t){be.Re(t);const s=Me.get(t);if("number"!=typeof s)throw new Error("invalid blend mode");f.get(this).WM(s)}get lF(){return ve.get(f.get(this).qN())}set backgroundColor(t){if(be.Je(t),t.length<3)throw new Error("expected 3 elements");Te.fa(t[0],t[1],t[2]);const s=f.get(this),i=s.XN();i.Ea(Te)||(i.xa(Te),s.PO().gO())}get backgroundColor(){const t=f.get(this).XN();return[t.Ga(),t._a(),t.Ia()]}set scrollX(t){be.Me(t);const s=f.get(this);s.YN(!0),s.B5(t)}get scrollX(){return f.get(this).W5()}set scrollY(t){be.Me(t);const s=f.get(this);s.YN(!0),s.V5(t)}get scrollY(){return f.get(this).j5()}scrollTo(t,s){be.Me(t),be.Me(s);const i=f.get(this);i.YN(!0),i.B5(t),i.V5(s)}H5(){const t=f.get(this);return[t.W5(),t.j5()]}$N(){f.get(this).YN(!1)}getViewport(){return f.get(this).KN().Ul()}ZN(t,s,i=0){be.Me(t),be.Me(s),be.Me(i);const e=f.get(this),h=e.PO();return e.QN(t-h.tB(),s-h.sB(),i)}iB(t,s,i=0){be.Me(t),be.Me(s),be.Me(i);const e=f.get(this),h=e.PO(),[r,n]=e.eB(t,s,i);return[r+h.tB(),n+h.sB()]}hB(t,s,i=0){return be.Me(t),be.Me(s),be.Me(i),f.get(this).rB(t,s,i)}nB(t,s,i=0){return be.Me(t),be.Me(s),be.Me(i),f.get(this).oB(t,s,i)}get aB(){return f.get(this).lB()}}}{let e=function(t){let s=_e.get(t);return s||(s=xe.Tr(xe.Event.a0),_e.set(t,s)),s};e;const xe=self.Vs,Ge=self.Zs,_e=new WeakMap,Ie=xe.Hs();self.uB=class{#EL;constructor(){const t=xe.DL.FL(Ie),s={runtime:{value:(this.#EL=t).PO().kL(),writable:!1},cB:{value:t.fB().e5(),writable:!1},a5:{value:t.l5().s5(),writable:!1}};t.dB(s),t.pB(s),Object.defineProperties(this,s),t.PO().ZL(this,t)}static mB(){return xe.DL.gB()}yB(){const t=_e.get(this);t&&(t.Gr(),_e.delete(this))}addEventListener(t,s,i){Ge.Re(t),Ge.Qe(s),e(this).addEventListener(t,s,i)}removeEventListener(t,s,i){Ge.Re(t),Ge.Qe(s),e(this).removeEventListener(t,s,i)}dispatchEvent(t){e(this).dispatchEvent(t)}destroy(){const t=this.#EL,s=t.PO();s.SB(t),s.HD().C5()||s.Uk().P5()||s.HD().wB()||s.R5()}bB(){const t=this.#EL.MB();return t?t.map(t=>t.rO()):[]}*vB(){const t=this.#EL;if(t.TB())for(const s of t.xB())yield s.rO()}get uid(){return this.#EL.GB()}get _B(){return this.#EL.IB()}get CB(){return this.#EL.PB()}set timeScale(t){Ge._e(t),this.#EL.wk(t)}get timeScale(){return this.#EL.RB()}AB(){this.#EL.EB()}get dt(){const t=this.#EL;return t.PO().fk(t)}DB(...t){Ge.Je(t);const s=new Set(t),i=this.#EL.kB();return s.isSubsetOf(i)}OB(t){Ge.ah(t,Set),this.#EL.LB(t)}NB(){return new Set(this.#EL.kB())}signal(t){Ge.Re(t);const s=this.#EL;s.PO().HD().BB(s,t)}ak(t){Ge.Re(t);const s=this.#EL;return s.PO().HD().WB(s,t)}}}{const Ce=self.Vs,Pe=self.Zs,Re=Ce.Hs();self.VB=class extends self.uB{#EL;#jB=!1;#HB=null;#UB=!1;#zB=null;#JB;#qB;constructor(t){super(),this.#EL=Ce.DL.FL(Re),this.#jB=!1,this.#HB=null,this.#UB=!1,this.#zB=null,this.#JB=t?.domComponentId,this.#qB=t?.wrapperComponentId}yB(){this.XB(!1),this.YB(!1),super.yB()}$B(){return Ce.DL.KB()}ZB(t){const s=this.#EL;s.PO().QB(t,s)}t4(t){const s=this.#EL;return s.PO().s4(t,s)}i4(t,s){if(Pe.Re(t),Pe.Qe(s),!this.#JB)throw new Error("no DOM component id set");const i=this.#EL.PO();i.e4(this.#JB,t,s)}h4(t){Pe.Je(t);for(const[s,i]of t)this.i4(s,i)}r4(t,s){if(Pe.Re(t),!this.#JB)throw new Error("no DOM component id set");const i=this.#EL.PO();i.Ef(this.#JB,t,s)}n4(t,s){if(Pe.Re(t),!this.#JB)throw new Error("no DOM component id set");const i=this.#EL.PO();return i.SO(this.#JB,t,s)}o4(t,s){const i=this.#EL.PO();if(!i.ID())return window.c3_runtimeInterface._OnMessageFromRuntime({type:"event",component:this.#JB,handler:t,data:s,responseId:null});this.r4(t,s)}XB(t){if(this.#jB!==(t=!!t)){this.#jB=t;const s=this.#EL.PO();if(t){if(!this.#HB)if(this.#EL.PO().a4()){const i=globalThis.C3Debugger,e=this.a5;this.#HB=()=>{const t=performance.now();this.l4(),i.AddIndividualPluginTickTime(e,performance.now()-t)}}else this.#HB=()=>this.l4();s.a0().addEventListener("tick",this.#HB)}else s.a0().removeEventListener("tick",this.#HB)}}u4(){return this.#jB}l4(){}YB(t){if(this.#UB!==(t=!!t)){this.#UB=t;const s=this.#EL.PO();if(t){if(!this.#zB)if(this.#EL.PO().a4()){const i=globalThis.C3Debugger,e=this.a5;this.#zB=()=>{const t=performance.now();this.c4(),i.AddIndividualPluginTickTime(e,performance.now()-t)}}else this.#zB=()=>this.c4();s.a0().addEventListener("tick2",this.#zB)}else s.a0().removeEventListener("tick2",this.#zB)}}f4(){return this.#UB}c4(){}d4(){return[]}m4(){return null}g4(t){}y4(){if(!this.#qB)throw new Error("no wrapper component id set");const t=this.#EL.PO();return t.S4(this.#qB)}w4(t,s){if(Pe.Re(t),Pe.Qe(s),!this.#qB)throw new Error("no wrapper component id set");const i=this.#EL.PO();i.b4(this.#qB,t,s)}M4(t){Pe.Je(t);for(const[s,i]of t)this.w4(s,i)}v4(t,s){if(!this.#qB)throw new Error("no wrapper component id set");this.runtime.LD.T4(this.#qB,t,s)}x4(t,s){if(this.#qB)return this.runtime.LD.G4(this.#qB,t,s);throw new Error("no wrapper component id set")}}}{let t=function(t){return class h extends t{#_4;#I4;constructor(t){super(t);const s=Ae.DL.FL(ke),i=s.lO(),e=(this.#_4=s,this.#I4=i,De.set(this,s),[]),h=i.C4();if(h){const n=i.fB().E5().F5().length;for(let t=0;t<n;++t)e.push(new self.D5(h,t))}const r={effects:{value:e,writable:!1}};Object.defineProperties(this,r)}get layout(){return this.#I4.zk().jk()}get P4(){return this.#I4.uO().z5()}get x(){return this.#I4.KM()}set x(t){t=+t;const s=this.#I4;isNaN(t)||s.KM()===t||(s.ZM(t),s.R4())}get y(){return this.#I4.tv()}set y(t){t=+t;const s=this.#I4;isNaN(t)||s.tv()===t||(s.sv(t),s.R4())}setPosition(t,s){t=+t,s=+s;const i=this.#I4;isNaN(t)||isNaN(s)||i.KM()===t&&i.tv()===s||(i.A4(t,s),i.R4())}E4(){const t=this.#I4;return[t.KM(),t.tv()]}F4(t,s){if(t=+t,s=+s,!(isNaN(t)||isNaN(s)||0===t&&0===s)){const i=this.#I4;i.D4(t,s),i.R4()}}get WN(){return this.#I4.hv()}set WN(t){t=+t;const s=this.#_4,i=this.#I4;isNaN(t)||i.hv()===t||(i.rv(t),s.PO().gO())}get O4(){return this.#I4.L4()}get width(){return this.#I4.Wm()}set width(t){t=+t;const s=this.#I4;isNaN(t)||s.Wm()===t||(s.qm(t),s.R4())}get height(){return this.#I4.$m()}set height(t){t=+t;const s=this.#I4;isNaN(t)||s.$m()===t||(s.Vm(t),s.R4())}k5(t,s){t=+t,s=+s;const i=this.#I4;isNaN(t)||isNaN(s)||i.Wm()===t&&i.$m()===s||(i.BC(t,s),i.R4())}getSize(){const t=this.#I4;return[t.Wm(),t.$m()]}get angle(){return this.#I4.GetAngle()}set angle(t){t=Ae.Ar(+t);const s=this.#I4;isNaN(t)||s.GetAngle()===t||(s.N5(t),s.R4())}get N4(){return Ae.Fr(this.angle)}set N4(t){this.angle=Ae.Er(t)}Wu(){return this.#I4.B4().Ul()}W4(){return this.#I4.V4().Du()}j4(){return this.#I4.H4()}get isVisible(){return this.#I4.TN()}set isVisible(t){t=!!t;const s=this.#_4,i=this.#I4;i.TN()!==t&&(i.MN(t),s.PO().gO())}get opacity(){return this.#I4.mA()}set opacity(t){t=Ae.Rr(+t,0,1);const s=this.#_4,i=this.#I4;isNaN(t)||i.mA()===t||(i.yA(t),s.PO().gO())}set U4(t){if(Ee.Je(t),t.length<3)throw new Error("expected 3 elements");Ne.fa(t[0],t[1],t[2]);const s=this.#_4,i=this.#I4;i.z4().Ea(Ne)||(i.J4(Ne),s.PO().gO())}get U4(){const t=this.#I4.z4();return[t.Ga(),t._a(),t.Ia()]}set lF(t){Ee.Re(t);const s=Oe.get(t);if("number"!=typeof s)throw new Error("invalid blend mode");const i=this.#_4,e=this.#I4;e.WM(s),i.PO().gO()}get lF(){return Le.get(this.#I4.qN())}q4(){this.#I4.X4()}Y4(){this.#I4.K4()}Z4(t){Ee.ah(t,Fe);const s=this.#_4,i=s.PO().Z5(t);if(!i)throw new Error("invalid layer");s.lO().Q4(i)}t6(t,s){Ee.ah(t,h),this.#I4.s6(De.get(t),s)}get zIndex(){return this.#I4.cO()}get i6(){return this.#I4.e6()}set i6(t){this.#I4.h6(!!t)}fu(t,s){return Ee.Me(t),Ee.Me(s),this.#I4.r6(+t,+s)}YO(t){Ee.ah(t,h);const s=this.#_4,i=De.get(t);return s.PO().yD().$O(s,i)}ZO(){const t=this.#_4,s=t.PO().yD().QO(t);return s?s.rO():null}getParent(){const t=this.#_4.n6();return t?t.rO():null}o6(){const t=this.#_4.a6();return t?t.rO():null}*l6(){for(const t of this.#_4.l6())yield t.rO()}u6(){return this.#_4.c6()}f6(t){const s=this.#_4.d6(t);return s?s.rO():null}*children(){for(const t of this.#_4.children())yield t.rO()}*p6(){for(const t of this.#_4.p6())yield t.rO()}m6(t,s){Ee.ah(t,h),Ee.Ne(s),s=s||{};const i=this.#_4,e=De.get(t);i.g6(e,s)}removeChild(t){Ee.ah(t,h);const s=this.#_4,i=De.get(t);s.y6(i)}S6(){const t=this.#_4;if(t.w6()){const s=t.n6();s.y6(t)}}b6(){const t=this.#I4;return{M6:t.v6(),T6:t.x6(),G6:t._6(),I6:t.C6(),P6:t.R6(),A6:t.E6(),F6:t.D6(),k6:t.O6(),L6:t.N6()}}B6(t,s){Ee._e(t),Ee._e(s),this.#I4.W6(t,s)}V6(){const t=this.#I4;t.j6(),t.R4()}H6(t,s,i){Ee._e(t),Ee._e(s),Ee.Le(i);const e=this.#I4;e.U6(t,s,i)&&e.R4()}z6(t,s){let i=NaN,e=NaN,h=NaN,r=NaN,n=NaN,o=this.#I4;if(o.J6()){const a=o.q6(),l=a.Vv(t,s);null!==l&&(i=l.KM(),e=l.tv(),h=l.hv(),r=l.nv(),n=l.av())}return{x:i,y:e,WN:h,u:r,v:n}}X6(){const t=this.#I4;if(!t.J6())return[0,0];const s=t.q6();return[s.Rv(),s.Av()]}}};0;const Ae=self.Vs,Ee=self.Zs,Fe=self.K5,De=new WeakMap,ke=Ae.Hs(),Oe=new Map([["normal",0],["additive",1],["copy",3],["destination-over",4],["source-in",5],["destination-in",6],["source-out",7],["destination-out",8],["source-atop",9],["destination-atop",10]]),Le=new Map([...Oe.entries()].map(t=>[t[1],t[0]])),Ne=Ae.Tr(Ae.na);self.Y6=t(self.uB),self.K6=t(self.VB)}{const Be=self.Zs;self.Z6=class extends self.Y6{#EL;constructor(){super(),this.#EL=self.uB.mB()}Q6(){return this.#EL.sW().tW()}focus(){this.#EL.sW().iW()}blur(){this.#EL.sW().eW()}hW(t,s){Be.Re(t),this.#EL.sW().rW(t,s)}}}{let e=function(t){let s=je.get(t);return s||(s=We.Tr(We.Event.a0),je.set(t,s)),s};e;const We=self.Vs,Ve=self.Zs,je=new WeakMap,He=We.Hs();self.nW=class{#EL;constructor(){const t=We.DL.FL(He),s={runtime:{value:(this.#EL=t).PO().kL(),writable:!1},behavior:{value:t.aW().oW(),writable:!1},lW:{value:t.cW().uW(),writable:!1}};Object.defineProperties(this,s),t.PO().ZL(this,t)}static mB(){return We.DL.gB()}get fW(){return this.#EL.dW().rO()}yB(){const t=je.get(this);t&&(t.Gr(),je.delete(this))}addEventListener(t,s,i){Ve.Re(t),Ve.Qe(s),e(this).addEventListener(t,s,i)}removeEventListener(t,s,i){Ve.Re(t),Ve.Qe(s),e(this).removeEventListener(t,s,i)}dispatchEvent(t){e(this).dispatchEvent(t)}}}{const Ue=self.Vs,ze=Ue.Hs();self.pW=class{constructor(){const t=Ue.DL.FL(ze),s={runtime:{value:t.PO().kL(),writable:!1},behavior:{value:t.aW().oW(),writable:!1},name:{value:t.Mf(),writable:!1}};Object.defineProperties(this,s)}}}{const Je=self.Vs,qe=Je.Hs();self.mW=class{#EL;constructor(){const t=Je.DL.FL(qe),s={runtime:{value:(this.#EL=t).PO().kL(),writable:!1}};Object.defineProperties(this,s),t.PO().ZL(this,t)}u5(){return this.#EL.w5().map(t=>t.rO())}static QL(t){if(!t)return null;const s=Je.DL.gW(t);return s?s.oW():null}}}{const Xe=self.Vs,Ye=self.Zs,$e=Xe.Tr(Xe.na);self.D5=class{#EL;constructor(t,s){this.#EL=t;const i={index:{value:s,writable:!1}};Object.defineProperties(this,i)}get name(){const t=this.#EL.F5();return t[this.index].Mf()}get isActive(){return this.#EL.yW(this.index)}set isActive(t){t=!!t;const s=this.#EL;s.yW(this.index)!==t&&(s.SW(this.index,t),s.wW(),s.PO().gO())}setParameter(t,s){Ye._e(t),t=Math.floor(+t);const i=this.#EL,e=i.bW(this.index,t);if(null===e)throw new RangeError("invalid index");if(e instanceof Xe.na){if(!Array.isArray(s)||s.length<3)throw new TypeError("expected array with 3 elements");$e.fa(s[0],s[1],s[2]),s=$e}else if("number"!=typeof s)throw new TypeError("expected number");const h=i.MW(this.index,t,s);h&&i.yW(this.index)&&i.PO().gO()}getParameter(t){Ye._e(t),t=Math.floor(+t);const s=this.#EL,i=s.bW(this.index,t);if(null===i)throw new RangeError("invalid index");return i instanceof Xe.na?[i.Ga(),i._a(),i.Ia()]:i}}}self.vW=class{#EL;constructor(t){this.#EL=t,Object.defineProperties(this,{name:{value:t.Mf(),writable:!1}})}get speed(){return this.#EL.TW()}get isLooping(){return this.#EL.xW()}get repeatCount(){return this.#EL.GW()}get _W(){return this.#EL.IW()}get PW(){return this.#EL.RW()}get frameCount(){return this.#EL.AW()}EW(){return this.#EL.FW().map(t=>t.DW())}*frames(){for(const t of this.#EL.FW())yield t.DW()}};self.IO=class{#EL;constructor(t){this.#EL=t}static _O(t){return t.#EL}get width(){return this.#EL.Wm()}get height(){return this.#EL.$m()}getSize(){const t=this.#EL;return[t.Wm(),t.$m()]}kW(t){return t.OW(this)}LW(){return this.#EL.gP().Ul()}};{const Ke=self.Zs;self.NW=class extends self.IO{#EL;constructor(t){super(t.BW()),this.#EL=t,Object.defineProperties(this,{duration:{value:t.WW(),writable:!1},VW:{value:t.jW(),writable:!1},HW:{value:t.UW(),writable:!1}})}zW(){const t=this.#EL;return[t.jW(),t.UW()]}JW(){return this.#EL.qW()}XW(t){return this.YW(t)[0]}$W(t){return this.YW(t)[1]}YW(t){let s=this.#EL,i=null;if("number"==typeof t)i=s.KW(Math.floor(t));else{if("string"!=typeof t)throw new TypeError("expected string or number");i=s.ZW(t)}return i?[i.KM(),i.tv()]:this.zW()}QW(){const t=this.#EL.tV();return t?t.ec():0}sV(t){return this.iV(t)[0]}eV(t){return this.iV(t)[1]}iV(t){Ke._e(t),t=Math.floor(t);const s=this.#EL.tV();if(!s||t<0||t>=s.ec())return[0,0];const i=s.ic(),e=i[2*t],h=i[2*t+1];return[e,h]}get tag(){return this.#EL.hV()}}}{let s=function(t){const s=Qe.get(t);if(s.rV())throw new Error("timeline/tween was released and is no longer valid");return s};s;const Ze=self.Zs,Qe=new WeakMap;self.nV=class{constructor(t){Qe.set(this,t),t.PO().ZL(this,t)}pause(){s(this).oV()}resume(){s(this).aV()}stop(){s(this).P0()}DB(t){return s(this).lV(t)}set time(t){Ze._e(t),s(this).uV(t)}get time(){return s(this).UE()}set totalTime(t){Ze._e(t),s(this).cV(t)}get totalTime(){return s(this).fV()}set isLooping(t){s(this).dV(!!t)}get isLooping(){return s(this).pV()}set PW(t){s(this).mV(!!t)}get PW(){return s(this).gV()}set playbackRate(t){Ze._e(t),s(this).yV(t)}get playbackRate(){return s(this).SV()}get progress(){const t=s(this);return t.UE()/t.fV()}get tags(){return s(this).wV()}get finished(){return s(this).bV()}get isPlaying(){return s(this).IsPlaying()}get MV(){return s(this).vV()}get TV(){return Qe.get(this).rV()}}}{let i=new WeakMap;self.xV=class extends self.nV{constructor(t){super(t),i.set(this,t);const s={name:{value:t.Mf(),writable:!1}};Object.defineProperties(this,s)}}}{let i=function(t){const s=h.get(t);if(s.rV())throw new Error("tween was released and is no longer valid");return s},e=(i,self.Zs),h=new WeakMap,r=new WeakMap,n=null;self.GV=class extends self.nV{constructor(t,s,i){super(t),n=n||i._V,h.set(this,t),s&&r.set(this,s)}stop(){const t=i(this),s=r.get(this);s.IV(t)}CV(t){e.Re(t);const s=self.Oc.Qc(n(t));i(this).PV(s)}get fW(){const t=i(this).RV();return t?t.rO():null}get AV(){return i(this).EV()}set AV(t){i(this).FV(!!t)}get value(){const t=i(this);if("value"!==t.DV())throw new Error("not a value tween");return t.OV("value").kV()}}}self.LV=class extends self.AL{constructor(){super()}};{const th=self.Vs,sh=self.Zs,ih=th.Hs();self.NV=class extends self.LV{#EL;#JB;#BV=0;#WV=new Map;constructor(t){if(super(),this.#EL=th.DL.FL(ih),!t?.domComponentId)throw new Error("no DOM component ID specified");this.#JB=t.domComponentId,this.VV("elem-focused",t=>t.jV()),this.VV("elem-blurred",t=>{t&&t.HV()})}UV(t){const s=this.#BV++;return this.#WV.set(s,t),s}zV(t){this.#WV.delete(t)}VV(t,i){const s=this.#EL.PO();s.e4(this.#JB,t,t=>{const s=this.#WV.get(t.elementId);i(s,t)})}JV(t){sh.Je(t);for(const[s,i]of t)this.JV(s,i)}}}{const eh=self.Vs,hh=(new WeakMap,eh.Hs());self.qV=class extends self.o5{#EL;constructor(){super(),this.#EL=eh.DL.FL(hh)}XV(){}YV(){return this.#EL.BW().$V()}KV(t){}ZV(t){}QV(){}tj(t){}}}{const rh=self.Vs,nh=(new WeakMap,rh.Hs());self.sj=class extends self.K6{#EL;#ij=null;#ej=null;constructor(t){super(t),this.#EL=rh.DL.FL(nh)}yB(){if(super.yB(),this.#ij){const t=this.#EL.PO().a0();t.removeEventListener("renderercontextlost",this.#ij),t.removeEventListener("renderercontextrestored",this.#ej),this.#ij=null,this.#ej=null}}hj(){if(!this.#ij){this.#ij=()=>this.rj(),this.#ej=()=>this.nj();const t=this.#EL.PO().a0();t.addEventListener("renderercontextlost",this.#ij),t.addEventListener("renderercontextrestored",this.#ej)}}rj(){}nj(){}oj(t){}}}{const oh=self.Vs,ah=oh.Tr(oh.Rect),lh=new WeakMap,uh=oh.Hs();self.aj=class extends self.sj{#lj=-1;#uj=!0;#cj=!1;#fj=!1;#pj=-.2;#mj=oh.Tr(oh.Rect,0,0,-1,-1);#gj=0;#yj=0;#Sj=-1;#wj=-1;#bj=!1;constructor(t){if(!t?.domComponentId)throw new Error("no DOM component ID specified");super(t);const s=oh.DL.FL(uh),i=(lh.set(this,s),this.#lj=this.a5.UV(this),s.PO().yL());this.#gj=i.Mj(),this.#yj=i.vj(),this.XB(!0)}yB(){super.yB(),this.a5.zV(this.#lj),this.Tj("destroy"),this.#lj=-1,lh.delete(this)}xj(){const t=lh.get(this).PO();if(t.ID())throw new Error("not valid in worker mode");return this.Gj("get-element")}Tj(t,s){(s=s||{}).elementId=this.#lj,this.r4(t,s)}Gj(t,s){return(s=s||{}).elementId=this.#lj,this.o4(t,s)}_j(t,s){return(s=s||{}).elementId=this.#lj,this.n4(t,s)}Ij(t){t=t||{};const s=lh.get(this).lO();t.elementId=this.#lj,t.isVisible=s.TN(),t.htmlIndex=s.uO().Cj(),t.htmlZIndex=s.Pj(),Object.assign(t,this.Rj()),this.#uj=!!t.isVisible,this.o4("create",t),this.Aj(!0)}Ej(t){this.#uj!==(t=!!t)&&(this.#uj=t,this.Tj("set-visible",{isVisible:t}))}l4(){this.Aj(!1)}Fj(){const t=lh.get(this).PO(),s=t.yL().Dj();return"Android"===oh.mi.gi&&("scale-inner"===s||"scale-outer"===s||"crop"===s)}Aj(u){const c=lh.get(this);if(!c.kj()){let t=c.lO(),s=t.uO(),i=t.B4(),[e,h]=s.eB(i.Wl(),i.Vl()),[r,n]=s.eB(i.jl(),i.Hl()),o=c.PO().yL(),a=o.ML(),l=o.TL();if(t.TN()&&s.TN())if(!this.Fj()&&(r<=0||n<=0||a<=e||l<=h))this.Ej(!1);else{ah.set(e,h,r,n);const f=o.Mj(),d=o.vj(),p=s.Cj(),m=t.Pj();if(!u&&ah.equals(this.#mj)&&this.#gj===f&&this.#yj===d&&this.#Sj===p&&this.#wj===m)this.Ej(!0);else{this.#mj.I(ah),this.#gj=f,this.#yj=d,this.#Sj=p,this.#wj=m,this.Ej(!0);let t=null;this.#fj&&(t=s.Oj()+this.#pj),this.Tj("update-position",{left:Math.round(this.#mj.Wl()),top:Math.round(this.#mj.Vl()),width:Math.round(this.#mj.width()),height:Math.round(this.#mj.height()),htmlIndex:p,htmlZIndex:m,fontSize:t})}}else this.Ej(!1)}}Lj(){this.Gj("focus",{focus:!0})}Nj(){this.Gj("focus",{focus:!1})}jV(){this.#cj=!0}HV(){this.#cj=!1}Bj(){return this.#cj}Wj(t,s){this.postToDOMElement("set-css-style",{prop:oh.ta(t),val:s})}Vj(t,s){this.postToDOMElement("set-attribute",{name:t,val:s})}jj(t){this.postToDOMElement("remove-attribute",{name:t})}Hj(){this.#bj||(this.#bj=!0,Promise.resolve().then(()=>{this.#bj=!1,this.Tj("update-state",this.Rj())}))}Rj(){}Uj(){return this.#lj}}}self.zj=class extends self.mW{constructor(){super()}};self.Jj=class extends globalThis.pW{constructor(){super()}XV(){}};{const ch=self.Vs,fh=new WeakMap,dh=ch.Hs();self.qj=class extends self.nW{#jB=!1;#UB=!1;#Xj=!1;constructor(){super(),fh.set(this,ch.DL.FL(dh))}yB(){super.yB(),this.XB(!1),this.YB(!1),this.Yj(!1),fh.delete(this)}$B(){return ch.DL.KB()}$j(){}ZB(t){const s=fh.get(this);s.PO().QB(t,s.dW(),s.cW())}t4(t){const s=fh.get(this);return s.PO().s4(t,s.dW(),s.cW())}XB(t){if(this.#jB!==(t=!!t)){this.#jB=t;const s=fh.get(this).PO();t?s.Kj(this):s.Zj(this)}}u4(){return this.#jB}l4(){}YB(t){if(this.#UB!==(t=!!t)){this.#UB=t;const s=fh.get(this).PO();t?s.Qj(this):s.t8(this)}}f4(){return this.#UB}c4(){}Yj(t){if(this.#Xj!==(t=!!t)){this.#Xj=t;const s=fh.get(this).PO();t?s.s8(this):s.i8(this)}}e8(){return this.#Xj}h8(){}d4(){return[]}m4(){return null}g4(t){}}}{let e=self.Zs,h=null;self.ND=class{constructor(t){h=t}MO(t){h.vO(t)}T4(t,s,i){e.Re(t),e.Re(s),e.qe(i),h.r8(t,s,i)}G4(t,s,i){return e.Re(t),e.Re(s),e.qe(i),h.n8(t,s,i)}o8(t){return e.Ae(t),new self.a8(h,t)}set l8(t){h.u8(!!t)}get l8(){return h.c8()}f8(t){h.d8(!!t)}p8(t){e.Me(t);const s=h.m8(t);return s?s.e5():null}}}self.a8=class{#g8;#y8;#S8;#w8;#b8;#M8;constructor(t,s){const i=(this.#g8=t).HD(),e=t.YD(),h=(this.#y8=e,this.#S8=e.v8(),t.ek()),r=(this.#w8=h.T8(),this.#b8=h.x8(e),i.G8()),n=r.x8();this.#M8=n,s&&n._8(s),t.I8(!1)}C8(){const t=this.#g8.HD(),s=this.#S8,i=this.#M8;t.P8(s),this.#y8.A8(this.#w8,this.#b8),t.E8(s),i.F8(i.uD()+1)}get D8(){return this.#M8.k8()}release(){const t=this.#g8,s=t.ek(),i=t.HD().G8();t.I8(!0),i.O8(),s.O8()}};{let d=self.Vs,h=self.Zs,p=null,r=null;self.L8=class{constructor(t,s){r=t,p=s}N8(){p.xA()}B8(t){p.vA(t)}W8(){p.Mw()}V8(){p.mw()}j8(){p.Pw()}setColor(t){p.gA(t[0],t[1],t[2],t[3])}H8(t,s,i,e){p.gA(t,s,i,e)}U8(){p.SA()}z8(t){p.yA(t)}J8(t){p.$w(t)}q8(){p.Kw()}rect(t){p.IA(t.left,t.top,t.right,t.bottom)}X8(t,s,i,e){p.IA(t,s,i,e)}Y8(t){p.gu(d.gu.ku(t))}K8(t,s,i,e,h,r,n,o){p.kb(t,s,i,e,h,r,n,o)}Z8(t,s){p.ob(d.gu.ku(t),d.Rect.zl(s))}Q8(t,s){p.RA(d.gu.ku(t),d.gu.ku(s))}tH(t,s,i,e,h,r,n,o,a,l,u,c,f){p.AA(t,s,i,e,h,r,n,o,a,l,u,c,d.Rect.zl(f))}sH(t,s,i,e,h,r,n,o,a,l,u,c,f){p.ib(t,s,i,e,h,r,n,o,a,l,u,c,d.gu.ku(f))}iH(t,s,i){p.EA(t,s,i)}eH(t){p.Db(t)}line(t,s,i,e){p.sg(t,s,i,e)}hH(t,s,i,e,h,r){p.eb(t,s,i,e,h,r)}rH(t,s,i,e){p.ab(t,s,i,e)}nH(t){p.fb(d.Rect.zl(t))}oH(t){p.pb(d.gu.ku(t))}aH(t){p.bb(t)}lH(){p.Mb()}uH(t){p.Gb(t)}cH(){p.Pb()}fH(t){h.uh(t,self.dH);const s=t?r.Z5(t):null;p.bA(s)}pH(t,s){const i=self.IO._O(t);if(i)return i.mH(p,{Zv:s?.Zv??"clamp-to-edge",Qv:s?.Qv??"clamp-to-edge",t2:s?.t2??"trilinear",e2:s?.e2??!0});throw new Error("invalid IImageInfo")}gH(t){const s=self.IO._O(t);if(!s)throw new Error("invalid IImageInfo");s.oC()}OW(t){const s=self.IO._O(t);if(!s)throw new Error("invalid IImageInfo");const i=s.wT();return self.dH.yH(r,i)}SH(t,s,i){h._e(t),h._e(s);const e=p.lT(t,s,{Zv:i?.Zv??"clamp-to-edge",Qv:i?.Qv??"clamp-to-edge",t2:i?.t2??"trilinear",e2:i?.e2??!0});return self.dH.yH(r,e)}wH(t,s,i){h.ah(s,self.dH);const e=r.Z5(s);p.mP(t,e,{premultiplyAlpha:i?.premultiplyAlpha??!0})}deleteTexture(t){h.ah(t,self.dH);const s=r.Z5(t);p.dT(s)}bH(){const t=p.$b();return new self.MH(r,t)}vH(){r.yL().TH(p)}xH(t){h.ah(t,globalThis.K5);const s=r.Z5(t);s.GH(p)}}}{const ph=new WeakMap,mh=new WeakMap;self.dH=class{constructor(t,s){ph.set(this,{runtime:t,_H:s}),mh.set(s,this),t.ZL(this,s),Object.defineProperties(this,{width:{value:s.Wm(),writable:!1},height:{value:s.$m(),writable:!1}})}static yH(t,s){if(!s)return null;const i=mh.get(s);return i||new self.dH(t,s)}}}{let e=function(t){return yh.get(t).IH};e;const gh=self.Zs,yh=new WeakMap;self.MH=class{constructor(t,s){yh.set(this,{runtime:t,IH:s}),t.ZL(this,s)}release(){e(this).Gr()}set CH(t){gh.Re(t),e(this).mC(t)}get CH(){return e(this).yI()}set PH(t){gh._e(t),e(this).gC(t)}get PH(){return e(this).yC()}set lineHeight(t){gh._e(t),e(this).wC(t)}get lineHeight(){return e(this).bC()}set RH(t){e(this).MC(t)}get RH(){return e(this).vC()}set AH(t){e(this).TC(t)}get AH(){return e(this).xC()}setColor(t){gh.Je(t),this.EH(t[0],t[1],t[2])}EH(t,s,i){e(this).PC(t,s,i)}FH(t){gh.Re(t),e(this).VM(t)}set DH(t){e(this).RC(t)}get DH(){return e(this).AC()}set verticalAlign(t){e(this).EC(t)}get verticalAlign(){return e(this).FC()}set kH(t){e(this).DC(t)}get kH(){return e(this).kC()}set OH(t){e(this).OC(t)}get OH(){return e(this).LC()}set text(t){gh.Re(t),e(this).Ff(t)}get text(){return e(this).NC()}k5(t,s,i){gh._e(t),gh._e(s),gh._e(i),e(this).BC(t,s,i)}kW(){const{runtime:t,IH:s}=yh.get(this),i=s.wT();return self.dH.yH(t,i)}LW(){return e(this).gP().Ul()}LH(t){gh.Qe(t),e(this).lC=t}NH(){e(this).oC()}get BH(){return e(this).VC()}get WH(){return e(this).HC()}}}{let e=function(t){if(!t)return"";const s=t.split(".");if(s.length<2)return"";const i=s.at(-1).toLowerCase();return wh.get(i)||""},r=function(e){return new Promise((t,s)=>{const i=document.createElement("script");i.onload=t,i.onerror=s,i.async=!1,i.type="module",i.src=e,document.head.appendChild(i)})};e,r;const d=self.Vs,Sh=new Set(["local","remote"]),wh=new Map([["mp4","video/mp4"],["webm","video/webm"],["m4a","audio/mp4"],["mp3","audio/mpeg"],["js","application/javascript"],["wasm","application/wasm"],["svg","image/svg+xml"],["html","text/html"]]);d.VH=class extends d.Mr{constructor(t,s){super();const i=s.exportType,e=(this.Pf=t,this.jH="folders",this.HH=new Map,this.UH="cordova"===i,this.zH=!!s.isiOSCordova,this.JH=!!s.isFileProtocol,this.qH=s.swClientId,this.XH=s.supportedAudioFormats||{},this.YH=new Map,this.$H=!1,this.KH=s.scriptFolder,this.ZH="",this.QH="",this.tU="",this.sU=s.fileMap||new Map,this.iU=new Map,"html5"===i||"scirra-arcade"===i||"instant-games"===i);this.eU=e?"remote":"local",this.hU=new Map,this.rU=[],this.nU=[],this.oU=!1,this.aU=0,this.lU=0,this.uU=0,this.cU=!1,this.fU=d.Tr(d.Jd,()=>this.dU(),50),this.pU=d.Tr(d.Ld,Math.max(d.hardwareConcurrency,8)),this.mU=d.Tr(d.Ld,20),this.gU=new self.TO(this)}Gr(){for(const t of this.hU.values())t.Gr();this.hU.clear(),d.Kn(this.nU),this.Pf=null}PO(){return this.Pf}yU(t){this.jH=t}LO(){return this.jH}SU(){return this.KH}wU(t){this.ZH=t}WO(){return this.ZH}bU(t){this.QH=t}MU(){return this.QH}vU(t){this.tU=t}TU(){return this.tU}xU(){return this.JH}No(t,s){return s=s||this.eU,d.Fo(t)?("flat"===this.jH&&(t=t.toLowerCase()),this.UH&&this.JH?this.GU(t):"playable-ad-single-file"===this.Pf.dL()?self.c3_runtimeInterface._PlayableAdFetchBlob(t):("local"===s?this.pU:this.mU).Fc(()=>d.No(t))):d.No(t)}Bo(t){return d.Fo(t)?("flat"===this.jH&&(t=t.toLowerCase()),this.UH&&this.JH?this._U(t):"playable-ad-single-file"===this.Pf.dL()?d.Vo(self.c3_runtimeInterface._PlayableAdFetchBlob(t)):("local"===this.eU?this.pU:this.mU).Fc(()=>d.Bo(t))):d.Bo(t)}Oo(t){return d.Fo(t)?("flat"===this.jH&&(t=t.toLowerCase()),this.UH&&this.JH?this.IU(t):"playable-ad-single-file"===this.Pf.dL()?d.jo(self.c3_runtimeInterface._PlayableAdFetchBlob(t)):("local"===this.eU?this.pU:this.mU).Fc(()=>d.Oo(t))):d.Oo(t)}async Lo(t){const s=await this.Oo(t);return JSON.parse(s)}CU(t,s){return"flat"===this.jH&&(t=t.toLowerCase()),this.Pf.SO("runtime","cordova-fetch-local-file",{filename:t,as:s})}IU(t){return this.CU(t,"text")}async GU(t){const s=await this.CU(t,"buffer"),i=e(t);return new Blob([s],{type:i})}async PU(t){"flat"===this.jH&&(t=t.toLowerCase());let s=this.HH.get(t);if(!s){const i=await this.GU(t);s=URL.createObjectURL(i),this.HH.set(t,s)}return s}_U(t){return this.CU(t,"buffer")}NO(t){"flat"===this.jH&&(t=t.toLowerCase());let s=this.ZH+t;return"Gecko"===d.mi.Mi&&"preview"===this.Pf.dL()?this.RU(s):s}kO(t){return d.Eo(t)?Promise.resolve(t):this.UH&&this.JH?this.PU(t):"playable-ad-single-file"===this.Pf.dL()?URL.createObjectURL(self.c3_runtimeInterface._PlayableAdFetchBlob(t)):("flat"===this.jH&&(t=t.toLowerCase()),Promise.resolve(t))}AU(s){if(d.Eo(s)||"preview"!==this.Pf.dL()||!this.qH||!s)return s;try{const t=new URL(s,location.href);return t.searchParams.set("__c3_client_id",this.qH),t.toString()}catch(t){return console.warn("Invalid iframe URL: "+s),s}}EU(t){return this.kO(t)}FU(t){if(t.DU&&!Sh.has(t.DU))throw new Error("invalid load policy");let s=this.hU.get(t.url);return s||(s=d.Tr(d.kU,this,{url:t.url,size:t.size||0,DU:t.DU||this.eU}),this.hU.set(s.OU(),s),this.oU)||(this.aU+=s.Ic(),this.nU.push(s.LU().then(()=>this.NU(s.Ic())))),s}BU(t){this.hU.delete(t.OU())}async WU(){try{await Promise.all(this.nU),this.uU=1}catch(t){console.error("Error loading: ",t),this.cU=!0,this.dU()}}VU(){this.oU=!0}jU(){return this.cU}NU(t){this.lU+=t,this.fU.h1()}dU(){const t=d.Tr(d.Event,"loadingprogress");this.uU=d.Rr(this.lU/this.aU,0,1),t.progress=this.uU,this.Pf.a0().dispatchEvent(t)}Lk(){return this.uU}Bk(){return this.Pf.UU().HU()}zU(t){d.ho(this.rU,t),this.rU.length&&this.nU.push(this.JU())}async JU(){const t=[],s=[];for(const[i,e,h]of this.rU)this.aU+=h,t.push(this.qU(i,e,s).then(()=>this.NU(h)));await Promise.all(t),this.Pf.ID()&&0<s.length&&await this.Pf.SO("runtime","load-webfonts",{webfonts:s})}async qU(s,i,e){try{let t=await this.kO(i);"Gecko"===d.mi.Mi&&(s=`'${s}'`),("Gecko"===d.mi.Mi&&"preview"===this.Pf.dL()||"playable-ad-single-file"===this.Pf.dL())&&(t=this.RU(t));const h=new FontFace(s,`url('${t}')`);(this.Pf.ID()?self:document).fonts.add(h),await h.load(),this.Pf.ID()&&e.push({name:s,url:t})}catch(t){console.warn(`[C3 runtime] Failed to load web font '${s}': `,t)}}XU(t){return!!this.XH[t]}YU(t,s){this.$H=!!s;for(const[i,e,h]of t)this.YH.set(i,{fileName:i,$U:e.map(t=>({type:t[0],KU:t[1],ZU:i+t[1],fileSize:t[2]})),isMusic:h})}QU(t){"flat"===this.jH&&(t=t.toLowerCase());const s=this.YH.get(t);if(!s)return null;let i=null;for(const e of s.$U)if(i||"audio/webm; codecs=opus"!==e.type||(i=e),this.XU(e.type))return e;return i}t7(t){const s=this.QU(t);return s?{url:this.NO(s.ZU),type:s.type}:null}s7(){if(this.$H){const t=[];for(const s of this.YH.values())if(!s.isMusic){const i=this.QU(s.fileName);i&&t.push({originalUrl:s.fileName,url:this.NO(i.ZU),type:i.type,fileSize:i.fileSize})}return t}return[]}i7(t){return"preview"===this.Pf.dL()&&(t=new URL(t,location.href).toString()),this.sU.get(t)||null}RU(t){let s=this.iU.get(t);if(!s){const i=this.i7(t);if(!i)return t;s=URL.createObjectURL(i),this.iU.set(t,s)}return s}dD(){return this.gU}async HO(...t){const s=await Promise.all(t.map(t=>this.kO(t)));if(this.Pf.ID())if(1===t.length){const i=t[0];await import((d.Fo(i)?"./":"")+i)}else{const e=t.map(t=>`import "${d.Fo(t)?"./":""}${t}";`).join("\n"),h=URL.createObjectURL(new Blob([e],{type:"application/javascript"}));await import(h)}else await Promise.all(s.map(t=>r(t)))}async zO(t){if(WebAssembly.compileStreaming){const s=await this.kO(t);return WebAssembly.compileStreaming(fetch(s))}{const i=await d.Bo(t);return WebAssembly.compile(i)}}async qO(t){const s=await this.kO(t);return this.Pf.SO("runtime","add-stylesheet",{url:s})}}}{const bh=self.Vs;bh.e7=class extends bh.Mr{constructor(t,s){super(),this.h7=t,this.Pf=t.PO(),this.r7=s.url||"",this.n7=s.size,this.o7=s.DU,this.a7=s.blob||null,this.l7=!!this.a7,this.by=null}Gr(){this.by=null,this.h7=null,this.Pf=null,this.a7=null}OU(){return this.r7}Ic(){return this.n7}LU(){return"local"===this.o7||this.a7?(this.l7=!0,Promise.resolve()):(this.by||(this.by=this.h7.No(this.r7,this.o7).then(t=>(this.l7=!0,this.by=null,this.a7=t)).catch(t=>{console.error("Error loading resource: ",t),this.by=null})),this.by)}u7(){return this.l7}c7(){return this.a7?Promise.resolve(this.a7):this.by||this.h7.No(this.r7,this.o7)}}}{const ar=self.Vs,lr=new ar.Ld,ur=new Set;ar.kU=class extends ar.e7{constructor(t,s){super(t,s),this.f7=null,this.d7=null,this.W1=0,this.p7=-1,this.m7=-1,ur.add(this)}Gr(){if(0!==this.W1)throw new Error("released image asset which still has texture references");this.h7.BU(this),this.f7=null,ur.delete(this),super.Gr()}static g7(){for(const t of ur)t.f7=null,t.d7=null,t.W1=0}mH(t,s){return s=s||{},this.W1++,this.d7?Promise.resolve(this.d7):(this.f7||(s.s2=this.Pf.yL().y7(),this.f7=this.S7(t,s)),this.f7)}async S7(s,i){try{const e=await this.c7();return 0===this.W1?this.f7=null:await lr.Fc(async()=>{const t=await s.eE(e,i);return this.f7=null,0===this.W1?(s.dT(t),null):(this.d7=t,this.p7=t.Wm(),this.m7=t.$m(),this.d7)})}catch(t){throw console.error("Failed to load texture: ",t),t}}oC(){if(this.W1<=0)throw new Error("texture released too many times");if(this.W1--,0===this.W1&&this.d7){const t=this.d7.bM();t.dT(this.d7),this.d7=null}}w7(){return this.W1}wT(){return this.d7}Wm(){return this.p7}$m(){return this.m7}async b7(){const t=await this.c7();return ar.Ji.ImageBitmap?createImageBitmap(t):ar.Uo(t)}}}{let t=function(t,s){return t.lO().M7()-s.lO().M7()};t;const cr=self.Vs;cr.v7=class extends cr.Mr{constructor(t,s,i){super(),this.T7=t,this.yl=s,this.Sl=i,this.x7=[],this.G7=!0,this._7=new Set,this.I7=!1}Gr(){cr.Kn(this.x7),this._7.clear(),this.T7=null}P0(){cr.Kn(this.x7),this.G7=!0,this._7.clear(),this.I7=!1}C7(){this.G7=!1}xc(){if(this.x7.length){if(this.x7.length>this._7.size)return!1;this.P7()}return!0}R7(t){this._7.has(t)?(this._7.delete(t),0===this._7.size&&(this.I7=!1)):(this.x7.push(t),this.G7=1===this.x7.length)}V0(t){this._7.add(t),this.I7=!0,50<=this._7.size&&this.P7()}P7(){this.I7&&(this.x7.length===this._7.size?this.P0():(cr.uo(this.x7,this._7),this._7.clear(),this.I7=!1))}A7(){this.G7||(this.x7.sort(t),this.G7=!0)}E7(t){this.P7(),this.A7(),this.x7.length&&t.push(this.x7)}}}{const fr=self.Vs;fr.F7=class extends fr.Mr{constructor(t,s){super(),this.D7=t,this.k7=s,this.O7=fr.Tr(fr.Mc)}Gr(){this.O7.Gr(),this.O7=null}L7(t,s,i){let e=this.O7.oi(t,s);return e||(i?(e=fr.Tr(fr.v7,this,t,s),this.O7.Set(t,s,e),e):null)}N7(t){return Math.floor(t/this.D7)}B7(t){return Math.floor(t/this.k7)}W7(e,h,r){if(h)for(let i=h.Wl(),t=h.jl();i<=t;++i)for(let t=h.Vl(),s=h.Hl();t<=s;++t)if(!r||!r.fu(i,t)){const n=this.L7(i,t,!1);n&&(n.V0(e),n.xc())&&this.O7.Gc(i,t)}if(r)for(let i=r.Wl(),t=r.jl();i<=t;++i)for(let t=r.Vl(),s=r.Hl();t<=s;++t)h&&h.fu(i,t)||this.L7(i,t,!0).R7(e)}V7(t,s){let i=this.N7(t.Wl()),e=this.B7(t.Vl()),h=this.N7(t.jl()),r=this.B7(t.Hl());for(;i<=h;++i)for(let t=e;t<=r;++t){const n=this.L7(i,t,!1);n&&n.E7(s)}}j7(t){let s=t.Wl(),i=t.Vl(),e=t.jl(),h=t.Hl();for(;s<=e;++s)for(let t=i;t<=h;++t){const r=this.L7(s,t,!1);r&&r.C7()}}}}{let n=function(t,s){return t.lO().M7()-s.lO().M7()},t=function(t,s){return t.lO().hv()-s.lO().hv()};n,t;const w=self.Vs,dr=new w.Rect,pr=new w.gu,mr=[],gr=(new w.Rect,new w.Rect,self.xs),xh=gr.Es,jh=gr.Fs,Th=gr.Cs,yr=Th.create(),Sr=xh.create(),wr=jh.create(),br=xh.create(),Mr=xh.create(),vr=xh.create(),Tr=w.Tr(w.gl),xr=(w.Tr(w.Rect),[]),Gr=[],_r=[],Ir={name:"",sid:-1,H7:!1,isVisible:!0,isInteractive:!0,_N:!1,backgroundColor:[1,1,1,1],VN:!0,U7:[1,1],opacity:1,UN:!1,z7:!1,J7:!1,q7:!1,scaleRate:1,lF:0,WN:0,X7:[],Y7:[],K7:[]};w.Z7=class extends w.Mr{constructor(t,s,i){super(),i=Object.assign({},Ir,i),this.Q7=t,this.Pf=t.PO(),this.sz=s,this.Cr=i.name,this.Ay=-1,this.iz=!!i._N,this.ez=-1,this.hz=i.sid,this.rz=!!i.H7,this.nz=!!i.isVisible,this.oz=!!i.isInteractive,this.az=w.Tr(w.na),this.az.nl(i.backgroundColor),this.lz=!!i.VN,this.uz=i.U7[0],this.cz=i.U7[1],this.LM=w.Tr(w.na,1,1,1,i.opacity),this.fz=w.Tr(w.na),this.pz=!!i.UN,this.mz=!!i.z7,this.gz=!!i.J7,this.yz=!!i.q7,this.Sz=i.scaleRate,this.OM=i.lF,this.wz=null,this.bz=1,this.NM=i.WN,this.Mz=0,this.vz=0,this.Tz=0,this.xz=!1,this.sR=w.Tr(w.Rect),this.Gz=w.Tr(w.Rect),this._z=w.Tr(w.Rect),this.Iz=!0,this.eT=Th.create(),this.Cz=!0,this.Y3=Th.create(),this.Pz=!0,this.Rz=w.Tr(w.Ny.jy),this.Az=!0,this.Ez=[],this.Fz=i.X7,this.Dz=[],this.kz=[],this.Oz=new Map,this.x7=[],this.Lz=!1,this.Nz=!1,this.Bz=!1;const h=this.Pf.yL();this.Wz=w.Tr(w.Vz,this,i.Y7),this.nD=w.Tr(w.Ny.e3,h.jz(),{JE:(t,s)=>{const i=s.ZF(),e=i.QA();t.VM(i.Uz()),t.oE(e),t.aE(e),h.zz(e)},XE:t=>this.E5().Jz(t)}),this.qz=!0,this.Xz=!0,this.Yz=null,this.$z=[],this.Kz=!1,this.Zz=w.Tr(w.Rect,0,0,-1,-1),this.Qz=w.Tr(w.Rect,0,0,-1,-1),this.tJ=new self.K5(this),this.sJ(),this.iJ()&&(this.Yz=w.Tr(w.F7,this.Pf.PD(),this.Pf.AD())),this.eJ=i.K7.map(t=>w.Z7.hJ(this.Q7,this,t))}rJ(){for(const t of this.Fz){const s=this.Pf.nJ(t[1]);this.Q7.oJ(s),s.aJ()||(s.lJ(t),s.uJ(this.Ay)),this.Dz.push(t),this.Oz.set(t[2],t)}w.ho(this.Ez,this.Dz),this.Fz=null}static hJ(t,s,i){return w.Tr(w.Z7,t,s,{name:i[0],sid:i[2],isVisible:i[3],isInteractive:i[13],_N:i[19],backgroundColor:i[4].map(t=>t/255),VN:i[5],U7:[i[6],i[7]],opacity:i[8],UN:i[9],z7:i[17],J7:i[18],q7:i[10],scaleRate:i[11],lF:i[12],WN:i[16],X7:i[14],Y7:i[15],K7:i[20]})}Gr(){for(const t of this.eJ)t.Gr();w.Kn(this.eJ);for(const s of this.x7)this.Pf.SB(s);w.Kn(this.x7),this.Wz.Gr(),this.Wz=null,this.nD.Gr(),this.nD=null,this.tJ=null,this.sz=null,this.Q7=null,this.Pf=null}cJ(t){return this.Oz.get(t)}fJ(h){let r=this.Q7.dJ(),n=0,o=this.Dz;for(let e=0,t=o.length;e<t;++e){let t=o[e],s=this.Pf.nJ(t[1]),i=!0;if(!s.pJ()||r){const a=this.Pf.mJ(t,this,!0);h.push(a),s.gJ()&&(i=!1,this.kz.push(a.GB()))}i&&(o[n]=o[e],++n)}w.$n(o,n),this.Pf.R5(),this.mO()}yJ(t,s){if(!t.l5().BL())throw new Error("instance is not of world type");const i=t.lO();if(i.uO()!==this)throw new Error("instance added to wrong layer");this.x7.push(t),0!==i.hv()&&(this.Bz=!0),s&&this.iJ()&&t.lO().R4(),this.mO(t)}SJ(t){this.x7.includes(t)||(this.x7.push(t),0!==t.lO().hv()&&(this.Bz=!0),this.mO(t))}wJ(t,s){const i=t.lO();if(i.uO()!==this)throw new Error("instance added to wrong layer");this.x7.unshift(t),0!==i.hv()&&(this.Bz=!0),this.mO(t),s&&this.iJ()&&t.lO().R4()}bJ(t,s){const i=this.x7.indexOf(t);i<0||(s&&this.iJ()&&t.lO().MJ(),this.x7.splice(i,1),this.mO(t),this.vJ())}TJ(){this.Bz=!0}vJ(){0===this.x7.length&&(this.Bz=!1)}xJ(t){if(t){const s=new Set;for(const i of this.x7){const e=i.lO().M7();0<=e&&s.add(e)}let t=-1;for(const h of this.x7){const r=h.lO();if(!(0<=r.M7())){for(++t;s.has(t);)++t;r.GJ(t)}}}this.x7.sort(n)}_J(){}IJ(){for(const t of this.x7)t.fB().gJ()||this.Pf.SB(t);this.Pf.R5(),w.Kn(this.x7),this.Bz=!1,this.mO()}CJ(s,t,i,e,h,r){const n=this.Pf.HD(),o=this.Pf.PJ(),a=s.RJ(),l=[];for(const u of this.Dz){const c=u[0],f=c[0],d=c[1];if(t.fu(f,d)){const p=o[u[1]];if(p!==s){if(!a)continue;if(!s.AJ(p))continue}let t=h;if(!t){const y=this.Pf.oO();t=this.zk()===y?this:(t=y.EJ(this.Mf()))||y.fO(this.uD())}const m=this.Pf.mJ(u,t,!1,void 0,void 0,!1,r),g=(t.G5(m),m.lO());g.D4(i,e),g.R4(),n._5(!0),m.I5(),n._5(!1),l.push(m)}}return l}v5(){return this.x7.length}zk(){return this.Q7}Mf(){return this.Cr}FJ(t){this.Ay=t}uD(){return this.Ay}DJ(t){this.ez=t}Cj(){return this.ez}IN(){return this.iz}CN(t){this.iz!==(t=!!t)&&(this.iz=t,this.Q7.kJ(),this.Pf.gO())}OJ(){let t=this.pN();return(t?t.yN():this.zk().LJ()).indexOf(this)}NJ(){return this.hz}PO(){return this.Pf}BJ(){return this.rz}WJ(){for(const t of this.mN())if(t.BJ())return!0;return!1}CL(){return this.Pf.CL()}E5(){return this.Wz}lD(){return this.VJ(),this.nD}VJ(){const t=this.jJ();if(this.qz||t!==this.Xz||this.nD.K3()){const s=this.E5().HJ();this.nD.Z3(s.map(t=>t.Xx()),{$E:s.map(t=>t.uD()),KE:!t,i3:!0}),this.qz=!1,this.Xz=t}}wW(){this.E5().wW(),this.qz=!0}iJ(){return this.yz&&!this.gz}UJ(){return this.Yz}zJ(){this.Kz=!1}TN(){for(const t of this.JJ())if(!t.bN())return!1;return!0}bN(){return this.nz}MN(t){this.nz!==(t=!!t)&&(this.nz=t,this.Pf.gO())}GN(t){this.oz=!!t}xN(){return this.oz}RN(){for(const t of this.JJ())if(!t.xN())return!1;return!0}YN(t){if(this.xz!==(t=!!t)){if(this.xz=t){const s=this.zk();this.vz=s.W5(),this.Tz=s.j5()}this.qJ(),this.Pf.gO()}}XJ(){return this.xz}B5(t){const s=this.zk(),i=s.YJ(),e=s.$J();this.vz!==(t=(t=e<t?e:t)<i?i:t)&&(this.vz=t,this.XJ())&&(this.qJ(),this.Pf.gO())}V5(t){const s=this.zk(),i=s.KJ(),e=s.ZJ();this.Tz!==(t=(t=e<t?e:t)<i?i:t)&&(this.Tz=t,this.XJ())&&(this.qJ(),this.Pf.gO())}W5(){return this.XJ()?this.vz:this.zk().W5()}j5(){return this.XJ()?this.Tz:this.zk().j5()}KN(){return this.QJ(),this.sR}t9(){return this.QJ(),this.Gz}s9(){return this.QJ(),this._z}lN(){const t=this.zk();return[t.i9(),t.e9()]}jS(t){return this.Pf.jS(t)}h9(c,e){const h=this.t9();if(0===c)e.I(h);else{let o=h.Xl(),a=h.Yl(),t=this.r9(c),s=h.width()/t,i=h.height()/t,[l,u]=this.lN();if(.5!==l||.5!==u){let t=this.n9(),s=this.Pf,i=this.jS()/t,e=(l-.5)*s.o9()/i,h=(u-.5)*s.a9()/i,r=this.GetAngle(),n=(0!==r&&(Tr.set(e,h),Tr.rotate(r),e=Tr.Ml(),h=Tr.Tl()),w.Jr(t,0,c));o+=w.Lt(e,0,n),a+=w.Lt(h,0,n)}e.set(o-s/2,a-i/2,o+s/2,a+i/2)}}mA(){return this.LM.Ca()}yA(t){t=w.Rr(t,0,1),this.LM.Ca()!==t&&(this.LM.Ta(t),this.sJ(),this.Pf.gO())}sJ(){this.fz.I(this.LM),this.fz.Na()}Uz(){return this.fz}jJ(){return this.LM.Da(1,1,1,1)}DN(){return this.Sz}FN(t){this.Sz!==t&&(this.Sz=t,this.qJ(),this.Pf.gO())}LN(){return this.uz}BN(){return this.cz}l9(t,s){this.uz===t&&this.cz===s||(this.uz=t,this.cz=s,this.qJ(),this.Pf.gO())}ON(t){this.l9(t,this.BN())}NN(t){this.l9(this.LN(),t)}rv(t){this.NM!==t&&(this.NM=t,this.Pf.gO())}hv(){return this.NM}N5(t){t=w.Ar(t),this.Mz!==t&&(this.Mz=t,this.qJ(),this.Pf.gO())}GetAngle(){return w.Ar(this.Q7.GetAngle()+this.Mz)}kN(){return this.Mz}u9(){return 0<this.x7.length}dO(){return this.x7}c9(){return this.f9()&&this.gz?(w.ho(_r,this.dO()),_r.sort((t,s)=>this.d9(t,s)),_r):this.dO()}p9(t){w.nr(t,this.c9());for(const s of this.eJ)s.TN()&&0<s.mA()&&s.p9(t)}d9(t,s){const i=this.zk().m9(),e=i[0],h=i[1],r=i[2],n=t.lO(),o=s.lO(),a=n.KM()-e,l=n.tv()-h,u=n.hv()-r,c=o.KM()-e,f=o.tv()-h,d=o.hv()-r;return c*c+f*f+d*d-(a*a+l*l+u*u)}XN(){return this.az}HN(){return this.lz}jN(t){this.lz!==(t=!!t)&&(this.lz=t,this.Pf.gO())}JN(){return this.pz}zN(t){this.pz!==(t=!!t)&&(this.pz=t,this.Pf.gO())}g9(){return!this.PO().y9()||!this.mz}f9(){return!this.g9()}S9(){return this.f9()&&this.zk().w9()}b9(){if(!this.S9())return!1;for(const t of this.eJ)if(!t.b9())return!1;return!0}WM(t){this.OM!==t&&(this.OM=t,this.Pf.gO())}qN(){return this.OM}M9(){return!this.sz}pN(){return this.sz}v9(t){this.sz=t}yN(){return this.eJ}T9(){return 0<this.eJ.length}x9(t,s=!0){s?this.eJ.push(t):this.eJ.unshift(t)}G9(t,s,i){let e=this.eJ.indexOf(s);if(-1===e)throw new Error("cannot find layer to insert by");i&&++e,this.eJ.splice(e,0,t)}_9(t){const s=this.eJ.indexOf(t);if(-1===s)throw new Error("cannot find layer to remove");this.eJ.splice(s,1)}I9(){for(const t of this.eJ)if(t.C9())return!0;return!1}*wN(){for(const t of this.eJ)yield*t.wN();yield this}*mN(){let t=this.pN();for(;t;)yield t,t=t.pN()}*JJ(){yield this,yield*this.mN()}P9(t){for(const s of this.mN())if(s===t)return!0;return!1}R9(t){return this===t||this.uz===t.uz&&this.cz===t.cz&&this.bz===t.bz&&this.Sz===t.Sz&&this.Mz===t.Mz&&this.W5()===t.W5()&&this.j5()===t.j5()}A9(){return{parallaxX:this.LN(),parallaxY:this.BN(),scale:this.EN(),scaleRate:this.DN(),angle:this.kN(),hasOwnScroll:this.XJ(),scrollX:this.W5(),scrollY:this.j5()}}E9(t){this.l9(t.parallaxX,t.parallaxY),this.AN(t.scale),this.FN(t.scaleRate),this.N5(t.angle),this.YN(t.hasOwnScroll),this.B5(t.scrollX),this.V5(t.scrollY),this.QJ()}F9(t){if(0!==t.size){const s=w.uo(this.x7,t);0<s&&(this.vJ(),this.mO())}}mO(t){this.Lz=!1,this.Kz=!1,t&&!t.fB().l5().VL()||(this.Nz=!1)}D9(){if(!this.Lz){if(this.x7.sort(t),this.iJ())for(let t=0,s=this.x7.length;t<s;++t){const i=this.x7[t].lO();i.GJ(t),this.Yz.j7(i.k9())}else for(let t=0,s=this.x7.length;t<s;++t)this.x7[t].lO().GJ(t);this.Lz=!0}}O9(){if(!this.Nz){let t=this.Q7.L9(this.Cj()),s=t.map(t=>[...t.wN()]).flat(),i=0;for(const e of s){for(const h of e.dO())h.fB().l5().VL()&&h.lO().N9(i++);e.B9()}}}B9(){this.Nz=!0}W9(){return{isVisible:this.TN(),opacity:this.mA(),isInteractive:this.xN()}}V9(t,s,i){const e=t.lO(),h=s.lO();if(e.uO()!==this||h.uO()!==this)throw new Error("can't arrange Z order unless both objects on this layer");let r=e.cO(),n=h.cO();return r!==n+(i?1:-1)&&(w.ro(this.x7,r),r<n&&n--,i&&n++,n===this.x7.length?this.x7.push(t):this.x7.splice(n,0,t),this.mO(t),!0)}j9(t,s){let i=[],e=0,h=0,r=t.length,n=s.length;for(;e<r&&h<n;){const o=t[e],a=s[h];o.lO().M7()<a.lO().M7()?(i.push(o),++e):(i.push(a),++h)}for(;e<r;++e)i.push(t[e]);for(;h<n;++h)i.push(s[h]);return i}H9(s){const i=[],e=s.length;for(let t=0;t<e-1;t+=2){const h=s[t],r=s[t+1];i.push(this.j9(h,r))}return e%2==1&&i.push(s[e-1]),i}U9(t){for(;1<t.length;)t=this.H9(t);return t[0]}z9(){return this.D9(),w.Kn(mr),this.Yz.V7(this.KN(),mr),mr.length?1===mr.length?mr[0]:this.U9(mr):[]}C9(){return this.TN()&&0<this.mA()&&this.J9()}J9(){if(this.u9()||!this.HN())return!0;for(const t of this.eJ)if(t.J9())return!0;return!1}q9(){return this.JN()||!this.jJ()||0!==this.qN()||this.Wz.X9()}Y9(){if(this.q9())return!0;for(const t of this.eJ)if(t.Y9())return!0;return!1}QA(){return this.wz}r9(t){if(this.Q7.fN())return 1;{const s=this.K9();return s/(s-t)}}Z9(t){const s=this.Pf.lB();if(this.Q7.fN())return s;{const i=this.K9(),e=this.jS();return e/Math.abs(i-t)*s}}qJ(){this.Pz=!0,this.Az=!0,this.Iz=!0}Q9(t){return this.Pz&&(this.tq(t,this.Y3,0,0,null),this.Pz=!1),this.Y3}n9(t){return this.jS(t)/this.sq()}K9(){return this.S9()?this.zk().m9()[2]:this.n9()}iq(){if(this.S9()){const t=this.zk().m9();return[t[0],t[1],t[2]]}return this.eq()}eq(t=0,s=0,h=0){let r=this.Pf,i=this.zk(),e=r.hq(),n=r.rq(),o=(this.W5()-e)*this.uz+e,a=(this.j5()-n)*this.cz+n,l=(r.DD()&&(o=Math.round(o),a=Math.round(a)),o+t),u=a+s,c=i.fN()?this.jS(h):this.n9(h),[f,d]=this.lN();if(.5!==f||.5!==d){let t=this.jS(h)/c,s=(f-.5)*r.o9()/t,i=(d-.5)*r.a9()/t,e=this.GetAngle();0!==e&&(Tr.set(s,i),Tr.rotate(e),s=Tr.Ml(),i=Tr.Tl()),l+=s,u+=i}return[l,u,c]}tq(t,s,i,e,h){const r=this.Pf,n=this.zk();if(this.S9()){xh.I(br,n.m9()),xh.I(Mr,n.nq()),xh.I(vr,n.oq());const o=r.hq(),a=r.rq(),l=Mr[0]-br[0],u=Mr[1]-br[1],c=Mr[2]-br[2];br[0]=(br[0]-o)*this.uz+o,br[1]=(br[1]-a)*this.cz+a,br[2]*=Math.max(this.uz,this.cz),Mr[0]=br[0]+l,Mr[1]=br[1]+u,Mr[2]=br[2]+c}else{const[f,d,p]=this.eq(i,e,h),m=(xh.set(br,f,d,p),xh.set(Mr,f,d,p-100),this.GetAngle());0===m?xh.set(vr,0,1,0):xh.set(vr,Math.sin(m),Math.cos(m),0)}t.ow(s,br,Mr,vr,h||r.a9())}aq(){this.Cz=!0,this.Az=!0,this.Iz=!0}lq(t){return this.Cz&&(this.uq(t),this.Cz=!1),this.eT}uq(t){const s=this.Pf.yL(),[i,e]=this.lN();if(this.Q7.fN())t.rw(this.eT,s.cq(),s.fq());else if(.5===i&&.5===e)Th.I(this.eT,s.pq());else{const h=s.cq(),r=s.fq();t.ew(this.eT,h/r,i,e)}}GH(t,s=!0,i=0,e=0,h=0){s&&t.hA(this.lq(t));let r;r=0===i&&0===e&&0===h?this.Q9(t):(this.tq(t,yr,i,e,h),yr),t.uA(r)}mq(t){this.GH(t),t.Xw(this.hv())}gq(t){let s=null;if(t.zb()&&this.Pf.yq()){const i=this.Pf.yL().Sq(this);i&&(s=i.jP(),t.pE(s))}return s}wq(t){if(t.hw()&&this.Pf.yq()){const s=2*(this.uD()+1);t.StartMeasuringRenderPassTime(s,1+s)}}Hv(t,s,i){let e=this.Pf.yL(),h=this.q9(),r=null,n=this.gq(t);if(this.wq(t),h){const o={t2:this.Pf.ED(),U2:!0,bq:!!t.hw()&&this.Pf.Mq()};"low"===e.vq()&&(o.width=e.cq(),o.height=e.fq()),r=this.Pf.Tq(o),this.wz=r,t.rE(r),this.HN()&&t.JA(0,0,0,0)}else this.wz=s,t.rE(s);if(this.HN()||t.Tc(this.az),this.Q7.xq(t,this.wz,this.eJ,h&&this.HN()),this.wq(t),this.GH(t),t.Xw(this.hv()),t.YA(this.f9()),this.sq()>Number.EPSILON){this.D9();const a=this.iJ()&&0===this.hv()&&!this.Bz;this.S9()?this.Gq(t):a?this._q(t):this.Iq(t,this.c9())}t.Xw(0),t.$w(0),h&&(t.YA(!1),this.Cq(t,r,s,i)),n&&t.gE(n),this.wz=null}Iq(i,e){let h=this.KN(),r=this.wz,n=this.zk().fN(),o=this.zk().Pq(),a=null;for(let t=0,s=e.length;t<s;++t){const l=e[t];if(l!==a){const u=(a=l).lO();u.TN()&&u.Rq(h,o,n)&&this.Aq(l,u,i,r)}}}Gq(e){const h=this.wz,r=this.Eq(),n=xr,o=Gr,a=this.c9();for(let s=0,i=a.length;s<i;){const l=a[s],u=l.lO();if(u.TN()&&u.Fq(r)){(!l.Dq()||0<u.kq())&&o.push(l);const c=l.lO().L4();n.push(l);let t=s+1;for(;t<i;++t){const f=a[t],d=f.lO();if(d.TN()&&d.Fq(r)){if(d.L4()!==c)break;(f.Dq()?(0<d.kq()&&o.push(f),n):o).push(f)}}if(1!==n.length||n[0].Oq()){this.Lq(e,n);for(let t=0,s=o.length;t<s;++t){const p=o[t],m=p.lO();m.Nq(!0),this.Aq(p,m,e,h),m.Nq(!1)}}else{this.Aq(l,u,e,h);for(let t=0,s=o.length;t<s;++t){const g=o[t];if(g!==l){const y=g.lO(),S=y.uO();S.Aq(g,y,e,h)}}}s=t,w.Kn(n),w.Kn(o)}else++s}}Lq(i,e){const h=this.wz;i.uE();for(let t=0,s=e.length;t<s;++t){const r=e[t],n=r.lO();n.Bq(!0),this.Wq(r,n,i)}i.cE();for(let t=0,s=e.length;t<s;++t){const o=e[t],a=o.lO();this.Aq(o,a,i,h),a.Bq(!1)}i.dE()}_q(t){let s=this.Yz,i=this.Qz,e=this.Zz,h=this.KN(),r;i.set(s.N7(h.Wl()),s.B7(h.Vl()),s.N7(h.jl()),s.B7(h.Hl())),this.Kz&&i.equals(e)?r=this.$z:(r=this.z9(),this.Kz=!0,e.I(i)),this.Iq(t,r),r!==this.$z&&w.ho(this.$z,r)}Aq(t,s,i,e){s.X9()?this.Vq(t,s,i,e):this.Wq(t,s,i)}Wq(t,s,i){const e=s.jq();i.Aw()!==e&&e.BM(),t.Hv(i)}Vq(t,s,i,e){this.Hq(t,s,i,e,null)&&this.GH(i)}Hq(t,s,i,e,h){const r=s.C4().lD();return r.oF(i,e,{aF:t,lF:s.qN(),devicePixelRatio:this.Pf.Uq(),time:t.zq(),uF:this.Pf.Jq()*this.sq(),cF:this.GetAngle(),EF:s.B4(),FF:r.$F()?null:this.qq(s),gF:h&&h.gF,yF:h&&h.yF,SF:h&&h.SF,wF:h&&h.wF}),i.Xw(this.hv()),r.fA()}Cq(t,s,i,e){const h=this.Wz.HJ(),r=this.Pf;0===h.length?(t.rE(i),t.mw(),e&&0===this.OM&&this.jJ()?t.nE(s):(t.WM(this.OM),t.VM(this.fz),t.oE(s)),t.aE(s),r.zz(s)):this.lD().oF(t,i,{aF:this,lF:this.qN(),devicePixelRatio:r.Uq(),uF:r.Jq()*this.sq(),cF:this.GetAngle(),EF:this.KN(),FF:null,YE:!0})}EN(){return this.bz}AN(t){this.bz!==t&&(this.bz=t,this.Q7.Xq(),this.qJ(),this.Pf.gO())}lB(){return this.sq()*this.Pf.lB()}Oj(){return this.sq()*this.Pf.Oj()}sq(){return(this.bz*this.Q7.L5()-1)*this.Sz+1}QJ(){if(this.Iz){this.Iz=!1;let t=this.Pf.hq(),s=this.Pf.rq(),i=(this.W5()-t)*this.uz+t,e=(this.j5()-s)*this.cz+s,h=this.sq(),r=this.Pf.o9()/h,n=this.Pf.a9()/h,o=i-r/2,a=e-n/2;this.Pf.DD()&&(o=Math.round(o),a=Math.round(a));const l=this.Gz,u=(l.set(o,a,o+r,a+n),this.GetAngle()),c=(0!==u&&(dr.I(l),dr.offset(-l.Xl(),-l.Yl()),pr.Nu(dr,u),pr.Wu(dr),dr.offset(l.Xl(),l.Yl()),l.I(dr)),this.NM);this.h9(c,this.sR),this.S9()?this.Yq(c,this._z):this._z.I(this.sR)}}Yq(t,s){let i=this.Pf.yL(),e=i.ML(),h=i.TL(),[r,n]=this.QN(0,0,t),[o,a]=this.QN(e,0,t),[l,u]=this.QN(e,h,t),[c,f]=this.QN(0,h,t),d=Math.min(r,o,l,c),p=Math.min(n,a,u,f),m=Math.max(r,o,l,c),g=Math.max(n,a,u,f);isFinite(d)||(d=-1/0),isFinite(p)||(p=-1/0),isFinite(m)||(m=1/0),isFinite(g)||(g=1/0),s.set(d,p,m,g)}QN(t,s,i=0){return this.$q(t,s,i,this.Oj())}rB(t,s,i=0){return this.$q(t,s,i,this.lB()*this.CL())}$q(t,s,i,e){const h=this.Pf,r=h.bM(),n=this.sq(),o=h.o9()/n,a=h.a9()/n,l=wr,u=(jh.set(l,0,0,o,a),t/=e,s=l[3]-s/e,this.lq(r)),c=this.Q9(r),f=Sr,d=w.Ny.Vy(t,s,i,c,u,l,f);return d?[f[0],f[1]]:[NaN,NaN]}Kq(t,s){const i=this.bz,e=this.Sz,h=this.uz,r=this.cz,n=this.Mz,o=(this.bz=1,this.Sz=1,this.uz=1,this.cz=1,this.Mz=0,this.qJ(),this.QN(t,s));return this.bz=i,this.Sz=e,this.uz=h,this.cz=r,this.Mz=n,this.qJ(),o}eB(t,s,i=0){return this.Zq(t,s,i,this.Oj())}oB(t,s,i=0){return this.Zq(t,s,i,this.lB()*this.CL())}Zq(t,s,i,e){const h=this.Pf,r=h.bM(),n=this.sq(),o=h.o9()/n,a=h.a9()/n,l=wr,u=(jh.set(l,0,0,o,a),this.lq(r)),c=this.Q9(r),f=Sr,d=w.Ny.By(t,s,i,c,u,l,f);return d?[f[0]*e,(l[3]-f[1])*e]:[NaN,NaN]}Qq(t,s){return t*=this.lB()*this.CL(),0!==s&&(t*=this.r9(s)),t}qq(t){const s=t.B4(),i=t.L4(),e=t.kq(),l=i+e,u=s.Wl(),c=s.Vl(),f=s.jl(),d=s.Hl();if(this.S9()){if(this.tX(u,c,i)||this.tX(f,c,i)||this.tX(f,d,i)||this.tX(u,d,i))return null;if(0<e&&(this.tX(u,c,l)||this.tX(f,c,l)||this.tX(f,d,l)||this.tX(u,d,l)))return null}else if(l>=this.n9())return null;let[p,m]=this.oB(u,c,i),[g,y]=this.oB(f,d,i);if(0!==this.GetAngle()||0<e||this.S9()){const[S,w]=this.oB(f,c,i),[b,M]=this.oB(u,d,i);if(0<e){let[t,s]=this.oB(u,c,l),[i,e]=this.oB(f,c,l),[h,r]=this.oB(f,d,l),[n,o]=this.oB(u,d,l),a=Math.min(p,g,S,b,t,i,h,n);g=Math.max(p,g,S,b,t,i,h,n),p=a,a=Math.min(m,y,w,M,s,e,r,o),y=Math.max(m,y,w,M,s,e,r,o),m=a}else{let t=Math.min(p,g,S,b);g=Math.max(p,g,S,b),p=t,t=Math.min(m,y,w,M),y=Math.max(m,y,w,M),m=t}}return dr.set(p,m,g,y),dr}Eq(){return this.Az&&(this.sX(),this.Az=!1),this.Rz}sX(){const t=this.Pf.bM(),s=this.lq(t),i=this.Q9(t);this.Rz.Yy(i,s)}tX(t,s,i){return this.Eq().Ky(t,s,i)}iX(){const t={d:this.BJ(),s:this.EN(),a:this.kN(),v:this.bN(),i:this.xN(),html:this.IN(),bc:this.az.toJSON(),t:this.HN(),sx:this.vz,sy:this.Tz,hosp:this.xz,px:this.LN(),py:this.BN(),c:this.LM.toJSON(),sr:this.DN(),fx:this.Wz.dv(),cg:this.kz};return t}eX(t){this.rz=!!t.d,this.bz=t.s,this.Mz=t.a,this.nz=!!t.v,this.oz=!t.hasOwnProperty("i")||t.i,this.iz=!!t.html,this.az.nl(t.bc),this.lz=!!t.t,t.hasOwnProperty("sx")&&(this.vz=t.sx),t.hasOwnProperty("sy")&&(this.Tz=t.sy),t.hasOwnProperty("hosp")&&(this.xz=!!t.hosp),this.uz=t.px,this.cz=t.py,this.LM.nl(t.c),this.sJ(),this.Sz=t.sr,w.ho(this.kz,t.cg),w.ho(this.Dz,this.Ez);let i=new Set(this.kz),e=0;for(let t=0,s=this.Dz.length;t<s;++t)i.has(this.Dz[t][2])||(this.Dz[e]=this.Dz[t],++e);w.$n(this.Dz,e),this.Wz.pv(t.fx),this.qz=!0}hX(){this.xJ(!1),this.mO(),this.qJ(),this.aq()}z5(){return this.tJ}G5(t,s=!1){if(this.x7.includes(t))s&&this.x7.sort((t,s)=>{const i=t.lO().rX(),e=s.lO().rX();return i-e});else if(t.nX()){const i=[...t.p6()];i.push(t),i.sort((t,s)=>{const i=t.lO().rX(),e=s.lO().rX();return i-e});for(const e of i)if(e.TB())for(const h of e.xB())if(!i.includes(h)){const r=[...h.p6()];r.push(h),r.sort((t,s)=>{const i=t.lO().rX(),e=s.lO().rX();return i-e}),r&&r.length&&i.splice(i.length,0,...r)}for(const n of i)n.l5().BL()&&this.yJ(n,!0)}else if(t.l5().BL()&&this.yJ(t,!0),t.TB())for(const o of t.xB()){const a=[...o.p6()];if(a.push(o),a.sort((t,s)=>{const i=t.lO().rX(),e=s.lO().rX();return i-e}),a&&a.length)for(const l of a)l.l5().BL()&&this.yJ(l,!0)}}}}{let l=function(t,s,i,e){return t[0]===Math.fround(s)&&t[1]===Math.fround(i)&&t[2]===Math.fround(e)},M=function(t,s){I!==t&&(t.mq(s),I=t)},v=(l,M,self.Vs),e=self.C3Debugger,h=(v.Tr(v.Rect),v.Tr(v.Rect),v.Tr(v.Rect)),T=v.Tr(v.na),t=self.xs,u=t.Es,a=[],x=[],G=[],_=[],I=null;v.aX=class extends v.Mr{constructor(t,s,i){super(),this.lX=t,this.Pf=t.PO(),this.Cr=i[0],this.uX=i[1],this.cX=i[2],this.Tg=i[1],this.xg=i[2],this.fX=!!i[3],this.dX=!!i[4],this.pX=i[5],this.mX=i[6],this.gX=i[7],this.yX=null,this.hz=i[8],this.Ay=s,this.vz=0,this.Tz=0,this.bz=1,this.Mz=0,this.SX=new Set,this.wX=new Set,this.bX=new Set,this.MX=[],this.vX=[],this.TX=new Map,this.xX=new Map,this.GX=[],this._X=!1,this.IX=u.create(),this.CX=u.create(),this.PX=u.create(),this.RX=[],this.AX=[],this.EX=new Map,this.FX=new Map,this.DX=-1;const h=this.Pf.yL();this.Wz=v.Tr(v.Vz,this,i[11]),this.nD=v.Tr(v.Ny.e3,h.jz(),{JE:(t,s)=>{const i=s.ZF(),e=i.QA();t.SA(),t.oE(e),t.aE(e),h.zz(e)},XE:t=>this.E5().Jz(t)}),this.qz=!0,this.kX=!1,this.wz=null,this.OX={},this.LX=new Map,this.NX=!0,this.BX=new self.A5(this),this.WX=v.Tr(v.Event.a0);for(const e of i[9])this.RX.push(v.Z7.hJ(this,null,e));this.VX();for(const r of this.X5())r.rJ();for(const n of i[10]){const o=this.Pf.nJ(n[1]);if(!o)throw new Error("missing nonworld object class");o.aJ()||o.lJ(n),this.GX.push(n),this.oJ(o)}}Gr(){for(const t of this.AX)t.Gr();v.Kn(this.AX),this.bX.clear(),this.yX=null,this.lX=null,this.Pf=null}PO(){return this.Pf}Mf(){return this.Cr}NJ(){return this.hz}uD(){return this.Ay}E5(){return this.Wz}lD(){return this.VJ(),this.nD}VJ(){const t="low"===this.Pf.yL().vq();if(this.qz||this.kX!==t||this.nD.K3()){const s=this.E5().HJ();this.nD.Z3(s.map(t=>t.Xx()),{$E:s.map(t=>t.uD()),ZE:t,i3:!0}),this.qz=!1,this.kX=t}}wW(){this.E5().wW(),this.qz=!0}jX(){let i=this.AX[0].sq();for(let t=1,s=this.AX.length;t<s;++t){const e=this.AX[t];0===e.LN()&&0===e.BN()||(i=Math.min(i,e.sq()))}return i}HX(){return.5*this.Pf.o9()/this.jX()}UX(){return.5*this.Pf.a9()/this.jX()}YJ(){return this.zX()?-1/0:this.HX()}$J(){return this.zX()?1/0:this.Wm()-this.HX()}KJ(){return this.zX()?-1/0:this.UX()}ZJ(){return this.zX()?1/0:this.$m()-this.UX()}B5(t){const s=this.YJ(),i=this.$J();this.vz!==(t=(t=i<t?i:t)<s?s:t)&&(this.vz=t,this.JX(),this.Pf.gO())}W5(){return this.vz}V5(t){const s=this.KJ(),i=this.ZJ();this.Tz!==(t=(t=i<t?i:t)<s?s:t)&&(this.Tz=t,this.JX(),this.Pf.gO())}j5(){return this.Tz}zX(){return this.fX}Xq(){this.B5(this.W5()),this.V5(this.j5());for(const t of this.AX)t.XJ()&&(t.B5(t.W5()),t.V5(t.j5()))}oN(t,s){this.pX===t&&this.mX===s||(this.pX=t,this.mX=s,this.qX()&&(this.XX(),this.JX(),this.Pf.gO()))}i9(){return this.fN()?.5:this.pX}e9(){return this.fN()?.5:this.mX}Pq(){const t=this.i9(),s=this.e9();return t<0||1<t||s<0||1<s}uN(){this.dX&&(this.dX=!1,this.XX(),this.JX(),this.Pf.gO())}cN(){this.dX||(this.dX=!0,this.XX(),this.JX(),this.Pf.gO())}fN(){return this.dX}qX(){return!this.fN()}YX(t){this._X!==(t=!!t)&&(this._X=t,this.JX(),this.Pf.gO())}w9(){return this._X}$X(t,s,i,e,h,r,n,o,a){l(this.IX,t,s,i)&&l(this.CX,e,h,r)&&l(this.PX,n,o,a)||(u.set(this.IX,t,s,i),u.set(this.CX,e,h,r),u.set(this.PX,n,o,a),this.KX())}KX(){this.JX(),this.Pf.gO()}m9(){return this.IX}nq(){return this.CX}oq(){return this.PX}L5(){return this.bz}O5(t){this.bz!==t&&(this.bz=t,this.JX(),this.Xq(),this.Pf.gO())}N5(t){t=v.Ar(t),this.Mz!==t&&(this.Mz=t,this.JX(),this.Pf.gO())}GetAngle(){return this.Mz}Wm(){return this.Tg}qm(t){!isFinite(t)||t<1||(this.Tg=t)}$m(){return this.xg}Vm(t){!isFinite(t)||t<1||(this.xg=t)}ZX(){return this.yX}LJ(){return this.RX}*X5(){for(const t of this.RX)yield*t.wN()}q5(){return this.AX}QX(){return this.AX.length}uO(t){return"number"==typeof t?this.fO(t):this.EJ(t.toString())}fO(t){return t=v.Rr(Math.floor(t),0,this.AX.length-1),this.AX[t]}EJ(t){return this.EX.get(t.toLowerCase())||null}tY(t){return!!this.EJ(t)}sY(t){return this.FX.get(t)||null}XX(){for(const t of this.AX)t.aq()}JX(){for(const t of this.AX)t.qJ()}Q5(t,s,i){if(this.tY(t))throw new Error(`layer name '${t}' already in use`);if(!s&&i<2)throw new Error("invalid insert position");const e=2<=i?s:s.pN(),h=v.Tr(v.Z7,this,e,{name:t,sid:Math.floor(1e15*Math.random()),H7:!0});this.iY(h,s,i),this.PO().gO(),this.kJ()}sN(t,s,i){if(!s&&i<2)throw new Error("invalid insert position");t===s&&i<2||(this.eY(t),this.iY(t,s,i),this.PO().gO(),this.kJ())}eN(t){if(this.eY(t)){const s=this.Pf.HD();s._5(!0),t.Gr(),s._5(!1),this.PO().gO(),this.kJ()}}rN(){const t=new Set;for(const s of this.X5())s.BJ()&&!s.WJ()&&t.add(s);if(0!==t.size){const i=this.Pf.HD();i._5(!0);for(const e of t)this.eY(e),e.Gr();i._5(!1),this.PO().gO(),this.kJ()}}iY(s,i,e){if(2<=e)if(i){if(i===s||i.P9(s))throw new Error(`cannot move layer '${s.Mf()}' to sub-layer of itself`);i.x9(s,2===e),s.v9(i)}else 2===e?this.RX.push(s):this.RX.unshift(s),s.v9(null);else{const t=i.pN();if(t){if(i.P9(s))throw new Error(`cannot move layer '${s.Mf()}' to sub-layer of itself`);t.G9(s,i,0===e),s.v9(t)}else{let t=this.RX.indexOf(i);if(-1===t)throw new Error("cannot find layer to insert by");0===e&&++t,this.RX.splice(t,0,s),s.v9(null)}}}eY(t){const s=t.pN();if(s)return s._9(t),!0;if(1<this.RX.length){const i=this.RX.indexOf(t);if(-1===i)throw new Error("cannot find layer to remove");return this.RX.splice(i,1),!0}return!1}VX(){this.AX=[...this.X5()],this.EX.clear(),this.FX.clear();for(let t=0,s=this.AX.length;t<s;++t){const i=this.AX[t];i.FJ(t),this.EX.set(i.Mf().toLowerCase(),i),this.FX.set(i.NJ(),i)}}hY(){let t=0;for(const s of this.RX){for(const i of s.wN())i.DJ(t);s.IN()&&t++}}rY(){return this.RX.at(-1).Cj()+1}async kJ(){this.VX(),this.hY(),this.DX=this.rY()}nY(){return this.DX}aY(){this.DX=-1}L9(t){const s=[];for(const i of this.RX){const e=i.Cj();if(e===t)s.push(i);else if(t<e)break}return s}A9(){return{scrollX:this.W5(),scrollY:this.j5(),scale:this.L5(),angle:this.GetAngle(),vpX:this.i9(),vpY:this.e9()}}E9(t){this.B5(t.scrollX),this.V5(t.scrollY),this.O5(t.scale),this.N5(t.angle),this.oN(t.vpX,t.vpY)}lY(){let t=this.RX.filter(t=>t.C9())[0];for(;t;){if(!t.HN())return T.xa(t.XN()),T.Ta(1),T;if(t.q9())return T.ca(0,0,0,0),T;t=t.yN().filter(t=>t.C9())[0]}return T.ca(0,0,0,0),T}dJ(){return this.NX}uY(){return[...this.SX]}oJ(t){if(t.TB())for(const s of t.fY().cY())this.SX.add(s);else this.SX.add(t)}dY(){return[...this.wX]}pY(t,s){if(t===this||!s)return Promise.resolve();t&&(v.Yo(this.wX,t.wX),t.wX.clear());const i=[];for(const e of this.SX)this.wX.has(e)||(i.push(e.mY(s)),this.wX.add(e));return Promise.all(i)}async gY(t){if(t.RJ())throw new Error("cannot load textures for family");const s=this.Pf.bM();if(s&&!s.pP()&&!this.wX.has(t)){this.wX.add(t);const i=t.mY(s);this.yY(i),await i,t.SY(),this.Pf.gO()}}yY(t){this.bX.add(t),t.then(()=>this.bX.delete(t)).catch(()=>this.bX.delete(t))}wY(){return Promise.all([...this.bX])}bY(t){if(t.RJ()||0<t.v5())throw new Error("cannot unload textures");const s=this.Pf.bM();s&&this.wX.has(t)&&(this.wX.delete(t),t.MY(s))}vY(t,s){if(t!==this&&s)for(const i of this.wX)i.gJ()||t.SX.has(i)||(i.MY(),this.wX.delete(i))}TY(){this.wX.clear()}async xY(t){const s=this.Pf,i=this.lX,e=s.HD(),h=(this.gX&&(this.yX=e.GY(this.gX),this.yX._Y()),i.IY(this),this.Tg=this.uX,this.xg=this.cX,this.vz=s.PD()/2,this.Tz=s.AD()/2,this.Xq(),this.XX(),this.JX(),this.hY(),await this.Pf.yL().CY(this.rY(),!0),this.PY(t),this.Pf.RY(!0),this.AY(),this.NX||this.EY(),this.FY(this.MX),this.FY(this.vX),this.DY(),i.kY(),s.R5(),this.Pf.RY(!1),this.Pf.OY());if(await Promise.all(h),v.Kn(h),!s.LY()){for(const r of this.MX)r.NY();for(const n of this.vX)n.BY(this.TX,this.xX);for(const[o,a]of Object.entries(this.OX)){const l=this.Pf.m8(parseInt(o,10));l&&!l.RJ()&&l.pJ()&&v.Kn(a)}for(const u of this.MX)u.WY();for(const c of this.vX)c.WY();for(const f of this.MX)f.w6()||f.VY();for(const d of this.vX)d.w6()||d.VY()}v.Kn(this.MX),v.Kn(this.vX),this.TX.clear(),this.xX.clear(),await Promise.all([...this.SX].map(t=>t.jY(this.Pf.bM()))),t&&(s.a0().dispatchEvent(new v.Event("beforefirstlayoutstart")),await s.HY(new v.Event("beforeprojectstart"))),await this.UY(new v.Event("beforeanylayoutstart")),s.a0().dispatchEvent(new v.Event("beforelayoutstart")),await this.HY(new v.Event("beforelayoutstart")),s.LY()||await s.s4(v.XY.qY.JY.zY,null,null),s.a0().dispatchEvent(new v.Event("afterlayoutstart")),await this.HY(new v.Event("afterlayoutstart")),await this.UY(new v.Event("afteranylayoutstart")),t&&(s.a0().dispatchEvent(new v.Event("afterfirstlayoutstart")),await s.HY(new v.Event("afterprojectstart"))),e.YY(i),await this.wY(),this.NX=!1}PY(t){for(const s of this.Pf.PJ())if(!s.RJ()&&s.BL())for(const i of s.w5()){const e=i.lO(),h=e.uO(),r=v.Rr(h.uD(),0,this.AX.length-1),n=this.AX[r];e.pO(n,!0),n.SJ(i)}if(!t)for(const o of this.AX)o.xJ(!1)}AY(){for(const t of this.AX)t.fJ(this.MX),t._J()}EY(){let s=!1;for(const[t,i]of Object.entries(this.OX)){const e=this.Pf.m8(parseInt(t,10));if(e&&!e.RJ()&&e.pJ())for(const h of i){let t=null;if(!e.BL()||(t=h.hasOwnProperty("instJson")?this.sY(h.instJson.w.l):this.sY(h.w.l))){const r=this.Pf.mJ(e,t,!1,0,0,!0);h.hasOwnProperty("instJson")?r.pv(h.instJson):r.pv(h),s=!0,this.vX.push(r),h.hasOwnProperty("instJson")&&(this.TX.set(r,h),this.xX.set(h.index,r))}}}for(const n of this.AX)n.xJ(!0),n.mO();s&&(this.Pf.R5(),this.Pf.$Y())}FY(s){for(const i of s)if(i.TB()){const e=i.lO(),t=i.IB();for(const h of i.fB().fY().KY())if(h!==i.fB()){const r=h.w5();if(r.length>t)i.ZY(r[t]);else{let t;t=e?this.Pf.mJ(h,e.uO(),!0,e.KM(),e.tv(),!0):this.Pf.mJ(h,null,!0,0,0,!0),this.Pf.R5(),h.QY(),i.ZY(t),s.push(t)}}}}DY(){for(const t of this.GX){const s=this.Pf.nJ(t[1]);s.TB()||this.Pf.mJ(t,null,!0)}}t$(){let i=[],e=this.GX,h=0;for(let t=0,s=e.length;t<s;++t){const r=e[t],n=this.Pf.nJ(r[1]);n.gJ()?n.TB()&&n.fY().s$()||i.push(this.Pf.mJ(r,null,!0)):(e[h]=r,++h)}v.$n(e,h),this.Pf.R5(),this.FY(i)}CJ(t,s,i,e,h,r,n){if(i)return i.CJ(t,s,h,r,e,n);{const o=[];for(const a of this.AX)o.push(a.CJ(t,s,h,r,e,n));return o.flat()}}async i$(){const t=this.lX;this.Pf.LY()||(await this.UY(new v.Event("beforeanylayoutend")),await this.HY(new v.Event("beforelayoutend")),await this.Pf.s4(v.XY.qY.JY.e$,null,null),await this.HY(new v.Event("afterlayoutend")),await this.UY(new v.Event("afteranylayoutend"))),t.h$(!0),this.Pf.HD().r$(),this.NX||this.n$();for(const s of this.AX)s.IJ();for(const i of this.Pf.PJ())if(!(i.gJ()||i.BL()||i.l5().LL()||i.RJ())){for(const e of i.w5())this.Pf.SB(e);this.Pf.R5()}t.h$(!1),t.Vk()===this&&t.IY(null)}o$(t,s){const i=t.fB().NJ().toString(),e=(this.OX.hasOwnProperty(i)||(this.OX[i]=[]),this.OX[i]),h={index:s,instJson:t.dv(),sceneGraphJson:{children:[]}};e.push(h),this.LX.set(t,h)}a$(t){const s=this.LX.get(t);for(const i of t.l$()){const e=this.LX.get(i);e&&s.sceneGraphJson.children.push({index:e.index,flags:v.c$.u$(i.lO())})}}n$(){this.LX.clear();let t=0;for(const s of this.AX){s.D9();for(const i of s.dO()){const e=i.fB();!e.gJ()&&e.pJ()&&(this.o$(i,t),t++)}}for(const h of this.AX)for(const r of h.dO()){const n=r.fB();!n.gJ()&&n.pJ()&&this.a$(r)}this.LX.clear()}f$(){this.OX={},this.NX=!0}QA(){return this.wz}q9(){const t=this.Pf,s=t.bM().zb();return"low"===t.yL().vq()||s&&t.Mq()||this.Wz.X9()||s&&t.y9()}d$(t){const s=this.Pf.yL();if(this.q9()){t.rE(null),t.JA(0,0,0,0);const i={t2:this.Pf.ED(),U2:t.hw()||this.Pf.Mq()||this.Wz.X9(),bq:!!t.hw()&&this.Pf.Mq()};"low"===s.vq()&&(i.width=s.cq(),i.height=s.fq()),this.wz=this.Pf.Tq(i)}else this.wz=null}p$(t){this.Pf.m$(t)&&(t.YA(!1),t.rE(null),t.mw(),t.nE(this.wz))}g$(t){this.q9()&&(t.YA(!1),this.y$(t,this.wz))}S$(t){t.rE(this.wz),t.Tc(this.lY()),this.Pf.y9()&&t.XA();const s=this.L9(0);this.xq(t,this.wz,s,!0),t.hw()&&t.StartMeasuringRenderPassTime(0,1),this.g$(t),this.wz=null}w$(t,s){let i=null;this.Pf.m$(t)&&(i=this.wz),t.rE(i),t.JA(0,0,0,0),this.Pf.y9()&&t.XA();const e=this.L9(s);this.xq(t,i,e,!0),this.p$(t),t.Nb(),this.Pf.yL().b$(s)}xq(t,e,s,h){const r=s.filter(t=>t.C9());for(let s=0,i=r.length;s<i;){const n=r[s];if(n.b9()&&!n.Y9()){a.push(n);for(let t=s+1;t<i;++t){const o=r[t];if(!o.b9()||o.Y9())break;a.push(r[t])}if(2<=a.length||1===a.length&&a[0].I9()){this.M$(t,e,a),s+=a.length,v.Kn(a);continue}v.Kn(a)}n.Hv(t,e,h&&0===s),++s}}y$(t,s){const i=this.Wz.HJ(),e=this.Pf;0===i.length?(t.rE(null),t.mw(),t.nE(s),t.aE(s),e.zz(s)):(h.set(0,0,e.o9(),e.a9()),this.lD().oF(t,null,{aF:this,lF:3,devicePixelRatio:this.Pf.Uq(),uF:this.Pf.Jq()*this.L5(),cF:this.GetAngle(),EF:h,FF:null,YE:!0}))}M$(e,h,t){t[0].HN()||(T.xa(t[0].XN()),T.Ta(1),e.Tc(T)),this.Pf.yL(),e.YA(!0);const r=x,n=G,o=_;for(const a of t)a.D9(),a.p9(r);const s=t[0],i=s.gq(e);s.wq(e);for(let s=0,i=r.length;s<i;){const l=r[s],u=l.lO(),c=u.uO();if(u.TN()&&u.Fq(c.Eq())){(!l.Dq()||0<u.kq())&&o.push(l);const f=l.lO().L4();n.push(l);let t=s+1;for(;t<i;++t){const d=r[t],p=d.lO();if(p.TN()&&p.Fq(p.uO().Eq())){if(p.L4()!==f)break;(d.Dq()?(0<p.kq()&&o.push(d),n):o).push(d)}}if(1!==n.length||n[0].Oq()){this.v$(e,h,n);for(let t=0,s=o.length;t<s;++t){const m=o[t],g=m.lO(),y=g.uO();g.Nq(!0),M(y,e),y.Aq(m,g,e,h),g.Nq(!1)}}else{M(c,e),c.Aq(l,u,e,h);for(let t=0,s=o.length;t<s;++t){const S=o[t];if(S!==l){const w=S.lO(),b=w.uO();M(b,e),b.Aq(S,w,e,h)}}}s=t,v.Kn(n),v.Kn(o)}else++s}i&&e.gE(i),v.Kn(r),I=null}v$(i,e,h){i.uE();for(let t=0,s=h.length;t<s;++t){const r=h[t],n=r.lO(),o=n.uO();n.Bq(!0),M(o,i),o.Wq(r,n,i)}i.cE();for(let t=0,s=h.length;t<s;++t){const a=h[t],l=a.lO(),u=l.uO();M(u,i),u.Aq(a,l,i,e),l.Bq(!1)}i.dE()}iX(){const t={sx:this.W5(),sy:this.j5(),s:this.L5(),a:this.GetAngle(),w:this.Wm(),h:this.$m(),ortho:this.fN(),vpX:this.i9(),vpY:this.e9(),fv:this.NX,persist:this.OX,fx:this.Wz.dv(),layers:{},dynamicLayers:[]};for(const s of this.AX)if(s.BJ()){const i=s.pN();t.dynamicLayers.push({sid:s.NJ(),name:s.Mf(),parentSid:i?i.NJ():null,siblingIndex:s.OJ(),data:s.iX()})}else t.layers[s.NJ().toString()]=s.iX();return t}eX(t){this.vz=t.sx,this.Tz=t.sy,this.bz=t.s,this.Mz=t.a,this.Tg=t.w,this.xg=t.h,this.dX=!!t.ortho,t.hasOwnProperty("vpX")&&(this.pX=t.vpX),t.hasOwnProperty("vpY")&&(this.mX=t.vpY),this.NX=!!t.fv,this.OX=t.persist,this.Wz.pv(t.fx),this.qz=!0;for(const[s,i]of Object.entries(t.layers)){const e=parseInt(s,10),h=this.sY(e);h&&h.eX(i)}if(t.hasOwnProperty("dynamicLayers")){this.rN(),this.Pf.R5();const r=new Map,n=t.dynamicLayers;for(let t=n.length-1;0<=t;--t){const o=n[t],a=o.sid,l=o.name,u=o.parentSid,c=o.siblingIndex,f=o.data;if(this.VX(),!this.tY(l)&&!this.sY(a)){let t,s;if(null===u)t=null,s=this.RX;else{if(!(t=this.sY(u)))continue;s=t.yN()}const d=v.Tr(v.Z7,this,t,{name:l,sid:a,H7:!0});s.push(d);let i=r.get(s);i||(i=[],r.set(s,i)),i.push({P4:d,siblingIndex:c}),d.eX(f)}}for(const[p,m]of r){m.sort((t,s)=>t.siblingIndex-s.siblingIndex);for(const g of m){let t=g.P4,s=g.siblingIndex,i=p.indexOf(t);p.splice(i,1),p.splice(s,0,t)}}}this.kJ(),this.XX(),this.JX()}jk(){return this.BX}BD(){return this.WX}T$(t){t.layout=this.jk();const s=this.Pf,i=s.a4()&&!s.HD().C5();i&&e.StartMeasuringScriptTime(),this.WX.dispatchEvent(t),i&&e.AddScriptTime()}HY(t){return t.layout=this.jk(),this.WX.g0(t)}UY(t){return t.layout=this.jk(),this.Pf.HY(t)}x$(){this.G$(this.RX)}G$(t,s=0){const i=t.slice(0);i.reverse();for(const e of i)console.log("\t".repeat(s)+"- "+e.Mf()),this.G$(e.yN(),s+1)}}}{const Cr=self.Vs;Cr._$=class extends Cr.Mr{#g8;#I$=[];#C$=new Map;#P$=new Map;#R$=null;#A$=[];#E$=null;#F$=0;#D$=null;constructor(t){super(),this.#g8=t}Gr(){this.#g8=null,this.#R$=null,this.#E$=null,this.#D$=null,Cr.Kn(this.#I$),this.#C$.clear(),this.#P$.clear(),Cr.Kn(this.#A$)}BT(t){const s=Cr.Tr(Cr.aX,this,this.#I$.length,t);this.#I$.push(s),this.#C$.set(s.Mf().toLowerCase(),s),this.#P$.set(s.NJ(),s)}PO(){return this.#g8}k$(t){this.#E$=t}O$(){if(this.#E$)return this.#E$;if(this.#I$.length)return this.#I$[0];throw new Error("no first layout")}L$(t){return this.#C$.get(t.toLowerCase())||null}N$(t){return this.#P$.get(t)||null}B$(t){return t=Cr.Rr(Math.floor(t),0,this.#I$.length-1),this.#I$[t]}zk(t){return"number"==typeof t?this.B$(t):this.L$(t.toString())}qk(){return this.#I$}IY(t){this.#R$=t}Vk(){return this.#R$}W$(t){if(this.#A$.includes(t))throw new Error("layout already running");this.#A$.push(t)}V$(t){const s=this.#A$.indexOf(t);if(-1===s)throw new Error("layout not running");this.#A$.splice(s,1)}*j$(){this.#R$&&(yield this.#R$),this.#A$.length&&(yield*this.#A$)}H$(t){return this.#R$===t||this.#A$.includes(t)}h$(t){if(t)this.#F$++;else{if(this.#F$<=0)throw new Error("already unset");this.#F$--}}P5(){return 0<this.#F$}$k(t){this.#D$=t}kY(){this.#D$=null}Yk(){return!!this.#D$}U$(){return this.#D$}z$(){const t=this.Vk();t&&t.XX()}J$(){const t=this.Vk();t&&t.JX()}}}{const Pr=self.Vs,Rr=new RegExp("<(.+?)>","g");Pr.q$=class extends Pr.Mr{constructor(t){super(),this.Pf=t,this.X$=Pr.Tr(Pr.Y$),this.$$=null,this.K$=[],this.Z$=new Map,this.Q$=new Map,this.tK=new Map,this.sK=[],this.iK=[],this.eK=[],this.hK=!1,this.rK=!1,this.nK=!1,this.oK=()=>this.aK(),this.lK=()=>this.uK(),this.cK=()=>this.fK(),this.dK=()=>this.pK(),this.mK=t=>this.gK(t.fW),this.yK=t=>this.SK(),this.wK=t=>this.bK(),this.MK=t=>this.vK(),this.TK=[],this.xK=0}Gr(){this.GK(),this.oK=null,this.lK=null,this.cK=null,this.dK=null,this.mK=null,this.wK=null;for(const t of this.K$)t.oV(),t.Gr();Pr.Kn(this.K$),this.K$=null,this.X$.Gr(),this.X$=null,Pr.Kn(this.sK),this.sK=null,Pr.Kn(this.iK),this.iK=null,Pr.Kn(this.eK),this.eK=null,this.Z$.clear(),this.Z$=null,this.Q$.clear(),this.Q$=null,this.tK.clear(),this.tK=null,Pr.Kn(this.TK),this.TK=null,this.Pf=null}_K(){const t=this.Pf.a0();t.addEventListener("pretick",this.oK),t.addEventListener("tick2",this.lK),t.addEventListener("beforelayoutchange",this.cK),t.addEventListener("layoutchange",this.dK),t.addEventListener("instancedestroy",this.mK),t.addEventListener("beforeload",this.yK),t.addEventListener("afterload",this.wK),t.addEventListener("afterlayoutstart",this.MK)}GK(){const t=this.Pf.a0();t.removeEventListener("pretick",this.oK),t.removeEventListener("tick2",this.lK),t.removeEventListener("beforelayoutchange",this.cK),t.removeEventListener("layoutchange",this.dK),t.removeEventListener("instancedestroy",this.mK),t.removeEventListener("beforeload",this.yK),t.removeEventListener("afterload",this.wK),t.removeEventListener("afterlayoutstart",this.MK)}BT(t){this.X$.Fc(t);const s=Pr.CK.IK(t,this);this.Fc(s),this.PK(s),this.tK.set(s.Mf(),0)}RK(t){const s=this.AK(),i=t.PB(),e=s.oi(i),h=Pr.CK.RK(i+":"+this.tK.get(i),e,this);return this.EK(i),this.Fc(h),h}EK(t){this.tK.set(t,this.tK.get(t)+1)}FK(){for(const t of this.K$)if(!t.DK()){const s=t.PB();this.EK(s)}}kK(){for(const t of this.tK.keys())this.tK.set(t,0)}Fc(t){this.K$.push(t),this.Z$.set(t.Mf().toLowerCase(),t)}V0(t){t.LK(),t.DK()||(Pr.no(this.K$,t),Pr.no(this.sK,t),Pr.no(this.iK,t),Pr.no(this.eK,t),this.Z$.delete(t.Mf().toLowerCase()),this.NK(t),t.rV())||t.Gr()}QB(t){this.Pf.QB(t,this.$$,null)}PO(){return this.Pf}AK(){return this.X$}BK(t){this.$$=t}WK(){return this.$$}*VK(){for(const t of this.K$)yield t}*jK(){for(const t of this.iK)yield t}HK(t,s){this.Q$.has(t)||this.Q$.set(t,new Set),this.Q$.get(t).add(s)}PK(t){for(const s of t.UK())this.HK(s,t)}NK(t){for(const[s,i]of this.Q$.entries())i.has(t)&&(i.delete(t),0===i.size)&&this.Q$.delete(s)}zK(t){if(this.Q$.has(t))return this.Q$.get(t)}JK(t,s){if(s)for(const i of this.K$){const e=s.every(t=>i.qK(t.fW,t.trackId));if(e&&i.Mf().includes(t.Mf()))return i}}XK(t){return this.Z$.get(t.toLowerCase())||null}YK(t){for(const s of this.sK)if(s.Mf()===t)return s;for(const i of this.iK)if(i.Mf()===t)return i;return null}*$K(i){if(Rr.test(i)){Rr.lastIndex=0;let t,s=new Set;do{if(t=Rr.exec(i)){const e=t[1].split(",");for(const h of e)s.add(h)}}while(t);for(const r of s.values()){const n=this.XK(r);n&&(yield n)}s.clear()}else{const t=this.XK(i);t&&(yield t)}}*KK(t){for(const s of this.K$)s.lV(t)&&(yield s)}ZK(t){this.sK.includes(t)||this.sK.push(t),this.QK()}tZ(t){Pr.no(this.iK,t),this.sZ()}iZ(t){this.iK.includes(t)?(t.eZ(!0),t.hZ(!1),t.rZ(!1)):(t.eZ(!1),t.hZ(!0),t.rZ(!1),this.sK.includes(t)||this.sK.push(t)),this.QK()}nZ(t){t.eZ(!1),t.hZ(!1),t.oZ(),Pr.no(this.sK,t),this.sZ()}aZ(t){t.eZ(!1),t.hZ(!1),this.iK.includes(t)&&(t.rZ(!0),this.eK.push(t),Pr.no(this.iK,t)),this.sK.includes(t)&&t.rZ(!0)}lZ(t){t.eZ(!1),t.hZ(!1),t.rZ(!1),t.yV(1),Pr.no(this.iK,t)}uZ(t){this.aZ(t),t.oZ()}aK(){if(!this.PO().LY()&&this.hK&&!this.rK){for(this.nK=!0;this.sK.length;){const t=this.sK.pop();(t.cZ()?(t.fZ(),this.eK):(t.dZ(),this.iK)).push(t),0!==t.pZ()&&(this.xK=1)}const s=this.Pf.mZ(),i=this.Pf.gZ(),e=this.Pf.Sk();for(let t=this.iK.length-1;0<=t;t--){const h=this.iK[t];h&&h.yZ(s,e,i)}this.nK=!1,0!==this.xK&&this.PO().gO()}}uK(){if(!this.PO().LY()&&this.hK&&!this.rK){let i;for(let t=0,s=this.eK.length;t<s;t++){const e=this.eK[t];i=i||new Set,e.LK(),this.SZ(e),i.add(e)}if(i){Pr.uo(this.eK,i);for(let t=this.xK=0,s=this.iK.length;t<s;t++)if(0!==this.iK[t].pZ()){this.xK=1;break}}this.sZ()}}SZ(t){t.rV()||t.wZ()&&t.bZ()&&t.MZ()&&t.vZ()}QK(){this.hK||(this.hK=!0)}sZ(){this.eK.length||this.iK.length||this.sK.length||this.nK||(this.hK=!1)}fK(){for(this.rK=!0;this.sK.length;)this.nZ(this.sK.pop());const t=new Set;for(const s of this.iK){const i=s.fK();i&&(s.LK(),t.add(s))}Pr.uo(this.iK,t),t.clear();for(const e of this.eK){const h=e.fK();h&&(e.LK(),t.add(e))}Pr.uo(this.eK,t),this.sZ();for(const r of this.K$)r.TZ()}pK(){this.rK=!1}gK(t){const s=t.fB(),i=this.zK(s);if(i)if(this.Pf.LY())this.TK.push(t);else for(const e of i)e.DK()||(e.rV()?this.V0(e):e.wZ()||(this.SZ(e),this.V0(e)))}SK(){for(const t of this.sK.map(t=>t))this.SZ(t),this.V0(t);for(const s of this.iK.map(t=>t))this.SZ(s),this.V0(s)}bK(){for(const t of this.TK)this.gK(t);Pr.Kn(this.TK);for(const s of this.K$)s.bK()}vK(){const t=this.Pf.Uk(),s=t.Vk();if(s)for(const i of this.K$){const e=i.xZ();e&&s.Mf()===e&&this.iZ(i)}}iX(){return{timelinesJson:this.GZ(),scheduledTimelinesJson:this._Z(),playingTimelinesJson:this.IZ(),markedForRemovalTimelinesJson:this.CZ(),hasRuntimeListeners:this.hK,changingLayout:this.rK,isTickingTimelines:this.nK}}eX(t){t&&(this.kK(),this.PZ(t.timelinesJson),this.RZ(t.scheduledTimelinesJson),this.AZ(t.playingTimelinesJson),this.EZ(t.markedForRemovalTimelinesJson),this.hK=!t.hasRuntimeListeners,this.rK=!!t.changingLayout,this.nK=!!t.isTickingTimelines,this.FK(),this.QK(),this.sZ())}GZ(){return this.K$.map(t=>t.iX())}PZ(t){for(const s of t){let t=this.XK(s.name);if(t)t.eX(s);else{const i=this.FZ(s);if(!i)continue;const e=this.XK(i);(t=this.RK(e)).eX(s)}t.DZ()||this.V0(t)}}FZ(t){const s=t.name,i=s.split(":");return i&&2===i.length?i[0]:null}_Z(){return this.kZ(this.sK)}RZ(t){this.OZ(t,this.sK)}IZ(){return this.kZ(this.iK)}AZ(t){this.OZ(t,this.iK)}CZ(){return this.kZ(this.eK)}EZ(t){this.OZ(t,this.eK)}LZ(t,s){if(s)for(const i of s)if(i===t.Mf())return!0;return!1}kZ(t){return t.map(t=>t.Mf())}OZ(t,s){const i=new Set;for(const e of s)this.LZ(e,t)||i.add(e);if(Pr.uo(s,i),t)for(const h of t){const r=this.XK(h);if(r){const n=s.find((s=>t=>t.Mf()===s)(h));n||s.push(r)}}}}}{const Ar=self.Vs,Er=[0,0],Fr=[0,0],Dr=[0,0],kr=[0,0,0,0,0],Or=new Array(4),Lr=[{x:0,y:0,t:0,At:0},{x:0,y:0,t:0,At:0},{x:0,y:0,t:0,At:0}],Nr={x:0,y:0,t:0,At:0};Ar.NZ=class{constructor(t,s){this.BZ=!1,this.WZ=t,this.VZ=[];let i=null;if(i=s?this.WZ.jZ(s):Ar.first(this.WZ.HZ())){const e=i.OV("offsetX"),h=i.OV("offsetY");if(e&&h){this.UZ=e,this.zZ=h;const r=e.JZ(),n=h.JZ();for(let t=1,s=Math.min(r.length,n.length);t<s;++t){const o=r[t],a=(o.qZ(),o.XZ()),l=n[t],u=(l.qZ(),l.XZ());a&&"cubic-bezier"===a.YZ()&&u&&"cubic-bezier"===u.YZ()?this.VZ.push(Ar.Tr(Ar.$Z,a,u,o,l,this.VZ.length)):(a&&"line"===a.YZ()&&u&&u.YZ(),this.VZ.push(Ar.Tr(Ar.KZ,o,l,this.VZ.length)))}this.BZ=!0}}}Gr(){for(const t of this.VZ)t.Gr();Ar.Kn(this.VZ),this.VZ=null,this.WZ=null,this.UZ=null,this.zZ=null}ZZ(){return this.BZ}QZ(){return this.VZ}tQ(t){const s="relative"===this.UZ.sQ()?t.KM():0,i="relative"===this.zZ.sQ()?t.tv():0;for(const e of this.VZ)e.tQ(s,i)}By(s,i,t){let e=NaN,h=this.VZ.length;for(let t=0;t<h;t++){const r=this.VZ[t];if("cubic-bezier"===r.Kx()){const n=r.By(s,i);(isNaN(e)||n[3]<e)&&(e=n[3],Dr[0]=n[2],Dr[1]=r.uD())}}return Dr}iQ(s,i,t){const e=t.eQ;Ar.we(e[0])||(e[0]=0),Ar.we(e[1])||(e[1]=1);let h=NaN,r=this.VZ.length;for(let t=0;t<r;t++){const n=this.VZ[t];if("cubic-bezier"===n.Kx()){const o=n.hQ(s,i,e);(isNaN(h)||o[3]<h)&&(h=o[3],Dr[0]=o[2],Dr[1]=n.uD())}}return Dr}rQ(t,s){return this.VZ[s].rQ(t)}nQ(t,s){return this.VZ[s].nQ(t)}},Ar.$Z=class{constructor(t,s,i,e,h){this.Ay=h;const r=t.oQ("cubic-bezier"),n=i.oQ("cubic-bezier"),o=s.oQ("cubic-bezier"),a=e.oQ("cubic-bezier");this.aQ=t.lQ(),this.uQ=s.lQ(),this.cQ=t.lQ()+r.fQ(),this.dQ=s.lQ()+o.fQ(),this.pQ=i.lQ()+n.mQ(),this.gQ=e.lQ()+a.mQ(),this.yQ=i.lQ(),this.SQ=e.lQ(),this.wQ=0,this.bQ=0,this.MQ=0,this.vQ=0,this.TQ=0,this.xQ=0,this.GQ=0,this._Q=0,this.IQ=0,this.CQ=0,this.PQ=0,this.RQ=0,this.AQ=0,this.EQ=0,this.FQ=0,this.DQ=0,this.kQ=0,this.OQ=0,this.LQ=0,this.NQ=0,this.BQ=NaN,this.BZ=!1,this.WQ=100,this.VQ=new Array(this.WQ+1),this.VQ[0]=0,this.jQ=0,this.HQ=[],this.UQ=[];for(let t=0;t<100;t++)this.UQ.push({x:0,y:0,t:0,At:0});this.zQ()}Gr(){Ar.Kn(this.VQ),this.VQ=null,Ar.Kn(this.HQ),this.HQ=null,Ar.Kn(this.UQ),this.UQ=null}Kx(){return"cubic-bezier"}uD(){return this.Ay}JQ(){return Math.floor(this.jQ/25)}qQ(){return 1/this.JQ()}tQ(t,s){this.XQ=t,this.YQ=s,this.VQ=new Array(this.WQ+1),this.VQ[0]=0,this.zQ(),this.wQ=this.aQ+this.XQ,this.bQ=this.uQ+this.YQ,this.MQ=this.cQ+this.XQ,this.vQ=this.dQ+this.YQ,this.TQ=this.pQ+this.XQ,this.xQ=this.gQ+this.YQ,this.GQ=this.yQ+this.XQ,this._Q=this.SQ+this.YQ,this.IQ=3*(this.MQ-this.wQ),this.CQ=3*(this.vQ-this.bQ),this.PQ=3*(this.TQ-this.MQ),this.RQ=3*(this.xQ-this.vQ),this.AQ=3*(this.GQ-this.TQ),this.EQ=3*(this._Q-this.xQ),this.FQ=3*(this.MQ-this.wQ),this.DQ=3*(this.wQ+this.TQ-2*this.MQ),this.kQ=this.GQ-this.wQ+3*(this.MQ-this.TQ),this.OQ=3*(this.vQ-this.bQ),this.LQ=3*(this.bQ+this.xQ-2*this.vQ),this.NQ=this._Q-this.bQ+3*(this.vQ-this.xQ)}Map(t){if(!this.BZ)return NaN;const s=this.$Q(t);return Fr[0]=this.KQ(s),Fr[1]=this.ZQ(s),Fr}By(t,s){const i=this.QQ(100),e=this.ttt(t,s,i),h=this.stt(t,s,i,e);return kr[0]=h.x,kr[1]=h.y,kr[2]=h.t,kr[3]=h.At,kr}hQ(t,s,i){const e=this.QQ(100),h=this.itt(t,s,e,i),r=this.stt(t,s,e,h);return kr[0]=r.x,kr[1]=r.y,kr[2]=r.t,kr[3]=r.At,kr}rQ(t){const s=1-t,i=s*s,e=2*s*t,h=t*t,r=i*this.IQ+e*this.PQ+h*this.AQ,n=i*this.CQ+e*this.RQ+h*this.EQ,o=Ar.Dr(r,n);return Er[0]=r/o,Er[1]=n/o,Er}nQ(t){const s=1-t,i=s*s,e=2*s*t,h=t*t,r=i*this.IQ+e*this.PQ+h*this.AQ,n=i*this.CQ+e*this.RQ+h*this.EQ;return Math.atan2(n,r)}$Q(h){if(this.BZ){let t=h*this.VQ[this.WQ],s=0,i=this.WQ,e=0;for(;s<i;)e=s+((i-s)/2|0),this.VQ[e]<t?s=e+1:i=e;this.VQ[e]>t&&e--;const r=this.VQ[e];return r===t?e/this.WQ:(e+(t-r)/(this.VQ[e+1]-r))/this.WQ}}KQ(t){return this.BZ?self.Oc.Kc("cubicbezier")(t,this.aQ+this.XQ,this.cQ+this.XQ,this.pQ+this.XQ,this.yQ+this.XQ):NaN}ZQ(t){return this.BZ?self.Oc.Kc("cubicbezier")(t,this.uQ+this.YQ,this.dQ+this.YQ,this.gQ+this.YQ,this.SQ+this.YQ):NaN}QQ(s){if(!(this.HQ.length>=(s=s||100))){this.HQ=new Array(s),s++;for(let t=0;t<s-1;t++){const i=t/(s-1),e=i**2,h=i**3,r=this.FQ*i,n=this.DQ*e,o=this.kQ*h,a=this.OQ*i,l=this.LQ*e,u=this.NQ*h,c=this.wQ+r+n+o,f=this.bQ+a+l+u;this.UQ[t].x=c,this.UQ[t].y=f,this.UQ[t].t=i,this.UQ[t].At=0,this.HQ[t]=this.UQ[t]}}return this.HQ}ttt(s,i,e,t=0,h=Number.MAX_SAFE_INTEGER){let r=0;if(isNaN(this.BQ))for(let t=0;t<100;t++){const n=e[t],o=n.x-s,a=n.y-i;n.At=o*o+a*a,n.At<h&&(h=n.At,r=t)}else{for(let t=this.BQ;t<this.BQ+5&&!(t>=e.length);t++){const l=e[t],u=l.x-s,c=l.y-i;l.At=u*u+c*c,l.At<h&&(h=l.At,r=t)}for(let t=this.BQ;t>this.BQ-5&&!(t<0);t--){const f=e[t],d=f.x-s,p=f.y-i;f.At=d*d+p*p,f.At<h&&(h=f.At,r=t)}}return this.BQ=r}itt(s,i,e,h,r=Number.MAX_SAFE_INTEGER){let n=0;if(isNaN(this.BQ))for(let t=0;t<100;t++){const o=e[t],a=o.x-s,l=o.y-i;o.At=a*a+l*l,o.t>=h[0]&&o.t<=h[1]&&o.At<r&&(r=o.At,n=t)}else{for(let t=this.BQ;t<this.BQ+5&&!(t>=e.length);t++){const u=e[t],c=u.x-s,f=u.y-i;u.At=c*c+f*f,u.t>=h[0]&&u.t<=h[1]&&u.At<r&&(r=u.At,n=t)}for(let t=this.BQ;t>this.BQ-5&&!(t<0);t--){const d=e[t],p=d.x-s,m=d.y-i;d.At=p*p+m*m,d.t>=h[0]&&d.t<=h[1]&&d.At<r&&(r=d.At,n=t)}}return this.BQ=n}stt(n,o,a,l){let u=a[l],t=1,c=Number.MAX_SAFE_INTEGER;t:do{let t=a.length,s=0===l?0:l-1,i=l===t-1?t-1:l+1,e=a[s].t,h=a[i].t,r=(h-e)/4;if(r<.001)break;Or[0]=a[s];for(let t=1;t<=2;t++){const f=e+t*r,d=f**2,p=f**3,m=this.FQ*f,g=this.DQ*d,y=this.kQ*p,S=this.OQ*f,w=this.LQ*d,b=this.NQ*p,M=this.wQ+m+g+y,v=this.bQ+S+w+b,T=M-n,x=v-o,G=T*T+x*x;if(G<c){c=G,l=t,Nr.x=M,Nr.y=v,Nr.t=f,Nr.At=G,u=Nr;break t}const _=Lr[t-1];_.x=M,_.y=v,_.t=f,_.At=G,Or[t]=_}Or[3]=a[i],a=Or}while(t++<20);return u}zQ(){this.BZ=!0;let s=this.KQ(0),i=this.ZQ(0),e=0;for(let t=1;t<=this.WQ;t++){const h=this.KQ(.01*t),r=this.ZQ(.01*t),n=s-h,o=i-r;e+=Ar.Dr(n,o),this.VQ[t]=e,s=h,i=r}this.jQ=e}},Ar.KZ=class{constructor(t,s,i){this.Ay=i,this.ett=t.lQ(),this.htt=s.lQ(),this.XQ=0,this.YQ=0}Gr(){}Kx(){return"line"}uD(){return this.Ay}tQ(t,s){this.XQ=t,this.YQ=s}KM(){return this.ett+this.XQ}tv(){return this.htt+this.YQ}}}{const b=self.Vs;b.CK=class extends b.Mr{constructor(t,s,i){super(),this.Pf=i.PO(),this.ntt=i,this.ott=s,this.Cr=t,this.att=[],this.ltt=0,this.utt=null,this.ctt=0,this.ftt(),this.dtt=null,this.ptt=null,this.mtt=0,this.gtt=0,this.ytt=1,this.Stt=0,this.wtt=1,this.btt=!1,this.Mtt=!1,this.vtt=!1,this.Ttt=!0,this.xtt=!1,this.Gtt=!1,this._tt=-1,this.Itt=!1,this.Ctt=!1,this.Ptt=!1,this.Rtt=!1,this.Att=NaN,this.Ett=[""],this.Ftt="",this.Dtt=!1,this.xK=0,this.ktt=0,this.Ott=null}static IK(t,s){const i=s.AK(),e=i.Ltt(),h=i.oi(t[e]),r=b.Tr(b.CK,t[e],h,s);return r.Ntt(!0),r}static RK(t,s,i){return b.Tr(b.CK,t,s,i)}Gr(){if(!this.rV()){const t=this.Pf.a0();this.ntt.nZ(this),this.ntt.uZ(this);for(const s of this.att)s.Gr();b.Kn(this.att),this.att=null,this.Pf=null,this.ntt=null,this.ott=null,this.xtt=!0,this.dtt=null,this.ptt=null,this.Btt(t)}}Btt(t){const s=b.Tr(b.Event,"timelinestatereleased");s.Wtt=this,t.dispatchEvent(s)}Kx(){return 0}ftt(){for(const t of this.ott.jtt().Vtt())this.ltt=this.att.push(b.Htt.BT(this,t))}Utt(){return this.ntt}PO(){return this.Pf}HZ(){return this.att}ztt(e,h,r,n){if(this.ktt){let i;for(let s=0;s<this.att.length;s++){let t=this.att[s];if(e===t.RV()){const o=t.OV(r);o&&h.constructor===o.Jtt().constructor&&o.sQ()===n.sQ()&&(i=i||[]).push(o)}}return i}}DZ(){return!!this.att.length}jZ(t){for(const s of this.att)if(b.Gh(s.DV(),t))return s;return null}qtt(t){for(const s of this.att)if(!s.Xtt()&&b.Gh(s.Mf(),t))return s;return null}_8(t){this.Cr=t}Mf(){return this.Cr}Ytt(){return this.ott}PB(){return this.ott.Mf()}fV(){return this.ott.fV()}cV(t){this.ott.cV(t)}$tt(){return this.ott.$tt()}Ktt(t){this.ott.Ktt(t)}Ztt(){return this.ott.Ztt()}Qtt(t){this.ott.Qtt(t)}sQ(){return this.ott.sQ()}tst(t){this.ott.sQ(t)}PV(t){for(const s of this.HZ())s.PV(t)}pV(){return this.ott.pV()}dV(t){return this.ott.dV(t)}gV(){return this.ott.gV()}mV(t){return this.ott.mV(t)}GW(){return this.ott.GW()}sst(t){return this.ott.sst(t)}yV(t){return this.ytt=t}SV(){return this.ytt}xZ(){return this.ott.xZ()}ist(){return this.ott.ist()}est(){return this.ott.est()}hst(){return this.Stt}rst(){return!this.IsPlaying()||0<this.ytt}bV(){return this.dtt||(this.dtt=new Promise(t=>{this.ptt=t})),this.dtt}oZ(){this.dtt&&(this.ptt(),this.dtt=null,this.ptt=null)}nst(t){this.Ett=b.CK.ost(t),this.Dtt=!0}wV(){return this.Ett}ast(){return this.Dtt&&(this.Ftt=this.Ett.join(" ")),this.Dtt=!1,this.Ftt}lV(t){if(!this.Ett)return!1;if(!this.Ett.length)return!1;const s=b.CK.ost(t);return!!s&&!!s.length&&s.every(b.CK.lst,this)}ust(){b.XY.cst&&this.constructor===b.CK&&(b.XY.cst.JY.fst(this),this.ntt.QB(b.XY.cst.JY.dst),this.ntt.QB(b.XY.cst.JY.pst),this.ntt.QB(b.XY.cst.JY.mst),this.ntt.QB(b.XY.cst.JY.gst),b.XY.cst.JY.yst())}Sst(){this._tt=this.Pf.wst()}vZ(){this.Ptt||(this.Ptt=!0,b.XY.cst&&this.constructor===b.CK&&(b.XY.cst.JY.fst(this),this.ntt.QB(b.XY.cst.JY.bst),this.ntt.QB(b.XY.cst.JY.Mst),this.ntt.QB(b.XY.cst.JY.vst),this.ntt.QB(b.XY.cst.JY.Tst),b.XY.cst.JY.yst()))}eZ(t){this.btt=t}xst(){return this._tt===this.Pf.wst()}IsPlaying(t=!1){return!!this.xst()||!(!this.Gst()||t)||this.btt}_st(){return this.IsPlaying(!0)}vV(){return this.Ist()}Ist(){return!(this.rV()||this.Gst()||this._st()||this.bZ())}hZ(t){this.Mtt=t}Gst(){return this.Mtt}Cst(t){this.Ttt=t;const s=this.UE();(s<=0||s>=this.fV())&&(this.Ttt=!0)}bZ(){return this.Ttt}rV(){return this.xtt}rZ(t){this.Gtt=t}cZ(){return this.Gtt}Pst(t){this.Itt=t}Rst(){return this.Itt}Ntt(t){this.Ctt=!!t}DK(){return this.Ctt}MZ(){return this.vtt}UE(){return this.mtt}uV(t){const s=this.UE();this.Ast(t),this.Cst(!1),this.bZ()||this.Pst(!0),!this._st()&&!this.Gst()&&this.vtt||(this._st()||this.Gst()||this.vtt?this._st()?this.oV():this.Gst()&&(this.ntt.nZ(this),this.Est()):this.Est()),this.Fst(),this.Dst(this.UE(),!1,!0,!0,s),this.kst(),this.xK&&this.PO().gO(),this.Ost()}Ast(t){(t=b.we(t)?t:this.fV())<0?this.mtt=0:t>=this.fV()?this.mtt=this.fV():this.mtt=t}Lst(t){(t=b.we(t)?t:this.fV())<0?this.mtt=0:t>=this.fV()?this.mtt=this.fV():this.mtt=t;for(const s of this.att)s.Nst()}Ost(){b.XY.cst&&this.constructor===b.CK&&(b.XY.cst.JY.fst(this),this.ntt.QB(b.XY.cst.JY.Bst),this.ntt.QB(b.XY.cst.JY.Wst),this.ntt.QB(b.XY.cst.JY.Vst),b.XY.cst.JY.yst())}jst(){if(!this.pV())if(this.gV()&&1===this.Stt){if(this.rst()){if(this.UE()>=this.fV())return!1}else if(this.UE()<=0)return!1}else if(!this.pV()&&!this.gV())if(this.rst()){if(this.UE()>=this.fV())return!1}else if(this.UE()<=0)return!1;return!0}aV(){this.rV()||this.jst()&&this.Play(!0)}Play(t=!1){return!this.rV()&&!this.Gst()&&(this._st()&&this.xst()?this.Hst():!this._st()&&!!(this.bZ()||t||this.Rst())&&this.Ust())}Hst(){return this.Pst(!1),this.ntt.tZ(this),this.ntt.iZ(this),this.bV(),!0}Ust(){return this.Pst(!1),this.ntt.iZ(this),this.bV(),!0}oV(t=!1){this.rV()||(this.Cst(t),this.ntt.aZ(this),this.bZ()&&this.oZ())}P0(t=!0,s=!1){if(!this.rV()){if(!this._st()&&this.Gst())return this.ntt.nZ(this);if(!this.bZ()){this.oV(!0),this.rst()?this.Ast(0):this.Ast(this.fV());const i=this.UE();this.Fst(),s?this.zst(i):this.Dst(i,!1,!1,!0),t&&this.Ost(),this.kst(),this.xK&&t&&this.PO().gO()}}}Jst(){this.P0(!1,!0)}zst(t){this.Dst(t,!1,!1,!0,NaN,!1,!0)}fK(){if(!this.rV()){if(!this.PO().LY()&&this.qst())return!1;this.ntt.lZ(this),this.PO().LY()||this.Jst()}return!0}Est(){this.dZ(!0)}fZ(){this.dZ(!1,!0),this.eZ(!1),this.hZ(!1)}dZ(t=!1,s=!1){if(!this.cZ()||s){if(t){this.Ptt=!1,this.vtt=!0,this.Rtt=!0,this.Fst();for(const i of this.att)i.dZ()}else if(this.eZ(!0),this.hZ(!1),this.ust(),this.bZ()){this._tt=-1,0!==this.Stt&&(this.ytt=Math.abs(this.ytt)),this.Stt=0,this.wtt=1,this.Ttt=!1,this.Ptt=!1,this.vtt=!0,this.Rtt=!0,this.rst()?this.Ast(0):this.Ast(this.fV()),this.Fst();for(const e of this.att)e.dZ()}else{this.Rtt=!0,this.Ptt=!1,this.Fst();for(const h of this.att)h.Xst()}this.kst()}}pZ(){return this.xK}Fst(){this.ktt=0;for(const t of this.att)t.OP()&&(this.ktt=1)}kst(){this.xK=0;for(const t of this.att)t.Yst(),0===this.xK&&1===t.pZ()&&(this.xK=1),this.utt||1!==t.$st()||(this.utt||(this.utt=[]),this.ctt=this.utt.push(t))}yZ(t,s,i){if(this.est()){if(0===t&&0===this.Att)return;this.Att=t,t=i}else{if(0===i&&0===this.Att)return;t=this.Att=i,s=1}const e=this.mtt+this.gtt,h=t*s*this.ytt,r=e+h,n=this.ott.Kst;r<0?(this.mtt=0,this.gtt=-r):n<=r?(this.mtt=n,this.gtt=this.mtt-r):(this.mtt=r,this.gtt=0);let o=!1,a=!1,l=this.pV(),u=this.gV();l||u?l&&!u?0<this.ytt?this.mtt>=n&&(this.Lst(0),a=!0):this.mtt<=0&&(this.Lst(n),a=!0):!l&&u?0<this.ytt?this.mtt>=n&&(this.Ast(n),this.yV(-1*this.SV()),a=!0,1===this.Stt?this.wtt<this.GW()?(this.wtt++,this.Stt=0):o=!0:0===this.Stt&&(this.Stt=1)):this.mtt<=0&&(this.Ast(0),this.yV(-1*this.SV()),a=!0,1===this.Stt?this.wtt<this.GW()?(this.wtt++,this.Stt=0):o=!0:0===this.Stt&&(this.Stt=1)):l&&u&&(0<this.ytt?this.mtt>=n&&(this.Ast(n),this.yV(-1*this.SV()),a=!0,this.Stt++,b.wrap(this.Stt,0,2)):this.mtt<=0&&(this.Ast(0),this.yV(-1*this.SV()),a=!0,this.Stt++,b.wrap(this.Stt,0,2))):0<this.ytt?this.mtt>=n&&(this.wtt<this.GW()?(this.wtt++,this.Lst(0),a=!0):(this.Ast(n),o=!0)):this.mtt<=0&&(this.wtt<this.GW()?(this.wtt++,this.Lst(n),a=!0):(this.Ast(0),o=!0));let c,f=this.ltt;if(o){for(c=0;c<f;c++)this.att[c].Zst();this.oV(!0),this.Sst()}else{const d=this.ctt;for(c=0;c<d;c++)this.utt[c].Qst();if(1===this.ktt)for(c=0;c<f;c++){const p=this.att[c],m=p.tit(),g=this.mtt-m,y=e-m;g<0&&0<y?(this.mtt=m<0?0:n<=m?n:m,p.uf(m,!0,!1,a,this.Rtt,!1)):p.uf(this.mtt,!0,!1,a,this.Rtt,!1)}else for(c=0;c<f;c++)this.att[c].uf(this.mtt,!0,!1,a,this.Rtt,!1);for(c=0;c<d;c++)this.utt[c].sit();this.Rtt&&(this.Rtt=!1)}}Dst(s,i=!1,e=!1,h=!1,r=NaN,t=!1,n=!1){for(const o of this.att)o.Qst();for(const a of this.att){let t=s;if("number"==typeof r&&!isNaN(r)){const l=this.UE(),u=l-a.tit(),c=r-a.tit();u<0&&0<c&&(t=a.tit(),this.Ast(t))}a.uf(t,i,e,h,this.Rtt,n)}for(const f of this.att)f.sit();this.Rtt&&t&&(this.Rtt=!1)}iit(){const t=this.ott.jtt().eit(),s=b.Htt.BT(this,t);return this.ltt=this.att.push(s),s}LK(){if(!this.rV())for(const t of this.att)t.hit()}TZ(){for(const t of this.att)t.TZ()}rit(){for(const t of this.att)t.nit()}oit(t,s,i){if(s){if("number"==typeof i&&0<=i){const e=this.att[i];return e?(e.ait(s),void this.ntt.HK(s.fB(),this)):void 0}for(const h of this.att)if(h.Xtt())if(t){if(h.DV()===t){h.ait(s),this.ntt.HK(s.fB(),this);break}}else if(!h.lit()){h.ait(s),this.ntt.HK(s.fB(),this);break}}}qK(t,s){for(const i of this.att)if(i.Xtt())if(s){if(s===i.DV()&&t===i.RV())return!0}else if(t===i.RV())return!0;return!1}wZ(){return this.att.some(t=>!t.Xtt()||t.uit())}qst(){return this.att.some(t=>{if(t.Xtt()){if(!t.uit())return!1;const s=t.fB();return!!s&&s.gJ()}return!1})}OV(t){for(const s of this.HZ())for(const i of s.cit())if(i.dit()===t)return i}pit(t){for(const s of this.att)if(t===s.RV())return s;return null}mit(t){let s=t?t.split(" "):[],i=new Set(s.map(t=>t.toLowerCase().trim()));s=[...i.values()];for(const e of this.HZ())for(const h of e.git()){const r=s.every(t=>h.yit(t));if(r)return h}}UK(){const t=[];for(const s of this.HZ())t.push(s.fB());return t.filter(t=>t)}bK(){for(const t of this.HZ())t.bK()}iX(){return{tracksJson:this.Sit(),name:this.Cr,playheadTime:this.UE(),playbackRate:this.ytt,pingPongState:this.Stt,currentRepeatCount:this.wtt,isPlaying:this.btt,isScheduled:this.Mtt,initialStateSet:this.vtt,finishedTriggers:this.Ptt,complete:this.Ttt,released:this.xtt,markedForRemoval:this.Gtt,completedTick:this._tt,implicitPause:this.Itt,isTemplate:this.Ctt,tags:this.Ett.join(" "),stringTags:this.Ftt,tagsChanged:this.Dtt,firstTick:this.Rtt}}eX(t){t&&(this.wit(t.tracksJson),this.Cr=t.name,this.mtt=t.playheadTime,this.ytt=t.playbackRate,this.Stt=t.pingPongState,this.wtt=t.currentRepeatCount,this.btt=!!t.isPlaying,this.Mtt=!!t.isScheduled,this.vtt=!!t.initialStateSet,this.Ptt=!!t.hasOwnProperty("finishedTriggers")&&!!t.finishedTriggers,this.Ttt=!!t.complete,this.xtt=!!t.released,this.Gtt=!!t.markedForRemoval,this._tt=t.completedTick,this.Itt=!!t.implicitPause,this.Ctt=!!t.isTemplate,this.Ett=t.tags.split(" "),this.Ftt=t.stringTags,this.Dtt=!!t.tagsChanged,this.Rtt=!!t.firstTick)}Sit(){return this.att.map(t=>t.iX())}wit(t){this.rit(),t.forEach((t,s)=>{const i=this.att[s];i.eX(t)}),this.att.filter(t=>t.uit())}static lst(t){const s=this.wV();return""===t?1===s.length&&""===s[0]:s.map(t=>t.toLowerCase()).includes(t.toLowerCase())}static ost(t){if(b.Ue(t))return t.slice(0);if(b.Pe(t))return t.split(" ");throw new Error("invalid tags")}bit(){return this.Ott||(this.Ott=b.Tr(self.xV,this)),this.Ott}}}{const Br=self.Vs;Br.Htt=class extends Br.Mr{constructor(t,s){super(),this.WZ=t,this.Mit=s,this.vit=s.jtt(),this.Tit=NaN,this.xit=NaN,this.Git=null,this._it=null,this.Iit=!1,this.RP=0<s.tit(),this.Cit=!1,this.Pit=!1,this.Rit=NaN,this.Ait=null,this.Eit=this.Mit.Dit().Fit(),this.kit=[],this.Oit(),this.Lit=0,this.xK=0,this.Nit=0}static BT(t,s){return Br.Tr(Br.Htt,t,s)}Gr(){this.Eit=null;for(const t of this.kit)t.Gr();Br.Kn(this.kit),this.kit=null,this.WZ=null,this.Git=null,this._it=null,this.Mit=null,this.Ait=null}Oit(){for(const t of this.Mit.Wit().Bit())this.kit.push(Br.Vit.BT(this,t))}hit(){for(const t of this.kit)t.hit()}TZ(){for(const t of this.kit)t.TZ();this.Git=null,this._it=null}jit(){return this.WZ}PO(){return this.WZ.PO()}git(){return this.Eit||(this.Eit=this.Mit.Dit().Fit()),this.Eit}cit(){return this.kit}OV(s){for(let t=0;t<this.kit.length;t++){const i=this.kit[t];if(i.dit()===s)return i}}Hit(){this.Git||this.RV()}Uit(){return!!this.Git&&!this.Git.kj()}uit(){if(!this.Xtt())return!1;const t=this.zit(),s=this.PO().hO(t);return!!s&&!s.kj()}fB(){if(this.Xtt()){const t=this.Jit();if(-1!==t)return this.PO().nJ(t)}}qit(){return this.WZ.HZ().indexOf(this)}nit(){this.Git=null,this.Tit=NaN,this._it=null,this.xit=NaN,this.Iit=!0}lit(){return!!this.Git}RV(){if(!this.Iit){if(!this.Git||!this.Uit()){const t=this.zit();this.Git=this.PO().hO(t)}return this.Git}}ait(t){if(this.Iit=!1,this.Git!==t){this.TZ(),this.Git=t,this.xit=t.fB().uD(),this.Tit=t.GB(),this._it=t.lO();for(const s of this.Xit()){const i=s.Yit,e=s.$it,h=i.Kit();switch(h){case"instance-variable":{e.Zit();const r=t.fB(),n=r.Qit(s.name),o=r.tet(n),a=r.iet(n);o===s.name&&a===s.type&&e.eet(n);break}case"behavior":{const l=s.lW,u=this.fB(),c=t.fB(),f=e.cW(c);if(l&&f){const d=l.Mf();u.het(d),c.het(d),e.Zit(),e.ret(f.NJ())}break}}}}}*Xit(){for(const t of this.kit){const s=t.Jtt(),i=this.fB(),e={Yit:t,$it:s};switch(t.Kit()){case"world-instance":e.property=t.dit();break;case"instance-variable":{const h=s.Zit();e.name=i.tet(h),e.type=i.iet(h);break}case"effect":{const r=i.E5(),n=s.net(r);e.oet=n;break}case"behavior":{const o=s.cW(i);e.lW=o;break}case"plugin":e.a5=i.l5()}yield e}}lO(){if(!this._it||!this.Uit()){const t=this.RV();t&&(this._it=t.lO())}return this._it}aet(){return this.Mit}zit(){return isNaN(this.Tit)?this.Mit.zit():this.Tit}let(t){this.Mit.let(t)}Ztt(){return this.Mit.Ztt()}Qtt(t){this.Mit.Qtt(t)}sQ(){return this.Mit.sQ()}DV(){return this.Mit.DV()}tit(){return this.Mit.tit()}uet(){return this.Mit.uet()}cet(t){this.Mit.cet(t)}tst(t){this.Mit.tst(t)}PV(t){for(const s of this.git())s.PV(t);for(const i of this.cit())i.PV(t)}fet(){return this.Mit.fet()}det(t){this.Mit.det(t)}Jit(){return isNaN(this.xit)?this.Mit.Jit():this.xit}pet(t){this.Mit.pet(t)}met(t){this.Mit.met(t)}yet(){const t=this.RV();if(t){const s=t.sW();if(s.wet())return t.sW().yet()}return this.Mit.yet()}bet(t){this.Mit.bet(t)}Met(){const t=this.RV();if(t){const s=t.sW();if(s.wet())return t.sW().Met()}return this.Mit.Met()}Kx(){return this.Mit.Kx()}Mf(){return this.Mit.Mf()}Xtt(){return 0===this.Kx()}vet(){return 1===this.Kx()}Tet(){return 2===this.Kx()}xet(){return this.Lit}pZ(){return this.xK}$st(){return this.Nit}OP(){return this.RP}Nst(){for(const t of this.kit)t.Nst()}dZ(){if(this.Hit(),this.Uit()||!this.Xtt()){const t=this.jit(),s=t.rst(),i=s?0:this.uet();for(const h of this.kit)h.dZ(i),0===this.Lit&&1===h.xet()&&(this.Lit=1),0===this.xK&&1===h.pZ()&&(this.xK=1);this.Nit=0;const e=this.kit.some(t=>t.$st());e&&(this.Nit=1),this.Ait=this.Get(i),this.Cit=!1,this.Pit=!1,this.uf(i),this._et(this.Get(i))}}Xst(){if(this.Hit(),this.Uit()||!this.Xtt()){this.WZ.rst();const t=this.WZ.UE()-this.tit();this.Ait=this.Get(t);for(const s of this.kit)s.Xst(t)}}Zst(){if(!this.jit().bZ()&&(this.Hit(),this.Uit()||!this.Xtt())&&!this.RP){const t=this.WZ.UE(),s=this.tit()+this.uet();s<=t?this.uf(this.uet(),!0,!1,!0,!1,!1,!0):t<=0&&this.uf(0,!0,!1,!0,!1,!1,!0)}}Yst(){for(let t=0,s=this.kit.length;t<s;t++){const i=this.kit[t];i.Yst(),0===this.Lit&&1===i.xet()&&(this.Lit=1),0===this.xK&&1===i.pZ()&&(this.xK=1)}}Qst(){const s=this.kit.length;for(let t=0;t<s;t++)this.kit[t].Qst()}uf(i,t=!1,e=!1,h=!1,s=!1,r=!1,n=!1){this.Git||this.RV();const o=this.Git&&!this.Git.kj(),a=0===this.Mit.Lf;if((o||!a)&&!(r&&a&&this.fB().gJ()||(i-=this.tit())<0)){this.Iet(i,t),this.Cet(i,t,s);for(let t=0,s=this.kit.length;t<s;t++)this.kit[t].uf(i,e,h,n);this.Pet(i,t),0!==this.Lit&&(this._it||(this._it=this.Git.lO()),this._it)&&this._it.R4()}}sit(){const s=this.kit.length;for(let t=0;t<s;t++)this.kit[t].sit()}Iet(t,s){if(s&&this.RP&&!this.Cit){const i=this.jit();if(i.rst()){if(t<0)return}else if(t>this.uet())return;for(const e of this.kit)e.dZ();this.Cit=!0}}Pet(t,s){if(s&&this.RP&&!this.Pit){const i=this.jit();if(i.rst()){if(t>=this.uet()){for(const e of this.kit)e.uf(this.uet(),!1,!0);this.Pit=!0}}else if(t<=0){for(const h of this.kit)h.uf(0,!1,!0);this.Pit=!0}}}Cet(t,s,i){if(!i&&s&&Br.XY.cst){const e=this.jit(),h=this.Ait.qZ(),r=this.Ait.UE(),n=h?h.UE():e.fV();if(t<=r||n<=t)if(this.Ait=this.vit.Ret(t,this.Mit),e.rst())h&&this._et(this.Ait);else{const o=this.Ait.qZ();o&&this._et(o)}}}Get(t){const s=this.vit.Aet(t,this.Mit);return s||this.vit.Ret(t,this.Mit)}_et(t){if(Br.XY.cst){const s=this.jit(),i=s.Utt();Br.XY.cst.JY.fst(s),Br.XY.cst.JY.Eet(t),i.QB(Br.XY.cst.JY.Fet),i.QB(Br.XY.cst.JY._et),Br.XY.cst.JY.yst(s),Br.XY.cst.JY.Det(t)}}ket(){const t=this.Mit.Dit(),s=t.Oet();return s}Let(){const t=this.Mit.Wit(),s=t.Net(),i=Br.Vit.BT(this,s);return this.kit.push(i),i}Bet(t){const s=this.Mit.Dit();s.Wet(t)}Vet(t){for(const s of this.kit)s.Vet(t)}jet(){for(const t of this.kit)t.jet()}Het(){if(this.Hit(),this.Uit()||!this.Xtt())for(const t of this.kit)t.Het()}Uet(){if(this.Hit(),this.Uit()||!this.Xtt()){let t=!1;for(const s of this.kit){const i=s.Uet();!t&&i&&(t=!0)}if(t){const e=this.ket();e.uV(this.jit().UE()),e.PV("noease"),e.det(!0),e.nst("")}}}bK(){isNaN(this.Rit)||this.zet(this.Rit),this.Rit=NaN}iX(){const t=this.RV(),s=t?t.GB():this.zit();return{propertyTracksJson:this.Jet(),lastKeyframeDataItemJson:this.qet(),initialStateOfNestedSet:this.Cit,endStateOfNestedSet:this.Pit,instanceUid:s,cleared:this.Iit}}eX(t){if(t){this.Xet(t.propertyTracksJson),this.Yet(t.lastKeyframeDataItemJson),this.Rit=t.instanceUid,this.Cit=!1,t.hasOwnProperty.initialStateOfNestedSet&&(this.Cit=t.initialStateOfNestedSet),this.Pit=!1,t.hasOwnProperty.endStateOfNestedSet&&(this.Pit=t.endStateOfNestedSet),this.Iit=!!t.hasOwnProperty("cleared")&&t.cleared;for(const s of this.kit)0===this.Lit&&1===s.xet()&&(this.Lit=1),0===this.xK&&1===s.pZ()&&(this.xK=1);this.Nit=0,this.kit.some(t=>t.$st())&&(this.Nit=1)}}qet(){const t=this.Mit.Dit();return t.$et(this.Ait)}Jet(){return this.kit.map(t=>t.iX())}Xet(t){t.forEach((t,s)=>{const i=this.kit[s];i.eX(t)})}zet(t){if(Br.we(t)){const s=this.PO().hO(t);if(s){const i=this.jit();i.oit(this.Mit.DV(),s,this.qit())}}}Yet(t){const s=this.Mit.Dit();this.Ait=s.Ket(t)}}}{const Wr=self.Vs;Wr.Vit=class extends Wr.Mr{constructor(t,s){super(),this.Zet=t,this.Qet=s,this.tht=s.Wit(),this.Lit=0,this.xK=0,this.Nit=0,this.sht=this.Jtt(),this.iht=this.Qet.hht().eht(),this.rht=null,this.nht=null}static BT(t,s){return Wr.Tr(Wr.Vit,t,s)}Gr(){this.Zet=null,this.sht&&(this.sht.Gr(),this.sht=null),this.iht=null,this.Qet=null,this.tht=null}xet(){return this.Lit}pZ(){return this.xK}$st(){return this.Nit}oht(){return!!this.nht}aht(t){this.nht=t}lht(){return this.nht}uht(){return this.Zet}cht(){return this.Qet}Wit(){return this.tht}jit(){return this.Zet.jit()}PO(){return this.Zet.PO()}RV(){return this.Zet.RV()}Jtt(){if(!this.sht){let t=this.Qet.Kit(),s;switch(t){case"behavior":s=new Wr.Vit.fht(this);break;case"effect":s=new Wr.Vit.dht(this),this.xK=1;break;case"instance-variable":s=new Wr.Vit.pht(this);break;case"plugin":s=new Wr.Vit.mht(this),this.xK=1;break;case"world-instance":s=new Wr.Vit.ght(this),this.xK=1,this.Lit=1;break;case"value":s=new Wr.Vit.yht(this);break;case"audio":s=new Wr.Vit.Sht(this)}this.sht=s}return this.sht}Kit(){return this.Qet.Kit()}wht(t){this.Qet.wht(t)}bht(){return this.Qet.Mht()}vht(t){this.Qet.Tht(t)}kV(){return this.Jtt().xht()}dit(){return this.Qet.Ght()}_ht(t){this.Qet.Iht(t)}Cht(){return this.Qet.Kx()}Pht(t){this.Qet.SetType(t)}Rht(){return this.Wit().Aht(this.Qet).Kx()}Eht(){return this.Qet.Eht()}Fht(t){this.Qet.Fht(t)}Dht(){return this.Qet.Dht()}kht(t){this.Qet.kht(t)}fet(){return this.Qet.fet()}det(t){this.Qet.det(t)}Ztt(){return this.Qet.Ztt()}Qtt(t){this.Qet.Qtt(t)}sQ(){return this.Qet.sQ()}tst(t){this.Qet.tst(t)}PV(t){for(const s of this.Oht())s.PV(t)}Lht(){return this.Qet.Lht()}Oht(){return this.iht||(this.iht=this.Qet.hht().eht()),this.iht}JZ(){return this.Qet.hht().JZ()}Nht(t){return this.tht.Nht(t,this.Qet)}Bht(t){return this.tht.Bht(t,this.Qet)}Wht(t){let s=this.tht.Nht(t,this.Qet),i;return i=s?this.tht.Vht(t,this.Qet):(s=this.tht.Bht(t,this.Qet),this.tht.jht(t,this.Qet)),{start:s,end:i}}*Hht(){for(const t of this.Oht())yield t.lQ()}*Uht(){for(const t of this.Oht())yield t.UE()}hit(){this.Jtt().hit()}TZ(){this.Jtt().TZ()}zht(){return this.Jtt().zht()}Nst(){this.Jtt().Nst()}dZ(t){this.Jtt().dZ(),this.rht=this.Jht(t),this.Yst()}Xst(t){this.Jtt().Xst(),this.rht=this.Jht(t)}Yst(){const t=this.uht();if(this.Nit=0,t.Xtt()){const s=this.jit(),i=t.RV(),e=this.Jtt(),h=this.dit(),r=e.qht();if(r){const n=s.ztt(i,e,h,this);n&&n.length&&(this.Nit=1)}else this.Nit=0}}Jht(t){const s=this.jit(),i=this.tht.Nht(t,this.Qet);return i||(s.rst()?this.tht.Bht(t,this.Qet):this.tht.jht(t,this.Qet))}Qst(){this.sht.Qst()}uf(t,s=!1,i=!1,e=!1){let h,r,n=!1;if(s)h=this.tht.Bht(t,this.Qet);else{if(this.rht){const o=this.jit(),a=this.rht.qZ(),l=this.rht.UE(),u=a?a.UE():o.fV();(t<=l||u<=t)&&(this.rht=this.tht.Bht(t,this.Qet),n=!0)}else this.rht=this.tht.Bht(t,this.Qet),n=!0;h=this.rht}h&&(r=h.qZ()),this.sht.uf(t,h,r,s,i,e,n)}Xht(t){if(this.rht){const e=this.jit(),h=this.rht.qZ(),r=this.rht.UE(),n=h?h.UE():e.fV();(t<=r||n<=t)&&(this.rht=this.tht.Bht(t,this.Qet))}else this.rht=this.tht.Bht(t,this.Qet);const s=this.rht,i=s.qZ();return this.sht.Xht(t,s,i)}Yht(t,s,i){return this.sht.Xht(t,s,i)}sit(){this.sht.sit()}static $ht(t,s){const i=s.cht(),e=s.tht;return e.Bht(t,i)}static Kht(t,s){const i=s.cht(),e=s.tht;return e.jht(t,i)}Zht(){const t=this.Qet.hht(),s=t.Qht();return this.rht=null,s}Vet(t){this.rht=null;const s=this.Qet.hht();s.trt(t)}jet(){this.Jtt().jet()}Het(){const t=this.Jtt().Het();if(t){const s=this.tht.Aht(this.Qet),i=this.Jtt().zht();s.srt(i)}}Uet(){const t=this.Jtt().Uet();return t&&this.irt(),this.Jtt().ert(),t}irt(){const t=this.jit().UE(),s=this.Jtt(),i=Wr.Vit.$ht(t,this),e=this.Zht();e.SetType(i.Kx()),e.uV(t),e.PV(i.hrt()),e.det(!0),e.rrt(s.nrt()),e.srt(s.zht())}iX(){return{sourceAdapterJson:this.Jtt().iX()}}eX(t){t&&this.Jtt().eX(t.sourceAdapterJson)}}}{const Vr=self.Vs,jr=Vr.Vit;jr.ght=class{constructor(t){this.ort=t,this.art=null,this.lrt()}Gr(){this.art&&(this.art.Gr(),this.art=null),this.ort=null}qht(){return this.art.qht()}OV(){return this.ort}hit(){this.art&&this.art.hit()}TZ(){this.art&&this.art.TZ()}lrt(){return this.art||(this.art=this.urt()),this.art}Zit(){}uD(){return this.Zit()}crt(){}Nst(){this.lrt().Nst()}dZ(){this.lrt().dZ()}Xst(){this.lrt().Xst()}Qst(){this.art.frt()}uf(t,s,i,e,h,r,n){let o=this.ort.Rht(),a;switch(o){case"numeric":a=jr.drt.uf(t,s,i,this.ort);break;case"angle":a=jr.prt.uf(t,s,i,this.ort);break;case"boolean":a=jr.mrt.uf(t,s,i,this.ort);break;case"color":a=jr.grt.uf(t,s,i,this.ort);break;case"text":a=jr.yrt.uf(t,s,i,this.ort)}this.art.Srt(t,a,s,i,e,h,r,n)}Xht(t,s,i){switch(this.ort.Rht()){case"numeric":return jr.drt.uf(t,s,i,this.ort);case"angle":return jr.prt.uf(t,s,i,this.ort);case"boolean":return jr.mrt.uf(t,s,i,this.ort);case"color":return jr.grt.uf(t,s,i,this.ort);case"text":return jr.yrt.uf(t,s,i,this.ort)}}sit(){this.art.wrt()}jet(){this.lrt().brt()}ert(){this.lrt().ert()}zht(){return this.lrt().zht()}Het(){return this.lrt().Het()}Uet(){return this.lrt().Uet()}nrt(){const t=this.ort,s=t.uht(),i=s.jit().UE(),e=jr.$ht(i,t),h=e.qZ(),r=t.Rht();switch(r){case"numeric":return jr.drt.uf(i,e,h,t);case"angle":return jr.prt.uf(i,e,h,t);case"boolean":return jr.mrt.uf(i,e,h,t);case"color":return jr.grt.uf(i,e,h,t);case"text":return jr.yrt.uf(i,e,h,t)}}urt(){const t=this.ort,s=t.Lht()?t.Rht():"";switch(s){case"combo":case"boolean":case"text":case"string":return new jr.vrt.Mrt(this);case"numeric":case"number":case"angle":return new("combo"===this.ort.Cht()?jr.vrt.Mrt:jr.vrt.Trt)(this);case"color":case"offsetColor":return new jr.vrt.xrt(this);default:return new jr.vrt.Trt(this)}}iX(){return{propertyAdapterJson:this.lrt().iX()}}eX(t){t&&this.lrt().eX(t.propertyAdapterJson)}}}{const Hr=self.Vs;class Ur extends Hr.Vit.ght{constructor(t){super(t),this.Grt=NaN}Zit(){return this.ort.cht().Mht()[0]}uD(){return this.Grt||super.uD()}crt(){return this.ort.uht().RV()}eet(t){const s=this.ort.cht().Mht()[0];s!==t&&(this.Grt=t)}uf(t,s,i,e,h,r,n){this.lrt()._rt(s.xht())&&super.uf(t,s,i,e,h,r,n)}Xht(t,s,i){if(this.lrt()._rt(s.xht()))return super.Xht(t,s,i)}iX(){return Object.assign(super.iX(),{index:this.Grt})}eX(t){t&&(super.eX(t),this.Grt=t.index)}}Hr.Vit.pht=Ur}{const zr=self.Vs;class Jr extends zr.Vit.ght{constructor(t){super(t),this.hz=NaN}Zit(){const t=this.ort.cht();return t.Mht()[1]}crt(){const t=this.ort.cht(),s=this.ort.uht(),i=this.hz||t.Mht()[0],e=s.RV(),h=e.Irt(i),r=e.Crt()[h];return r.sW()}cW(t){const s=this.ort.cht(),i=s.Mht()[2];return t.Prt(i)}ret(t){const s=this.ort.cht();s.Mht()[0]!==t&&(this.hz=t)}uf(t,s,i,e,h,r,n){const o=this.ort.uht(),a=o.RV();this.cW(a.fB())&&super.uf(t,s,i,e,h,r,n)}Xht(t,s,i){const e=this.ort.uht(),h=e.RV();if(this.cW(h.fB()))return super.Xht(t,s,i)}iX(){return Object.assign(super.iX(),{sid:this.hz})}eX(t){t&&(super.eX(t),this.hz=t.sid)}}zr.Vit.fht=Jr}{const qr=self.Vs;class Xr extends qr.Vit.ght{constructor(t){super(t)}Zit(){return this.ort.cht().Mht()[1]}crt(){const t=this.ort,s=t.uht(),i=s.lO(),e=i.C4(),h=e.E5(),r=this.net(h),n=r.uD();return e.yW(n)?e.Rrt(n):null}net(t){const s=this.ort,i=s.cht().Mht()[0];return t.Art(i)}uf(t,s,i,e,h,r,n){this.Ert()&&super.uf(t,s,i,e,h,r,n)}Xht(t,s,i){if(this.Ert())return super.Xht(t,s,i)}Ert(){const t=this.ort,s=t.uht(),i=s.lO(),e=i.C4(),h=e.E5(),r=this.net(h);if(r){const n=r.uD();return e.yW(n)}}}qr.Vit.dht=Xr}{const Yr=self.Vs;class $r extends Yr.Vit.ght{constructor(t){super(t)}Zit(){return this.ort.cht().Mht()[0]}crt(){return this.ort.uht().RV().sW()}uf(t,s,i,e,h,r,n){const o=this.ort.uht(),a=o.fB().l5(),l=o.RV().fB().l5();a===l&&super.uf(t,s,i,e,h,r,n)}Xht(t,s,i){const e=this.ort.uht(),h=e.fB().l5(),r=e.RV().fB().l5();if(h===r)return super.Xht(t,s,i)}Frt(){const t=this.ort.uht(),s=t.fB().l5();if(Yr.XY.Drt&&s instanceof Yr.XY.Drt&&("initial-frame"===this.ort.dit()||"initial-animation"===this.ort.dit()))switch(this.ort.sQ()){case"relative":case"absolute":return null}}}Yr.Vit.mht=$r}{const Kr=self.Vs;class Zr extends Kr.Vit.ght{constructor(t){super(t),this.krt=0,this.Ort=!1}qht(){return!1}dZ(){let t=this.ort.Wit(),s=this.ort.cht();s=t.Aht(s),this.krt=s.lQ()}Xst(){}xht(){return this.Ort||this.ort.uf(0),this.krt}uf(t,s,i,e,h,r,n){this.krt=Kr.Vit.drt.uf(t,s,i,this.ort),this.Ort=!0}jet(){}ert(){}zht(){return this.krt}Het(){return!1}Uet(){return!1}iX(){return{value:this.krt,init:this.Ort}}eX(t){t&&(this.krt=t.value,this.Ort=!t.hasOwnProperty("init")||t.init)}}Kr.Vit.yht=Zr}{const Qr=self.Vs;class tn extends Qr.Vit.ght{constructor(t){super(t),this.Lrt=!1,this.Nrt=null,this.Brt=null,this.Wrt=null,this.WZ=this.ort.jit(),this.Zet=this.ort.uht(),this.Vrt=this.ort.bht(),this.jrt=this.Vrt[0],this.Hrt=this.Vrt[1],this.Vrt[3]?this.Urt=this.Vrt[3]:this.Urt=Math.random().toString(36).slice(2),this.zrt=NaN,this.Jrt=NaN,this.qrt=NaN,this.Xrt=null,this.Yrt()}Gr(){super.Gr(),this.Nrt=null,this.Brt=null,this.Wrt=null,this.WZ=null,this.Zet=null,this.Vrt=null,this.jrt=null,this.Xrt=null}Yrt(){if(self.Vs.XY.Audio){const t=this.ort.PO(),s=t.$rt(self.Vs.XY.Audio);s&&(this.Nrt=s.n5().sW()),this.Brt=self.Vs.XY.Audio.Krt,this.Wrt=self.Vs.XY.Audio.Zrt}}Qrt(){if(!this.Xrt){const t=this.ort.uht(),s=t.OV("audioSource");s&&(this.Xrt=s.Jtt())}}tnt(){const t=this.ort.uht(),s=t.OV("volume");return(s?s.Jtt():this).Jrt}hit(){super.hit(),this.Lrt=!1,this.Nrt&&(this.Wrt&&(this.zrt=this.Wrt.snt.call(this.Nrt,this.Urt),this.Jrt=this.Wrt.int.call(this.Nrt,this.Urt)),this.Brt)&&this.Brt.oV.call(this.Nrt,this.Urt)}ent(){return this.Urt}hnt(){return this.qrt}rnt(t){this.qrt=t}dZ(){super.dZ(),this.zrt=NaN,this.Lrt=!1}Xst(){super.Xst();const t=this.ort.jit(),s=t.UE();switch(this.zrt=s-this.Hrt,this.ort.dit()){case"audioSource":break;case"volume":this.Jrt=this.ort.Xht(s)}this.Lrt=!1}uf(t,s,i,e,h,r,n){if(this.Nrt)switch(this.ort.dit()){case"audioSource":{if(!this.WZ.rst())return;if(e)return void(this.Brt&&this.Brt.oV.call(this.Nrt,this.Urt));if(t<this.Hrt)return void(this.Lrt=!1);const o=this.Wrt.nnt.call(this.Nrt,this.Urt),a=this.WZ.SV();if(a!==o&&this.Brt.yV.call(this.Nrt,this.Urt,a),this.Lrt)return;if(!this.ort.jit().IsPlaying())return;if(this.Lrt=!0,isNaN(this.zrt)){const l=self.performance.now(),u=t-this.Hrt,c=this.Nrt.ont();if("suspended"===c)return void(this.Lrt=!1);const f=self.performance.now(),d=(f-l)/1e3,p=u+d;if(this.Brt){let t=this.hnt();isNaN(t)?(this.rnt(0),t=0):this.rnt(t),this.Brt.ant.call(this.Nrt,this.jrt,t,this.Urt,p)}}else{const m=this.zrt,g=(this.zrt=NaN,this.tnt()),y=(this.Jrt=NaN,this.Nrt.ont());if("suspended"===y)return void(this.Lrt=!1);this.Brt&&(this.rnt(g),this.Brt.ant.call(this.Nrt,this.jrt,g,this.Urt,m))}break}case"volume":this.Qrt(),super.uf(t,s,i,e,h,r,n)}}Xht(t,s,i){if(this.Nrt)switch(this.ort.dit()){case"audioSource":return;case"volume":return this.Qrt(),super.Xht(t,s,i)}}lnt(t,s){return this.Xrt?this.Xrt.hnt():0}unt(t,s,i,e){this.Xrt&&this.Xrt.rnt(this.lnt()+s),this.Brt&&this.Xrt&&this.Brt.rnt.call(this.Nrt,this.Xrt.ent(),this.Xrt.hnt())}cnt(t,s,i){this.Xrt&&this.Xrt.rnt(s),this.Brt&&this.Xrt&&this.Brt.rnt.call(this.Nrt,this.Xrt.ent(),this.Xrt.hnt())}fnt(){return!0}iX(){return{audioPlaybackStarted:this.Lrt,audioTag:this.Urt,pauseTime:this.zrt,pauseVolume:this.Jrt,volume:this.qrt}}eX(t){t&&(this.Lrt=t.audioPlaybackStarted,this.Urt=t.audioTag,this.zrt=t.pauseTime,this.Jrt=t.pauseVolume,this.qrt=t.volume,this.Yrt())}}Qr.Vit.Sht=tn}{const sn=self.Vs;sn.Vit.vrt=class{constructor(t){this.sht=t,this.ort=t.OV(),this._it=this.ort.uht().lO(),this.dnt=this.ort.dit(),this.pnt=!1,this.mnt=null,this.gnt=null}Gr(){this.sht=null,this.ort=null,this._it=null,this.mnt=null,this.gnt=null}qht(){return!1}hit(){}TZ(){this._it=null,this.mnt=null,this.gnt=null}Jtt(){return this.sht}OV(){return this.ort}lO(){return this._it||(this._it=this.ort.uht().lO()),this._it}ynt(t){this.pnt=!!t}Snt(){return this.pnt}Nst(){}dZ(){}Xst(){}brt(){this.mnt=this.zht()}ert(){this.mnt=null}zht(){}Het(){}Uet(){}_rt(t){const s=typeof this.wnt(),i=typeof t;return s==i}frt(){}Srt(t,s,i,e,h,r,n,o){}wrt(){}bnt(){const t=this.Mnt(()=>{const t=this.ort.cht(),s=this.ort.Wit();return s.Aht(t)},()=>{const t=this.ort.cht(),s=this.ort.Wit();return s.vnt(t)});return t.Tnt()}xnt(){const t=this.ort.jit(),e=t.UE()-this.ort.uht().tit(),s=this.Mnt(()=>{const t=this.ort.cht(),s=this.ort.Wit();return s.Bht(e,t)},()=>{const t=this.ort.cht(),s=this.ort.Wit(),i=s.jht(e,t);return i||s.vnt(t)});return s.Tnt()}Mnt(t,s){const i=this.ort.jit();return(i.rst()?t:s)()}Gnt(t,s){const i=this.ort.sQ();return("relative"===i?t:s)()}_nt(t,s){return(this.Snt()?(this.ynt(!1),t):s)()}Int(t){}Cnt(){return this.sht.uD()}Pnt(){return this.gnt||(this.gnt=this.sht.crt()),this.gnt}Rnt(t,s,i,e,h,r){const n=this.ort.Kit();switch(n){case"behavior":return t();case"effect":return s();case"instance-variable":return i();case"plugin":return e();case"world-instance":return h();case"audio":return r()}}iX(){return{firstAbsoluteUpdate:this.pnt,saveState:this.mnt}}eX(t){t&&(this.pnt=t.firstAbsoluteUpdate,this.mnt=t.saveState)}Ant(t,s=!1){const i=[];for(const e of t){const h=e.uht().tit();for(const r of e.Oht())(s&&0===r.UE()||!s)&&i.push({time:h+r.UE(),value:r.Tnt()})}return i.sort((t,s)=>t.time-s.time)}Ent(t,s,i){return this.Fnt(s,i)}Fnt(s,i){for(let t=i.length-1;0<=t;t--){const e=i[t].time;if(e<=s)return i[t]}return null}}}{const en=self.Vs,hn=new Map,rn=[0,0,0];class nn extends en.Vit.vrt{constructor(t){super(t)}Nst(){}dZ(){}Xst(){}zht(){const t=this.ort.Kit(),s=this.Pnt(),i=this.Cnt();switch(t){case"behavior":return this.Dnt(s.knt(i));case"effect":return this.Dnt(s[i]);case"plugin":return this.Dnt(s.knt(i));case"world-instance":return this.Dnt(this.wnt())}}Het(){const t=this.bnt();return!this.Ont(t,this.wnt())}Uet(){return!en.Te(this.mnt)&&!this.Ont(this.mnt,this.wnt())}Ont(t,s){return t=this.Lnt(t),s=this.Lnt(s),t.Ea(s)}bnt(){const t=super.bnt();return this.Lnt(t)}xnt(){const t=super.xnt();return this.Lnt(t)}Int(t){}Dnt(t){return(en.nh(t,en.na)?t.toArray():t).slice(0,3)}Lnt(t){return en.nh(t,en.na)?t:new en.na(t[0],t[1],t[2],1)}_rt(t){return!0}qht(){return!0}frt(){const t=this.ort.jit(),s=this.ort.RV(),i=this.ort.Jtt(),e=t.ztt(s,i,this.dnt,this.ort);if(e&&1<e.length){hn.has(s)||hn.set(s,new Map);const h=hn.get(s),r=this.ort.Kit(),n=(h.has(r)||h.set(r,new Map),h.get(r));n.has(this.dnt)||n.set(this.dnt,{Nnt:!1,color:new en.na(0,0,0,1)})}}Bnt(t,s,i){const e=hn.get(t).get(s).get(i);return e.Nnt=!0,e.color}Srt(t,s,i,e,h,r,n,o){const a=this.ort.jit(),l=this.ort.uht(),u=this.ort.RV(),c=this.ort.Jtt(),f=this.ort.Kit(),d=this.dnt,p=a.ztt(u,c,d,this.ort);if(p&&1<p.length){const m=this.Ant(p,!0),g=this.Ent(a,a.UE(),m);if(g){const y=l.tit(),S=g.time-y;if(0==S)this.Bnt(u,f,this.dnt).ya(s[0],s[1],s[2]);else if(!(S<0)){const w=s[0],b=s[1],M=s[2],v=this.ort.uf(S,!1,!0),T=en.na.ul(w,v[0]),x=en.na.ul(b,v[1]),G=en.na.ul(M,v[2]);this.Bnt(u,f,this.dnt).ya(T,x,G)}}}else this.Wnt(s[0],s[1],s[2])}wrt(){const t=this.ort.RV();if(hn.has(t)){const s=hn.get(t),i=this.ort.Kit();if(s.has(i)){const e=s.get(i);if(e.has(this.dnt)){const h=e.get(this.dnt),r=h.Nnt,n=h.color;r&&this.Wnt(n.Ga(),n._a(),n.Ia()),0===e.size&&s.delete(i),0===s.size&&hn.delete(t)}}}}wnt(){const t=this.ort.Kit(),s=this.Pnt(),i=this.Cnt();switch(t){case"behavior":return this.Lnt(s.knt(i));case"effect":return s[i].clone();case"plugin":return this.Lnt(s.knt(i));case"world-instance":return this.lO().z4().clone()}}Wnt(t,s,i){const e=this.ort.Kit(),h=this.Pnt(),r=this.Cnt();switch(e){case"behavior":rn[0]=t,rn[1]=s,rn[2]=i,h.Vnt(r,rn);break;case"effect":h[r].fa(t,s,i);break;case"plugin":rn[0]=t,rn[1]=s,rn[2]=i,h.Vnt(r,rn);break;case"world-instance":this.lO().jnt(t,s,i)}}iX(){}eX(t){}}en.Vit.vrt.xrt=nn}{const on=self.Vs,an=on.Vit;class ln extends on.Vit.vrt{constructor(t){super(t)}Nst(){}dZ(){}Xst(){}zht(){return this.wnt()}Het(){const t=this.bnt();return t!==this.zht()}Uet(){return!on.Te(this.mnt)&&this.mnt!==this.zht()}qht(){return!1}Srt(t,s,i,e,h,r,n,o){const a=this.ort,l=a.uht(),u=a.Kit(),c=a.jit(),f=l.RV(),d=a.Jtt(),p=this.dnt,m=c.ztt(f,d,p,a);if(m&&1<m.length){const y=this.Ant(m),S=t+l.tit(),w=this.Ent(c,S,y);w&&(s=w.value)}const g=a.Rht();switch(g){case"numeric":if(an.drt.Hnt(this.Cnt(),this.Pnt(),s,u))break;return;case"angle":if(an.prt.Hnt(this.Cnt(),this.Pnt(),s,u))break;return;case"boolean":if(an.mrt.Hnt(this.Cnt(),this.Pnt(),s,u))break;return;case"color":if(an.grt.Hnt(this.Cnt(),this.Pnt(),s,u))break;return;case"text":if(!an.yrt.Hnt(this.Cnt(),this.Pnt(),s,u))return}this.Wnt(s)}wnt(){const t=this.ort.Kit(),s=this.Pnt(),i=this.Cnt();switch(t){case"behavior":return s.knt(i);case"effect":return s[i];case"instance-variable":return s.Unt(i);case"plugin":return s.knt(i)}}Wnt(t){const s=this.ort.Kit(),i=this.Pnt(),e=this.Cnt();switch(s){case"behavior":i.Vnt(e,t);break;case"effect":i[e]=t;break;case"instance-variable":i.znt(e,t);break;case"plugin":i.Vnt(e,t)}}}on.Vit.vrt.Mrt=ln}{const un=self.Vs,cn=(un.Vit.vrt,new Map),fn=(t,s,i,e,h,r=!1,n=null,o=null)=>{cn.set(t,{Jnt:s,qnt:i,Xnt:e,round:h,Ynt:r,init:n,reset:o})};fn("offsetX",(t,s,i,e)=>{"relative"===e.ort.sQ()?t.$nt(s,i.jit().ist()):t.$nt(s)},(t,s)=>t.ZM(s),t=>t.KM(),!0),fn("offsetY",(t,s,i,e)=>{"relative"===e.ort.sQ()?t.Knt(s,i.jit().ist()):t.Knt(s)},(t,s)=>t.sv(s),t=>t.tv(),!0),fn("offsetWidth",(s,t,o,i,e)=>{if(0!==t){const h="relative"===i.ort.sQ(),l=1===i.Znt.Kx();if((h||l)&&s.w6()&&s._6()){if(isNaN(i.Qnt)){let e=[],t=s.n6();for(;t;)e.push(t),t=t.n6();e.reverse();let a=(t,s)=>s.jit().pit(t.RV()),h=(t,s)=>{const i=a(t,s);if(i)return i.yet();const e=t.RV().sW();return e.wet()?e.yet():t.sot().tot()},r=(t,s,i,e=0)=>{const h=a(t,s);if(!h)return e;const r=h.OV(i);if(!r)return e;const n=r.cht().hht();if(!n)return e;const o=n.vnt();return o?o.xht():e},n;if(l){let t=e[e.length-1];n=t.Wm()}else{let s=e[0],t=s.sot().tot(),i=s.sot().iot();n=t*i,n=(n+=r(s,o,"offsetWidth"))+h(s,o)*r(s,o,"offsetScaleX");for(let t=1;t<e.length;t++){const u=(s=e[t]).sot().iot();n=(n=(n*=u)+r(s,o,"offsetWidth"))+h(s,o)*r(s,o,"offsetScaleX")}}i.Qnt=0===n?Number.EPSILON:n}e||s.wg(t/i.Qnt,!0)}else s.wg(t)}},(t,s)=>t.qm(s),t=>t.Wm(),!0),fn("offsetHeight",(s,t,o,i,e)=>{if(0!==t){const h="relative"===i.ort.sQ(),a=1===i.Znt.Kx();if((h||a)&&s.w6()&&s.C6()){if(isNaN(i.Qnt)){let e=[],t=s.n6();for(;t;)e.push(t),t=t.n6();e.reverse();let h=(t,s)=>{e=t;const i=s.jit().pit(e.RV());var e;if(i)return i.Met();const h=t.RV().sW();return h.wet()?h.Met():t.sot().eot()},r=(t,s,i,e=0)=>{const h=s.jit().pit(t.RV());if(!h)return e;const r=h.OV(i);if(!r)return e;const n=r.cht().hht();if(!n)return e;const o=n.vnt();return o?o.xht():e},n;if(a){let t=e[e.length-1];n=t.$m()}else{let s=e[0],t=s.sot().eot(),i=s.sot().hot();n=t*i,n=(n+=r(s,o,"offsetHeight"))+h(s,o)*r(s,o,"offsetScaleY");for(let t=1;t<e.length;t++){const l=(s=e[t]).sot().hot();n=(n=(n*=l)+r(s,o))+h(s,o)*r(s,o,"offsetScaleY")}}i.Qnt=0===n?Number.EPSILON:n}e||s.rot(t/i.Qnt,!0)}else s.rot(t)}},(t,s)=>t.Vm(s),t=>t.$m(),!0),fn("offsetAngle",(t,s,i,e,h)=>{t.not(s)},(t,s)=>t.N5(s),t=>t.GetAngle(),!1,!0),fn("offsetOpacity",(t,s,i,e,h)=>{const r=e.oot||1,n=(s/=r,t.mA()),o=n+s;if(0===e.aot)1<o?e.aot+=o-1:o<0&&(e.aot+=o),t.lot(s);else{const a=t.mA()+s;0<s&&0<e.aot?1<a&&(e.aot+=a-1):0<s&&e.aot<0?(e.aot+=s,0<e.aot&&(t.lot(e.aot),e.aot=0)):s<0&&0<e.aot?(e.aot+=s,e.aot<0&&(t.lot(e.aot),e.aot=0)):s<0&&e.aot<0&&a<0&&(e.aot+=a)}},(t,s)=>{t.yA(s)},t=>t.mA(),!1,!0,(r,h,n)=>{switch(r.aot=0,r.ort.sQ()){case"relative":{r.ort.Wit();let t=r.ort.cht(),s=t.hht(),i=s.eht(),e=r.lO().mA(),h=e;for(const o of i){const a=o.UE(),l=r.ort.Xht(a);h=e+l,h=un.Rr(h,0,1)}r.uot=e-h,r.uot=Math.round(100*(r.uot+Number.EPSILON))/100,h=e;for(let t=i.length-1;0<=t;t--){const u=i[t].UE(),c=r.ort.Xht(u);h-=c,h=un.Rr(h,0,1)}r.cot=h,r.cot=Math.round(100*(r.cot+Number.EPSILON))/100;break}}const t="relative"===r.ort.sQ(),s=1===r.Znt.Kx();if((t||s)&&h.w6()&&h.D6()){let s=[],t=h.n6();for(;t;)s.push(t),t=t.n6();s.reverse();let i=(t,s,i)=>{const e=s.jit().pit(t.RV());if(!e)return 0;const h=e.OV(i);if(!h)return 0;const r=h.cht().hht();if(!r)return 0;const n=r.vnt();return n?n.xht():0},e=s[0].sot().dot();e+=i(s[0],n,"offsetOpacity");for(let t=1;t<s.length;t++)e+=i(s[t],n,"offsetOpacity");r.oot=0===e?1:e}},i=>{switch(i.ort.sQ()){case"relative":{i.aot=0;let t=i.lO(),s=t.mA();s=Math.round(100*(s+Number.EPSILON))/100,i.ort.jit().rst()?(t.yA(s+i.uot),i.WG=0):(t.yA(s-i.cot),i.WG=i.Jtt().nrt());break}}}),fn("offsetOriginX",(t,s)=>t.pot(s),(t,s)=>t.mot(s),t=>t.jW(),!1),fn("offsetOriginY",(t,s)=>t.got(s),(t,s)=>t.yot(s),t=>t.UW(),!1),fn("offsetZElevation",(t,s)=>t.Sot(s),(t,s)=>t.rv(s),t=>t.hv(),!0),fn("offsetScaleX",(t,s,i,e)=>{if(0!==s){const h=t.Wm()<0?-1:1;if("relative"===e.ort.sQ()&&t.w6()&&t._6()){const r=i.yet()*h*s;isNaN(e.Qnt)&&cn.get("offsetWidth").Jnt(t,1,i,e,!0),t.wg(r/e.Qnt,!0)}else t.wg(i.yet()*h*s)}},(t,s,i)=>{t.qm(i.yet()*s)},(e,h)=>{const r=e.Wm()<0?-1:1;if(e._6()){let t=e.n6(),s=h.jit().pit(t.RV()),i=NaN;if(s)i=t.Wm()/s.yet();else{const n=t.RV().sW();i=n.wet()?t.Wm()/n.yet():1}return e.Wm()*r/(h.yet()*i)}return e.Wm()*r/h.yet()},!1),fn("offsetScaleY",(t,s,i,e)=>{if(0!==s){const h=t.$m()<0?-1:1;if("relative"===e.ort.sQ()&&t.w6()&&t.C6()){const r=i.Met()*h*s;isNaN(e.Qnt)&&cn.get("offsetHeight").Jnt(t,1,i,e,!0),t.rot(r/e.Qnt,!0)}else t.rot(i.Met()*h*s)}},(t,s,i)=>{t.Vm(i.Met()*s)},(e,h)=>{const r=e.$m()<0?-1:1;if(e.C6()){let t=e.n6(),s=h.jit().pit(t.RV()),i=NaN;if(s)i=t.$m()/s.Met();else{const n=t.RV().sW();i=n.wet()?t.$m()/n.Met():1}return e.$m()*r/(h.Met()*i)}return e.$m()*r/h.Met()},!1);class dn extends un.Vit.vrt{constructor(t){super(t),this.WG=0,this.aot=0,this.uot=0,this.cot=0,this.oot=NaN,this.Qnt=NaN,this.wot=void 0,this.bot=void 0,this.Mot=null,this.vot=null,this.Tot=null,this.xot=null,this.Got=null,this._ot=null,this.Iot=null,this.Cot=null,this.Pot=!1,this.Rot=!1,un.nh(this.ort.jit(),un.Aot)?this.Znt=new un.Vit.vrt.Eot(this):this.Znt=new un.Vit.vrt.Fot(this);const s=this.ort.dit();switch(this.ort.Kit()){case"world-instance":{const i=cn.get(s);this.Mot=i.Xnt,this.vot=i.Jnt,this.Tot=i.qnt,this.Pot=i.round,this.Rot=i.Ynt,this.Got=i.init,this.xot=i.reset;break}case"audio":this._ot=t.lnt,this.Iot=t.unt,this.Cot=t.cnt,this.Pot=!!t.fnt(),this.Rot=!1}}Gr(){this.Znt=null,this.Mot=null,this.vot=null,this.Tot=null,this.xot=null,this.Got=null,this._ot=null,this.Iot=null,this.Cot=null,super.Gr()}qht(){return this.Znt.qht()}Dot(){return this.WG}kot(t){this.WG=t}Nst(){this.xot&&this.xot(this)}dZ(){const t=this.Znt.dZ();if("number"==typeof t&&(this.WG=t),this.Got){const s=this.lO(),i=this.ort.uht();this.Got(this,s,i)}}Xst(){const t=this.Znt.Xst();"number"==typeof t&&(this.WG=t)}zht(){return this.wnt()}Het(){const t=this.bnt();return t!==this.zht()}Uet(){return!un.Te(this.mnt)&&this.mnt!==this.zht()}frt(){this.Znt.frt()}Srt(t,s,i,e,h,r,n,o){return this.Znt.Srt(t,s,i,e,h,r,n,o)}wrt(){this.Znt.wrt()}wnt(){const t=this.Pnt(),s=this.Cnt(),i=this.lO(),e=this.ort.uht(),h=this.ort.Kit();switch(h){case"behavior":return t.knt(s);case"effect":return t[s];case"instance-variable":return t.Unt(s);case"plugin":return t.knt(s);case"world-instance":return this.Mot(i,e);case"audio":return this._ot.call(this.Jtt(),i,e)}}Wnt(t,s,i){const e=this.Pnt(),h=this.Cnt(),r=this.lO(),n=this.ort.uht(),o=this.ort.Kit();switch(o){case"behavior":e.Oot(h,t);break;case"effect":e[h]+=t;break;case"instance-variable":e.Lot(h,t);break;case"plugin":e.Oot(h,t,this.Jtt().Frt());break;case"world-instance":this.vot(r,t,n,this);break;case"audio":this.Iot.call(this.Jtt(),r,t,n,this)}}Not(t,s,i){let e=this.ort.Ztt();if("discrete"!==(e="default"===e?"continuous":e)||s){if("discrete"===e&&i){const l=this.ort.jit(),u=l.UE(),c=this.ort.Nht(u);if(!c)return}const h=this.Pnt(),r=this.Cnt(),n=this.lO(),o=this.ort.uht(),a=this.ort.Kit();switch(a){case"behavior":h.Vnt(r,t);break;case"effect":h[r]=t;break;case"instance-variable":h.znt(r,t);break;case"plugin":h.Vnt(r,t,this.Jtt().Frt());break;case"world-instance":this.Tot(n,t,o);break;case"audio":this.Cot.call(this.Jtt(),n,t,o)}}}Bot(t,s,i,e,h,r,n,o){this.Znt.Bot(t,s,i,e,h,r,n,o)}Wot(t,s,i,e,h){let r=(t="angle"===this.ort.Cht()?un.Fr(t):t).toString(),n=r.split(".")[1]||"",o=n.length,a=this.wnt(),l;switch(l=0===o?this.Pot?Math.round(a):this.Rot?"angle"===this.ort.Cht()?un.Er(Math.round(un.Fr(a))):Number(un.toFixed(a,2)):a:this.Pot?Number(un.toFixed(a,o)):(this.Rot,a),this.Wnt(l-a,s,i),this.ort.dit()){case"offsetWidth":case"offsetScaleX":{const u=this.lO(),c=u.Wm(),f=Number(un.toFixed(c,2));u.wg(f-c);break}case"offsetHeight":case"offsetScaleY":{const d=this.lO(),p=d.$m(),m=Number(un.toFixed(p,2));d.rot(m-p);break}}}iX(){return Object.assign(super.iX(),{v:this.WG,a:this.aot,fod:this.uot,bod:this.cot,of:this.oot,sf:this.Qnt,armorf:this.wot,armandf:this.bot})}eX(t){t&&(super.eX(t),this.WG=t.v,this.aot=t.a,this.uot=un.we(t.fod)?t.fod:0,this.cot=un.we(t.bod)?t.bod:0,this.oot=un.we(t.of)?t.of:NaN,this.Qnt=un.we(t.sf)?t.sf:NaN,this.wot=un.we(t.armorf)?t.armorf:void 0,this.bot=un.we(t.armandf)?t.armandf:void 0)}}un.Vit.vrt.Trt=dn}{const pn=self.Vs;class mn{constructor(t){this.Vot=!1,this.krt=0,this.jot=!1,this.Hot=!1,this.kit=t;for(let t=0,s=this.kit.length;t<s;t++)this.kit[t].aht(this)}cit(){return this.kit}Uot(){this.Vot=!0}zot(){return this.Vot}rrt(t){this.krt=t}xht(){return this.krt}Jot(t){this.jot=t}qot(){return this.jot}Zst(t){this.Hot=t}Xot(){return this.Hot}P0(){this.Vot=!1,this.krt=0,this.jot=!1,this.Hot=!1}}class gn{constructor(t){this.Yot=t}Gr(){this.Yot=null}Kx(){return 0}dZ(){const t=this.Yot;return this.Yot.OV(),t.Gnt(()=>t.Mnt(()=>0,()=>t.Jtt().nrt()),()=>{})}Xst(){}qht(){this.Yot;const t=this.Yot.OV();switch(t.sQ()){case"relative":return!1;case"absolute":return!0}}frt(){this.Yot;const t=this.Yot.OV(),s=t.dit();switch(t.sQ()){case"relative":break;case"absolute":if(t.oht()){const i=t.lht();i.P0()}else{const e=t.jit(),h=t.RV(),r=t.Jtt(),n=e.ztt(h,r,s,t);n&&1<n.length&&new mn(n)}}}Srt(t,s,i,e,h,r,n,o){const a=this.Yot,l=this.Yot.OV();switch(l.sQ()){case"relative":{const u=a.Dot();a.Wnt(s-u,i,e),r&&this.Bot(t,i,e,h,u,s),a.kot(s);break}case"absolute":{const c=l.jit(),f=l.uht();if(l.RV(),l.Jtt(),l.oht()){const d=l.lht(),p=d.cit(),m=a.Ant(p,!0),g=a.Ent(c,c.UE(),m);if(g){const y=f.tit(),S=g.time-y;if(0==S)d.Zst(n),d.Jot(o),d.Uot(),d.rrt(d.xht()+s);else{if(S<0)return;const w=l.Xht(S);d.Zst(n),d.Jot(o),d.Uot(),d.rrt(d.xht()+(s-w))}}}else a.Not(s,o,n);break}}}wrt(){const t=this.Yot,s=this.Yot.OV();switch(s.sQ()){case"relative":break;case"absolute":if(s.oht()){const i=s.lht();i.zot()&&t.Not(i.xht(),i.qot(),i.Xot())}}}Bot(t,s,i,e,h,r){const n=this.Yot;e||(s&&t===s.UE()?n.Wot(s.lQ(),s,i):i&&t===i.UE()?n.Wot(i.lQ(),s,i):r-h==0&&n.Wot(s.lQ(),s,i))}}pn.Vit.vrt.Fot=gn}{const yn=self.Vs;class Sn{constructor(t){this.Yot=t}Gr(){this.Yot=null}Kx(){return 1}dZ(){const t=this.Yot;return t.ynt(!0),this.Int(t.bnt())}Xst(){const t=this.Yot;if(t.bnt()!==t.xnt())return t.ynt(!0),this.Int(t.xnt())}qht(){return!1}frt(){}Srt(t,s,i,e,h,r,n,o){const a=this.Yot,l=a.Dot();switch(a.OV().sQ()){case"relative":a.Wnt(s-l,i,e),r&&this.Bot(t,i,e,h,l,s,!1,n);break;case"absolute":a.Snt()?(a.ynt(!1),a.Wnt(l,i,e)):0===t&&0===a.OV().jit().fV()?a.Not(s,!0,!1):(a.Wnt(s-l,i,e),r&&this.Bot(t,i,e,h,l,s,this.$ot(),n))}a.kot(s)}wrt(){}Int(t){const s=this.Yot;return t-s.zht()}$ot(){let t=this.Yot,s=t.lO().RV(),i=t.OV().PO(),e=i.Utt(),h=0;for(const r of e.jK())0===r.Kx()?r.qK(s)&&h++:1===r.Kx()&&r.RV()===s&&h++;return h<=1}Bot(t,s,i,e,h,r,n,o){const a=this.Yot;e?s&&t===s.UE()?a.Wot(s.lQ(),s,i,n,o):i&&t===i.UE()?a.Wot(i.lQ(),s,i,n,o):i||a.Wot(s.lQ(),s,i,n,o):s&&t===s.UE()?a.Wot(s.lQ(),s,i,n,o):i&&t===i.UE()?a.Wot(i.lQ(),s,i,n,o):r-h==0&&a.Wot(s.lQ(),s,i,n,o)}}yn.Vit.vrt.Eot=Sn}{const wn=self.Vs,bn=self.Oc;wn.Vit.drt=class{constructor(){}static Hnt(t,s,i,e){let h;switch(e){case"behavior":h=s.knt(t);break;case"effect":h=s[t];break;case"instance-variable":h=s.Unt(t);break;case"plugin":h=s.knt(t)}return h!==i}static uf(r,n,o,a){if(!o){let t=a.cht(),s=a.Wit();return(t=s.vnt(t)).lQ()}let l=a.Ztt();if("default"===l&&(l="continuous"),"discrete"===(l="combo"===a.Cht()?"discrete":l))return n.lQ();if("continuous"===l||"step"===l){const u=a.jit().$tt();if("step"===l&&0!==u){const g=1/u;r=Math.floor(r*g)/g}const c=n.lQ(),f=o.lQ(),d=n.oQ("cubic-bezier"),p=o.oQ("cubic-bezier"),m=d&&d.Kot()&&p&&p.Zot();if(!m&&c===f)return c;let t=n.UE(),s=o.UE(),i=("step"===l&&0!==u&&(r=wn.Rr(r,t,s)),wn.normalize(r,t,s)),e=n.hrt(),h;if(m){const y=s-t;h=bn.Kc(e)(y*i,0,1,y),h=bn.Kc("cubicbezier")(h,c,c+d.fQ(),f+p.mQ(),f)}else h=bn.Kc(e)((s-t)*i,c,f-c,s-t);return"integer"===a.Cht()?Math.floor(h):h}}}}{const Mn=self.Vs;Mn.Vit.prt=class{constructor(){}static Hnt(t,s,i,e){let h;switch(e){case"behavior":h=s.knt(t);break;case"effect":h=s[t];break;case"instance-variable":h=s.Unt(t);break;case"plugin":h=s.knt(t)}return h!==i}static uf(t,s,i,e){if(!i){let t=e.cht(),s=e.Wit();return(t=s.vnt(t)).lQ()}let h=e.Ztt();if("default"===h&&(h="continuous"),"discrete"===(h="combo"===e.Cht()?"discrete":h))return s.lQ();if("continuous"===h||"step"===h){const r=e.jit().$tt();if("step"===h&&0!==r){const c=1/r;t=Math.floor(t*c)/c}const n=s.UE(),o=i.UE(),a=s.lQ(),l=i.lQ(),u=("step"===h&&0!==r&&(t=Mn.Rr(t,n,o)),s.oQ("angle"));if(!u){if(a===l)return a;const f=Mn.normalize(t,n,o),d=self.Oc.Kc(s.hrt());return Mn.jr(a,l,d(f,0,1,1))}{const p=u.Qot();if(a===l&&0===p)return a;const m=Mn.normalize(t,n,o),g=self.Oc.Kc(s.hrt()),y=g(m,0,1,1);switch(u.tat()){case"closest":return Mn.jr(a,l,y,p);case"clockwise":return Mn.Hr(a,l,y,p);case"anti-clockwise":return Mn.Ur(a,l,y,p)}}}}}}{const vn=self.Vs;vn.Vit.mrt=class{constructor(){}static Hnt(t,s,i,e){let h;switch(e){case"behavior":h=s.knt(t);break;case"effect":h=s[t];break;case"instance-variable":h=s.Unt(t);break;case"plugin":h=s.knt(t)}return!!h!=!!i}static uf(t,s,i,e){if(i)return s.lQ()?1:0;{let t=e.cht(),s=e.Wit();return(t=s.vnt(t)).lQ()?1:0}}}}{const Tn=self.Vs,xn=[0,0,0],Gn=[0,0,0],_n=[0,0,0];Tn.Vit.grt=class{constructor(){}static Hnt(t,s,i,e){let h;switch(e){case"behavior":h=s.knt(t);break;case"effect":h=s[t];break;case"instance-variable":h=s.Unt(t);break;case"plugin":h=s.knt(t)}return Array.isArray(i)?(xn[0]=i[0],xn[1]=i[1],xn[2]=i[2]):(_n.qa(i),xn[0]=Math.floor(255*_n.Ga()),xn[1]=Math.floor(255*_n._a()),xn[2]=Math.floor(255*_n.Ia())),Array.isArray(h)?(Gn[0]=h[0],Gn[1]=h[1],Gn[2]=h[2]):(_n.qa(h),Gn[0]=Math.floor(255*_n.Ga()),Gn[1]=Math.floor(255*_n._a()),Gn[2]=Math.floor(255*_n.Ia())),xn[0]!==Gn[0]||xn[1]!==Gn[1]||xn[2]!==Gn[2]}static uf(t,s,i,e){if(!i){let t=e.cht(),s=e.Wit(),i=(t=s.vnt(t)).lQ();return xn[0]=i[0],xn[1]=i[1],xn[2]=i[2],xn}let h=e.Ztt();if("discrete"===(h="default"===h?"continuous":h)){const r=s.lQ();return xn[0]=r[0],xn[1]=r[1],xn[2]=r[2],xn}if("continuous"===h||"step"===h){const n=e.jit().$tt();if("step"===h&&0!==n){const v=1/n;t=Math.floor(t*v)/v}const o=s.UE(),a=i.UE(),l=s.lQ(),u=i.lQ(),c=("step"===h&&0!==n&&(t=Tn.Rr(t,o,a)),Tn.normalize(t,o,a)),f=s.hrt(),d=l[0],p=l[1],m=l[2],g=u[0],y=u[1],S=u[2],w=self.Oc.Kc(f),b=a-o,M=b*c;return xn[0]=d===g?d:w(M,d,g-d,b),xn[1]=p===y?p:w(M,p,y-p,b),xn[2]=m===S?m:w(M,m,S-m,b),xn}}}}{const In=self.Vs;In.Vit.yrt=class{constructor(){}static Hnt(t,s,i,e){let h;switch(e){case"behavior":h=s.knt(t);break;case"effect":h=s[t];break;case"instance-variable":h=s.Unt(t);break;case"plugin":h=s.knt(t)}return h!==i}static uf(t,s,i,e){if(i)return s.lQ();{let t=e.cht(),s=e.Wit();return(t=s.vnt(t)).lQ()}}}}{const Cn=self.Vs;Cn.Y$=class{constructor(){this.sat=new Map}Gr(){for(const t of this.sat.values())t.Gr();this.sat.clear(),this.sat=null}Fc(t){const s=new Cn.iat(t),i=s.Mf();this.sat.set(i,s)}oi(t){return this.sat.get(t)}Ltt(){return 0}static eat(t,s,i,e){if(s)for(const h of s)Cn.Y$.hat("create",h,t,i,e)}static rat(t,s,i,e){if(s)for(const h of s)Cn.Y$.hat("create-including-disabled",h,t,i,e)}static nat(i,t,s,e){i.length?t.forEach((t,s)=>{i[s].eX(t)}):t.forEach(t=>{Cn.Y$.hat("load",t,i,s,e)})}static hat(t,s,i,e,h){let r;if("function"==typeof e)switch(t){case"load":r=new e(null,h);break;case"create":case"create-including-disabled":r=new e(s,h)}else if("object"==typeof e){const n=e.prop,o=s[n],a=e.map.get(o);switch(t){case"load":r=new a(null,h);break;case"create":case"create-including-disabled":r=new a(s,h)}}switch(t){case"load":r.eX(s),i.push(r);break;case"create":if("function"==typeof r.fet&&!r.fet())return r.Gr();i.push(r);break;case"create-including-disabled":i.push(r)}}}}{const Pn=self.Vs;Pn.iat=class{constructor(t){this.Cr="",this.Kst=NaN,this.oat=0,this.aat="default",this.lat="default",this.uat=!1,this.cat=!1,this.fat=1,this.vit=null,this.dat="",this.pat=!1,this.mat=!0,t&&(this.Cr=t[0],this.Kst=t[1],this.oat=t[2],this.aat=t[3],this.lat=t[4],this.uat=!!t[6],this.cat=!!t[7],this.fat=t[8],this.dat=t[9],this.pat=!!t[10],this.mat=!!t[11],this.vit=new Pn.gat(t[5],this))}Gr(){this.vit.Gr(),this.vit=null}jtt(){return this.vit||(this.vit=new Pn.gat(null,this)),this.vit}Mf(){return this.Cr}_8(t){this.Cr=t}fV(){return this.Kst}cV(t){this.Kst=t}$tt(){return this.oat}Ktt(t){this.oat=t}Ztt(){return this.aat}Qtt(t){this.aat=t}sQ(){return this.lat}tst(t){this.lat=t}pV(){return this.uat}dV(t){this.uat=t}gV(){return this.cat}mV(t){this.cat=t}GW(){return this.fat}sst(t){this.fat=t}xZ(){return this.dat}ist(){return this.pat}est(){return this.mat}iX(){return{trackDataJson:this.vit.iX(),name:this.Cr,totalTime:this.Kst,step:this.oat,interpolationMode:this.aat,resultMode:this.lat,loop:this.uat,pingPong:this.cat,repeatCount:this.fat,startOnLayout:this.dat,transformWithSceneGraph:!!this.pat,useSystemTimescale:this.mat}}eX(t){t&&(this.jtt().eX(t.trackDataJson),this.Cr=t.name,this.Kst=t.totalTime,this.oat=t.step,this.aat=t.interpolationMode,this.lat=t.resultMode,this.uat=t.loop,this.cat=t.pingPong,this.fat=t.repeatCount,this.dat=t.startOnLayout,this.pat=!!t.transformWithSceneGraph,this.mat=!!t.useSystemTimescale)}}}{const Rn=self.Vs;class An{constructor(t,s){this.vit=s,this.yat=null,this.Sat=null,this.Tit=NaN,this.xit=NaN,this.aat="default",this.lat="default",this.tc=!1,this.wat=null,this.tht=null,this.Af="",this.bat=null,this.Mat=0,this.vat=this.vit.Ytt().fV(),this.Lf=0,this.Cr="",t&&(t[0]&&(this.yat=t[0],this.Tit=t[0][2],this.xit=t[0][1]),this.aat=t[1],this.lat=t[2],this.tc=!!t[3],t[6]&&(this.Af=t[6]),t[7]&&(this.bat=t[7],this.Mat=t[7][0],this.vat=t[7][1]),t[8]&&(this.Sat=t[8]),t[8]&&(this.Sat=t[8]),t[9]&&(this.Lf=t[9]),t[10]&&(this.Cr=t[10]),this.wat=new Rn.Tat(t[4],this),this.tht=new Rn.xat(t[5],this))}Gr(){this.yat=null,this.vit=null,this.wat&&(this.wat.Gr(),this.wat=null),this.tht&&(this.tht.Gr(),this.tht=null),this.bat=null}jtt(){return this.vit}Dit(){return this.wat||(this.wat=new Rn.Tat(null,this)),this.wat}Wit(){return this.tht||(this.tht=new Rn.xat(null,this)),this.tht}Gat(){return this.yat}Jit(){return this.xit}pet(t){this.xit=t}zit(){return this.Tit}let(t){this.Tit=t}Ztt(){return this.aat}Qtt(t){this.aat=t}sQ(){return this.lat}tst(t){this.lat=t}fet(){return this.tc}det(t){this.tc=!!t}DV(){return this.Af}tit(){return this.Mat}uet(){return this.vat}cet(t){this.vat=t}yet(){return this.Sat[0]}met(t){this.Sat||(this.Sat=[]),this.Sat[0]=t}Met(){return this.Sat||(this.Sat=[]),this.Sat[1]}bet(t){this.Sat||(this.Sat=[]),this.Sat[1]=t}Kx(){return this.Lf}Mf(){return this.Cr}iX(){return{keyframeDataJson:this.wat.iX(),propertyTrackDataJson:this.tht.iX(),instanceData:this.yat,additionalInstanceData:this.Sat,instanceUid:this.Tit,objectClassIndex:this.xit,interpolationMode:this.aat,resultMode:this.lat,enabled:this.tc,id:this.Af,nestedData:this.bat,type:this.Lf,name:this.Cr}}eX(t){t&&(this.yat=t.instanceData,this.Tit=t.instanceUid,this.xit=t.objectClassIndex,this.aat=t.interpolationMode,this.lat=t.resultMode,this.tc=t.enabled,this.Af=t.id,this.Lf=t.type||0,this.Cr=t.name||"",this.vat=this.vit.Ytt().fV(),t.nestedData&&(this.bat=t.nestedData,this.Mat=this.bat[0],this.vat=this.bat[1]),t.additionalInstanceData&&(this.Sat=t.additionalInstanceData),this.Dit().eX(t.keyframeDataJson),this.Wit().eX(t.propertyTrackDataJson))}}Rn.gat=class{constructor(t,s){this.ott=s,this._at=[],Rn.Y$.eat(this._at,t,An,this)}Gr(){this.ott=null;for(const t of this._at)t.Gr();Rn.Kn(this._at),this._at=null}Ytt(){return this.ott}eit(){const t=new An(null,this);return this._at.push(t),t}Iat(t){return t.Dit().Fit()[0]}Cat(t){const s=t.Dit().Fit();return s.at(-1)}Aet(s,t){const i=t.Dit().Fit(),e=i.length;for(let t=0;t<e;t++){const h=i[t];if(h.UE()===s)return h}}Pat(s,t){const i=t.Dit().Fit(),e=i.length;for(let t=0;t<e;t++){const h=i[t];if(h.UE()>s)return h}}Rat(s,t){const i=t.Dit().Fit(),e=i.length;for(let t=0;t<e;t++){const h=i[t];if(h.UE()>=s)return h}}Ret(s,t){const i=t.Dit().Fit();for(let t=i.length-1;0<=t;t--){const e=i[t];if(e.UE()<=s)return e}}*Vtt(){for(const t of this._at)yield t}iX(){return{trackDataItemsJson:this._at.map(t=>t.iX())}}eX(t){t&&Rn.Y$.nat(this._at,t.trackDataItemsJson,An,this)}}}{const En=self.Vs;class Fn{constructor(t,s){this.tht=s,this.Aat="",this.Eat=null,this.dnt=null,this.Lf=null,this.Fat=NaN,this.Dat=NaN,this.aat="default",this.lat="default",this.tc=!1,this.kat=null,this.Oat=!0,t&&(this.Aat=t[0][0],this.Eat=t[0].slice(1),this.dnt=t[1],this.Lf=t[2],this.Fat=t[3],this.Dat=t[4],this.aat=t[5],this.lat=t[6],this.tc=!!t[7],this.kat=new En.Lat(t[8],this),this.Oat=t[9])}Gr(){this.kat.Gr(),this.kat=null,this.tht=null,this.Eat=null}Wit(){return this.tht}hht(){return this.kat||(this.kat=new En.Lat(null,this)),this.kat}Kit(){return this.Aat}wht(t){this.Aat=t}Mht(){return this.Eat}Tht(t){this.Eat=t}Ght(){return this.dnt}Iht(t){this.dnt=t}Kx(){return this.Lf}SetType(t){this.Lf=t}Eht(){return this.Fat}Fht(t){this.Fat=t}Dht(){return this.Dat}kht(t){this.Dat=t}Ztt(){return this.aat}Qtt(t){this.aat=t}sQ(){return this.lat}tst(t){this.lat=t}fet(){return this.tc}det(t){this.tc=!!t}Lht(){return!!this.Oat}iX(){return{propertyKeyframeDataJson:this.kat.iX(),sourceAdapterId:this.Aat,sourceAdapterArguments:this.Eat,property:this.dnt,type:this.Lf,min:this.Fat,max:this.Dat,interpolationMode:this.aat,resultMode:this.lat,enabled:this.tc,canHavePropertyKeyframes:this.Oat}}eX(t){t&&(this.Aat=t.sourceAdapterId,this.Eat=t.sourceAdapterArguments,this.dnt=t.property,this.Lf=t.type,this.Fat=t.min,this.Dat=t.max,this.aat=t.interpolationMode,this.lat=t.resultMode,this.tc=t.enabled,this.Oat=t.canHavePropertyKeyframes,this.hht().eX(t.propertyKeyframeDataJson))}}En.xat=class{constructor(t,s){this.Mit=s,this.Nat=[],En.Y$.eat(this.Nat,t,Fn,this)}Gr(){this.Mit=null;for(const t of this.Nat)t.Gr();En.Kn(this.Nat),this.Nat=null}aet(){return this.Mit}Net(){const t=new Fn(null,this);return this.Nat.push(t),t}Aht(t){const s=t.hht();return s.eht()[0]}vnt(t){const s=t.hht(),i=s.eht();return i.at(-1)}Nht(s,t){const i=t.hht(),e=i.eht(),h=e.length;for(let t=0;t<h;t++){const r=e[t];if(r.UE()===s)return r}}Vht(s,t){const i=t.hht(),e=i.eht(),h=e.length;for(let t=0;t<h;t++){const r=e[t];if(r.UE()>s)return r}}jht(s,t){const i=t.hht(),e=i.eht(),h=e.length;for(let t=0;t<h;t++){const r=e[t];if(r.UE()>=s)return r}}Bht(s,t){const i=t.hht(),e=i.eht();for(let t=e.length-1;0<=t;t--){const h=e[t];if(h.UE()<=s)return h}}*Bit(){for(const t of this.Nat)yield t}iX(){return{propertyTrackDataItemsJson:this.Nat.map(t=>t.iX())}}eX(t){t&&En.Y$.nat(this.Nat,t.propertyTrackDataItemsJson,Fn,this)}}}{const Dn=self.Vs;class kn{constructor(t,s){if(this.wat=s,this.H3=-1,this.Bat="noease",this.Wat=!1,this.Ett=null,this.Vat=null,t){this.H3=t[0],this.Bat=t[1],this.Wat=!!t[2];const i=t[3];this.Ett=i?i.split(" "):[],this.Vat=new Set(this.Ett.map(t=>t.toLowerCase())),this.jat=null}}Gr(){this.wat=null,Dn.Kn(this.Ett),this.Ett=null,this.Vat.clear(),this.Vat=null,this.jat=null}Dit(){return this.wat}qZ(){return this.jat}Hat(t){this.jat=t}UE(){return this.H3}uV(t){this.H3=t,this.wat.Uat()}hrt(){return this.Bat}PV(t){this.Bat=t}fet(){return this.Wat}det(t){this.Wat=!!t}wV(){return this.Ett}nst(t){this.Ett=t?t.split(" "):[],this.Vat=new Set(this.Ett.map(t=>t.toLowerCase()))}zat(){return this.Vat}yit(t){return this.Vat.has(t.toLowerCase())}iX(){return{time:this.H3,ease:this.Bat,enable:this.Wat,tags:this.Ett}}eX(t){t&&(this.H3=t.time,this.Bat=t.ease,this.Wat=t.enable,this.Ett=t.tags,this.Vat=new Set(this.Ett.map(t=>t.toLowerCase())))}}Dn.Tat=class{constructor(t,s){this.Mit=s,this.Eit=[],Dn.Y$.eat(this.Eit,t,kn,this),this.Uat()}Gr(){this.Mit=null;for(const t of this.Eit)t.Gr();Dn.Kn(this.Eit),this.Eit=null}Uat(){this.Eit.sort((t,s)=>t.UE()-s.UE());for(let t=0;t<this.Eit.length;t++){const s=this.Eit[t];s.Hat(this.Eit[t+1])}}aet(){return this.Mit}Jat(){return this.Eit.length}Fit(){return this.Eit}Oet(){const t=new kn(null,this);return this.Eit.push(t),this.Uat(),t}Wet(t){for(const s of this.Eit)if(t(s)){const i=this.Eit.indexOf(s);-1!==i&&(s.Gr(),this.Eit.splice(i,1))}this.qat(),this.Uat()}qat(){this.Eit.sort((t,s)=>t.UE()-s.UE())}$et(t){return this.Eit.indexOf(t)}Ket(t){return this.Eit[t]}*Xat(){for(const t of this.Eit)yield t}*Yat(){for(let t=this.Eit.length-1;0<=t;t--)yield this.Eit[t]}iX(){return{keyframeDataItemsJson:this.Eit.map(t=>t.iX())}}eX(t){t&&(Dn.Y$.nat(this.Eit,t.keyframeDataItemsJson,kn,this),this.Uat())}}}{const On=self.Vs;class Ln{constructor(t,s){this.kat=s,this.krt=null,this.$at=null,this.Lf="",this.H3=NaN,this.Bat="noease",this.Wat=!1,this.Kat=null,this.Zat=void 0,this.Qat="line",t&&(this.krt=t[0][0],this.$at=t[0][1],this.Lf=t[0][2],this.H3=t[1],this.Bat=t[2],this.Wat=!!t[3],this.Qat=t[5],this.Kat=null,t[4]&&(this.Kat=new On.tlt(t[4],this)),this.jat=null,this.slt=null)}Gr(){this.kat=null,this.Kat&&(this.Kat.Gr(),this.Kat=null),this.jat=null,this.slt=null}ilt(){return this.Kat}Hat(t){this.jat=t}qZ(){return this.jat}elt(t){this.slt=t}XZ(){return this.slt}xht(){return this.krt}rrt(t){"color"===this.Lf&&On.we(t)?(this.krt[0]=On.ln(t),this.krt[1]=On.un(t),this.krt[2]=On.cn(t)):this.krt=t}Tnt(){return this.$at}srt(t){"color"===this.Lf&&On.we(t)?(this.$at[0]=On.ln(t),this.$at[1]=On.un(t),this.$at[2]=On.cn(t)):this.$at=t}lQ(){const t=this.kat.cht().sQ();return"relative"===t?this.xht():"absolute"===t?this.Tnt():void 0}Kx(){return this.Lf}SetType(t){this.Lf=t}UE(){return this.H3}uV(t){this.H3=t,this.kat.hlt()}hrt(){return this.Bat}PV(t){this.Bat=t}fet(){return this.Wat}det(t){this.Wat=!!t}YZ(){return this.Qat}oQ(s){if(this.Kat){if(!this.Zat&&null!==this.Zat){const i=this.Kat.rlt();if(i){const e=i.length;for(let t=0;t<e;t++){const h=i[t];if(h.DV()===s)return this.Zat=h,this.Zat}}this.Zat=null}return this.Zat}}iX(){const t=this.Kat;return{addonDataJson:t&&t.iX(),value:this.krt,aValue:this.$at,type:this.Lf,time:this.H3,ease:this.Bat,enable:this.Wat}}eX(t){t&&(t.addonDataJson&&this.Kat._SetFromJson(t.addonDataJson),this.krt=t.value,this.$at=t.aValue,this.Lf=t.type,this.H3=t.time,this.Bat=t.ease,this.Wat=t.enable)}}On.Lat=class{constructor(t,s){this.Qet=s,this.iht=[],this.nlt=[],On.Y$.eat(this.iht,t,Ln,this),On.Y$.rat(this.nlt,t,Ln,this),this.hlt()}Gr(){this.Qet=null;for(const t of this.iht)t.Gr();On.Kn(this.iht),this.iht=null;for(const s of this.nlt)s.Gr();On.Kn(this.nlt),this.nlt=null}hlt(){let s=this.iht;s.sort((t,s)=>t.UE()-s.UE());for(let t=0;t<s.length;t++){const i=s[t];t+1<s.length&&i.Hat(s[t+1]),0<=t-1&&i.elt(s[t-1])}(s=this.nlt).sort((t,s)=>t.UE()-s.UE());for(let t=0;t<s.length;t++){const e=s[t];t+1<s.length&&e.Hat(s[t+1]),0<=t-1&&e.elt(s[t-1])}}Qht(){const t=new Ln(null,this);return this.iht.push(t),this.hlt(),t}trt(t){for(const s of this.iht)if(t(s)){const i=this.iht.indexOf(s);-1!==i&&(s.Gr(),this.iht.splice(i,1))}this.olt(),this.hlt()}olt(){this.iht.sort((t,s)=>t.UE()-s.UE())}cht(){return this.Qet}llt(){return this.iht.length}vnt(){return this.iht[this.iht.length-1]}eht(){return this.iht}JZ(){return this.nlt}*ult(){for(const t of this.iht)yield t}*clt(){for(let t=this.iht.length-1;0<=t;t--)yield this.iht[t]}iX(){const t=this.iht,s=this.nlt;return{propertyKeyframeDataItemsJson:t.map(t=>t.iX()),propertyKeyframeDataItemsIncludingDisabledJson:s.map(t=>t.iX())}}eX(t){t&&(On.Y$.nat(this.iht,t.propertyKeyframeDataItemsJson,Ln,this),On.Y$.nat(this.nlt,t.propertyKeyframeDataItemsIncludingDisabledJson,Ln,this),this.hlt())}}}{const Nn=self.Vs;class Bn{constructor(t,s){this.Kat=s,this.Af=t[0],this.flt=t[1]}Gr(){this.Kat=null,this.flt=null}ilt(){return this.Kat}DV(){return this.Af}iX(){return{id:this.Af,data:this.flt}}eX(t){t&&(this.Af=t.id,this.flt=t.data)}}class Wn extends Bn{constructor(t,s){super(t,s),this.dlt=this.flt[0],this.plt=!!this.flt[1],this.mlt=this.flt[2],this.glt=!!this.flt[3]}Gr(){super.Gr()}fQ(){return this.dlt}Kot(){return this.plt}mQ(){return this.mlt}Zot(){return this.glt}iX(){return Object.assign(super.iX(),{startAnchor:this.dlt,startEnable:!!this.plt,endAnchor:this.mlt,endEnable:!!this.glt})}eX(t){t&&(super.eX(t),this.dlt=t.startAnchor,this.plt=!!t.startEnable,this.mlt=t.endAnchor,this.glt=!!t.endEnable)}}class Vn extends Bn{constructor(t,s){super(t,s),this.ylt=this.flt[0],this.Slt=this.flt[1]}Gr(){super.Gr()}tat(){return this.ylt}Qot(){return this.Slt}iX(){return Object.assign(super.iX(),{direction:this.ylt,revolutions:this.Slt})}eX(t){t&&(super.eX(t),this.ylt=t.direction,this.Slt=t.revolutions)}}Nn.tlt=class{constructor(t,s){this.wlt=s,this.blt=[],Nn.Y$.eat(this.blt,t,{prop:0,map:new Map([["cubic-bezier",Wn],["angle",Vn]])},this)}Gr(){this.wlt=null;for(const t of this.blt)t.Gr();Nn.Kn(this.blt),this.blt=null}Mlt(){return this.wlt}rlt(){return this.blt}*vlt(){for(const t of this.blt)yield t}iX(){return{addonDataItemsJson:this.blt.map(t=>t.iX())}}eX(t){t&&Nn.Y$.nat(this.blt,t.addonDataItemsJson,{prop:"id",map:new Map([["cubic-bezier",Wn],["angle",Vn]])},this)}}}{let m=self.Vs,i=0;m.Aot=class extends m.CK{constructor(t,s){super("tween-"+i++,t,s),this.Af="",this.Tlt=!1,this.xlt="start-value",this.Git=null,this.Glt=null,this._lt=null,this.Zet=null,this.Ilt=null}Btt(t){const s=m.Tr(m.Event,"tweenstatereleased");s.Clt=this,t.dispatchEvent(s)}Kx(){return 1}ftt(){for(const t of this.ott.jtt().Vtt())this.att.push(m.Plt.BT(this,t));this.Zet=this.att[0]}iit(){const t=this.ott.jtt().eit(),s=m.Plt.BT(this,t);return this.att.push(s),this.Rlt(),s}Rlt(){this.Zet=this.att[0]}OV(t){return this.Zet.cit()[0]}Pht(t){this.Alt=t}RV(){const t=this.HZ();if(t&&t.length){const s=t[0];if(this.Zet=s){const i=s.RV();return s.Uit()?i:void 0}}}Elt(t){this._lt||(this._lt=[]),this._lt.push(t)}Flt(t){this.Glt||(this.Glt=[]),this.Glt.push(t)}Dlt(t){if(this._lt){const s=this._lt.indexOf(t);-1!==s&&this._lt.splice(s,1)}}klt(t){if(this.Glt){const s=this.Glt.indexOf(t);-1!==s&&this.Glt.splice(s,1)}}Olt(t,s){for(const i of this.att)for(const e of i.kit)if(e.dit()===s){const h=e.Wit(),r=e.cht(),n=h.Aht(r);n.rrt(t),n.srt(t)}}Llt(t){for(const s of this.att)for(const i of s.kit)if(i.dit()===t)return i}Nlt(t){for(const s of t){const i=this.Llt(s);this.Olt(i.zht(),s)}if(this.rst()){const e=this.fV()-this.UE();this.cV(e);for(const h of this.att)h.cet(e);this.Ast(0)}else{const r=this.UE();this.cV(r);for(const n of this.att)n.cet(r);this.Ast(r)}this.Est()}Blt(t,s){const i=this.Llt(s),e=i.Wit(),h=i.cht(),r=e.vnt(h);r.uV(this.fV()),r.rrt(t),r.srt(t)}Wlt(t){this.Af=t}DV(){return this.Af}Vlt(t){this.xlt=t}jlt(){return this.xlt}FV(t){this.Tlt=t}EV(){return this.Tlt}ust(){if(this._lt)for(const t of this._lt)t(this);if(!this.bZ())for(const s of this.att)s.Uet()}Sst(){this._tt=this.Pf.wst()}vZ(){if(!this.Ptt&&(this.Ptt=!0,this.Glt))for(const t of this.Glt)t(this)}uV(t){this.Hlt(),super.uV(t)}Lst(t){(t=m.we(t)?t:this.fV())<0?this.mtt=0:t>=this.fV()?this.mtt=this.fV():this.mtt=t,this.Zet.Nst()}dZ(t){if(!this.MZ()&&"current-state"===this.jlt())for(const s of this.att)s.Het();super.dZ(t)}oV(t=!1){if(super.oV(t),!this.bZ())for(const s of this.att)s.jet()}P0(t=!0,s=!1){this.Hlt(),super.P0(t,s)}Hlt(){for(const t of this.att){const s=t=>{const s=t.UE(),i=this.fV();return 0!==s&&s!==i};t.Bet(s),t.Vet(s)}}fK(){if(!this.rV()){const t=this.RV();if(t&&t.fB().gJ())return!1;this.ntt.lZ(this),this.Jst()}return!0}yZ(h,t,s){if(this.Git||(this.Git=this.RV()),!this.Git||this.Git.kj())this.oV(!0),this.Sst();else{const i=this.Git.Sk();if(0!==(h=-1!==i?s*i:h)||0!==this.Att){this.Att=h;const r=this.mtt+this.gtt,n=h*this.ytt,o=r+n,a=this.ott.Kst;o<0?(this.mtt=0,this.gtt=-o):a<=o?(this.mtt=a,this.gtt=this.mtt-o):(this.mtt=o,this.gtt=0);let t=!1,s=!1,i=this.pV(),e=this.gV();i||e?i&&!e?0<this.ytt?this.mtt>=a&&(this.Lst(0),this.Ult(m.qlt.Jlt.JY.zlt),this.Ult(m.qlt.Jlt.JY.Xlt),s=!0):this.mtt<=0&&(this.Lst(a),this.Ult(m.qlt.Jlt.JY.zlt),this.Ult(m.qlt.Jlt.JY.Xlt),s=!0):!i&&e?0<this.ytt?this.mtt>=a&&(this.Ast(a),this.yV(-1*this.SV()),s=!0,1===this.Stt?this.wtt<this.GW()?(this.wtt++,this.Ult(m.qlt.Jlt.JY.zlt),this.Ult(m.qlt.Jlt.JY.Xlt),this.Ult(m.qlt.Jlt.JY.Ylt),this.Ult(m.qlt.Jlt.JY.$lt),this.Stt=0):(this.Ult(m.qlt.Jlt.JY.Ylt),this.Ult(m.qlt.Jlt.JY.$lt),t=!0):0===this.Stt&&(this.Ult(m.qlt.Jlt.JY.Ylt),this.Ult(m.qlt.Jlt.JY.$lt),this.Stt=1)):this.mtt<=0&&(this.Ast(0),this.yV(-1*this.SV()),s=!0,1===this.Stt?this.wtt<this.GW()?(this.wtt++,this.Ult(m.qlt.Jlt.JY.zlt),this.Ult(m.qlt.Jlt.JY.Xlt),this.Ult(m.qlt.Jlt.JY.Ylt),this.Ult(m.qlt.Jlt.JY.$lt),this.Stt=0):(t=!0,this.Ult(m.qlt.Jlt.JY.Ylt),this.Ult(m.qlt.Jlt.JY.$lt)):0===this.Stt&&(this.Ult(m.qlt.Jlt.JY.Ylt),this.Ult(m.qlt.Jlt.JY.$lt),this.Stt=1)):i&&e&&(0<this.ytt?this.mtt>=a&&(this.Ast(a),this.yV(-1*this.SV()),s=!0,0===this.Stt&&(this.Ult(m.qlt.Jlt.JY.Ylt),this.Ult(m.qlt.Jlt.JY.$lt)),1===this.Stt&&(this.Ult(m.qlt.Jlt.JY.zlt),this.Ult(m.qlt.Jlt.JY.Xlt),this.Ult(m.qlt.Jlt.JY.Ylt),this.Ult(m.qlt.Jlt.JY.$lt)),this.Stt++,this.Stt=m.wrap(this.Stt,0,2)):this.mtt<=0&&(this.Ast(0),this.yV(-1*this.SV()),s=!0,0===this.Stt&&(this.Ult(m.qlt.Jlt.JY.Ylt),this.Ult(m.qlt.Jlt.JY.$lt)),1===this.Stt&&(this.Ult(m.qlt.Jlt.JY.zlt),this.Ult(m.qlt.Jlt.JY.Xlt),this.Ult(m.qlt.Jlt.JY.Ylt),this.Ult(m.qlt.Jlt.JY.$lt)),this.Stt++,this.Stt=m.wrap(this.Stt,0,2))):0<this.ytt?this.mtt>=a&&(this.wtt<this.GW()?(this.wtt++,this.Lst(0),this.Ult(m.qlt.Jlt.JY.zlt),this.Ult(m.qlt.Jlt.JY.Xlt),s=!0):(this.Ast(a),t=!0)):this.mtt<=0&&(this.wtt<this.GW()?(this.wtt++,this.Lst(a),this.Ult(m.qlt.Jlt.JY.zlt),this.Ult(m.qlt.Jlt.JY.Xlt),s=!0):(this.Ast(0),t=!0)),t?(this.Zet.Zst(),this.oV(!0),this.Sst()):(this.Zet.uf(this.mtt,!0,!1,s,this.Rtt,!1),this.Rtt&&(this.Rtt=!1))}}}Ult(t){const s=this.RV(),i=s.Klt(m.qlt.Jlt);i.Zlt(this),this.Pf.QB(t,s,i.cW()),i.Qlt()}iX(){const t=super.iX(),s=this.Ytt();return Object.assign(t,{tweenDataItemJson:s.iX(),id:this.Af,destroyInstanceOnComplete:this.Tlt,initialValueMode:this.xlt})}eX(t){if(t){const s=this.Ytt();s.eX(t.tweenDataItemJson),super.eX(t),this.Af=t.id,this.Tlt=t.destroyInstanceOnComplete,this.xlt=t.initialValueMode,this.Rlt()}}static IsPlaying(t){return t.IsPlaying()}static vV(t){return t.vV()}static tut(t){return!!t.gV()&&0===t.hst()}static sut(t){return!!t.gV()&&1===t.hst()}static iut(t){const s=t.runtime.Utt(),i=new m.iat;if(t.json){i.eX(t.json.tweenDataItemJson);const e=new m.Aot(i,s);return e.eX(t.json),e}{const h=new m.Aot(i,s),r=(m.Ue(t.eut)||(t.eut=[t.eut]),h.Wlt(t.id),h.nst(t.tags),h.Vlt(t.initialValueMode),h.FV(t.hut),h.dV(t.loop),h.mV(t.pingPong),h.cV(t.time),h.Ktt(0),h.Qtt("default"),h.tst(t.eut[0].resultMode),h.sst(t.repeatCount),h.iit()),n=(r.let(t.fW.GB()),r.Qtt("default"),r.tst(t.eut[0].resultMode),r.det(!0),r.pet(t.fW.fB().uD()),t.fW.sW()),o=n.wet()?n.yet():t.fW.lO().Wm(),a=n.wet()?n.Met():t.fW.lO().$m(),l=(r.met(o),r.bet(a),r.ket()),u=(l.uV(0),l.PV("noease"),l.det(!0),l.nst(""),r.ket());u.uV(t.time),u.PV("noease"),u.det(!0),u.nst("");for(const c of t.eut){const f=r.Let(),d=(f.wht(c.rut),f.vht(c.nut),f._ht(c.property),f.Pht(c.type),f.Fht(NaN),f.kht(NaN),f.Qtt("default"),f.tst(c.resultMode),f.det(!0),f.Zht()),p=(d.SetType(c.valueType),d.uV(0),d.PV(c.ease),d.det(!0),d.rrt(c.out),d.srt(c.out),f.Zht());p.SetType(c.valueType),p.uV(t.time),p.PV(c.ease),p.det(!0),p.rrt(c.aut),p.srt(c.aut),f.Jtt()}return h}}static let(t,s){if(!isNaN(s))for(const i of t.HZ())i.let(s)}lut(t,s){return this.Ilt||(this.Ilt=m.Tr(self.GV,this,t,s)),this.Ilt}}}{const jn=self.Vs;jn.Plt=class extends jn.Htt{constructor(t,s){super(t,s),this.uut=null,this.cut=null}static BT(t,s){return jn.Tr(jn.Plt,t,s)}fut(){1===this.kit.length?this.uut=this.kit[0]:(this.uut=this.kit[0],this.cut=this.kit[1])}Oit(){for(const t of this.Mit.Wit().Bit())this.kit.push(jn.dut.BT(this,t));this.fut()}Let(){const t=this.Mit.Wit(),s=t.Net(),i=jn.dut.BT(this,s);return this.kit.push(i),this.fut(),i}dZ(){if(this.Hit(),this.Uit()||!this.Xtt()){const t=this.jit(),s=t.rst(),i=s?0:this.uet();for(const h of this.kit)h.dZ(i),0===this.Lit&&1===h.xet()&&(this.Lit=1),0===this.xK&&1===h.pZ()&&(this.xK=1);this.Nit=0;const e=this.kit.some(t=>t.$st());e&&(this.Nit=1),this.Ait=this.Get(i),this.Cit=!1,this.Pit=!1,this.uf(i)}}Qst(){}uf(t,s=0,i=!1,e=!1,h,r=!1,n=!1){if(this.Git||this.RV(),this.Git){const o=!this.Git.kj();return o&&(!r||!this.fB().gJ())&&((this.cut?(this.uut.uf(t,i,e,n),this.cut):this.uut).uf(t,i,e,n),void(0!==this.uut.xet()&&(this._it||(this._it=this.Git.lO()),this._it)&&this._it.R4()))}}sit(){}eX(t){super.eX(t),this.fut()}}}{const Hn=self.Vs;Hn.dut=class extends Hn.Vit{constructor(t,s){super(t,s),this.mut=!1}static BT(t,s){return Hn.Tr(Hn.dut,t,s)}uf(t,s=!1,i=!1,e=!1){let h,r;if(this.mut)h=this.iht[0],r=this.iht[1];else{if(s)h=this.tht.Bht(t,this.Qet);else{if(this.rht){const n=this.jit(),o=this.rht.qZ(),a=this.rht.UE(),l=o?o.UE():n.fV();(t<=a||l<=t)&&(this.rht=this.tht.Bht(t,this.Qet))}else this.rht=this.tht.Bht(t,this.Qet);h=this.rht}r=h.qZ()}this.sht.uf(t,h,r,s,i,e)}Zht(){const t=this.Qet.hht(),s=t.Qht();return this.rht=null,this.mut=this.Oht().length<=2,s}Vet(t){this.rht=null;const s=this.Qet.hht();s.trt(t),this.mut=this.Oht().length<=2}iX(){return{sourceAdapterJson:this.Jtt().iX(),basic:this.mut}}eX(t){t&&(this.Jtt().eX(t.sourceAdapterJson),this.mut=t.basic)}}}{const Un=self.Vs,zn=self.Oc;Un.cf=class extends Un.Mr{constructor(t,s=!0){super(),this.Cr=t[0],this.gut=t[2],this.yut=[];for(const i of t[1]){const e=Un.Sut.BT(this,i);this.yut.push(e)}for(let t=0;t<this.yut.length;t++){const h=this.yut[t],r=this.yut[t+1],n=this.yut[t-1];h.Hat(r),h.elt(n)}this.wut=new Map,this.but=new Map,this.Mut(),s&&zn.df(this.Cr,(t,s,i,e)=>this.uf(t,s,i,e),null,{transition:this})}static BT(t){return Un.Tr(Un.cf,t)}Gr(){for(const t of this.yut)t.Gr();Un.Kn(this.yut),this.yut=null,this.wut.clear(),this.wut=null,this.but.clear(),this.but=null}ff(t){this.gut=!!t}vut(t){const s=this.but.get(t);if(s)return s;for(const i of this.yut)if(i.Tut()===t)return this.but.set(t,i),i}xut(s){for(let t=this.yut.length-1;0<=t;t--){const i=this.yut[t],e=i.Tut();if(e<=s){let t=i;if(e<s)return t;if(e===s){for(;t;){const h=t.XZ();if(!h)break;if(h.Tut()!==t.Tut())break;t=h}return t}}}}uf(t,s,i,e){let h=t/e;if(this.gut){const S=this.vut(0),w=this.vut(1),b=s+(s+i)*S.Gut(),M=(s+i)*w.Gut(),v=M-b;return 0===e?b+v:zn.gf(t,b,v,e)}0===e&&(h=1);let r=this.xut(h),n=r.qZ();if(!n){const T=r.XZ(),x=r;r=T,n=x}const o=n.Tut()-r.Tut(),a=Un.Pr(h,r.Tut(),n.Tut(),0,o);if(r._ut()||0==o){const G=s+(s+i)*r.Gut(),_=(s+i)*n.Gut(),I=_-G;return 0==o?1===a?G+I:G:zn.gf(a,G,I,o)}let l=r.Tut(),u=r.Gut(),c=r.Tut()+r.Iut(),f=r.Gut()+r.Cut(),d=n.Tut()+n.Put(),p=n.Gut()+n.Rut(),m=n.Tut(),g=n.Gut(),y=zn.Kc("spline")(a,l,u,c,f,d,p,m,g,this.wut.get(r));return(1-(y+=r.Gut()))*s+y*(s+i)}Mut(){this.wut.clear();for(let t=0;t<this.yut.length-1;t++){const s=this.yut[t];if(s.Kot()){const i=s,e=this.yut[t+1];if(e.Zot()){const h=i.Tut(),r=i.Tut()+i.Iut(),n=e.Tut()+e.Put(),o=e.Tut();this.wut.set(i,zn.yf(h,r,n,o))}}}}}}{const Jn=self.Vs;Jn.Sut=class extends Jn.Mr{constructor(t,s){super(),this.Aut=t,this.Eut=s[0],this.Fut=s[1],this.Dut=s[2],this.kut=s[3],this.Out=s[4],this.Lut=s[5],this.plt=s[6],this.glt=s[7],this.Nut=s[8],this.jat=null,this.slt=null}Gr(){this.Aut=null}static BT(t,s){return Jn.Tr(Jn.Sut,t,s)}Hat(t){this.jat=t}qZ(){return this.jat}elt(t){this.slt=t}XZ(){return this.slt}Tut(){return this.Eut}Gut(){return this.Fut}Iut(){return this.Dut}Cut(){return this.kut}Put(){return this.Out}Rut(){return this.Lut}Kot(){return this.plt}Zot(){return this.glt}_ut(){return"linear"===this.Nut}But(){return"cubic"===this.Nut}}}{const qn=self.Vs;qn.Wut=class extends qn.Mr{constructor(t){super(),this.Pf=t,this.Vut=[]}Gr(){for(const t of this.Vut)t.Gr();qn.Kn(this.Vut),this.Vut=null}BT(t){this.Vut.push(qn.cf.BT(t))}}}{const Xn=self.Vs;Xn.jut=class extends Xn.Mr{constructor(t){super(),this.Pf=t,this.Hut=null,this.Uut=null,this.mK=t=>this.gK(t.fW)}Gr(){if(this.GK(),this.Hut){for(const t of this.Hut.values())t.clear();this.Hut.clear()}this.Hut=null,this.Pf=null}BT(t){if(this.Hut||(this.Hut=new Map),t){const s=t[0][16],i=s[0],e=t[1],h=(this.Hut.has(e)||this.Hut.set(e,new Map),this.Hut.get(e));h.set(i,t)}}_K(){const t=this.Pf.a0();t&&t.addEventListener("instancedestroy",this.mK)}GK(){const t=this.Pf.a0();t&&t.removeEventListener("instancedestroy",this.mK)}zut(){return!!this.Hut&&0!==this.Hut.size}Jut(t,s){let i;if(i=t instanceof Xn.qut?t.uD():t,this.Hut.has(i)){const e=this.Hut.get(i).get(s);return e?JSON.parse(JSON.stringify(e)):void 0}}Xut(t,s){this.Uut||(this.Uut=new WeakMap),this.Uut.has(t)||this.Uut.set(t,s)}Yut(t){if(!this.Uut)return"";const s=this.Uut.get(t);return s||""}gK(t){this.Uut&&this.Uut.has(t)&&this.Uut.delete(t)}}}{const Yn=self.Vs;Yn.$ut=class{constructor(t){this.Pf=t,this.Kut=new Yn.Zut}Gr(){this.Kut.Gr(),this.Kut=null,this.Pf=null}PO(){return this.Pf}BT(t){this.Kut.Fc(t)}Qut(t){return this.Kut.oi(t)}tct(){return this.Kut.tct()}}}{const $n=self.Vs;$n.sct=class{constructor(t,s,i,e,h,r,n){this.Pf=h.PO(),this.ict=h,this.ect=t,this.hct=i,this.rct=e,this.Ey=s,this.$$=r,this.nct=n??r.RV().GB(),this.oct(),this.lct=this.cct?.uct()??-1,this.fct=[],this.dct=null,this.pct=NaN,this.mct=null,this.gct=null,this.yct=null,this.Sct="",this.wct=null,this.bct="",this.Mct="",this.vct=0,this.Tct=!1,this.xtt=!1}Gr(){this.xtt||($n.Kn(this.fct),this.fct=null,this.Pf=null,this.ict=null,this.rct=null,this.$$=null,this.dct=null,this.pct=NaN,this.mct&&this.mct.clear(),this.mct=null,this.gct=null,this.yct=null,this.Sct="",this.wct=null,this.bct="",this.Mct="",this.xtt=!0)}_r(){return this.xtt}xct(){return this.ict}PO(){return this.Pf}Mf(){return this.ect}Gct(){return this.rct}hV(){return this.Ey}WK(){return this.$$||(this.$$=this.Pf.hO(this.nct).sW()),this.$$}_ct(){return this.Ict(this.lct)}Cct(){const t=this._ct();return t?t.hV():""}Pct(){const t=this._ct();return t?t.wV():[]}Rct(t){const s=this.Pct();if(!s)return!1;if(!s.length)return!1;const i=$n.sct.ost(t);return!(!i||!i.length)&&i.every($n.sct.lst,s)}Act(t,s){const i=this.Pct();if(!i)return!1;if(!i.length)return!1;const e=$n.sct.ost(t);return!(!e||!e.length)&&e.every(t=>$n.sct.Ect.call(i,t,s))}static lst(t){return""===t?1===this.length&&""===this[0]:this.map(t=>t.trim().toLowerCase()).includes(t.trim().toLowerCase())}static ost(t){return t.trim().split(" ")}static Ect(s,i){return""===s?1===this.length&&""===this[0]:this.some(t=>$n.compare(t.trim(),i,s.trim()))}Fct(t){const s=this._ct();if(s){if($n.we(t)){const i=s.Dct(),e=i?i[t]:void 0;if($n.we(e))return this.Ict(e)}if("string"==typeof t)for(const h of s.Dct()){const r=this.Ict(h);if(r.lV(t))return this.Ict(r.uct())}}}kct(t){const s=this.Fct(t);return s?s.hV():""}Oct(t){const s=this.Fct(t);return s?s.wV():""}Lct(t){const s=this._ct();if(!s)return-1;const i=s.Dct();if(!i)return-1;const e=this.Fct(t);return e?i.indexOf(e.uct()):-1}Nct(){const t=this._ct();if(!t)return 0;const s=t.Dct();return s?s.length:0}Ict(t){return this.rct.Ict(t)}P0(){const t=this.Bct();t.Wct(!0)}Wct(t){if(this.Vct()){for(const[s,i]of this.Vct().entries())i.Wct(!1);this.Vct().clear()}if(this.mct=null,this.dct=null,this.jct=null,this.gct=null,this.Sct="",this.wct=null,this.bct="",this.Mct="",this.fct=[],t){this.ict.Hct(this);const e=this.cct.uct();e!==this.lct&&this.Uct(e)}else this.lct=this.cct.uct()}zct(){const t=this.rct.Ict(this.lct);return t?t.qct().Jct():0}Xct(t){const s=this.Yct(t);return s?s.Mf():""}$ct(t){let s;return $n.we(t)&&(s=this.Yct(t)),"string"==typeof t&&(s=this.Kct(t)),"number"!=typeof t&&"string"!=typeof t&&console.warn("[Flowcharts] unexpected argument type in GetCurrentNodeOutputValueAt expression"),s?s.xht():""}Zct(t){let s;if($n.we(t)&&(s=this.Yct(t)),s="string"==typeof t?this.Kct(t):s){const i=s.Qct();$n.we(i)&&(this.fct.push(this.lct),this.Uct(i))}}tft(t){const s=this.rct.ift(t);if(s){const i=this.rct.Ict(s.uct());i&&(this.fct.push(this.lct),this.Uct(i.uct()))}}eft(){const t=this.fct.pop();$n.we(t)?this.Uct(t):this.hft()&&(this.ict.Hct(this.hft(),!0,!1,!1),this.hft().Uct(this.rft()),this.Bct().nft(this.hft()))}oft(t){const s=this._ct();if(s){s.uct();const i=this.Fct(t);i&&(this.fct.push(this.lct),this.Uct(i.uct()))}}aft(s){if($n.we(s)){const t=this.rct.Ict(this.lct),i=t.qct().lft();return!!i[s]}if("string"==typeof s){const e=this.rct.Ict(this.lct),h=e.qct().lft();for(let t=0;t<h.length;t++)if(h[t].Mf()===s)return!0}return!1}uft(){this.Tct=!0}cft(){return 0<this.vct}fft(){this.vct++}dft(){this.vct--,0===this.vct&&this.Tct&&this.ict.pft(this)}Uct(t){const i=this.lct,s=this.WK().RV();if(this.fft(),this.ict.mft(this),this.Pf.QB($n.XY.Flowchart.JY.OnBeforeAnyNodeChange,s),this.Pf.QB($n.XY.Flowchart.JY.OnBeforeTaggedNodeChange,s),this.Pf.QB($n.XY.Flowchart.JY.OnBeforeAnyNodeChangeInFlowchart,s),this.Pf.QB($n.XY.Flowchart.JY.OnBeforeTaggedNodeChangeInFlowchart,s),this.lct=t,this.Pf.QB($n.XY.Flowchart.JY.OnAnyNodeChange,s),this.Pf.QB($n.XY.Flowchart.JY.OnTaggedNodeChange,s),this.Pf.QB($n.XY.Flowchart.JY.OnAnyNodeChangeInFlowchart,s),this.Pf.QB($n.XY.Flowchart.JY.OnTaggedNodeChangeInFlowchart,s),this.ict.gft(),this.dft(),!this._r()){const e=this.Ict(this.lct);if("reference"===e.Kx()){const h=e.yft();if(this.Sft(e)){this.fct.pop();const r=this.wft(e),n=(this.ict.Hct(r,!0,!0,!1),r.bft(this,i),this.Bct());n.nft(r)}else{const o=e.Mft();if(h){this.fct.pop();let s=e.vft();if(s){let t=this.ict.Tft(s);for(;t;)s=$n.xp(s),t=this.ict.Tft(s)}else{s=h+"-ref";let t=this.ict.Tft(s);for(;t;)s=$n.xp(s),t=this.ict.Tft(s)}const a=this.ict.xft(h,o,s,this.$$,!0),l=(a.bft(this,i),this.Gft(e,a),this.Bct());a._ft(l),l.nft(a)}}}}}Yct(t){const s=this.rct.Ict(this.lct);if(!s)return null;const i=s.qct().lft();if(!i)return null;const e=i[t];return e||null}Kct(t){const s=this.rct.Ict(this.lct);if(!s)return null;const i=s.qct().Ift(t);return i||null}oct(s){if("number"==typeof s){let t=this.Ict(s);t=t||this.rct.Cft(),this.cct=t}else{let t=this.rct.ift(this.hct);t=t||this.rct.Cft(),this.cct=t}}iX(){return this.Tct?null:{flowchartName:this.ect,flowchartTag:this.Ey,startNodeTag:this.hct,currentNodeId:this.lct,previousNodeIds:this.fct,pluginUID:this.$$.RV().GB(),reference:{previousFlowchartTag:this.hft()?this.hft().hV():"",previousStartNodeId:$n.we(this.rft())?this.rft():NaN,referencesJson:this.Pft(),currentReferenceFlowchartTag:this.Rft()?this.Rft().hV():"",rootFlowchartTag:this.Bct()?this.Bct().hV():""}}}Pft(){if(!this.Aft())return null;const t=[];for(const[s,i]of this.Vct().entries())t.push({flowchartElementId:s.uct(),flowchartStateTag:i.hV()});return t.length?t:null}eX(t){if(t){if(this.ect=t.flowchartName,this.Ey=t.flowchartTag,this.hct=t.startNodeTag,this.lct=t.currentNodeId,this.fct=t.previousNodeIds,this.nct=t.pluginUID,t.hasOwnProperty("reference")){const s=t.reference;this.Sct=s.previousFlowchartTag,this.pct=s.previousStartNodeId,this.wct=s.referencesJson,this.bct=s.currentReferenceFlowchartTag,this.Mct=s.rootFlowchartTag}this.oct()}}hft(){return"string"==typeof this.Sct&&this.Sct&&(this.dct=this.ict.Tft(this.Sct),this.Sct=""),this.dct}rft(){return this.pct}bft(t,s){this.dct=t,this.pct=s}Rft(){return"string"==typeof this.bct&&this.bct&&(this.gct=this.ict.Tft(this.bct),this.bct=""),this.gct}nft(t){this.gct=t,this.gct===this&&(this.gct=null)}Bct(){return"string"==typeof this.Mct&&this.Mct&&(this.yct=this.ict.Tft(this.Mct),this.Mct=""),this.yct||this}_ft(t){this.yct=t}Aft(){return this.Eft(),!!this.mct}Sft(t){return this.Eft(),this.mct&&this.mct.has(t)}Eft(){if(this.wct){this.mct&&this.mct.clear(),this.mct||(this.mct=new Map);for(const t of this.wct){const s=this.ict.Tft(t.flowchartStateTag),i=s.Ict(t.flowchartElementId);this.mct.set(i,s)}this.wct=null}}Vct(){return this.Eft(),this.mct}wft(t){return this.Eft(),this.mct.get(t)}Gft(t,s){this.mct||(this.mct=new Map),this.mct.set(t,s)}}}{const Kn=self.Vs;Kn.Fft=class{constructor(t){this.Pf=t,this.Dft=new Map,this.kft=null,this.Oft=[],this.Lft=()=>this.bK(),this.Nft=null}Gr(){Kn.Kn(this.Oft),this.Oft=null,this.Dft.clear(),this.Dft=null,this.kft=null,this.Pf=null,this.Nft=null}PO(){return this.Pf}xft(t,s,i,e,h,r){const n=this.Pf.xct().Qut(t);if(n){if(!this.Dft.has(i)){const o=new Kn.sct(t,i,s,n,this,e,r);return this.Dft.set(i,o),h&&this.Hct(o,!0),o}{const a=this.Dft.get(i);a&&this.pft(a)}}else console.warn(`[Flowcharts] no flowchart found with name '${t}'`)}pft(t){if(t.uft(),!t.cft()){const s=t.hV();this.Dft.delete(s),t.Gr(),this.kft===t&&(this.kft=null)}}Bft(t){t.P0()}Tft(t){return this.Dft.get(t)}mft(t){this.Oft.push(t)}gft(){this.Oft.pop()}Hct(t,s=!1,i=!1,e=!0){if(e){const h=t.Rft();t=h||t}t!==this.kft&&(this.Wft(),this.Vft(t,s,i))}jft(t){return"string"==typeof t?this.Tft(t):this.Oft.length?this.Oft[this.Oft.length-1]:this.kft}Wft(){if(this.kft&&!this.kft._r()){const t=this.kft.WK().RV();this.kft.fft(),this.mft(this.kft),this.Pf.QB(Kn.XY.Flowchart.JY.OnBeforeFlowchartChange,t),this.gft(),this.kft.dft()}}Vft(t,s=!1,i=!1){if(this.kft=t,this.kft&&!this.kft._r()){const e=this.kft.WK().RV();this.kft.fft(),this.mft(this.kft),this.Pf.QB(Kn.XY.Flowchart.JY.OnFlowchartChange,e),!0!==i&&"number"!=typeof i||this.kft.oct(i),s&&(this.Pf.QB(Kn.XY.Flowchart.JY.OnAnyNodeChange,e),this.Pf.QB(Kn.XY.Flowchart.JY.OnTaggedNodeChange,e)),this.gft(),this.kft.dft()}}iX(){return{flowchartJsonObjects:[...this.Dft.values()].map(t=>t.iX()),currentFlowchartTag:this.kft?this.kft.hV():null}}eX(t){if(t){this.Nft=t;const s=new Map;for(const i of this.Nft.flowchartJsonObjects){const e=i.flowchartTag;if(this.Dft.has(e)){const h=this.Dft.get(e);h.eX(i),s.set(e,h)}else{const r=this.xft(i.flowchartName,i.startNodeTag,i.flowchartTag,null,!1,i.pluginUID);r.eX(i),s.set(i.flowchartTag,r)}}for(const[n,o]of this.Dft.entries())s.has(n)||o.Gr();this.Dft.clear(),this.Dft=s,this.Pf.LY()?this.Pf.a0().addEventListener("afterload",this.Lft):this.bK()}}bK(){this.Pf.a0().removeEventListener("afterload",this.Lft);const t=this.Dft.get(this.Nft.currentFlowchartTag);t&&this.Hct(t,!0),this.Nft=null}}}{const Zn=self.Vs;Zn.Zut=class{constructor(){this.Hft=new Map}Gr(){for(const t of this.Hft.values())t.Gr();this.Hft.clear(),this.Hft=null}Fc(t){const s=new Zn.Uft(t),i=s.Mf();this.Hft.set(i,s)}oi(t){return this.Hft.get(t)}tct(){return!!this.Hft.size}static zft(t,s,i,e){if(s)for(const h of s){const r=new i(h,e);t.push(r)}}}}{const Qn=self.Vs;Qn.Uft=class{constructor(t){this.Cr=t[0],this.Jft=new Qn.qft(t[1],this)}Gr(){this.Jft.Gr(),this.Jft=null}Xft(){return this.Jft}Ict(t){return this.Jft.Ict(t)}ift(t){return this.Jft.ift(t)}Cft(){return this.Jft.Cft()}Mf(){return this.Cr}}}{const to=self.Vs;class so{constructor(t,s){this.Jft=s,this.Lf=t[7],this.Yft=t[0],this.Ey=t[1],this.Ey?this.Ett=this.Ey.trim().split(" ").map(t=>t.trim()):this.Ett=[],this.$ft=t[2],this.Kft=null,this.Zft=null,"dictionary"===this.Lf&&(this.Kft=t[3],this.Zft=t[4]),this.Qft=t[6],this.t0t=null,this.s0t=null,this.i0t=null,"reference"===this.Lf&&(this.t0t=t[8],this.s0t=t[9],this.i0t=t[10]),this.e0t=new to.h0t(t[5],this)}Gr(){this.Jft=null}Xft(){return this.Jft}qct(){return this.e0t}uct(){return this.Yft}hV(){return this.Ey}wV(){return this.Ett}lV(t){if(!this.Ett)return!1;if(!this.Ett.length)return!1;const s=to.sct.ost(t);return!(!s||!s.length)&&s.every(to.sct.lst,this.Ett)}r0t(){return this.Qft}n0t(t){this.Qft=!!t}o0t(){if("dictionary"===this.Lf)return!0;if("reference"===this.Lf)return!1;throw new Error("unexpected flowchart node type: "+this.Lf)}Dct(){return this.$ft}a0t(){return this.Kft}l0t(){return this.Zft}Kx(){return this.Lf}yft(){return this.t0t}Mft(){return this.s0t}vft(){return this.i0t}}to.qft=class{constructor(t,s){this.rct=s,this.u0t=[],this.c0t=new Map,this.f0t=new Map,this.d0t=null,to.Zut.zft(this.u0t,t,so,this);for(const i of this.u0t){const e=i.uct(),h=i.hV(),r=i.wV(),n=i.r0t();if(this.c0t.set(e,i),h)for(const a of r)this.f0t.has(a)||this.f0t.set(a,new Set),this.f0t.get(a).add(i);n&&(this.d0t=i);const o=i.qct();for(const l of o.p0t()){const u=l.uct();this.c0t.set(u,l)}}this.d0t||this.m0t()}Gr(){this.rct=null;for(const t of this.u0t)t.Gr();to.Kn(this.u0t),this.u0t=null}Gct(){return this.rct}Ict(t){return this.c0t.get(t)}ift(t){if(!t||!t.length)return null;const i=[];for(const e of t.trim().split(" ")){let t=this.f0t.get(e.trim())??new Set;if(0===t.size)return null;i.push(t)}const s=i.reduce((t,s)=>s.size<t.size?s:t);return[...s].filter(s=>i.every(t=>t.has(s)))[0]}Cft(){return this.d0t}*g0t(){for(const t of this.u0t)yield t}m0t(){let t=0;for(const s of this.g0t())s.r0t()&&t++;if(0===t){for(const i of this.g0t())if(i.o0t()&&!i.r0t())return void i.n0t(!0)}else{if(1===t)return;if(1<t){let t=!0;for(const e of this.g0t())e.o0t()&&(e.r0t()&&t?t=!1:e.r0t()&&!t&&e.n0t(!1))}}for(const h of this.g0t())if(h.o0t()&&h.r0t())return void(this.d0t=h)}}}{const io=self.Vs;class eo{constructor(t,s){this.e0t=s,this.Yft=t[0],this.Cr=t[1],this.krt=t[2],this.y0t=t[3]}Gr(){this.e0t=null}qct(){return this.e0t}uct(){return this.Yft}Mf(){return this.Cr}xht(){return this.krt}Qct(){return this.y0t}}io.h0t=class{constructor(t,s){this.S0t=s,this.w0t=[],this.b0t=new Map,io.Zut.zft(this.w0t,t,eo,this);for(const i of this.w0t)this.b0t.set(i.Mf(),i)}Gr(){this.S0t=null;for(const t of this.w0t)t.Gr();io.Kn(this.w0t),this.w0t=null}M0t(){return this.S0t}Jct(){return this.w0t.length}lft(){return this.w0t}Ift(t){return this.b0t.get(t)}*p0t(){for(const t of this.w0t)yield t}}}{const ho=self.Vs;ho.v0t=class extends ho.Mr{constructor(t){super(),this.T0t=t,this.x0t=[],this.x0t.push(ho.Tr(ho.G0t,this)),this.Ay=0,this._0t=this.x0t[0]}Gr(){for(const t of this.x0t)t.Gr();ho.Kn(this.x0t),this._0t=null,this.T0t=null}fB(){return this.T0t}b5(){return this._0t}I0t(){return this.x0t[this.Ay-1]}Tc(){this.b5().Tc()}C0t(){const t=this.x0t,s=++this.Ay;if(s===t.length){const i=ho.Tr(ho.G0t,this);t.push(i),this._0t=i}else{const e=t[s];e.P0(),this._0t=e}}P0t(){const t=this.x0t,s=++this.Ay,i=(s===t.length&&t.push(ho.Tr(ho.G0t,this)),t[s]);i.X0(t[s-1]),this._0t=i}O8(){this._0t=this.x0t[--this.Ay]}R0t(i){const e=this.x0t;for(let t=0,s=e.length;t<s;++t)e[t].R0t(i)}}}{const ro=self.Vs;ro.G0t=class extends ro.Mr{constructor(t){super(),this.x0t=t,this.T0t=this.x0t.fB(),this.A0t=this.T0t.PO().ek(),this.E0t=!0,this.x7=[],this.F0t=[]}Gr(){this.D0t(),this.x0t=null,this.T0t=null,this.A0t=null}D0t(){ro.Kn(this.x7),ro.Kn(this.F0t)}fB(){return this.T0t}k0t(){return this.E0t}O0t(){return this.E0t?!!this.T0t.v5():!!this.x7.length}w5(){return this.E0t?this.T0t.w5():this.x7}L0t(){return!!this.F0t.length}N0t(){return this.F0t}B0t(){const t=this.w5();return t.length?t:this.F0t}P0(){this.E0t=!0,ro.Kn(this.F0t)}Tc(){this.E0t=!0}X0(t){t.k0t()?this.P0():(this.E0t=!1,ro.ho(this.x7,t.x7),ro.Kn(this.F0t))}W0t(t){this.x7.push(t)}V0t(t){this.F0t.push(t)}j0t(t){this.E0t=!!t}H0t(){return this.x7}U0t(){return this.F0t}z0t(t){this.E0t=!1,ro.Kn(this.x7),this.x7.push(t)}J0t(t){this.E0t=!1,ro.ho(this.x7,t)}q0t(t){this.E0t=!1,ro.Kn(this.x7);for(const s of t)this.x7.push(s)}X0t(t,s){for(const i of s)t.has(i)||this.F0t.push(i)}Y0t(t){for(const s of t)this.x7.push(s);ro.uo(this.F0t,t)}$0t(){ro.Kn(this.F0t)}K0t(t){if(t)if(this.A0t.T8().YD().Z0t()){this.k0t()&&(ro.Kn(this.x7),ro.ho(this.F0t,t.fB().w5()),this.E0t=!1);const s=this.F0t.indexOf(t);-1!==s&&(this.x7.push(this.F0t[s]),this.F0t.splice(s,1))}else this.z0t(t)}R0t(t){ro.uo(this.x7,t),ro.uo(this.F0t,t)}}}{const no=self.Vs;no.Q0t=class extends no.Mr{constructor(t){super(),this.tdt=t,this.Pf=this.tdt.PO(),this.x0t=[],this.x0t.push(no.Tr(no.sdt,this,null)),this.Ay=0,this.idt=[]}Gr(){for(const t of this.x0t)t.Gr();no.Kn(this.x0t),no.Kn(this.idt),this.tdt=null,this.Pf=null}HD(){return this.tdt}PO(){return this.Pf}T8(){return this.x0t[this.Ay]}edt(){return this.x0t}hdt(){return this.Ay}x8(t){const s=this.x0t,i=++this.Ay;if(i===s.length){const e=no.Tr(no.sdt,this,t);return s.push(e),e}{const h=s[i];return h.P0(t),h}}O8(){--this.Ay}rdt(t){this.idt.push(t)}ndt(){this.idt.pop()}ik(){const t=this.idt;return 0===t.length?null:t.at(-1)}}}{const oo=self.Vs;oo.sdt=class extends oo.Mr{constructor(t,s){super(),this.x0t=t,this.Pf=this.x0t.PO(),this.odt=s,this.adt=0,this.ldt=0,this.udt=!1,this.cdt=!1,this.fdt=null,this.ddt=0,this.pdt=0,this.mdt=null}Gr(){this.P0(null),this.x0t=null,this.Pf=null}P0(t){this.odt=t,this.adt=0,this.ldt=0,this.udt=!1,this.cdt=!1,this.mdt=null}gdt(t,s){this.odt=t,this.adt=0,this.ldt=s}ydt(){this.adt=0,this.ldt=0}YD(){return this.odt}Sdt(t){this.odt=t}wdt(){return this.adt}bdt(t){this.adt=t}Mdt(){return this.ldt}vdt(t){this.ldt=t}Tdt(t){this.udt=!!t}xdt(){return this.udt}Gdt(t){this.cdt=!!t}_dt(){return this.cdt}Idt(t){this.fdt=t}Cdt(){return this.fdt}Pdt(t,s){this.ddt=t,this.pdt=s}hk(){return this.ddt}rk(t){this.pdt=t}Rdt(){return this.pdt}Adt(){const t=this.odt;return!!t.Edt()||this.adt<t.Fdt()-1&&!!t.v8().length}Ddt(t){this.mdt=t}kdt(){return this.mdt}}}{const ao=self.Vs;ao.Odt=class extends ao.Mr{constructor(t){super(),this.tdt=t,this.Pf=this.tdt.PO(),this.x0t=[],this.Ay=-1,this._0t=null,this.Ldt=[]}Gr(){ao.Kn(this.x0t),this.tdt=null,this.Pf=null}Ndt(t){this.Ldt=t;const s=this.Ldt.slice(0);this.x0t.push(s),this.Ay=0,this._0t=s}HD(){return this.tdt}PO(){return this.Pf}Bdt(){return this._0t}x8(){const t=++this.Ay,s=this.x0t;t===s.length?s.push(this.Ldt.slice(0)):ao.ho(s[t],this.Ldt),this._0t=s[t]}O8(){this._0t=this.x0t[--this.Ay]}}}{const lo=self.Vs;lo.Wdt=class extends lo.Mr{constructor(t){super(),this.tdt=t,this.Pf=this.tdt.PO(),this.x0t=[],this.Ay=-1}Gr(){lo.Kn(this.x0t),this.tdt=null,this.Pf=null}HD(){return this.tdt}PO(){return this.Pf}Vdt(){return 0<=this.Ay}Bdt(){return this.x0t[this.Ay]}x8(){if(++this.Ay,this.Ay===this.x0t.length){const t=lo.Tr(lo.jdt,this);return this.x0t.push(t),t}{const s=this.x0t[this.Ay];return s.P0(),s}}O8(){--this.Ay}Hdt(s){const i=this.x0t;for(let t=this.Ay;0<=t;--t){const e=i[t];if(e.Mf()===s)return e}return null}Udt(){return this.x0t.slice(0,this.Ay+1)}}}{const uo=self.Vs;uo.jdt=class extends uo.Mr{constructor(t){super(),this.zdt=t,this.Cr="",this.Ay=0,this.Jdt=!1,this.qdt=NaN}P0(){this.Cr="",this.Ay=0,this.Jdt=!1,this.qdt=NaN}_8(t){this.Cr=t}Mf(){return this.Cr}F8(t){this.Ay=t}uD(){return this.Ay}oV(){this.Jdt=!0}k8(){return this.Jdt}Xdt(t){this.qdt=t}Ydt(){return this.qdt}}}{const co=self.Vs;co.$dt=class extends co.Mr{constructor(){super(),this.x0t=[],this.Ay=-1}Gr(){co.Kn(this.x0t)}Bdt(){return this.x0t[this.Ay]}x8(){if(++this.Ay,this.Ay!==this.x0t.length)return this.x0t[this.Ay];{const t=[];return this.x0t.push(t),t}}O8(){--this.Ay}}}{let t=function(t,s){return t.uD()-s.uD()},r=function(i,e){for(let t=0,s=i.length;t<s;++t)if(i[t]!==e[t])return!1;return!0};t,r;const fo=self.Vs;fo.Kdt=class extends fo.Mr{constructor(t){super(),this.Pf=t,this.Zdt=[],this.Qdt=new Map,this.t1t=[],this.s1t=new Map,this.i1t=new Map,this.e1t=new Map,this.h1t=new Map,this.r1t=new Map,this.n1t=new Map,this.o1t=0,this.a1t=[],this.l1t=[],this.u1t=[],this.c1t=new Map,this.f1t=new Map,this.A0t=fo.Tr(fo.Q0t,this),this.d1t=fo.Tr(fo.Odt,this),this.zdt=fo.Tr(fo.Wdt,this),this.p1t=[],this.m1t=[],this.g1t=[],this.y1t=0,this.S1t=0,this.w1t=0,this.b1t=[],this.M1t=[],this.v1t=[],this.T1t=new Map,this.x1t=new Map,self.c3_callFunction=(t,s)=>this.G1t(t,s)}Gr(){this.r$(),this.A0t.Gr(),this.A0t=null,this.d1t.Gr(),this.d1t=null,fo.Kn(this.m1t),fo.Kn(this.g1t),this.Pf=null,fo.Kn(this.Zdt),this.Qdt.clear()}BT(t){const s=fo.Tr(fo._1t,this,t);this.Zdt.push(s),this.Qdt.set(s.Mf().toLowerCase(),s)}I1t(t){this.p1t.push(t)}C1t(){for(const t of this.f1t.values())t.P1t();for(const s of this.c1t.values())s.C1t();for(const i of this.f1t.values())i.C1t();for(const e of this.Zdt)e.C1t();for(const h of this.Zdt)h._Y();for(const r of this.p1t)r.C1t(!1);fo.Kn(this.p1t),this.d1t.Ndt(this.u1t)}PO(){return this.Pf}GY(t){return this.Qdt.get(t.toLowerCase())||null}R1t(t){this.t1t.push(t),this.s1t.set(t.A1t(),t)}E1t(t){this.i1t.set(t.NJ(),t)}F1t(t){this.e1t.set(t.NJ(),t)}D1t(t){this.h1t.set(t.NJ(),t)}k1t(t){switch(t.O1t()){case 0:this.c1t.set(t.L1t().toLowerCase(),t);break;case 1:this.f1t.set(t.L1t().toLowerCase(),t)}}N1t(t){this.n1t.set(t.NJ(),t),(t.gJ()?this.a1t:this.l1t).push(t)}B1t(i){2<=i.length&&i.sort(t);let e=this.r1t.get(i.length);e||(e=[],this.r1t.set(i.length,e));for(let t=0,s=e.length;t<s;++t){const h=e[t];if(r(i,h))return h}return e.push(i),i}W1t(t){return this.u1t.push(t.V1t()),this.o1t++}ek(){return this.A0t}j1t(){return this.ek().T8()}YD(){return this.j1t().YD()}H1t(){const t=this.j1t(),s=t.YD();return s.U1t(t.wdt())}z1t(){const t=this.j1t(),s=t.YD();return s.J1t(t.Mdt())}q1t(){return this.d1t}G8(){return this.zdt}X1t(t){const s=[];for(t=t.Y1t();t;)fo.nr(s,t.$1t()),t=t.Y1t();return s}K1t(t){const s={};for(const i of this.X1t(t))s[i.Z1t()]=i.Q1t();return Object.create(Object.prototype,s)}tpt(t){return this.n1t.get(t)||null}spt(t){return this.i1t.get(t)||null}ipt(t){return this.e1t.get(t)||null}ept(t){return this.h1t.get(t)||null}UD(t){return this.c1t.get(t.toLowerCase())||null}hpt(t,s){let i=this.f1t.get((t.Mf()+"."+s).toLowerCase());if(i)return i;if(!t.RJ())for(const e of t.rpt())if(i=this.f1t.get((e.Mf()+"."+s).toLowerCase()))return i;return null}npt(){return this.a1t}opt(){return this.l1t}apt(t){for(const s of this.a1t)s.lpt();if(t)for(const i of this.l1t)i.V2()&&i.lpt()}upt(t){return this.s1t.get(t.toLowerCase())||null}cpt(t){const s=this.i1t.get(t);return s&&s.fpt()?s:null}dpt(){return this.t1t}ppt(){for(const t of this.t1t)t.mpt()}gpt(){for(const t of this.Zdt)t.ypt()}Spt(t){this.gpt(),this.y1t++;for(const s of t.j$()){const i=s.ZX();i&&(this.Pf.wpt(s),i.mI(),this.Pf.bpt())}this.y1t--}async Mpt(t){this.gpt(),this.y1t++;for(const s of this.vpt(t))await this.Pf.Tpt(s);this.y1t--}*vpt(t){for(const s of t.j$()){const i=s.ZX();i&&(this.Pf.wpt(s),yield*i.xpt(),this.Pf.bpt())}}Gpt(t,s,i,e){let h=!1;if(!t.Vk())return this._pt(s,i,e);this.S1t++;for(const r of t.j$()){const n=r.ZX();if(n){this.Pf.wpt(r);for(const a of n.Ipt()){const l=a.Gpt(s,i,e);h=h||l}const o=n.Gpt(s,i,e);h=h||o,this.Pf.bpt()}}return this.S1t--,h}*Cpt(t,s,i,e){let h=!1;if(!t.Vk())return this._pt(s,i,e);this.S1t++;for(const r of t.j$()){const n=r.ZX();if(n){this.Pf.wpt(r);for(const a of n.Ipt()){const l=yield*a.Cpt(s,i,e);h=h||l}const o=yield*n.Cpt(s,i,e);h=h||o,this.Pf.bpt()}}return this.S1t--,h}_pt(t,s,i){return this.m1t.push([t,s,i]),!1}Ppt(t,s,i){let e=null,h=new Promise(t=>e=t);return this.g1t.push([t,s,i,e]),h}*Rpt(){if(this.Pf.Apt())throw new Error("should not be in breakpoint");const t=this.Pf.Uk();for(;this.g1t.length;){const[s,i,e,h]=this.g1t.shift(),r=yield*this.Cpt(t,s,i,e);h(r)}}async Ept(){for(const t of this.Rpt())await this.Pf.Tpt(t)}Fpt(t,i,e,h){let r=!1,s=t.Vk(),n=s.ZX();if(n){this.S1t++,this.Pf.wpt(s);const o=n.Ipt();for(let t=0,s=o.length;t<s;++t){const l=o[t].Fpt(i,e,h);r=r||l}const a=n.Fpt(i,e,h);return r=r||a,this.Pf.bpt(),this.S1t--,r}}*Dpt(t,i,e,h){let r=!1,s=t.Vk(),n=s.ZX();if(n){this.S1t++,this.Pf.wpt(s);const o=n.Ipt();for(let t=0,s=o.length;t<s;++t){const l=yield*o[t].Dpt(i,e,h);r=r||l}const a=yield*n.Dpt(i,e,h);return r=r||a,this.Pf.bpt(),this.S1t--,r}}kpt(){return this.S1t}Opt(){return 0<this.kpt()}Lpt(){return++this.S1t}Npt(){--this.S1t}Bpt(){return 0<this.y1t}C5(){return this.Bpt()||this.Opt()}YY(t){for(const[s,i,e]of this.m1t)this.Gpt(t,s,i,e);fo.Kn(this.m1t)}_5(t){t?this.w1t++:this.w1t--}wB(){return 0<this.w1t}Wpt(i){for(let t=0,s=i.length;t<s;++t)i[t].Vpt().Tc()}jpt(i){for(let t=0,s=i.length;t<s;++t)i[t].Vpt().C0t()}P8(i){for(let t=0,s=i.length;t<s;++t)i[t].Vpt().P0t()}E8(i){for(let t=0,s=i.length;t<s;++t)i[t].Vpt().O8()}$D(s){const i=new Set,e=this.A0t.edt(),h=this.A0t.hdt();for(let t=0;t<=h;++t){const r=e[t].kdt();if(r)for(const n of r)s&&s.has(n)||i.add(n)}return i}Hpt(t){const s=new Set([...t]),i=this.$D(s);if(0<i.size){for(const e of i)e.Vpt().C0t();return[...i]}return null}Upt(){const t=fo.Tr(fo.zpt,this);return this.b1t.push(t),t}Jpt(){return this.b1t}qpt(){if(this.b1t.length){let i=this.j1t(),e=!1;this.y1t++;for(let t=0,s=this.b1t.length;t<s;++t){const h=this.b1t[t];h.Xpt()&&h.Ypt(i),h.$pt()&&(e=!0)}e&&(this.Kpt(),i.P0(null)),this.y1t--}}async Zpt(){if(this.b1t.length){let i=this.j1t(),e=!1;this.y1t++;for(let t=0,s=this.b1t.length;t<s;++t){const h=this.b1t[t];h.Xpt()&&await h.Qpt(i),h.$pt()&&(e=!0)}e&&(this.Kpt(),i.P0(null)),this.y1t--}}Kpt(){const t=fo.lo(this.b1t,t=>t.$pt());for(const s of t)s.Gr()}r$(){for(const t of this.b1t)t.Gr();fo.Kn(this.b1t)}tmt(t){for(const s of this.b1t)s.R0t(t);for(const i of t){const e=this.x1t.get(i);if(this.x1t.delete(i),e)for(const{resolve:h}of e.smt.values())h(!0)}}imt(t){this.M1t.push({promise:t,emt:this.kpt()})}hmt(){fo.Kn(this.M1t)}rmt(){const s=this.kpt();this.M1t=this.M1t.filter(t=>t.emt<=s)}nmt(){const t=Promise.all(this.M1t.map(t=>t.promise));return this.M1t=[],t}nk(t){const s=t.toLowerCase();this.v1t.push(s),this.Pf.QB(fo.XY.qY.JY.omt,null),this.v1t.pop();for(const e of this.Pf.HD().Jpt())e.amt()&&e.lmt()===s&&e.umt();const i=this.T1t.get(s);i&&(i.resolve(),this.T1t.delete(s))}lk(t){const i=t.toLowerCase(),s=this.T1t.get(i);if(s)return s.promise;{let s=null,t=new Promise(t=>s=t);return this.T1t.set(i,{promise:t,resolve:s}),t}}cmt(){if(0===this.v1t.length)throw new Error("not in a signal");return this.v1t.at(-1)}fmt(t){let s=this.x1t.get(t);return s||(s={dmt:[],smt:new Map},this.x1t.set(t,s)),s}BB(t,s){const i=this.fmt(t),e=s.toLowerCase();i.dmt.push(e),this.Pf.QB(t.l5().mmt().JY.pmt,t),i.dmt.pop();for(const r of this.Pf.HD().Jpt())r.gmt()&&r.lmt()===e&&r.ymt(t);const h=i.smt.get(e);h&&(h.resolve(!1),i.smt.delete(e)),0===i.dmt.length&&0===i.smt.size&&this.x1t.delete(t)}WB(t,s){const i=this.fmt(t),e=s.toLowerCase(),h=i.smt.get(e);if(h)return h.promise;{let s=null,t=new Promise(t=>s=t);return i.smt.set(e,{promise:t,resolve:s}),t}}Smt(t){const s=this.fmt(t);if(s&&0!==s.dmt.length)return s.dmt.at(-1);throw new Error("not in a signal")}iX(){return{groups:this.wmt(),cnds:this.bmt(),acts:this.Mmt(),vars:this.vmt(),waits:this.Tmt()}}eX(t){this.xmt(t.groups),this.Gmt(t.cnds),this._mt(t.acts),this.Imt(t.vars),this.Cmt(t.waits)}wmt(){const t={};for(const s of this.dpt())t[s.NJ().toString()]=s.Pmt();return t}xmt(t){for(const[s,i]of Object.entries(t)){const e=parseInt(s,10),h=this.cpt(e);h&&h.Rmt(i)}}bmt(){const t={};for(const[s,i]of this.e1t){const e=i.iX();e&&(t[s.toString()]=e)}return t}Gmt(t){const s=new Map;for(const[i,e]of Object.entries(t))s.set(parseInt(i,10),e);for(const[h,r]of this.e1t)r.eX(s.get(h)||null)}Mmt(){const t={};for(const[s,i]of this.h1t){const e=i.iX();e&&(t[s.toString()]=e)}return t}_mt(t){const s=new Map;for(const[i,e]of Object.entries(t))s.set(parseInt(i,10),e);for(const[h,r]of this.h1t)r.eX(s.get(h)||null)}vmt(){const t={};for(const[s,i]of this.n1t)i.Amt()||!i.gJ()&&!i.V2()||(t[s.toString()]=i.xht());return t}Imt(t){for(const[s,i]of Object.entries(t)){const e=parseInt(s,10),h=this.tpt(e);h&&h.rrt(i)}}Tmt(){return this.b1t.filter(t=>!t.Emt()).map(t=>t.iX())}Cmt(t){this.r$();for(const s of t){const i=fo.zpt.Fmt(this,s);i&&this.b1t.push(i)}}Dmt(){return[...this.Pf.Uk().j$()].map(t=>t.ZX()).filter(t=>t).map(t=>t.kmt())}Omt(t){for(;t;){const s=t.Y1t();if(s instanceof fo.Lmt)return s;t=s}return null}G1t(t,s){Array.isArray(s)||(s=[]);const i=this.UD(t.toLowerCase());if(!i)return null;if(!i.wc())return i.zD();const e=i.Nmt();if(s.length<e.length)for(s=s.slice(0);s.push(e[s.length].V1t()),s.length<e.length;);const h=i.qD();return h.KD(h.XD(),!1,i.QD(),i.zD(),...s)}}}{const po=self.Vs;po._1t=class extends po.Mr{constructor(t,s){super(),this.tdt=t,this.Pf=t.PO(),this.Cr=s[0],this.Bmt=[],this.Wmt=new Map,this.Vmt=new Map,this.jmt=new Map,this.Hmt=!1,this.Umt=[],this.zmt=[],this.Jmt=new Set;for(const i of s[1])this.qmt(i,null,this.Bmt);this.Xmt=this.Pf.a4()?{type:"sheet",name:this.Cr,Ymt:0,children:[]}:null}Gr(){this.tdt=null,this.Pf=null}qmt(t,s,i){switch(t[0]){case 0:case 3:this.$mt(t,s,i);break;case 1:this.Kmt(t,s,i);break;case 2:this.Zmt(t,s,i);break;case 4:this.Qmt(t,s);break;case 5:this.tgt(t,s,i);break;case 6:this.sgt(t,s);break;default:throw new Error("invalid event type")}}$mt(t,s,i){const e=po.igt.BT(this,s,t);if(e.Z0t()){i.push(e);const h=e.egt();for(let t=0,s=h.length;t<s;++t)h[t].hgt()&&this.rgt(e,t)}else e.hgt()?this.rgt(e,0):i.push(e)}Qmt(t,s){const i=po.Lmt.ngt(this,s,t);this.tdt.k1t(i)}sgt(t,s){const i=po.Lmt.ogt(this,s,t);this.tdt.k1t(i)}Kmt(t,s,i){const e=po.agt.BT(this,s,t);i.push(e)}Zmt(t,s,i){const e=po.lgt.BT(this,s,t);i.push(e)}tgt(t,s,i){const e=po.ugt.BT(this,s,t);i.push(e)}rgt(h,r){h.Z0t()||this.tdt.I1t(h);const n=h.U1t(r),o=n.cgt(),a=n.fB();if(n.fgt()){let t=this.Vmt.get(a),s=(t||(t=new Map,this.Vmt.set(a,t)),n.dgt().toLowerCase()),i=t.get(o),e=(i||(i=new Map,t.set(o,i)),i.get(s));e||(e=[],i.set(s,e)),e.push([h,r])}else{let t=this.Wmt.get(a),s=(t||(t={pgt:new Map,mgt:new Map},this.Wmt.set(a,t)),n.cW()),i,e=(s?(i=t.mgt.get(s))||(i=new Map,t.mgt.set(s,i)):i=t.pgt,i.get(o));e||(e=[],i.set(o,e)),e.push([h,r])}}C1t(){const i=this.Bmt;for(let t=0,s=i.length;t<s;++t){const e=t<s-1&&i[t+1]instanceof po.igt&&i[t+1].ggt();i[t].C1t(e)}}ygt(t){this.Umt.push(t)}_Y(){po.Kn(this.zmt),this.Sgt(this),this.Jmt.clear()}Sgt(t){const s=t.zmt,i=t.Jmt;for(const e of this.Umt){const h=e.wgt();e.bgt()&&t!==h&&!i.has(h)&&(i.add(h),h.Sgt(t),s.push(h))}}Ipt(){return this.zmt}HD(){return this.tdt}PO(){return this.Pf}Mf(){return this.Cr}Mgt(t,s){this.jmt.set(s,t)}vgt(t){return this.jmt.get(t)||null}ypt(){this.Hmt=!1}mI(){if(!this.Hmt){const t=this.Pf,s=t.Tgt(),i=s?performance.now():0,e=(this.Hmt=!0,this.HD()),h=e.j1t();for(const r of this.Bmt)r.mI(h),e.Wpt(r.v8()),e.hmt(),t.R5();h.P0(null),s&&(this.Xmt.Ymt+=performance.now()-i)}}*xpt(){if(!this.Hmt){this.Hmt=!0;const t=this.Pf,s=this.HD(),i=s.j1t();for(const e of this.Bmt)yield*e.xpt(i),s.Wpt(e.v8()),s.hmt(),t.R5();i.P0(null)}}Gpt(e,h,r){if(!h)return this.xgt(e,h,null,null);{let t=h.fB(),s=!1,i=this.xgt(e,h,t,r);s=s||i;for(const n of t.rpt())i=this.xgt(e,h,n,r),s=s||i}}xgt(t,s,i,e){const h=this.Wmt.get(i);if(!h)return!1;const r=e?h.mgt.get(e):h.pgt;if(!r)return!1;const n=r.get(t);if(!n)return!1;let o=!1;for(const[a,l]of n){const u=this.Ggt(s,a,l);o=o||u}return o}*Cpt(e,h,r){if(!h)return yield*this._gt(e,h,null,null);{let t=h.fB(),s=!1,i=yield*this._gt(e,h,t,r);s=s||i;for(const n of t.rpt())i=yield*this._gt(e,h,n,r),s=s||i}}*_gt(t,s,i,e){const h=this.Wmt.get(i);if(!h)return!1;const r=e?h.mgt.get(e):h.pgt;if(!r)return!1;const n=r.get(t);if(!n)return!1;let o=!1;for(const[a,l]of n){let t;t=a.Igt()?this.Ggt(s,a,l):yield*this.Cgt(s,a,l),o=o||t}return o}Fpt(t,s,i){const e=s.fB(),h=this.Vmt.get(e);if(!h)return!1;const r=h.get(t);if(!r)return!1;const n=r.get(i);if(!n)return!1;let o=!1;for(let t=0,s=n.length;t<s;++t){const a=n[t],l=this.Ggt(null,a[0],a[1]);o=o||l}return o}*Dpt(t,s,i){const e=s.fB(),h=this.Vmt.get(e);if(!h)return!1;const r=h.get(t);if(!r)return!1;const n=r.get(i);if(!n)return!1;let o=!1;for(let h=0,t=n.length;h<t;++h){let t=n[h],s=t[0],i=t[1],e;e=s.Igt()?this.Ggt(null,s,i):yield*this.Cgt(null,s,i),o=o||e}return o}Ggt(t,s,i){let e=this.Pf,h=this.tdt,r=h.YD(),n=h.ek(),o=h.kpt(),a=!1;r&&h.jpt(r.XD()),h.jpt(s.XD());const l=1<o,u=(l&&h.q1t().x8(),n.x8(s));if(t){const f=s.egt()[i].fB(),d=f.b5();d.z0t(t),t.TB()&&t.Pgt()}let c=!0;if(s.n6()){const p=s.Rgt();for(let t=0,s=p.length;t<s;++t)if(!p[t].Agt(u)){c=!1;break}}return c&&(s.Z0t()?s.Egt(u,i):s.mI(u),a=u.xdt()),n.O8(),l&&h.q1t().O8(),h.E8(s.XD()),r&&h.E8(r.XD()),r||1!==o||(h.hmt(),h.wB())||e.R5(),a}*Cgt(t,s,i){let e=this.Pf,h=this.tdt,r=h.YD(),n=h.ek(),o=h.kpt(),a=!1;r&&h.jpt(r.XD()),h.jpt(s.XD());const l=1<o,u=(l&&h.q1t().x8(),n.x8(s));if(t){const f=s.egt()[i].fB(),d=f.b5();d.z0t(t),t.TB()&&t.Pgt()}let c=!0;if(s.n6()){const p=s.Rgt();for(let t=0,s=p.length;t<s;++t)if(!(yield*p[t].Fgt(u))){c=!1;break}}return c&&(s.Z0t()?yield*s.Dgt(u,i):yield*s.xpt(u),a=u.xdt()),n.O8(),l&&h.q1t().O8(),h.E8(s.XD()),r&&h.E8(r.XD()),r||1!==o||(h.hmt(),h.wB())||e.R5(),a}kmt(){return this.Xmt}}}{let u=function(t,s){return!0};u;const mo=self.Vs,go=[];function*B(t,s){return!0}mo.igt=class extends mo.Mr{constructor(t,s,i){super(),this.yX=t,this.Pf=t.PO(),this.kgt=s,this.Ogt=null,this.A0t=this.Pf.HD().ek(),this.Lgt=[],this.Ngt=[],this.Bgt=!1,this.Wgt=!1,this.Vgt=!1,this.jgt=!1,this.Hgt=!!i[2],this.Ugt=!1,this.zgt=null,this.Jgt=[],this.Brt=[],this.qgt=[],this.Xgt=u,this.Ygt=B,this.$gt=!1,this.Kgt=!1,this.Zgt="",this.Qgt=!1,this.tyt=null,this.Xmt=null,this.hz=i[4],this.syt=i[5],this.yX.Mgt(this,this.syt),this.iyt=this.Pf.a4()?{eyt:i[3][0],hyt:i[3][1],ryt:!1,nyt:!1,oyt:!1,ayt:!1}:null,this.HD().E1t(this),3===i[0]&&this.lyt(i[1]);let e=0;for(const h of i[6]){const r=mo.uyt.BT(this,h,e++);this.Jgt.push(r),this.cyt(r.fB())}e=0;for(const n of i[7]){const o=mo.fyt.BT(this,n,e++);this.Brt.push(o)}if(9===i.length){const a=i[8];for(const l of a)this.yX.qmt(l,this,this.qgt)}this.Jgt.length&&(this.Ugt=null===this.Jgt[0].fB()&&this.Jgt[0].cgt()===mo.XY.qY.JY.dyt),0===this.Jgt.length&&(this.Jgt=go),0===this.Brt.length&&(this.Brt=go),0===this.qgt.length&&(this.qgt=go)}static BT(t,s,i){return mo.Tr(mo.igt,t,s,i)}lyt(t){this.$gt=!0,this.Kgt=!!t[0],this.Qgt=this.Kgt,this.Zgt=t[1].toLowerCase(),this.tyt=[],this.HD().R1t(this),this.Pf.a4()&&(this.Xmt={type:"group",name:t[1],Ymt:0,children:[]})}pyt(t){this.tyt.push(t)}myt(t,s){for(const i of t.fY().KY())s.includes(i)||s.push(i)}gyt(t,s){if(t)if(s.includes(t)||s.push(t),t.RJ())for(const i of t.yyt())i.TB()&&this.myt(i,s);else t.TB()&&this.myt(t,s)}cyt(t){this.gyt(t,this.Lgt)}Syt(t){this.gyt(t,this.Ngt)}wyt(){this.Lgt=this.Pf.PJ()}C1t(t){this.jgt=!!t,this.byt(),this.Myt();for(const s of this.Jgt)s.C1t();if(0<this.Brt.length){let t=!1;for(const e of this.Brt)e.C1t(),e.vyt()&&(t=!0);t?(this.Xgt=this.Tyt,this.Ygt=this.xyt):(this.Xgt=this.Gyt,this.Ygt=this._yt)}const i=this.qgt;for(let t=0,s=i.length;t<s;++t){const h=t<s-1&&i[t+1]instanceof mo.igt&&i[t+1].ggt();i[t].C1t(h)}this.iyt&&this.Iyt(),this.Xmt&&this.Cyt().kmt().children.push(this.Xmt)}kmt(){return this.Xmt}Cyt(){let t=this.n6();for(;t;){if(t.fpt())return t;t=t.n6()}return this.yX}Iyt(){const t=this.iyt;t.ryt=this.Jgt.every(t=>t.Igt()),t.nyt=this.Brt.every(t=>t.Igt()),t.oyt=this.qgt.every(t=>t.Igt()),t.ayt=t.ryt&&t.nyt&&t.oyt}Pyt(){let t=this;for(;t.Iyt(),t=t.n6(););}byt(){if(this.fpt()){let t=this.n6();for(this.Vgt=!0;t;){if(!t.fpt()){this.Vgt=!1;break}t=t.n6()}}}Ryt(){const t=this.Pf.PJ();if(this.Lgt===t)this.Ngt=t;else{this.Ngt=mo.do(this.Lgt);let t=this.n6();for(;t;){for(const i of t.Lgt)this.Syt(i);t=t.n6()}const s=this.HD();this.Lgt=s.B1t(this.Lgt),this.Ngt=s.B1t(this.Ngt)}}Myt(){if(this.Ayt()){this.zgt=[];let t=this.n6();for(;t;)this.zgt.push(t),t=t.n6();this.zgt.reverse()}}Eyt(){this.Wgt=!0,this.kgt&&this.kgt.Eyt()}Edt(){return this.Wgt}v8(){return this.Lgt}XD(){return this.Bgt||(this.Bgt=!0,this.Ryt()),this.Ngt}Fyt(t){return this.Lgt.includes(t)}Rgt(){return this.zgt}ZX(){return this.yX}HD(){return this.yX.HD()}PO(){return this.Pf}n6(){return this.kgt}Dyt(t){this.Ogt=t}Y1t(){return this.Ogt||this.kgt}kyt(){return this.syt}Oyt(){return this.iyt&&this.iyt.hyt}Lyt(){return this.Oyt()&&this.iyt.eyt}Nyt(t){this.iyt.eyt=!!t,this.Pyt()}fpt(){return this.$gt}Byt(){return this.Vgt}ggt(){return this.Ugt}Wyt(){return this.jgt}A1t(){return this.Zgt}Pmt(){return this.Qgt}mpt(){this.Rmt(this.Kgt)}Rmt(t){if(t=!!t,!this.$gt)throw new Error("not a group");if(this.Qgt!==t){this.Qgt=t;for(const s of this.tyt)s.Vyt();if(this.tyt.length){const i=this.Pf.oO(),e=i.ZX();e&&e._Y()}}}NJ(){return this.hz}Z0t(){return this.Hgt}hgt(){return this.Jgt.length&&this.Jgt[0].hgt()}jyt(){return this.Ogt&&this.Ogt instanceof mo.Lmt}Ayt(){return this.jyt()||this.Jgt.some(t=>t.hgt())}egt(){return this.Jgt}Fdt(){return this.Jgt.length}U1t(t){if((t=Math.floor(t))<0||t>=this.Jgt.length)throw new RangeError("invalid condition index");return this.Jgt[t]}Hyt(t){return this.U1t(t)}Uyt(t){let s=t.uD();if(0!==s){--s;const i=t.zyt()?t.Jyt():t.fB();for(;0<=s;--s){const e=this.Jgt[s];if(i===e.fB()||e.zyt()&&e.Jyt()===i)return!1}}return!0}qyt(){return this.Brt}Xyt(){return this.Brt.length}J1t(t){if((t=Math.floor(t))<0||t>=this.Brt.length)throw new RangeError("invalid action index");return this.Brt[t]}Yyt(s){s=Math.floor(s);const t=this.Brt.find(t=>t.$yt()===s);if(t)return t;throw new RangeError("invalid action debug index")}Kyt(t){return 0<=(t=Math.floor(t))&&t<this.Brt.length}Zyt(){return this.qgt}$1t(){return this.qgt.filter(t=>t instanceof mo.agt)}Agt(i){i.Sdt(this);let e=this.Jgt,h=0===e.length;for(let t=0,s=e.length;t<s;++t){const r=e[t];if(i.bdt(t),r.xW())throw new Error("trigger cannot be used as sub-event to a loop");if(r.mI())h=!0;else if(!this.Hgt)return!1}return!this.Hgt||h}Egt(t,s){t.Sdt(this),t.bdt(s),this.Jgt[s].mI()&&(this.Xgt(t,0)&&this.Qyt(t),t.Tdt(!0))}*Fgt(i){i.Sdt(this);let e=this.Jgt,h=0===e.length;for(let t=0,s=e.length;t<s;++t){const r=e[t];if(i.bdt(t),r.xW())throw new Error("trigger cannot be used as sub-event to a loop");if(r.Igt()?r.mI():yield*r.xpt())h=!0;else if(!this.Hgt)return!1}return!this.Hgt||h}*Dgt(t,s){t.Sdt(this),t.bdt(s);let i=this.Jgt[s];if(i.Igt()?i.mI():yield*i.xpt())(this.tSt()?this.Xgt(t,0):yield*this.Ygt(t,0))&&(this.sSt()?this.Qyt():yield*this.iSt()),t.Tdt(!0)}mI(t){t.Sdt(this),this.Ugt||t.Gdt(!1),this.Hgt?this.eSt(t):this.hSt(t)}*xpt(t){(this.Lyt()||this.Pf.rSt())&&(yield this),t.Sdt(this),this.Ugt||t.Gdt(!1),this.Hgt?yield*this.nSt(t):yield*this.oSt(t)}eSt(i){let e=this.Jgt,h=0===e.length;for(let t=0,s=e.length;t<s;++t){const r=e[t];if(!r.hgt()){i.bdt(t);const n=r.mI();h=h||n}}i.Tdt(h),h&&(this.Xgt(i,0)&&this.Qyt(i),this.jgt)&&i.Gdt(!0)}*nSt(i){let e=this.Jgt,h=0===e.length;for(let s=0,t=e.length;s<t;++s){const r=e[s];if(!r.hgt()){i.bdt(s);let t;t=r.Igt()?r.mI():yield*r.xpt(),h=h||t}}if(i.Tdt(h),h)(this.tSt()?this.Xgt(i,0):yield*this.Ygt(i,0))&&(this.sSt()?this.Qyt():yield*this.iSt()),this.jgt&&i.Gdt(!0)}hSt(i){const e=this.Jgt;for(let t=0,s=e.length;t<s;++t){const h=e[t],r=(i.bdt(t),h.mI());if(!r)return void i.Tdt(!1)}i.Tdt(!0),this.Xgt(i,0)&&this.Qyt(i),i.xdt()&&this.jgt&&i.Gdt(!0)}*oSt(i){const e=this.Jgt;for(let t=0,s=e.length;t<s;++t){const h=e[t];i.bdt(t);if(!(h.Igt()?h.mI():yield*h.xpt()))return void i.Tdt(!1)}i.Tdt(!0);(this.tSt()?this.Xgt(i,0):yield*this.Ygt(i,0))&&(this.sSt()?this.Qyt():yield*this.iSt()),i.xdt()&&this.jgt&&i.Gdt(!0)}Gyt(i,e){const h=this.Brt;for(let t=e,s=h.length;t<s;++t){const r=h[t];i.vdt(t),r.mI()}return!0}*_yt(i,e){const h=this.Brt;for(let t=e,s=h.length;t<s;++t){const r=h[t];i.vdt(t),r.Igt()?r.mI():yield*r.xpt()}return!0}Tyt(i,e){const h=this.HD(),r=this.Brt;for(let t=e,s=r.length;t<s;++t){const n=r[t],o=(i.vdt(t),n.mI());if(n.aSt()&&!0===o)return!1;n.lSt()&&o instanceof Promise&&h.imt(o)}return!0}*xyt(i,e){const h=this.HD(),r=this.Brt;for(let s=e,t=r.length;s<t;++s){const n=r[s];i.vdt(s);let t;if(t=n.Igt()?n.mI():yield*n.xpt(),n.aSt()&&!0===t)return!1;n.lSt()&&t instanceof Promise&&h.imt(t)}return!0}uSt(t){this.Xgt(t,t.Mdt())&&this.Qyt()}*cSt(t){(yield*this.Ygt(t,t.Mdt()))&&(yield*this.iSt())}Qyt(){if(this.qgt.length){const t=this.fpt()&&this.Pf.Tgt(),s=t?performance.now():0,i=this.A0t,e=i.x8(this);this.Wgt?this.fSt(e):this.dSt(e),i.O8(),t&&(this.Xmt.Ymt+=performance.now()-s)}}fSt(e){const h=this.$gt,r=this.Vgt,n=this.HD(),o=this.qgt;for(let t=0,s=o.length,i=s-1;t<s;++t){const a=o[t],l=a.v8(),u=!r||!h&&t<i;u&&n.P8(l),a.mI(e),u?n.E8(l):n.Wpt(l)}}dSt(i){const e=this.qgt;for(let t=0,s=e.length;t<s;++t)e[t].mI(i)}*iSt(){if(this.qgt.length){const t=this.A0t,s=t.x8(this);this.Wgt?yield*this.pSt(s):yield*this.mSt(s),t.O8()}}*pSt(e){const h=this.$gt,r=this.Vgt,n=this.HD(),o=this.qgt;for(let t=0,s=o.length,i=s-1;t<s;++t){const a=o[t],l=a.v8(),u=!r||!h&&t<i;u&&n.P8(l),yield*a.xpt(e),u?n.E8(l):n.Wpt(l)}}*mSt(i){const e=this.qgt;for(let t=0,s=e.length;t<s;++t)yield*e[t].xpt(i)}A8(i,e){e.ydt();const h=this.Jgt;if(!this.Z0t())for(let t=i.wdt()+1,s=h.length;t<s;++t){const r=h[t],n=(e.bdt(t),r.mI());if(!n)return!1}return this.Xgt(e,0)&&this.Qyt(e),!0}*gSt(i,e){e.ydt();const h=this.Jgt;if(!this.Z0t())for(let t=i.wdt()+1,s=h.length;t<s;++t){const r=h[t];e.bdt(t);if(!(r.Igt()?r.mI():yield*r.xpt()))return!1}return(this.tSt()?this.Xgt(e,0):yield*this.Ygt(e,0))&&(this.sSt()?this.Qyt():yield*this.iSt()),!0}Igt(){return!this.Lyt()&&!this.Pf.rSt()&&this.iyt.ayt}tSt(){return!this.Pf.rSt()&&this.iyt.nyt}sSt(){return!this.Pf.rSt()&&this.iyt.oyt}ySt(i){if(this.n6()){const e=this.Rgt();for(let t=0,s=e.length;t<s;++t)if(!e[t].Agt(i))return!1}return!0}*SSt(i){if(this.n6()){const e=this.Rgt();for(let t=0,s=e.length;t<s;++t)if(!(yield*e[t].Fgt(i)))return!1}return!0}wSt(t,s,i){if(0<s.length)if(i){const e=s.map(t=>t.oi(0));t.q1t().x8(),this.Ogt.bSt(e)}else this.Ogt.MSt(s);else i&&t.q1t().x8()}vSt(t,s,i,e){let h,r,n=0<t.length,o=null,a=this.Pf,l=this.A0t,u=a.HD(),c=this.Ogt,f=c.lSt(),d=u.Lpt(),p=1<d;if(this.wSt(u,s,p),n&&(i?u.P8(t):u.jpt(t)),null!==e){if(e.TSt){const g=i?e.TSt.b5():e.TSt.Vpt().I0t(),y=e.xSt.b5();y.J0t(g.w5()),y.$0t(),i||e.xSt.GSt()}else if(e._St){const S=e._St.b5();S.J0t(e.ISt),S.$0t()}e.CSt&&(o=u.Hpt(t))}const m=l.x8(this);return i&&m.Ddt(t),this.ySt(m)&&(m.Sdt(this),f&&([r,h]=c.PSt()),this.hSt(m),f)&&c.RSt(r),l.O8(),p&&u.q1t().O8(),null!==o&&u.E8(o),n&&u.E8(t),u.Npt(),f||u.rmt(),h}*ASt(t,s,i,e){let h,r,n=((this.Lyt()||this.Pf.rSt())&&(yield this),0<t.length),o=null,a=this.Pf,l=this.A0t,u=a.HD(),c=this.Ogt,f=c.lSt(),d=u.Lpt(),p=1<d;if(this.wSt(u,s,p),n&&(i?u.P8(t):u.jpt(t)),null!==e){if(e.TSt){const g=i?e.TSt.b5():e.TSt.Vpt().I0t(),y=e.xSt.b5();y.J0t(g.w5()),y.$0t(),i||e.xSt.GSt()}else if(e._St){const S=e._St.b5();S.J0t(e.ISt),S.$0t()}e.CSt&&(o=u.Hpt(t))}const m=l.x8(this);return i&&m.Ddt(t),(yield*this.SSt(m))&&(m.Sdt(this),f&&([r,h]=c.PSt()),yield*this.oSt(m),f)&&c.RSt(r),l.O8(),p&&u.q1t().O8(),null!==o&&u.E8(o),n&&u.E8(t),u.Npt(),f||u.rmt(),h}ESt(t,s){const i=this.XD(),e=0<i.length,h=this.Pf,r=this.A0t,n=h.HD(),o=n.Lpt(),a=1<o,l=(a&&n.q1t().x8(),this.Ogt.bSt(t),e&&(s?n.P8(i):n.jpt(i)),r.x8(this));this.ySt(l)&&(l.Sdt(this),this.hSt(l)),r.O8(),a&&n.q1t().O8(),e&&n.E8(i),n.Npt(),n.rmt()}*FSt(t,s){(this.Lyt()||this.Pf.rSt())&&(yield this);const i=this.XD(),e=0<i.length,h=this.Pf,r=this.A0t,n=h.HD(),o=n.Lpt(),a=1<o,l=(a&&n.q1t().x8(),this.Ogt.bSt(t),e&&(s?n.P8(i):n.jpt(i)),r.x8(this));(yield*this.SSt(l))&&(l.Sdt(this),yield*this.oSt(l)),r.O8(),a&&n.q1t().O8(),e&&n.E8(i),n.Npt(),n.rmt()}KD(t,s,i,e,...h){let r,n,o=0<t.length,a=this.Pf,l=this.A0t,u=a.HD(),c=this.Ogt,f=c.lSt(),d=u.Lpt(),p=1<d,m=(p&&u.q1t().x8(),0<h.length&&this.Ogt.bSt(h),o&&(s?u.P8(t):u.jpt(t)),l.x8(this));return m.Pdt(i,e),l.rdt(m),a.I8(!1),this.ySt(m)&&(m.Sdt(this),f&&([n,r]=c.PSt()),this.hSt(m),f)&&c.RSt(n),a.I8(!0),l.O8(),l.ndt(),p&&u.q1t().O8(),o&&u.E8(t),u.Npt(),f||u.rmt(),r||m.Rdt()}}}{let e=self.Vs,t=[],s=!1;e.ugt=class extends e.Mr{constructor(t,s,i){super();const e=t.PO(),h=t.HD(),r=(this.yX=t,this.tdt=h,this.Pf=t.PO(),this.kgt=s,e.DSt(i[1]));this.kSt=r,this.syt=i[2],this.yX.Mgt(this,this.syt),this.iyt=e.a4()?{eyt:i[3][0],hyt:i[3][1]}:null}static BT(t,s,i){return e.Tr(e.ugt,t,s,i)}C1t(){const t=this.kSt,s=this.Pf.HD().K1t(this);this.kSt=t.bind(null,this.Pf.kL(),s)}n6(){return this.kgt}Y1t(){return this.kgt}ZX(){return this.yX}kyt(){return this.syt}Oyt(){return this.iyt&&this.iyt.hyt}Lyt(){return this.Oyt()&&this.iyt.eyt}Nyt(t){this.iyt.eyt=!!t}ggt(){return!1}v8(){return t}XD(){return this.kgt?this.kgt.XD():t}mI(t){t.Sdt(this),this.tdt.imt(this.OSt())}async OSt(){try{await this.kSt()}catch(t){console.error(`Unhandled exception running script %c${this.ZX().Mf()}, event ${this.kyt()}:`,"font-size: 1.2em; font-weight: bold;",t),self.C3Debugger&&self.C3Debugger._SetLastErrorScript(this),s||(console.info("%cTip:%c run this to highlight in Construct the last script that had an error: %cgoToLastErrorScript()","font-weight: bold; text-decoration: underline","","font-weight: bold"),s=!0)}}*xpt(t){t.Sdt(this),(this.Lyt()||this.Pf.rSt())&&(yield this),this.mI(t)}Igt(){return!this.Lyt()&&!this.Pf.rSt()}static LSt(){return s}static NSt(){s=!0}}}{const yo=self.Vs;yo.Lmt=class extends yo.Mr{constructor(t,s,i){super(),this.yX=t,this.Pf=t.PO(),this.kgt=s,this.BSt=0,this.WSt="",this.VSt=0,this.jSt=[],this.HSt=!0,this.USt="",this.T0t=null,this.zSt=!1,this.JSt=[],this.qSt=!1,this.XSt=!1,this.YSt=0,this.$St=-1,this.KSt=new Map,this.ZSt=yo.igt.BT(t,s,i),this.ZSt.Dyt(this)}QSt(t){this.BSt=0,this.WSt=t[0],this.VSt=t[1],this.jSt=t[2].map(t=>yo.agt.BT(this.yX,this,t)),this.HSt=t[3],this.XSt=t[4],this.qSt=t[5]}twt(t){this.BSt=1,this.USt=t[1],this.T0t=this.Pf.nJ(t[2]),this.ZSt.cyt(this.T0t),this.WSt=this.T0t.Mf()+"."+this.USt,this.VSt=t[3],this.jSt=t[4].map(t=>yo.agt.BT(this.yX,this,t)),this.HSt=t[5],this.XSt=t[6],this.qSt=t[7],this.T0t.swt(this)}static ngt(t,s,i){const e=yo.Tr(yo.Lmt,t,s,i),h=i[1];return e.QSt(h),e}static ogt(t,s,i){const e=yo.Tr(yo.Lmt,t,s,i),h=i[1];return e.twt(h),e}P1t(){if(this.T0t&&this.T0t.RJ())for(const t of this.T0t.yyt())if(t.iwt(this.USt)){this.zSt=!0;break}}C1t(){for(const t of this.jSt)t.C1t();this.ZSt.C1t(!1)}O1t(){return this.BSt}$1t(){return this.jSt}Nmt(){return this.jSt}JD(){return this.jSt.length}ewt(t){this.JSt.push(t)}hwt(){return this.JSt}MSt(i){const e=this.jSt;for(let t=0,s=e.length;t<s;++t)e[t].rrt(i[t].oi(0))}bSt(i){const e=this.jSt;for(let t=0,s=e.length;t<s;++t)e[t].rrt(i[t])}rwt(){return this.jSt.map(t=>t.xht())}n6(){return this.kgt}Y1t(){return this.kgt}L1t(){return this.WSt}nwt(){return this.USt}owt(){return this.zSt}QD(){return this.VSt}fB(){return this.T0t}wc(){return this.HSt}zD(){switch(this.VSt){case 0:return null;case 2:return"";default:return 0}}qD(){return this.ZSt}ZD(){return this.qSt}lSt(){return this.XSt}PSt(){const t=this.YSt++;this.$St=t;let s,i=new Promise(t=>s=t);return this.KSt.set(t,{resolve:s,awt:0}),[t,i]}RSt(t){const s=this.KSt.get(t);0===s.awt&&(s.resolve(),this.KSt.delete(t)),this.$St=-1}lwt(){const t=this.KSt.get(this.$St);return t.awt++,this.$St}uwt(t){this.$St=t;const s=this.KSt.get(t);s.awt--}cwt(t,s){const i=new Map,e=[];for(const h of this.T0t.b5().w5()){const r=h.fB();if(r.iwt(this.USt)){const n=i.get(r);Array.isArray(n)?n.push(h):i.set(r,[h])}else e.push(h)}if(0<e.length&&this.ZSt.vSt(t,s,this.qSt,{_St:this.T0t,ISt:e}),0<i.size)for(const[o,a]of i){const l=o.fwt(this.USt).qD(),u=[...new Set([...t,...l.v8()])];l.vSt(u,s,this.qSt,{_St:o,ISt:a})}}*dwt(t,s){const i=new Map,e=[];for(const h of this.T0t.b5().w5()){const r=h.fB();if(r.iwt(this.USt)){const n=i.get(r);Array.isArray(n)?n.push(h):i.set(r,[h])}else e.push(h)}if(0<e.length&&(yield*this.ZSt.ASt(t,s,this.qSt,{_St:this.T0t,ISt:e})),0<i.size)for(const[o,a]of i){const l=o.fwt(this.USt).qD(),u=[...new Set([...t,...l.v8()])];yield*l.ASt(u,s,this.qSt,{_St:o,ISt:a})}}}}{const So=self.Vs,wo=[];So.agt=class extends So.Mr{constructor(t,s,i){super();const e=t.HD();this.yX=t,this.tdt=e,this.Pf=t.PO(),this.kgt=s,this.d1t=e.q1t(),this.Cr=i[1],this.Lf=i[2],this.pwt=i[3],this.l2=!!i[4],this.mwt=!!i[5],this.gwt=s instanceof So.Lmt,this.hz=i[6],this.ywt=this.Pf.Z1t(i[8]),this.Swt=t=>this.rrt(t),this.wwt=()=>this.xht(),this.bwt=!this.kgt||this.l2||this.mwt,this.krt=this.pwt,this.Mwt=-1,this.vwt()&&(this.krt=this.krt?1:0),!this.Twt()||this.V2()||this.Amt()||(this.Mwt=e.W1t(this)),e.N1t(this)}static BT(t,s,i){return So.Tr(So.agt,t,s,i)}C1t(){if(this.Twt()&&!this.V2()&&!this.Amt()&&!this.xwt()){const t=this.tdt.Omt(this);t&&t.ewt(this)}}Mf(){return this.Cr}Z1t(){return this.ywt}n6(){return this.kgt}Y1t(){return this.n6()}gJ(){return!this.n6()}Twt(){return!this.gJ()}xwt(){return this.gwt}V2(){return this.l2}Amt(){return this.mwt}Se(){return 0===this.Lf}Pe(){return 1===this.Lf}vwt(){return 2===this.Lf}ggt(){return!1}NJ(){return this.hz}V1t(){return this.pwt}v8(){return wo}mI(t){!this.Twt()||this.V2()||this.Amt()||this.rrt(this.V1t())}Igt(){return!0}*xpt(t){this.mI(t)}rrt(t){this.Se()?"number"!=typeof t&&(t=parseFloat(t)):this.Pe()?"string"!=typeof t&&(t=t.toString()):this.vwt()&&(t=t?1:0),this.bwt?this.krt=t:this.d1t.Bdt()[this.Mwt]=t}xht(){return this.bwt?this.krt:this.d1t.Bdt()[this.Mwt]}Gwt(){let t=this.xht();return this.vwt()?!!t:t}lpt(){this.krt=this.pwt}Q1t(){return{configurable:!1,enumerable:!0,get:this.wwt,set:this.Swt}}}}{const bo=self.Vs,Mo=[];bo.lgt=class extends bo.Mr{constructor(t,s,i){super();const e=t.HD();this.yX=t,this.tdt=e,this.Pf=t.PO(),this.kgt=s,this._wt=null,this.Iwt=i[1],this.C0=!0}static BT(t,s,i){return bo.Tr(bo.lgt,t,s,i)}C1t(){this._wt=this.tdt.GY(this.Iwt),this.yX.ygt(this);let t=this.n6();for(;t;)t instanceof bo.igt&&t.fpt()&&t.pyt(this),t=t.n6();this.Vyt(),this.Pf.a4()&&this.yX.kmt().children.push(this._wt.kmt())}n6(){return this.kgt}v8(){return Mo}wgt(){return this._wt}mI(t){const s=!!this.n6(),i=this.Pf.PJ();s&&this.tdt.jpt(i),this._wt.mI(),s&&this.tdt.E8(i)}*xpt(t){const s=!!this.n6(),i=this.Pf.PJ();s&&this.tdt.jpt(i),yield*this._wt.xpt(),s&&this.tdt.E8(i)}Igt(){return!1}bgt(){return this.C0}Vyt(){let t=this.n6();for(;t;){if(t instanceof bo.igt&&t.fpt()&&!t.Pmt())return void(this.C0=!1);t=t.n6()}this.C0=!0}}}{let a=function(t,s){return s<=t?t%s:(t<0&&(t<=-s&&(t%=s),t<0)&&(t+=s),t)};a;const vo=self.Vs;vo.Cwt=class extends vo.Mr{constructor(t){super(),this.vv=t,this.Pf=t.PO()}C1t(){}static Pwt(t,s){const i=s[0],e=[Io,Go,_o,Co,To,xo];return vo.Tr(e[i],t,s)}};class To extends vo.Cwt{constructor(t,s){super(t),this.Rwt=this.Pf.UU(),this.kSt=this.Pf.DSt(s[1]),this.kSt!==vo.XY.qY.Zrt.random&&this.kSt!==vo.XY.qY.Zrt.Awt||this.vv.Ewt()}Fwt(){return this.Rwt.Dwt(this.kSt,this.Rwt)}}class xo extends vo.Cwt{constructor(t,s){super(t),this.kwt=null,this.WSt=s[1],this.vv.Ewt()}C1t(){const t=this.Pf.HD(),s=(this.kwt=t.UD(this.WSt),this.WSt=null,this.vv.qD()),i=this.kwt.qD();this.Owt=[...new Set([...s.XD(),...i.XD()])],this.Owt=t.B1t(this.Owt)}Fwt(){const t=this.kwt;if(t.wc()){const s=t.qD();return vo.igt.prototype.KD.bind(s,this.Owt,t.ZD(),t.QD(),t.zD())}{const i=t.zD();return()=>i}}}class Go extends vo.Cwt{constructor(t,s){super(t),this.T0t=this.Pf.nJ(s[1]),this.kSt=this.Pf.DSt(s[2]),this.Lwt=!!s[3],this.A0t=this.Pf.HD().ek(),this.vv.Nwt(this.T0t)}Fwt(){return this.T0t.l5().Dwt(this.kSt,this.T0t.n5().sW())}Bwt(...t){const s=this.T0t,i=s.b5().B0t(),e=i.length;if(0===e)return this.Lwt?"":0;const h=a(this.vv.Wwt(),e);return this.A0t.T8().Idt(s),this.kSt.apply(i[h].sW(),t)}Vwt(t,...s){const i=this.T0t,e=i.w5(),h=e.length;if(0===h||"number"!=typeof t)return this.Lwt?"":0;const r=a(t,h);return this.A0t.T8().Idt(i),this.kSt.apply(e[r].sW(),s)}}class _o extends vo.Cwt{constructor(t,s){super(t),this.T0t=this.Pf.nJ(s[1]),this.jwt=s[3],this.Lwt=!!s[2],this.vv.Nwt(this.T0t)}Hwt(){const t=this.T0t.b5().B0t(),s=t.length;if(0===s)return this.Lwt?"":0;const i=a(this.vv.Wwt(),s);return t[i].Uwt(this.jwt)}zwt(){const t=this.T0t,s=t.b5().B0t(),i=s.length;if(0===i)return this.Lwt?"":0;const e=a(this.vv.Wwt(),i),h=s[e],r=h.fB().Jwt(t.qwt());return h.Uwt(this.jwt+r)}Xwt(t){const s=this.T0t,i=s.w5(),e=i.length;if(0===e||"number"!=typeof t)return this.Lwt?"":0;let h=a(t,e),r=i[h],n=0;return s.RJ()&&(n=r.fB().Jwt(s.qwt())),r.Uwt(this.jwt+n)}}class Io extends vo.Cwt{constructor(t,s){super(t),this.T0t=this.Pf.nJ(s[1]),this.Ywt=this.T0t.Prt(s[2]),this.$wt=this.T0t.het(s[2]),this.kSt=this.Pf.DSt(s[3]),this.Lwt=!!s[4],this.A0t=this.Pf.HD().ek(),this.vv.Nwt(this.T0t)}Kwt(...t){const s=this.T0t,i=s.b5().B0t(),e=i.length;if(0===e)return this.Lwt?"":0;let h=a(this.vv.Wwt(),e),r=(this.A0t.T8().Idt(s),i[h]),n=0;return s.RJ()&&(n=r.fB().Zwt(s.qwt())),this.kSt.apply(r.Crt()[this.$wt+n].sW(),t)}Qwt(t,...s){const i=this.T0t,e=i.w5(),h=e.length;if(0===h||"number"!=typeof t)return this.Lwt?"":0;let r=a(t,h),n=(this.A0t.T8().Idt(i),e[r]),o=0;return i.RJ()&&(o=n.fB().Zwt(i.qwt())),this.kSt.apply(n.Crt()[this.$wt+o].sW(),s)}}class Co extends vo.Cwt{constructor(t,s){super(t),this.tbt=null,this.sbt=s[1]}C1t(){this.tbt=this.Pf.HD().tpt(this.sbt)}ibt(){return this.tbt}}}{let r=function(t){const s=self.ebt[t];if(s)return s;throw new Error("invalid expression number")};r;const Po=self.Vs;Po.hbt=class extends Po.Mr{constructor(t,s,i){super(),this.vv=t,this.Ay=i,this.Lf=s,this.oi=null,this.rbt=!1,this.mwt=!1}static BT(t,s,i){const e=s[0],h=[Ro,Ao,No,Fo,ko,Eo,Oo,Ro,Fo,Fo,Bo,Wo,No,jo,Ao,Lo,Do,Vo,Ho,Uo,zo,Jo];return Po.Tr(h[e],t,e,i,s)}C1t(){}Ewt(){this.rbt=!0}Nwt(t){this.rbt||!t||t.l5().LL()||(this.rbt=!0)}nbt(){return this.rbt}uD(){return this.Ay}PO(){return this.vv.PO()}qD(){return this.vv.qD()}Amt(){return this.mwt}obt(){return 4===this.Lf}};class Ro extends Po.hbt{constructor(t,s,i,e){super(t,s,i),this.abt=0;const h=e[1];this.lbt=h[0],this.ubt=[],this.cbt=null;for(let t=1,s=h.length;t<s;++t)this.ubt.push(Po.Cwt.Pwt(this,h[t]));this.ubt.length?this.oi=this.fbt:(this.oi=r(this.lbt),this.mwt=!0)}dbt(t){if(t<0||t>=this.ubt.length)throw new RangeError("invalid numbered node");return this.ubt[t]}C1t(){for(const s of this.ubt)s.C1t();const t=r(this.lbt);this.ubt.length?this.cbt=t(this):this.cbt=t}Wwt(){return this.abt}fbt(t){return this.abt=t,this.cbt()}}class Ao extends Ro{constructor(t,s,i,e){super(t,s,i,e),this.oi=this.pbt,14===s&&(this.qD().wyt(),this.vv instanceof Po.fyt)&&this.qD().Eyt()}pbt(t){this.abt=t;const s=this.cbt();return"string"==typeof s?s:""}mbt(){return r(this.lbt)()}}class Eo extends Ro{constructor(t,s,i,e){super(t,s,i,e),2<=t.gbt()?this.oi=this.z5:this.oi=this.uO,this.mwt=!1}uO(t){this.abt=t;const s=this.cbt(),i=this.PO().oO();return i.uO(s)}z5(t){const s=this.uO(t);return s?s.z5():null}}class Fo extends Po.hbt{constructor(t,s,i,e){super(t,s,i),this.ybt=e[1],this.oi=this.Sbt,this.mwt=!0}Sbt(){return this.ybt}}class Do extends Po.hbt{constructor(t,s,i,e){super(t,s,i),this.wbt=e[1],this.oi=this.bbt,this.mwt=!0}bbt(){return this.wbt}}class ko extends Po.hbt{constructor(t,s,i,e){super(t,s,i),this.T0t=this.PO().nJ(e[1]),2<=t.gbt()?this.oi=this.e5:this.oi=this.fB;const h=this.qD();h.cyt(this.T0t),this.vv instanceof Po.fyt?h.Eyt():h.n6()&&h.n6().Eyt(),this.mwt=!0}fB(){return this.T0t}e5(){return this.T0t?this.T0t.e5():null}}class Oo extends Po.hbt{constructor(t,s,i,e){super(t,s,i),this.Q7=this.PO().Uk().L$(e[1]),2<=t.gbt()?this.oi=this.jk:this.oi=this.zk,this.mwt=!0}zk(){return this.Q7}jk(){return this.Q7?this.Q7.jk():null}}class Lo extends Po.hbt{constructor(t,s,i,e){super(t,s,i),this.WZ=this.PO().Utt().XK(e[1]),2<=t.gbt()?this.oi=this.bit:this.oi=this.jit,this.mwt=!0}jit(){return this.WZ}bit(){return this.WZ?this.WZ.bit():null}}class No extends Po.hbt{constructor(t,s,i,e){super(t,s,i),this.Mbt=e[1],this.oi=this.vbt,this.mwt=!0}vbt(){return this.Mbt}}class Bo extends Po.hbt{constructor(t,s,i,e){super(t,s,i),this.Tbt=e[1];const h=this.vv.fB();this.vv instanceof Po.uyt&&this.vv.V2()||!h||!h.RJ()?(this.oi=this.xbt,this.mwt=!0):(this.oi=this.Gbt,this.Ewt())}xbt(){return this.Tbt}Gbt(t){t=t||0;let s=this.vv.fB(),i=s.b5(),e=i.w5(),h=null;if(e.length)h=e[t%e.length].fB();else if(i.L0t()){const r=i.N0t();h=r[t%r.length].fB()}else{if(!(0<s.v5()))return 0;{const n=s.w5();h=n[t%n.length].fB()}}return this.Tbt+h.Jwt(s.qwt())}}class Wo extends Po.hbt{constructor(t,s,i,e){super(t,s,i),this.sbt=e[1],this.tbt=null,2<=t.gbt()?this.oi=this._bt:this.oi=this.Ibt,this.mwt=!0}C1t(){this.tbt=this.PO().HD().tpt(this.sbt)}Ibt(){return this.tbt}_bt(){return null}}class Vo extends Po.hbt{constructor(t,s,i,e){super(t,s,i),this.Cbt=e[1],this.kwt=null,2<=t.gbt()?this.oi=this.Pbt:this.oi=this.Rbt,this.mwt=!0}C1t(){this.kwt=this.PO().HD().UD(this.Cbt),this.Cbt=null}Rbt(){return this.kwt}Pbt(){return null}}class jo extends Po.hbt{constructor(t,s,i,e){super(t,s,i),this.Abt=[],this.Ebt=[],this.mwt=!0;for(let t=1,s=e.length;t<s;++t){const h=Po.hbt.BT(this.vv,e[t],0);this.Abt.push(h),this.Ebt.push(0),h.Amt()||(this.mwt=!1)}this.oi=this.Fbt}C1t(){for(const t of this.Abt)t.C1t()}Fbt(){const i=this.Abt,e=this.Ebt;for(let t=0,s=i.length;t<s;++t)e[t]=i[t].oi(0);return e}}class Ho extends Po.hbt{constructor(t,s,i,e){super(t,s,i),this.Dbt=e[1],this.oi=this.hrt,this.mwt=!0}hrt(){return this.Dbt}}class Uo extends Po.hbt{constructor(t,s,i,e){super(t,s,i),this.kbt=e[1],this.oi=this.Obt,this.mwt=!0}Obt(){return this.kbt}}class zo extends Ro{constructor(t,s,i,e){super(t,s,i,e),this.oi=this.PB,this.mwt=!1}PB(){return this.cbt()}}class Jo extends Po.hbt{constructor(t,s,i,e){super(t,s,i),this.rct=this.PO().xct().Qut(e[1]),this.oi=this.Lbt,this.mwt=!0}Lbt(){return this.rct.Mf()}}}{let e=function(i,e){for(let t=0,s=i.length;t<s;++t)e[t]=i[t].oi(0)};e;const qo=self.Vs,Xo=[],Yo=function(){};qo.uyt=class extends qo.Mr{constructor(t,i,s){if(super(),this.ZSt=t,this.Pf=t.PO(),this.Ay=s,this.kSt=this.Pf.DSt(i[1]),this.Nbt=0<i[3],this.Bbt=2===i[3],this.Wbt=!!i[4],this.Vbt=!!i[5],this.l2=!!i[6],this.hz=i[7],this.jbt=this.ZSt.Z0t(),this.T0t=null,this.Ywt=null,this.$wt=-1,this.Rwt=null,this.mI=Yo,this.xpt=Yo,this.si=[],this.Hbt=[],this.Ubt=!1,this.zbt=null,this.Jbt=null,this.iyt=this.Pf.a4()?{eyt:i[8][0],qbt:i[8][1]}:null,-1===i[0]?this.Rwt=this.Pf.UU():(this.T0t=this.Pf.nJ(i[0]),i[2]&&(this.Ywt=this.T0t.Prt(i[2]),this.$wt=this.T0t.het(i[2])),this.ZSt.n6()&&this.ZSt.n6().Eyt()),10===i.length){let s=i[9];for(let t of s)this.si.push(qo.hbt.BT(this,t,this.si.length)),this.Hbt.push(0)}0===this.si.length&&(this.si=Xo,this.Hbt=Xo),this.ZSt.HD().F1t(this)}static BT(t,s,i){return qo.Tr(qo.uyt,t,s,i)}C1t(){for(const t of this.si)t.C1t(),t.nbt()&&(this.Ubt=!0);this.Bbt?(this.mI=this.Xbt,this.xpt=this.Ybt):this.Rwt?(this.$bt(),this.xpt=this.Kbt):this.T0t.l5().LL()?(this.Zbt(),this.xpt=this.Qbt):this.l2?(this.mI=this.tMt,this.xpt=this.sMt):(this.mI=this.iMt,this.xpt=this.eMt)}$bt(){const t=this.Rwt,s=this.Rwt;this.hMt(t,s,this.rMt)}Zbt(){const t=this.T0t.l5(),s=this.T0t.n5().sW();this.hMt(t,s,this.nMt)}hMt(t,s,i){const e=this.kSt,h=this.Vbt,r=this.si;if(0===r.length){const n=t.Dwt(e,s);h?this.mI=function(){return qo.xor(n(),h)}:this.mI=n}else if(1===r.length){const o=r[0];if(!h&&o.Amt())this.mI=t.oMt(e,s,o.oi(0));else{const a=t.Dwt(e,s);this.mI=function(){return qo.xor(a(o.oi(0)),h)}}}else if(2===r.length){const l=r[0],u=r[1];if(!h&&l.Amt()&&u.Amt())this.mI=t.aMt(e,s,l.oi(0),u.oi(0));else{const c=t.Dwt(e,s);this.mI=function(){return qo.xor(c(l.oi(0),u.oi(0)),h)}}}else if(3===r.length){const f=r[0],d=r[1],p=r[2];if(!h&&f.Amt()&&d.Amt()&&p.Amt())this.mI=t.lMt(e,s,f.oi(0),d.oi(0),p.oi(0));else{const m=t.Dwt(e,s);this.mI=function(){return qo.xor(m(f.oi(0),d.oi(0),p.oi(0)),h)}}}else this.mI=i}NJ(){return this.hz}cgt(){return this.kSt}fB(){return this.T0t}cW(){return this.Ywt}uMt(){return this.Ywt?this.Ywt.aW():this.T0t?this.T0t.l5():null}gbt(){const t=this.uMt();return t?t.cMt():1}qD(){return this.ZSt}PO(){return this.Pf}uD(){return this.Ay}$yt(){return this.uD()}hgt(){return this.Nbt}fgt(){return this.Bbt}fMt(){return this.Vbt}xW(){return this.Wbt}V2(){return this.l2}dMt(){return this.iyt.eyt}pMt(){return!!this.Rwt}zyt(){return this.pMt()||this.T0t.l5().LL()}Jyt(){for(const t of this.si)if(t.obt())return t.fB();return null}mMt(t){this.iyt.eyt=!!t,this.ZSt.Pyt()}gMt(){return this.iyt.qbt}Igt(){return!this.dMt()&&!this.Pf.rSt()&&!this.gMt()}yMt(){return this.zbt||(this.zbt=new Map),this.zbt}SMt(){return this.Jbt||(this.Jbt=new Map),this.Jbt}rMt(){const t=this.Hbt;return e(this.si,t),qo.xor(this.kSt.apply(this.Rwt,t),this.Vbt)}*Kbt(){if((this.dMt()||this.Pf.rSt())&&(yield this),this.gMt()){const s=this.Hbt;e(this.si,s);let t=this.kSt.apply(this.Rwt,s);return qo.ea(t)&&(t=yield*t),qo.xor(t,this.Vbt)}return this.mI()}nMt(){const t=this.Hbt,s=(e(this.si,t),this.T0t.n5().sW());return qo.xor(this.kSt.apply(s,t),this.Vbt)}*Qbt(){if((this.dMt()||this.Pf.rSt())&&(yield this),this.gMt()){let t=this.Hbt,s=(e(this.si,t),this.T0t.n5().sW()),i=this.kSt.apply(s,t);return qo.ea(i)&&(i=yield*i),qo.xor(i,this.Vbt)}return this.mI()}Xbt(){return!0}*Ybt(){return(this.dMt()||this.Pf.rSt())&&(yield this),!0}wMt(){return this.Ywt?2<=this.Ywt.aW().cMt()?this.Ywt.uW():this.Ywt:2<=this.T0t.l5().cMt()?this.T0t.e5():this.T0t}tMt(){const t=this.Hbt,s=(e(this.si,t),this.kSt.apply(this.wMt(),t));return this.T0t.GSt(),s}*sMt(){if((this.dMt()||this.Pf.rSt())&&(yield this),this.gMt()){const s=this.Hbt;e(this.si,s);let t=this.kSt.apply(this.wMt(),s);return qo.ea(t)&&(t=yield*t),this.T0t.GSt(),t}return this.mI()}iMt(){const i=this.si,e=this.Hbt,t=this.T0t.b5();for(let t=0,s=i.length;t<s;++t){const h=i[t];h.nbt()||(e[t]=h.oi(0))}return t.k0t()?this.bMt(t):this.MMt(t)}*eMt(){return(this.dMt()||this.Pf.rSt())&&(yield this),this.iMt()}vMt(i){const e=this.si,h=this.Hbt;for(let t=0,s=e.length;t<s;++t){const r=e[t];r.nbt()&&(h[t]=r.oi(i))}}bMt(i){const t=this.T0t,e=t.RJ(),h=t.qwt(),r=this.$wt,n=0<=r,o=t.w5(),a=this.Ubt,l=this.Hbt,u=this.kSt,c=this.Vbt,f=this.jbt&&!this.Nbt;i.D0t();for(let s=0,t=o.length;s<t;++s){const d=o[s];a&&this.vMt(s);let t;if(n){const p=e?d.fB().Zwt(h):0;t=u.apply(d.Crt()[r+p].sW(),l)}else t=u.apply(d.sW(),l);qo.xor(t,c)?i.W0t(d):f&&i.V0t(d)}return t.TMt(!0),i.j0t(!1),t.GSt(),i.O0t()}MMt(t){let s=this.T0t,i=s.RJ(),e=s.qwt(),h=s.TB(),r=this.$wt,n=0<=r,o=this.Ubt,a=this.Hbt,l=this.kSt,u=this.Vbt,c=this.jbt&&!this.Nbt,f=t.H0t(),d=t.U0t(),p=c&&!this.ZSt.Uyt(this),m=p?d:f,g=0,y=!1;for(let s=0,t=m.length;s<t;++s){const w=m[s];o&&this.vMt(s);let t;if(n){const b=i?w.fB().Zwt(e):0;t=l.apply(w.Crt()[r+b].sW(),a)}else t=l.apply(w.sW(),a);qo.xor(t,u)?(y=!0,p?(f.push(w),h&&w.xMt()):(m[g]=w,h&&w.GMt(g),++g)):p?(m[g]=w,h&&w._Mt(g),++g):c&&(d.push(w),h)&&w.IMt()}qo.$n(m,g),h&&s.CMt(p,g);const S=y;return p&&!y&&(y=this.PMt(f)),s.TMt(S||c),c?y:t.O0t()}PMt(i){const t=this.T0t,e=t.RJ(),h=t.qwt(),r=this.Ubt,n=this.$wt,o=0<=n,a=this.Hbt,l=this.kSt,u=this.Vbt;for(let s=0,t=i.length;s<t;++s){const c=i[s];r&&this.vMt(s);let t;if(o){const f=e?c.fB().Zwt(h):0;t=l.apply(c.Crt()[n+f].sW(),a)}else t=l.apply(c.sW(),a);if(qo.xor(t,u))return!0}return!1}RMt(t,s){return this.si[t].oi(s)}dgt(){const t=this.si;if(t.length)return t[0].mbt();throw new Error("no parameters")}iX(){if(!this.zbt||!this.zbt.size)return null;const s={};for(const[i,e]of this.zbt.entries()){let t=e;"collmemory"===i&&(t=[...e.entries()].map(t=>[t[0].GB(),t[1].GB(),t[2]])),s[i]=t}return{ex:s}}eX(t){if(this.zbt&&(this.zbt.clear(),this.zbt=null),t){const s=this.Pf,i=t.ex;if(i){const e=this.yMt();e.clear();for(const[h,r]of Object.entries(i)){let t=r;"collmemory"===h&&(t=qo.Tr(qo.Mc,r.map(t=>[s.hO(t[0]),s.hO(t[1]),t[2]]).filter(t=>t[0]&&t[1]))),e.set(h,t)}}}}}}{let h=function(i,e){for(let t=0,s=i.length;t<s;++t)e[t]=i[t].oi(0)};h;const $o=self.Vs,Ko=[],Zo=function(){},Qo=function*(){};$o.fyt=class extends $o.Mr{constructor(t,s,i){super();const e=(this.ZSt=t).PO(),h=(this.Pf=e,this.Ay=i,this.hz=4<=s.length?s[3]:-1,this.AMt=5<=s.length?255&s[4]:0,this.EMt=5<=s.length?s[4]>>8:0,this.kSt=null,this.T0t=null,this.Ywt=null,this.$wt=-1,this.Rwt=null,this.FMt="",this.DMt=null,this.kMt=null,this.mI=Zo,this.xpt=Zo,this.si=[],this.Hbt=[],this.Ubt=!1,this.zbt=null,this.Jbt=null,-3===s[0]),r=h?s[2]:s[5];if(this.iyt=e.a4()||h?{eyt:r[0],qbt:r[1],index:r[2]}:null,-1===s[0])this.Rwt=e.UU(),this.kSt=e.DSt(s[1]);else if(-2===s[0])this.FMt=s[1];else if(h){const n=e.DSt(s[1]);this.kSt=n,this.mI=this.OMt,this.xpt=this.LMt,this.EMt|=8}else this.T0t=e.nJ(s[0]),4&this.EMt?(this.FMt=s[1],this.DMt=e.nJ(s[2])):(s[2]&&(this.Ywt=this.T0t.Prt(s[2]),this.$wt=this.T0t.het(s[2])),this.kSt=e.DSt(s[1]));if(7===s.length){const o=s[6];for(const a of o)this.si.push($o.hbt.BT(this,a,this.si.length)),this.Hbt.push(0)}0===this.si.length&&(this.si=Ko,this.Hbt=Ko),this.NMt()&&(this.ZSt.wyt(),this.ZSt.Eyt()),this.ZSt.HD().D1t(this)}static BT(t,s,i){return $o.Tr($o.fyt,t,s,i)}C1t(){for(const t of this.si)t.C1t(),t.nbt()&&(this.Ubt=!0);if(this.Rwt)this.$bt(),this.xpt=this.Kbt;else if(this.FMt)4&this.EMt?this.BMt():this.WMt(),this.FMt="",this.DMt=null;else if(this.mI===this.OMt){const s=this.kSt,i=this.Pf.HD().K1t(this.ZSt);this.kSt=s.bind(null,this.Pf.kL(),i)}else this.Ywt?this.lSt()?(this.mI=this.VMt,this.xpt=this.jMt):(this.mI=this.HMt,this.xpt=this.UMt):this.T0t.l5().LL()?(this.Zbt(),this.xpt=this.Qbt):this.V2()?(this.mI=this.zMt,this.xpt=this.JMt):this.lSt()?(this.mI=this.qMt,this.xpt=this.XMt):this.YMt()?(this.mI=this.$Mt,this.xpt=this.KMt):this.si.length?this.si.every(t=>t.nbt())?(this.mI=this.ZMt,this.xpt=this.QMt):this.Ubt?(this.mI=this.tvt,this.xpt=this.svt):this.si.every(t=>t.Amt())?(h(this.si,this.Hbt),this.mI=this.ivt,this.xpt=this.evt):(this.mI=this.hvt,this.xpt=this.rvt):(this.mI=this.ivt,this.xpt=this.evt)}$bt(){const t=this.Rwt,s=this.Rwt;this.hMt(t,s,this.rMt)}Zbt(){const t=this.T0t.l5(),s=this.T0t.n5().sW();this.hMt(t,s,this.nMt)}WMt(){const t=this.ZSt.HD(),i=t.UD(this.FMt);if(i.wc()){const e=0!=(2&this.EMt);this.kMt=i.qD();let s=[...new Set([...this.ZSt.XD(),...this.kMt.XD()])];s=t.B1t(s);const h=!i.ZD()&&this.nvt()?{CSt:!0}:null;if(this.mI=$o.igt.prototype.vSt.bind(this.kMt,s,this.si,e,h),this.Pf.a4()){const r=this;this.xpt=function*(){(r.dMt()||r.Pf.rSt())&&(yield r);const t=yield*r.kMt.ASt(s,r.si,e,h);return t}}else this.xpt=Qo}else this.mI=Zo,this.xpt=Qo}BMt(){const r=this.ZSt.HD(),n=r.hpt(this.DMt,this.FMt);if(n.wc()){const o=0!=(2&this.EMt);this.kMt=n.qD();let s=[...new Set([...this.ZSt.XD(),...this.kMt.XD(),this.T0t,n.fB()])],t=(s=r.B1t(s),!this.T0t.RJ()&&!n.fB().RJ()),i=!this.T0t.RJ()&&n.fB().RJ(),e=this.T0t.RJ(),h=null;if(!n.ZD()&&this.nvt()&&((h=h||{}).CSt=!0),!i&&o||((h=h||{}).TSt=this.T0t,h.xSt=n.fB()),t||i||e&&!n.owt()?this.mI=$o.igt.prototype.vSt.bind(this.kMt,s,this.si,o,h):e&&(this.mI=$o.Lmt.prototype.cwt.bind(n,s,this.si)),this.Pf.a4()){const a=this;t||i||e&&!n.owt()?this.xpt=function*(){(a.dMt()||a.Pf.rSt())&&(yield a);const t=yield*a.kMt.ASt(s,a.si,o,h);return t}:e&&(this.xpt=function*(){(a.dMt()||a.Pf.rSt())&&(yield a);const t=yield*n.dwt(s,a.si);return t})}else this.xpt=Qo}else this.mI=Zo,this.xpt=Qo}hMt(t,s,i){const e=this.kSt,h=this.si;if(0===h.length)this.mI=t.Dwt(e,s);else if(1===h.length){const r=h[0];if(r.Amt())this.mI=t.oMt(e,s,r.oi(0));else{const n=t.Dwt(e,s);this.mI=function(){return n(r.oi(0))}}}else if(2===h.length){const o=h[0],a=h[1];if(o.Amt()&&a.Amt())this.mI=t.aMt(e,s,o.oi(0),a.oi(0));else{const l=t.Dwt(e,s);this.mI=function(){return l(o.oi(0),a.oi(0))}}}else if(3===h.length){const u=h[0],c=h[1],f=h[2];if(u.Amt()&&c.Amt()&&f.Amt())this.mI=t.lMt(e,s,u.oi(0),c.oi(0),f.oi(0));else{const d=t.Dwt(e,s);this.mI=function(){return d(u.oi(0),c.oi(0),f.oi(0))}}}else this.mI=i}NJ(){return this.hz}lSt(){return 0!=(8&this.EMt)}aSt(){return 0!=(16&this.EMt)}YMt(){return 1===this.AMt}V2(){return 2===this.AMt}NMt(){return 0!=(1&this.EMt)}vyt(){return this.lSt()||this.aSt()}fB(){return this.T0t}uMt(){return this.Ywt?this.Ywt.aW():this.T0t?this.T0t.l5():null}gbt(){const t=this.uMt();return t?t.cMt():1}qD(){return this.ZSt}nvt(){let t=this.ZSt;do{if(t instanceof $o.Lmt&&t.ZD())return!0}while(t=t.Y1t());return!1}PO(){return this.Pf}uD(){return this.Ay}$yt(){return this.iyt.index}dMt(){return this.iyt.eyt}mMt(t){this.iyt.eyt=!!t,this.ZSt.Pyt()}gMt(){return this.iyt.qbt}Igt(){return!this.dMt()&&!this.Pf.rSt()&&!this.gMt()}yMt(){return this.zbt||(this.zbt=new Map),this.zbt}SMt(){return this.Jbt||(this.Jbt=new Map),this.Jbt}rMt(){const t=this.Hbt;return h(this.si,t),this.kSt.apply(this.Rwt,t)}*Kbt(){if((this.dMt()||this.Pf.rSt())&&(yield this),this.gMt()){const t=this.Hbt,s=(h(this.si,t),yield*this.kSt.apply(this.Rwt,t));return s}return this.mI()}nMt(){const t=this.Hbt;return h(this.si,t),this.kSt.apply(this.T0t.n5().sW(),t)}*Qbt(){if((this.dMt()||this.Pf.rSt())&&(yield this),this.gMt()){const t=this.Hbt,s=(h(this.si,t),yield*this.kSt.apply(this.T0t.n5().sW(),t));return s}return this.mI()}ivt(){const i=this.Hbt,e=this.T0t.b5().w5();for(let t=0,s=e.length;t<s;++t)this.kSt.apply(e[t].sW(),i)}*evt(){if((this.dMt()||this.Pf.rSt())&&(yield this),this.gMt()){const i=this.Hbt,e=this.T0t.b5().w5();for(let t=0,s=e.length;t<s;++t)yield*this.kSt.apply(e[t].sW(),i)}else this.ivt()}hvt(){const i=this.Hbt,e=(h(this.si,i),this.T0t.b5().w5());for(let t=0,s=e.length;t<s;++t)this.kSt.apply(e[t].sW(),i)}*rvt(){if((this.dMt()||this.Pf.rSt())&&(yield this),this.gMt()){const i=this.Hbt,e=(h(this.si,i),this.T0t.b5().w5());for(let t=0,s=e.length;t<s;++t)yield*this.kSt.apply(e[t].sW(),i)}else this.hvt()}ZMt(){const e=this.si,h=this.Hbt,s=this.kSt,r=this.T0t.b5().w5();for(let i=0,t=r.length;i<t;++i){const n=r[i];for(let t=0,s=e.length;t<s;++t)h[t]=e[t].oi(i);s.apply(n.sW(),h)}}*QMt(){if((this.dMt()||this.Pf.rSt())&&(yield this),this.gMt()){const e=this.si,h=this.Hbt,s=this.kSt,r=this.T0t.b5().w5();for(let i=0,t=r.length;i<t;++i){const n=r[i];for(let t=0,s=e.length;t<s;++t)h[t]=e[t].oi(i);yield*s.apply(n.sW(),h)}}else this.ZMt()}tvt(){const e=this.si,h=this.Hbt,s=this.kSt,r=this.T0t.b5().w5();for(let t=0,s=e.length;t<s;++t){const i=e[t];i.nbt()||(h[t]=i.oi(0))}for(let i=0,t=r.length;i<t;++i){const n=r[i];for(let t=0,s=e.length;t<s;++t){const o=e[t];o.nbt()&&(h[t]=o.oi(i))}s.apply(n.sW(),h)}}*svt(){if((this.dMt()||this.Pf.rSt())&&(yield this),this.gMt()){const e=this.si,h=this.Hbt,s=this.kSt,r=this.T0t.b5().w5();for(let t=0,s=e.length;t<s;++t){const i=e[t];i.nbt()||(h[t]=i.oi(0))}for(let i=0,t=r.length;i<t;++i){const n=r[i];for(let t=0,s=e.length;t<s;++t){const o=e[t];o.nbt()&&(h[t]=o.oi(i))}yield*s.apply(n.sW(),h)}}else this.tvt()}$Mt(){const e=this.si,h=this.Hbt,s=this.kSt,t=this.T0t,i=t.ovt(),r=t.b5().w5();i.avt(s);for(let i=0,t=r.length;i<t;++i){const n=r[i];for(let t=0,s=e.length;t<s;++t)h[t]=e[t].oi(i);s.apply(n.sW(),h)}i.lvt(s)}*KMt(){if((this.dMt()||this.Pf.rSt())&&(yield this),this.gMt()){const e=this.si,h=this.Hbt,s=this.kSt,t=this.T0t,i=t.ovt(),r=t.b5().w5();i.avt(s);for(let i=0,t=r.length;i<t;++i){const n=r[i];for(let t=0,s=e.length;t<s;++t)h[t]=e[t].oi(i);yield*s.apply(n.sW(),h)}i.lvt(s)}else this.$Mt()}uvt(){return this.Ywt?2<=this.Ywt.aW().cMt()?this.Ywt.uW():this.Ywt:2<=this.T0t.l5().cMt()?this.T0t.e5():this.T0t}zMt(){const t=this.Hbt;return h(this.si,t),this.kSt.apply(this.uvt(),t)}*JMt(){if((this.dMt()||this.Pf.rSt())&&(yield this),this.gMt()){const s=this.Hbt;h(this.si,s);let t=this.kSt.apply(this.uvt(),s);return $o.ea(t)?yield*t:t}return this.zMt()}HMt(){const t=this.T0t,s=t.RJ(),e=t.qwt(),h=this.si,r=this.Ubt,n=this.Hbt,o=this.kSt,a=this.$wt,l=t.b5().w5();for(let t=0,s=h.length;t<s;++t){const i=h[t];i.nbt()||(n[t]=i.oi(0))}for(let i=0,t=l.length;i<t;++i){const u=l[i];if(r)for(let t=0,s=h.length;t<s;++t){const f=h[t];f.nbt()&&(n[t]=f.oi(i))}const c=s?u.fB().Zwt(e):0;o.apply(u.Crt()[a+c].sW(),n)}}*UMt(){if((this.dMt()||this.Pf.rSt())&&(yield this),this.gMt()){const t=this.T0t,s=t.RJ(),e=t.qwt(),h=this.si,r=this.Ubt,n=this.Hbt,o=this.kSt,a=this.$wt,l=t.b5().w5();for(let t=0,s=h.length;t<s;++t){const i=h[t];i.nbt()||(n[t]=i.oi(0))}for(let i=0,t=l.length;i<t;++i){const u=l[i];if(r)for(let t=0,s=h.length;t<s;++t){const f=h[t];f.nbt()&&(n[t]=f.oi(i))}const c=s?u.fB().Zwt(e):0;yield*o.apply(u.Crt()[a+c].sW(),n)}}else this.HMt()}qMt(){const e=this.si,h=this.Hbt,s=this.kSt,r=this.T0t.b5().w5(),n=[];for(let i=0,t=r.length;i<t;++i){const o=r[i];for(let t=0,s=e.length;t<s;++t)h[t]=e[t].oi(i);n.push(s.apply(o.sW(),h))}return Promise.all(n)}*XMt(){if((this.dMt()||this.Pf.rSt())&&(yield this),this.gMt()){const e=this.si,h=this.Hbt,s=this.kSt,r=this.T0t.b5().w5(),n=[];for(let i=0,t=r.length;i<t;++i){const o=r[i];for(let t=0,s=e.length;t<s;++t)h[t]=e[t].oi(i);n.push(yield*s.apply(o.sW(),h))}return Promise.all(n)}return this.qMt()}VMt(){const t=this.T0t,s=t.RJ(),e=t.qwt(),h=this.si,r=this.Hbt,n=this.kSt,o=this.$wt,a=t.b5().w5(),l=[];for(let i=0,t=a.length;i<t;++i){const u=a[i];for(let t=0,s=h.length;t<s;++t)r[t]=h[t].oi(i);const c=s?u.fB().Zwt(e):0;l.push(n.apply(u.Crt()[o+c].sW(),r))}return Promise.all(l)}*jMt(){if((this.dMt()||this.Pf.rSt())&&(yield this),this.gMt()){const t=this.T0t,s=t.RJ(),e=t.qwt(),h=this.si,r=this.Hbt,n=this.kSt,o=this.$wt,a=t.b5().w5(),l=[];for(let i=0,t=a.length;i<t;++i){const u=a[i];for(let t=0,s=h.length;t<s;++t)r[t]=h[t].oi(i);const c=s?u.fB().Zwt(e):0;l.push(yield*n.apply(u.Crt()[o+c].sW(),r))}return Promise.all(l)}return this.VMt()}async OMt(){try{await this.kSt()}catch(t){console.error(`Unhandled exception running script %c${this.ZSt.ZX().Mf()}, event ${this.ZSt.kyt()}, action ${this.$yt()+1}:`,"font-size: 1.2em; font-weight: bold;",t),self.C3Debugger&&self.C3Debugger._SetLastErrorScript(this),$o.ugt.LSt()||(console.info("%cTip:%c run this to highlight in Construct the last script that had an error: %cgoToLastErrorScript()","font-weight: bold; text-decoration: underline","","font-weight: bold"),$o.ugt.NSt())}}*LMt(){return(this.dMt()||this.Pf.rSt())&&(yield this),this.OMt()}iX(){return this.zbt&&this.zbt.size?{ex:$o.Zo(this.zbt)}:null}eX(t){if(this.zbt&&(this.zbt.clear(),this.zbt=null),t){const s=t.ex;s&&(this.zbt=$o.Qo(s))}}}}{let d=function(t){return t instanceof o?S.Z5(t):t.RV()},u=function(t){return d(t).lO()},h=function(t){return S.Z5(t)},m=function(t){return t instanceof a?S.Z5(t):t},s=function(t){return t instanceof c?S.Z5(t):t},C=function(t,s,i,e){const h=s.GB(),r=i.GB();h<r?t.Set(s,i,e):t.Set(i,s,e)},P=function(t,s,i){const e=s.GB(),h=i.GB();e<h?t.Gc(s,i):t.Gc(i,s)},R=function(t,s){t._c(s)},A=function(t,s,i){const e=s.GB(),h=i.GB();return e<h?t.oi(s,i):t.oi(i,s)},e=function(t,s,i,e){if(!s)return!1;const h=0!==i||0!==e,r=t.lO(),n=S.yD(),o=S.H1t(),a=o.qD().Z0t(),l=o.fB(),u=o.fMt(),c=s.b5(),f=l!==s;_=s,G=f&&!u;let d,p=0,m=0,g=I=!1;c.k0t()?(w.I(r.B4()),w.offset(i,e),n.cvt(r.uO(),s,w,b),d=b):!a||S.fvt()&&!c.U0t().length&&c.H0t().length?d=c.H0t():(d=c.U0t(),I=!0),h&&(p=r.KM(),m=r.tv(),r.D4(i,e),r.R4());for(const y of d)if(n.$O(t,y)){if(g=!0,u)break;f&&D.add(y)}return h&&(r.A4(p,m),r.R4()),E.Kn(b),g},i=function(t){const s=S.YD().Z0t(),i=_.b5(),e=i.H0t(),h=i.U0t();i.k0t()?(i.q0t(D),s&&(E.Kn(h),i.X0t(D,_.w5()))):s?I?i.Y0t(D):(i.X0t(D,e),i.q0t(D)):i.q0t(D),_.GSt()},M=function(t,s){G&&(s&&i(),D.clear(),_=null,G=!1)},r=function(t,s){const i=S.hO(s);if(i){const e=t.b5();if(e.k0t()||e.H0t().includes(i))if(t.RJ()){if(i.fB().dvt(t))return e.K0t(i),t.GSt(),!0}else if(i.fB()===t)return e.K0t(i),t.GSt(),!0}return!1},n=function(t,h){const r=t.b5();if(r.k0t()){r.j0t(!1),r.D0t();const i=t.w5();for(let t=0,s=i.length;t<s;++t){const e=i[t];e.GB()===h?r.V0t(e):r.W0t(e)}return t.GSt(),!!r.H0t().length}{let i=r.H0t(),e=0;for(let t=0,s=i.length;t<s;++t){const n=i[t];(i[e]=n).GB()===h?r.V0t(n):++e}return E.$n(i,e),t.GSt(),!!i.length}},E=(d,u,h,m,s,C,P,R,A,e,i,M,r,n,self.Vs),l=new E.na,v={},T={},x={},S=null,o=(E.pvt=function(t){S=t},self.uB),a=self.o5,c=self.K5,w=(T.mvt=function(t,s){return E.compare(this.lO().KM(),t,s)},x.mvt=function(t,s){return E.compare(this.x,t,s)},T.gvt=function(t,s){return E.compare(this.lO().tv(),t,s)},x.gvt=function(t,s){return E.compare(this.y,t,s)},T.yvt=function(){return this.lO().H4()},x.yvt=function(){return this.j4()},v.Svt=function(){const t=u(this),s=t.zk(),i=t.B4();return i.jl()<0||i.Hl()<0||i.Wl()>s.Wm()||i.Vl()>s.$m()},v.wvt=function(i,e,h){const t=m(this),s=t.b5(),r=s.w5();if(!r.length)return!1;let n=r[0],o=n.lO(),a=n,l=E.Lr(o.KM(),o.tv(),e,h);for(let t=1,s=r.length;t<s;++t){n=r[t],o=n.lO();const u=E.Lr(o.KM(),o.tv(),e,h);(0===i&&u<l||1===i&&u>l)&&(l=u,a=n)}return s.K0t(a),!0},T.ZM=function(t){const s=this.lO();s.KM()!==t&&(s.ZM(t),s.R4())},x.ZM=function(t){this.x=+t},T.sv=function(t){const s=this.lO();s.tv()!==t&&(s.sv(t),s.R4())},x.sv=function(t){this.y=+t},T.bvt=function(t,s){const i=this.lO();i.Mvt(t,s)||(i.A4(t,s),i.R4())},x.bvt=function(t,s){this.setPosition(t,s)},v.vvt=function(t,s){if(t=m(t)){const i=d(this),e=t.y5(i);if(e){const[h,r]=e.Tvt(s),n=i.lO();n.KM()===h&&n.tv()===r||(n.A4(h,r),n.R4())}}},v.xvt=function(t){if(0!==t){const s=u(this);s.D4(s.Gvt()*t,s._vt()*t),s.R4()}},T.Ivt=function(t,s){if(0!==s){const i=this.lO();t=E.Er(t),i.D4(Math.cos(t)*s,Math.sin(t)*s),i.R4()}},x.Ivt=function(t,s){0!==s&&(t=E.Er(t),this.F4(Math.cos(t)*s,Math.sin(t)*s))},T.KM=function(){return this.lO().KM()},x.KM=function(){return this.x},T.tv=function(){return this.lO().tv()},x.tv=function(){return this.y},v.fk=function(){return S.fk(d(this))},T.Cvt=function(t,s){return E.compare(this.lO().Wm(),t,s)},x.Cvt=function(t,s){return E.compare(this.width,t,s)},T.Pvt=function(t,s){return E.compare(this.lO().$m(),t,s)},x.Pvt=function(t,s){return E.compare(this.height,t,s)},T.qm=function(t){const s=this.lO();s.Wm()!==t&&(s.qm(t),s.R4())},x.qm=function(t){this.width=t},T.Vm=function(t){const s=this.lO();s.$m()!==t&&(s.Vm(t),s.R4())},x.Vm=function(t){this.height=t},T.BC=function(t,s){const i=u(this);i.Wm()===t&&i.$m()===s||(i.BC(t,s),i.R4())},x.BC=function(t,s){this.k5(t,s)},T.Wm=function(){return this.lO().Wm()},x.Wm=function(){return this.width},T.$m=function(){return this.lO().$m()},x.$m=function(){return this.height},v.Rvt=function(){return u(this).B4().Wl()},v.Avt=function(){return u(this).B4().Vl()},v.Evt=function(){return u(this).B4().jl()},v.Fvt=function(){return u(this).B4().Hl()},v.Dvt=function(){const t=u(this).B4();return(t.Wl()+t.jl())/2},v.kvt=function(){const t=u(this).B4();return(t.Vl()+t.Hl())/2},v.Ovt=function(t,s){return E.Br(u(this).GetAngle(),E.Er(s))<=E.Er(t)},v.Lvt=function(t){return E.Vr(u(this).GetAngle(),E.Er(t))},v.Nvt=function(t,s){const i=E.Er(t),e=E.Er(s),h=u(this).GetAngle(),r=!E.Vr(e,i);return r?!(!E.Vr(h,i)&&E.Vr(h,e)):E.Vr(h,i)&&!E.Vr(h,e)},T.N5=function(t){const s=this.lO(),i=E.Ar(E.Er(t));isNaN(i)||s.GetAngle()===i||(s.N5(i),s.R4())},x.N5=function(t){this.N4=t},v.Bvt=function(t){if(!isNaN(t)&&0!==t){const s=u(this);s.N5(s.GetAngle()+E.Er(t)),s.R4()}},v.Wvt=function(t){if(!isNaN(t)&&0!==t){const s=u(this);s.N5(s.GetAngle()-E.Er(t)),s.R4()}},v.Vvt=function(t,s){const i=u(this),e=i.GetAngle(),h=E.Wr(e,E.Er(s),E.Er(t));isNaN(h)||e===h||(i.N5(h),i.R4())},v.jvt=function(t,s,i){const e=u(this),h=e.GetAngle(),r=s-e.KM(),n=i-e.tv(),o=Math.atan2(n,r),a=E.Wr(h,o,E.Er(t));isNaN(a)||h===a||(e.N5(a),e.R4())},v.Hvt=function(t,s){const i=u(this),e=i.GetAngle(),h=t-i.KM(),r=s-i.tv(),n=Math.atan2(r,h);isNaN(n)||e===n||(i.N5(n),i.R4())},T.GetAngle=function(){return E.Fr(this.lO().GetAngle())},x.GetAngle=function(){return this.N4},v.Uvt=function(t,s){return E.compare(E.sn(100*u(this).mA(),6),t,s)},T.TN=function(){return this.lO().TN()},x.TN=function(){return this.isVisible},v.MN=function(t){const s=u(this);t=2===t?!s.TN():0!==t,s.TN()!==t&&(s.MN(t),S.gO())},v.yA=function(t){const s=E.Rr(t/100,0,1),i=u(this);if(i.D6()){if(i.sot().zvt()===s)return}else if(i.mA()===s)return;i.yA(s),S.gO()},v.Jvt=function(t){l.Wa(t);const s=u(this);s.z4().Ea(l)||(s.J4(l),S.gO())},v.wA=function(){const t=u(this).z4();return E.nn(t.Ga(),t._a(),t.Ia(),t.Ca())},v.mA=function(){return E.sn(100*u(this).mA(),6)},v.qvt=function(t){return!!(t=s(t))&&u(this).uO()===t},v.Xvt=function(i){const t=m(this),s=t.b5(),e=s.w5();if(!e.length)return!1;let h=e[0],r=h;for(let t=1,s=e.length;t<s;++t){const n=e[t],o=n.lO(),a=r.lO(),l=o.uO().uD(),u=a.uO().uD();0===i?(u<l||l===u&&o.cO()>a.cO())&&(r=n):(l<u||l===u&&o.cO()<a.cO())&&(r=n)}return s.K0t(r),!0},T.Yvt=function(t,s,i){const e=this.lO(),h=0===t?e.hv():e.L4();return E.compare(h,s,i)},x.Yvt=function(t,s,i){const e=0===t?this.WN:this.O4;return E.compare(e,s,i)},T.$vt=function(){this.lO().X4()},x.$vt=function(){this.q4()},T.Kvt=function(){this.lO().K4()},x.Kvt=function(){this.Y4()},v.Zvt=function(t){(t=s(t))&&u(this).Q4(t)},v.Qvt=function(t,s){const i=0===t;if(s=m(s)){const e=d(this),h=s.t2t(e);h&&e.lO().s6(h,i)}},T.rv=function(t){const s=this.lO();s.hv()!==t&&(s.rv(t),S.gO())},x.rv=function(t){this.WN=t},v.s2t=function(){return u(this).uO().uD()},v.i2t=function(){return u(this).uO().Mf()},T.e2t=function(){return this.lO().cO()},x.e2t=function(){return this.zIndex},T.h2t=function(){return this.lO().hv()},x.h2t=function(){return this.WN},T.r2t=function(){return this.lO().L4()},x.r2t=function(){return this.O4},v.n2t=function(t){const s=d(this),i=s.fB().E5().Art(t);if(i){const e=i.uD(),h=s.lO().C4();return h.yW(e)}},v.o2t=function(t,s){const i=d(this),e=i.fB().E5().Art(s);if(e){const h=e.uD(),r=1===t,n=i.lO().C4();n.yW(h)!==r&&(n.SW(h,r),n.wW(),S.gO())}},v.a2t=function(t,s,i){const e=d(this),h=e.fB().E5().Art(t);if(h){s=Math.floor(s);const r=h.Xx().$x(s);if(r){"color"===r?(l.Wa(i),i=l):"percent"===r&&(i/=100);const n=h.uD(),o=e.lO().C4(),a=o.MW(n,s,i);a&&o.yW(n)&&S.gO()}}},E.Tr(E.Rect)),F=[],b=[],G=!1,_=null,I=!1,D=new Set;v.l2t=function(y){const t=m(this),S=(y=m(y),t.PO());if(S.u2t())return function*(S){if(S){let t=this.PO(),s=t.yD(),e=t.HD(),i=e.ek(),h=e.H1t(),r=h.fB(),n=h.yMt(),o=h.SMt(),a=i.T8(),l=t.wst(),u=l-1,c=a.YD(),f=i.x8(c),d=n.get("collmemory"),p=(d||(d=E.Tr(E.Mc),n.set("collmemory",d)),o.get("collisionCreatedDestroyCallback")||(o.set("collisionCreatedDestroyCallback",!0),t.a0().addEventListener("instancedestroy",t=>R(d,t.fW))),r.b5()),m=S.b5(),g=p.w5(),y=null;for(let t=0;t<g.length;++t){const w=g[t];m.k0t()?(s.cvt(w.lO().uO(),S,w.lO().B4(),F),y=F,s.c2t(w,S,y)):y=m.w5();for(let t=0;t<y.length;++t){const b=y[t];if(s.$O(w,b)||s.f2t(w,b)){let t=A(d,w,b),s=!1,i=-2;"number"==typeof t&&(s=!0,i=t);const M=!s||i<u;if(C(d,w,b,l),M){const v=c.v8(),T=(e.P8(v),r.b5()),x=S.b5();if(T.j0t(!1),x.j0t(!1),r===S){const G=T.H0t();E.Kn(G),G.push(w),G.push(b),r.GSt()}else{const _=T.H0t(),I=x.H0t();E.Kn(_),E.Kn(I),_.push(w),I.push(b),r.GSt(),S.GSt()}yield*c.gSt(a,f),e.E8(v)}}else P(d,w,b)}E.Kn(F)}i.O8()}return!1}.call(t,y);if(y){let s=S.yD(),e=S.HD(),t=e.ek(),i=e.H1t(),h=i.fB(),r=i.yMt(),n=i.SMt(),o=t.T8(),a=S.wst(),l=a-1,u=o.YD(),c=t.x8(u),f=r.get("collmemory"),d=(f||(f=E.Tr(E.Mc),r.set("collmemory",f)),n.get("collisionCreatedDestroyCallback")||(n.set("collisionCreatedDestroyCallback",!0),S.a0().addEventListener("instancedestroy",t=>R(f,t.fW))),h.b5()),p=y.b5(),m=d.w5(),g=null;for(let t=0;t<m.length;++t){const w=m[t];p.k0t()?(s.cvt(w.lO().uO(),y,w.lO().B4(),F),g=F,s.c2t(w,y,g)):g=p.w5();for(let t=0;t<g.length;++t){const b=g[t];if(s.$O(w,b)||s.f2t(w,b)){let t=A(f,w,b),s=!1,i=-2;"number"==typeof t&&(s=!0,i=t);const M=!s||i<l;if(C(f,w,b,a),M){const v=u.v8(),T=(e.P8(v),h.b5()),x=y.b5();if(T.j0t(!1),x.j0t(!1),h===y){const G=T.H0t();E.Kn(G),G.push(w),G.push(b),h.GSt()}else{const _=T.H0t(),I=x.H0t();E.Kn(_),E.Kn(I),_.push(w),I.push(b),h.GSt(),y.GSt()}u.A8(o,c),e.E8(v)}}else P(f,w,b)}E.Kn(F)}t.O8()}return!1},v.d2t=function(t){return t=m(t),e(d(this),t,0,0)},v.p2t=function(t,s,i){return t=m(t),e(d(this),t,s,i)},v.m2t=function(){return!0},v.w6=function(){return u(this).w6()},v.nX=function(){return u(this).nX()},v.g2t=function(i,e){const t=m(this),s=(i=m(i),t.PO()),h=this.b5(),r=h.w5();if(0===r.length)return!1;let n=i.b5(),o=n.w5();if(n.k0t()){const u=[...s.y2t(i)];0<u.length&&(o=o.concat(u))}if(0===o.length)return!1;const a=n.k0t()?null:new Set(o),l=new Set;for(let t=0,s=r.length;t<s;++t){const c=r[t];if(1===e)for(const f of c.l6())f.S2t(i)&&(null===a||a.has(f))&&l.add(f);else{let t;if(0===e){if(null===(t=c.n6()))continue}else t=c.a6();t.S2t(i)&&(null===a||a.has(t))&&l.add(t)}}return 0!==l.size&&(n.q0t(l),i.GSt(),!0)},v.w2t=function(i,e){const t=m(this),s=(i=m(i),t.PO()),h=t.b5(),r=h.w5();if(0===r.length)return!1;let n=i.b5(),o=n.w5();if(n.k0t()){const u=[...s.y2t(i)];0<u.length&&(o=o.concat(u))}if(0===o.length)return!1;const a=n.k0t()?null:new Set(o),l=new Set;for(let t=0,s=r.length;t<s;++t){const c=r[t];2!==e||c.nX()||!c.S2t(i)||null!==a&&!a.has(c)||l.add(c);for(const f of 0===e?c.children():c.p6())2===e&&f.nX()||f.S2t(i)&&(null===a||a.has(f))&&l.add(f)}return 0!==l.size&&(n.q0t(l),i.GSt(),!0)},v.b2t=function(i,e,h){const t=m(this),s=(i=m(i),t.PO()),r=t.b5(),n=r.w5();if(0===n.length)return!1;let o=i.b5(),a=o.w5();if(o.k0t()){const c=[...s.y2t(i)];0<c.length&&(a=a.concat(c))}if(0===a.length)return!1;const l=o.k0t()?null:new Set(a),u=[];for(let t=0,s=n.length;t<s;++t){const f=n[t];if(0===e){const d=f.d6(h);null!==d&&d.S2t(i)&&(null===l||l.has(d))&&u.push(d)}else if(1===e)for(const p of f.children())if(p.S2t(i)){if(0===h){null!==l&&!l.has(p)||u.push(p);break}--h}}return 0!==u.length&&(o.J0t(u),i.GSt(),!0)},v.M2t=function(t,s,i){const e=d(this);switch(t){case 0:default:return E.compare(e.c6(),s,i);case 1:return E.compare(e.v2t(),s,i)}},v.g6=function(t,s,i,e,h,r,n,o,a,l){t=m(t);const u=d(this),c=S.z1t().fB();for(const f of t.T2t(u,c)){if(!f.l5().YL())return;u.g6(f,{M6:s,T6:i,G6:e,I6:h,P6:r,F6:n,A6:o,k6:a,L6:l})}},v.y6=function(t){t=m(t);const s=d(this),i=S.z1t().fB();for(const e of t.T2t(s,i))s.y6(e)},v.x2t=function(){const t=d(this);if(t.w6()){const s=t.n6();s.y6(t)}},v.G2t=function(){const t=d(this).n6();return t?t.GB():-1},v._2t=function(){return d(this).c6()},v.I2t=function(){return d(this).v2t()},v.C2t=function(t,s){t=Math.floor(t),s=Math.floor(s);const i=u(this);t<2||s<2||!isFinite(t)||!isFinite(s)?(i.j6(),i.R4()):i.W6(t,s)},v.U6=function(t,s,i,e,h,r,n,o){const a=u(this),l=a.U6(t,s,{mode:0===i?"absolute":"relative",x:e,y:h,WN:r,u:n,v:o});l&&a.R4()},v.P2t=function(){const t=u(this);return t.J6()?t.q6().Rv():0},v.R2t=function(){const t=u(this);return t.J6()?t.q6().Av():0},v.A2t=function(t){const s=u(this);t=2===t?!s.TN():0!==t,s.TN()!==t&&s.MN(t)},v.rW=function(t,s){this instanceof self.uB?this.Wj(t,s):this.rW(t,s)},v.E2t=function(t,s){this instanceof self.uB?this.Vj(t,""+s):this.E2t(t,""+s)},v.F2t=function(t){this instanceof self.uB?this.jj(t):this.F2t(t)},v.D2t=function(){this instanceof self.uB?this.Lj():this.iW()},v.k2t=function(){this instanceof self.uB?this.Nj():this.eW()},v.O2t=function(){return this instanceof self.uB?this.Bj():this.O2t()},v.L2t=function(t){this instanceof self.uB?this._setEnabled(0!==t):this.N2t(0!==t)},v.B2t=function(){return this instanceof self.uB?this.HSt():this.W2t()},T.V2t=function(t,s,i){return E.compare(this.RV().Unt(t),s,i)},x.V2t=function(t,s,i){return E.compare(h(this).Unt(t),s,i)},T.j2t=function(t){return!!this.RV().Unt(t)},x.j2t=function(t){return!!h(this).Unt(t)},v.H2t=function(i,e){const h=m(this),t=h.b5(),r=t.w5();if(!r.length)return!1;let n=h.RJ(),o=null,a=0;for(let t=0,s=r.length;t<s;++t){const l=r[t],u=n?l.fB().Jwt(h.qwt()):0,c=l.Unt(u+e);(null===o||0===i&&c<a||1===i&&c>a)&&(a=c,o=l)}return t.K0t(o),!0},v.U2t=function(t){const s=m(this);return(s.PO().H1t().fMt()?n:r)(s,t)},v.lV=function(t){const s=new Set(E.So(t)),i=d(this).kB();return s.isSubsetOf(i)},v.z2t=function(){return d(this).J2t()},v.q2t=function(){return d(this).kB().size},v.X2t=function(t){return d(this).Y2t(t)},v.$2t=function(t,s){const i=E.So(s);if(0!==i.length){const e=d(this),h=new Set(e.kB());if(0===t)for(const r of i)h.add(r);else if(1===t)for(const n of i)h.delete(n);e.LB(h)}},v.K2t=function(){S.SB(d(this))},v.Z2t=function(){return!0},v.Q2t=function(){return!0},T.tTt=function(t,s){this.RV().znt(t,s)},x.tTt=function(t,s){h(this).znt(t,s)},T.sTt=function(t,s){const i=this.RV(),e=i.Unt(t);"number"==typeof e&&"number"!=typeof s?s=parseFloat(s):"string"==typeof e&&"string"!=typeof s&&(s=s.toString()),i.znt(t,e+s)},x.sTt=function(t,s){const i=h(this),e=i.Unt(t);"number"==typeof e&&"number"!=typeof s?s=parseFloat(s):"string"==typeof e&&"string"!=typeof s&&(s=s.toString()),i.znt(t,e+s)},T.iTt=function(t,s){const i=this.RV(),e=i.Unt(t);"number"==typeof e&&("number"!=typeof s&&(s=parseFloat(s)),i.znt(t,e-s))},x.iTt=function(t,s){const i=h(this),e=i.Unt(t);"number"==typeof e&&("number"!=typeof s&&(s=parseFloat(s)),i.znt(t,e-s))},T.eTt=function(t,s){this.RV().znt(t,s?1:0)},x.eTt=function(t,s){h(this).znt(t,s?1:0)},T.hTt=function(t){const s=this.RV();s.znt(t,0===s.Unt(t)?1:0)},x.hTt=function(t){const s=h(this);s.znt(t,0===s.Unt(t)?1:0)},v.rTt=function(t){let s;try{s=JSON.parse(t)}catch(t){return void console.error("Failed to load from JSON string: ",t)}const i=d(this);S.nTt(),i.SK("state"),i.pv(s,"state"),S.oTt("state",{aTt:!0})},v.lTt=function(){return JSON.stringify(d(this).dv("state"))},v.uTt=function(){return d(this).fB().Mf()},v.cTt=function(){let t=S.j1t().Cdt(),s=t.v5();for(const i of S.y2t(t))++s;return s},v.fTt=function(){return S.j1t().Cdt().b5().w5().length},T.IB=function(){return this.RV().IB()},x.IB=function(){return h(this).IB()},T.GB=function(){return this.RV().GB()},x.GB=function(){return h(this).GB()},v.pmt=function(t){const s=d(this);return t.toLowerCase()===S.HD().Smt(s)},v.BB=function(t){const s=d(this);S.HD().BB(s,t)},v.dTt=function(t){const s=m(this);return S.HD().Upt().pTt(s.b5().w5(),t),!0},v.mTt=function(){return d(this).PB()},E.gTt=function(t,s,i){const e=t[1],h=t[3],r=t[4],n=t[5],o=t[6],a=t[7],l=t[8],u=t[10],c=t[11],f=t[12],d=t[13],p=t[14],m=t[15],g=t[16],y=s.JY,S=s.Krt,w=s.Zrt,b=Object.assign({},v,2<=i?x:T);h&&(y.mvt=b.mvt,y.gvt=b.gvt,y.yvt=b.yvt,y.Svt=b.Svt,y.wvt=b.wvt,S.ZM=b.ZM,S.sv=b.sv,S.bvt=b.bvt,S.vvt=b.vvt,S.xvt=b.xvt,S.Ivt=b.Ivt,w.yTt=b.KM,w.STt=b.tv,w.dt=b.fk),r&&(y.Cvt=b.Cvt,y.Pvt=b.Pvt,S.qm=b.qm,S.Vm=b.Vm,S.BC=b.BC,w.wTt=b.Wm,w.bTt=b.$m,w.MTt=b.Rvt,w.vTt=b.Avt,w.TTt=b.Evt,w.xTt=b.Fvt,w.GTt=b.Dvt,w._Tt=b.kvt),n&&(y.ITt=b.Ovt,y.CTt=b.Lvt,y.Nvt=b.Nvt,S.N5=b.N5,S.Bvt=b.Bvt,S.Wvt=b.Wvt,S.Vvt=b.Vvt,S.jvt=b.jvt,S.Hvt=b.Hvt,w.PTt=b.GetAngle),o&&(y.TN=b.TN,y.Uvt=b.Uvt,S.MN=b.MN,S.yA=b.yA,S.Jvt=b.Jvt,w.Opacity=b.mA,w.RTt=b.wA),a&&(y.qvt=b.qvt,y.Xvt=b.Xvt,y.Yvt=b.Yvt,S.$vt=b.$vt,S.Kvt=b.Kvt,S.Zvt=b.Zvt,S.Qvt=b.Qvt,S.rv=b.rv,w.s2t=b.s2t,w.i2t=b.i2t,w.e2t=b.e2t,w.h2t=b.h2t,w.r2t=b.r2t),l&&(y.n2t=b.n2t,S.o2t=b.o2t,S.a2t=b.a2t),d&&(y.m2t=b.m2t,y.w6=b.w6,y.nX=b.nX,y.g2t=b.g2t,y.w2t=b.w2t,y.b2t=b.b2t,y.M2t=b.M2t,S.g6=b.g6,S.y6=b.y6,S.x2t=b.x2t,w.G2t=b.G2t,w._2t=b._2t,w.I2t=b.I2t),p&&(S.C2t=b.C2t,S.U6=b.U6,w.P2t=b.P2t,w.R2t=b.R2t),u&&(y.TN=b.TN,S.MN=b.A2t,S.ATt=b.rW,S.ETt=b.E2t,S.FTt=b.F2t),c&&(y.DTt=b.O2t,S.kTt=b.D2t,S.OTt=b.k2t),f&&(y.wc=b.B2t,S.LTt=b.L2t),m&&(y.l2t=b.l2t,y.d2t=b.d2t,y.p2t=b.p2t,s.NTt=M),e||(y.V2t=b.V2t,y.j2t=b.j2t,y.H2t=b.H2t,y.U2t=b.U2t,y.lV=b.lV,S.tTt=b.tTt,S.sTt=b.sTt,S.iTt=b.iTt,S.eTt=b.eTt,S.hTt=b.hTt,S.$2t=b.$2t,y.Z2t=b.Z2t,y.Q2t=b.Q2t,S.K2t=b.K2t,S.rTt||(S.rTt=b.rTt),w.lTt||(w.lTt=b.lTt),w.cTt=b.cTt,w.fTt=b.fTt,w.BTt=b.IB,w.WTt=b.GB,w.uTt=b.uTt,w.z2t=b.z2t,w.q2t=b.q2t,w.X2t=b.X2t,y.pmt=b.pmt,S.BB=b.BB,S.dTt=b.dTt),g&&(w.mTt=b.mTt)}}{const ta=self.Vs;ta.zpt=class extends ta.Mr{constructor(t){super(),this.tdt=t,this.Lf="",this.H3=-1,this.VTt="",this.jTt=!1,this.HTt=null,this.ldt=0,this.Lgt=[],this.mdt=null,this.UTt=new Map,this.zTt=null,this.JTt=null,this.qTt=-1,this.jSt=null,this.XTt=null,this.YTt=!1}Gr(){this.Lf="",this.H3=-1,this.VTt="",this.HTt=null,this.JTt=null,this.jSt=null,this.XTt=null,this.qTt=-1,ta.Kn(this.Lgt),this.mdt&&(this.mdt.clear(),this.mdt=null);for(const t of this.UTt.values())t.Gr();this.UTt.clear(),this.zTt=null}$M(){const t=this.tdt,s=t.PO().PJ(),i=t.j1t(),e=(this.HTt=i.YD(),this.ldt=i.Mdt()+1,t.Omt(this.HTt));e&&(this.JTt=e,this.jSt=e.rwt(),this.XTt=e.hwt().map(t=>t.xht()),e.lSt())&&(this.qTt=e.lwt());for(const r of s){const n=r.b5();n.k0t()&&!this.HTt.Fyt(r)||(this.Lgt.push(r),this.UTt.set(r,ta.Tr(ta.$Tt,n)))}const h=t.$D();this.mdt=0<h.size?h:null}KTt(t){this.Lf="timer",this.$M(),this.H3=this.tdt.PO().mk()+t}ZTt(t){this.Lf="walltimer",this.$M(),this.H3=this.tdt.PO().yk()+t}QTt(t){this.Lf="signal",this.$M(),this.VTt=t.toLowerCase()}pTt(t,s){this.Lf="instance-signals",this.$M(),this.VTt=s.toLowerCase(),this.zTt=new Set(t)}txt(t){this.Lf="promise",this.$M(),t.then(()=>this.umt()).catch(t=>{console.warn("[C3 runtime] Promise rejected in 'Wait for previous actions to complete': ",t),this.umt()})}sxt(){return"timer"===this.Lf}ixt(){return"walltimer"===this.Lf}amt(){return"signal"===this.Lf}gmt(){return"instance-signals"===this.Lf}Emt(){return"promise"===this.Lf}lmt(){return this.VTt}hxt(){return this.jTt}umt(){this.jTt=!0}ymt(t){this.zTt.delete(t),0===this.zTt.size&&this.umt()}Xpt(){return this.sxt()?this.H3<=this.tdt.PO().mk():this.ixt()?this.H3<=this.tdt.PO().yk():this.hxt()}rxt(t){t.gdt(this.HTt,this.ldt);for(const[i,e]of this.UTt.entries()){const h=i.b5();e.gdt(h)}this.mdt&&t.Ddt([...this.mdt]);const s=this.JTt;s&&(s.bSt(this.jSt),s.hwt().map((t,s)=>t.rrt(this.XTt[s])),s.lSt())&&s.uwt(this.qTt)}Ypt(t){this.rxt(t),this.HTt.uSt(t),this.JTt&&this.JTt.lSt()&&this.JTt.RSt(this.qTt),this.tdt.Wpt(this.Lgt),this.YTt=!0}async Qpt(t){this.rxt(t);for(const s of this.HTt.cSt(t))await this.tdt.PO().Tpt(s);this.JTt&&this.JTt.lSt()&&this.JTt.RSt(this.qTt),this.tdt.Wpt(this.Lgt),this.YTt=!0}$pt(){return this.YTt}R0t(t){for(const s of this.UTt.values())s.R0t(t);if("instance-signals"===this.Lf){for(const i of t)this.zTt.delete(i);0===this.zTt.size&&this.umt()}}iX(){const t={},s={wt:this.Lf,t:this.H3,st:this.VTt,s:this.jTt,ev:this.HTt.NJ(),sm:this.Lgt.map(t=>t.NJ()),dsm:this.mdt?[...this.mdt].map(t=>t.NJ()):null,sols:t};this.HTt.Kyt(this.ldt)&&(s.act=this.HTt.J1t(this.ldt).NJ());for(const[i,e]of this.UTt)t[i.NJ().toString()]=e.iX();return"instance-signals"===this.Lf&&(s.pi=[...this.zTt].map(t=>t.GB())),s}static Fmt(t,s){const i=t.PO(),e=t.spt(s.ev);if(!e)return null;let h=0;if(s.hasOwnProperty("act")){const n=t.ept(s.act);if(!n)return null;h=n.uD()}const r=ta.Tr(ta.zpt,t);r.H3=s.t,s.hasOwnProperty("wt")?r.Lf=s.wt:r.Lf=-1===r.H3?"signal":"timer",r.VTt=s.st,r.jTt=s.s,r.HTt=e,r.ldt=h;for(const o of s.sm){const a=i.m8(o);a&&r.Lgt.push(a)}if(Array.isArray(s.dsm))for(const l of s.dsm){const u=i.m8(l);u&&(r.mdt||(r.mdt=new Set),r.mdt.add(u))}for(const[c,f]of Object.entries(s.sols)){const d=parseInt(c,10),p=i.m8(d);if(p){const m=ta.Tr(ta.$Tt,null);m.eX(t,f),r.UTt.set(p,m)}}if("instance-signals"===r.Lf){r.zTt=new Set;for(const g of s.pi){const y=i.hO(g);y&&r.zTt.add(y)}}return r}}}{const sa=self.Vs;sa.$Tt=class extends sa.Mr{constructor(t){super(),this.T0t=null,this.nxt=!0,this.x7=[],t&&(this.T0t=t.fB(),this.nxt=t.k0t(),sa.ho(this.x7,t.H0t()))}Gr(){this.T0t=null,sa.Kn(this.x7)}gdt(t){t.j0t(this.nxt),sa.ho(t.H0t(),this.x7)}R0t(t){sa.uo(this.x7,t)}iX(){return{sa:this.nxt,insts:this.x7.map(t=>t.GB())}}eX(t,s){const i=t.PO();this.nxt=!!s.sa,sa.Kn(this.x7);for(const e of s.insts){const h=i.hO(e);h&&this.x7.push(h)}}}}{let l=function(t,s){let i=t.get(s);return i||(i=new Map,t.set(s,i)),i};l;const ia=self.Vs;ia.oxt=class extends ia.Mr{constructor(t){super(),this.Pf=t.runtime,this.Cr=t.name??"",this.axt=!!t.OL,this.lxt=!!t.uxt,this.cxt=!!t.jL,this.fxt=!!t.dxt,this.pxt=!!t.UL,this.mxt=!!t.gxt,this.yxt=!!t.$L,this.Sxt=!!t.WL,this.wxt=!!t.JL,this.bxt=t.Mxt,this.vxt=null,this.Txt=new Map,this.xxt=new Map,this.Gxt=new Map,this._xt=new Map,this.Ixt=t.Cxt,this.Pxt=null}Gr(){this.Pf=null}PO(){return this.Pf}Mf(){return this.Cr}Rxt(){}mmt(){return(2<=this.cMt()?this.Pxt:this).constructor}cMt(){return this.bxt}Axt(t=!1){let s=this.Ixt;return t&&"function"!=typeof s&&2<=this.cMt()?globalThis.LV:s}LL(){return this.axt}BL(){return this.lxt}VL(){return this.Sxt}qL(){return this.wxt}HL(){return this.cxt}GM(){return this.fxt}zL(){return this.pxt}YL(){return this.mxt}KL(){return this.yxt}Dwt(t,s){if(!s)throw new Error("missing 'this' binding");let i=this.Txt.get(t);return i||(i=t.bind(s),this.Txt.set(t,i)),i}oMt(t,s,i){if(!s)throw new Error("missing 'this' binding");let e=l(this.xxt,t),h=e.get(i);return h||(h=t.bind(s,i),e.set(i,h)),h}aMt(t,s,i,e){if(!s)throw new Error("missing 'this' binding");let h=l(this.Gxt,t),r=l(h,i),n=r.get(e);return n||(n=t.bind(s,i,e),r.set(e,n)),n}lMt(t,s,i,e,h){if(!s)throw new Error("missing 'this' binding");let r=l(this._xt,t),n=l(r,i),o=l(n,e),a=o.get(h);return a||(a=t.bind(s,i,e,h),o.set(h,a)),a}Ext(t){if(!this.LL())throw new Error("must be single-global plugin");this.vxt=t}h5(){if(this.LL())return this.vxt;throw new Error("must be single-global plugin")}n5(){if(this.LL())return this.vxt.n5();throw new Error("must be single-global plugin")}Fxt(){const t=this.cMt(),s=(ia.DL.Dxt(this,t),this.Axt(!0));if(s){if(this.Pxt=new s,!(this.Pxt instanceof self.AL))throw new TypeError("plugin class must derive from IPlugin")}else this.Pxt=new self.AL;ia.DL.kxt(t)}s5(){return this.Pxt}}}{const ea=self.Vs;ea.Oxt=class extends ea.oxt{constructor(t,s){super(t),this.Lxt=s,this.Nxt=0,this.Bxt=new Map,this.Wxt("elem-focused",t=>t.Vxt()),this.Wxt("elem-blurred",t=>{t&&t.jxt()})}Gr(){super.Gr()}Hxt(t){const s=this.Nxt++;return this.Bxt.set(s,t),s}Uxt(t){this.Bxt.delete(t)}Wxt(t,i){this.Pf.e4(this.Lxt,t,t=>{const s=this.Bxt.get(t.elementId);i(s,t)})}}}{const ha=self.Vs;ha.zxt=class extends ha.Mr{constructor(t){super(),this.T0t=t,this.Pf=t.PO(),this.Jxt=t.l5()}Gr(){this.T0t=null,this.Pf=null,this.Jxt=null}fB(){return this.T0t}PO(){return this.Pf}l5(){return this.Jxt}BW(){return this.T0t.BW()}Rxt(){}TMt(t){}avt(t){}lvt(t){}mY(t){}MY(){}SY(){}jY(t){}qxt(){}Axt(){return null}Xxt(t,s,i){const e=ha.Tr(ha.Event,t,s);e.Yxt=this,i&&Object.assign(e,i),this.fB().T$(e)}}}{const ra=self.Vs;ra.$xt=class extends ra.Mr{constructor(t,s){super(),this.Pi=t,this.Lxt=s,this.Kxt=null,this.Pf=t.PO(),this.T0t=this.Pi.fB(),this.Zxt=this.T0t.ovt(),this.oK=null,this.lK=null,this.u4=!1,this.f4=!1,this.W0=null,this.uC=!1}Gr(){this.uC=!0,this.Qxt(),this.tGt(),this.oK=null,this.lK=null,this.W0&&(this.W0.Gr(),this.W0=null),this.Pi=null,this.Pf=null,this.T0t=null,this.Zxt=null}_r(){return this.uC}RV(){return this.Pi}PO(){return this.Pf}fB(){return this.T0t}l5(){return this.Zxt.l5()}ovt(){return this.Zxt}sGt(){return this.Pi.rO()}QB(t){return this.Pf.QB(t,this.Pi,null)}iGt(t){return this.Pf.iGt(t,this.Pi,null)}s4(t){return this.Pf.s4(t,this.Pi,null)}eGt(t,s){return this.Pf.eGt(t,this.Pi,s)}hGt(t,s){return this.Pf.hGt(t,this.Pi,s)}rGt(t){return this.Pf.rGt(t)}nGt(t,s){this.Pf.e4(this.Lxt,t,s)}oGt(t){for(const[s,i]of t)this.nGt(s,i)}aGt(t,s){this.Pf.Ef(this.Lxt,t,s)}lGt(t,s){return this.Pf.SO(this.Lxt,t,s)}uGt(t,s){if(!this.Pf.ID())return window.c3_runtimeInterface._OnMessageFromRuntime({type:"event",component:this.Lxt,handler:t,data:s,responseId:null});this.aGt(t,s)}cGt(t){if(!t)throw new Error("cannot set empty component id");this.Kxt=t}fGt(){if(this.Kxt)return this.Pf.S4(this.Kxt);throw new Error("wrapper extension component id not set")}b4(t,s){if(!this.Kxt)throw new Error("wrapper extension component id not set");this.Pf.b4(this.Kxt,t,s)}dGt(t){for(const[s,i]of t)this.b4(s,i)}r8(t,s){if(!this.Kxt)throw new Error("wrapper extension component id not set");this.Pf.r8(this.Kxt,t,s)}n8(t,s){if(this.Kxt)return this.Pf.n8(this.Kxt,t,s);throw new Error("wrapper extension component id not set")}yZ(){}pGt(){}mGt(){if(!this.u4){if(!this.oK)if(this.Pf.a4()){const s=globalThis.C3Debugger,i=this.l5();this.oK=()=>{const t=performance.now();this.yZ(),s.AddIndividualPluginTickTime(i,performance.now()-t)}}else this.oK=()=>this.yZ();this.Pf.a0().addEventListener("tick",this.oK),this.u4=!0}}Qxt(){this.u4&&(this.Pf.a0().removeEventListener("tick",this.oK),this.u4=!1)}gGt(){return this.u4}yGt(){if(!this.f4){if(!this.lK)if(this.Pf.a4()){const s=globalThis.C3Debugger,i=this.l5();this.lK=()=>{const t=performance.now();this.pGt(),s.AddIndividualPluginTickTime(i,performance.now()-t)}}else this.lK=()=>this.pGt();this.Pf.a0().addEventListener("tick2",this.lK),this.f4=!0}}tGt(){this.f4&&(this.Pf.a0().removeEventListener("tick2",this.lK),this.f4=!1)}SGt(){return this.f4}wGt(){return[]}dv(){return null}pv(t){}knt(t){}Vnt(t,s){}Oot(t,s,i){if(0!==s){const e=this.knt(t);if("number"!=typeof e)throw new Error("expected number");this.Vnt(t,e+s,i)}}bGt(t,s,i,e){}MGt(t,...s){t.call(this,...s)}vGt(t,...s){return t.call(this,...s)}Axt(){return null}Xxt(t,s,i){if(this.Pi.TGt()){const e=this.sGt(),h=ra.Tr(ra.Event,t,s);h.fW=e,i&&Object.assign(h,i),e.dispatchEvent(h)}}GM(){return!1}}}{const na=self.Vs;na.xGt=class extends na.$xt{constructor(t,s){super(t,s),this._it=t.lO(),this.GGt=null,this._Gt=null}Gr(){if(this.GGt){const t=this.Pf.a0();t.removeEventListener("renderercontextlost",this.GGt),t.removeEventListener("renderercontextrestored",this._Gt),this.GGt=null,this._Gt=null}this._it=null,super.Gr()}IGt(){this.CGt()}PGt(){}RGt(){}CGt(){if(!this.GGt){this.GGt=()=>this.g7(),this._Gt=()=>this.AGt();const t=this.Pf.a0();t.addEventListener("renderercontextlost",this.GGt),t.addEventListener("renderercontextrestored",this._Gt)}}g7(){this.PGt()}AGt(){this.RGt()}lO(){return this._it}wet(){return!1}yet(){if(!this.wet())throw new Error("original size not known");const t=this.EGt();if(t)return t.Wm()}Met(){if(!this.wet())throw new Error("original size not known");const t=this.EGt();if(t)return t.$m()}EGt(){return null}FGt(){const t=this.EGt();if(t){const s=t.wT();if(s)return[s.Wm(),s.$m()]}return[100,100]}DGt(){const t=this.EGt();return t?t.gP():null}kGt(){const t=this.EGt();return t?t.OGt():null}LGt(){const t=this.EGt();return!!t&&t.NGt()}Tvt(t){const s=this.Pi.lO();return[s.KM(),s.tv(),s.L4()]}qxt(t,s,i){}BGt(t,s){}Dq(){return!0}}}{const oa=self.Vs,aa=oa.Tr(oa.Rect);oa.WGt=class extends oa.xGt{constructor(t,s){super(t,s),this.VGt=this.l5().Hxt(this),this.jGt=!0,this.HGt=!1,this.UGt=!1,this.zGt=-.2,this.JGt=oa.Tr(oa.Rect,0,0,-1,-1);const i=this.Pf.yL();this.qGt=i.Mj(),this.XGt=i.vj(),this.YGt=-1,this.$Gt=-1,this.KGt=!1,this.mGt()}Gr(){this.l5().Uxt(this.VGt),this.ZGt("destroy"),this.VGt=-1,super.Gr()}tW(){if(this.Pf.ID())throw new Error("not valid in worker mode");return this.QGt("get-element")}ZGt(t,s){(s=s||{}).elementId=this.VGt,this.aGt(t,s)}QGt(t,s){return(s=s||{}).elementId=this.VGt,this.uGt(t,s)}t_t(t,s){return(s=s||{}).elementId=this.VGt,this.lGt(t,s)}s_t(t){t=t||{};const s=this.lO();t.elementId=this.VGt,t.isVisible=s.TN(),t.htmlIndex=s.uO().Cj(),t.htmlZIndex=s.Pj(),Object.assign(t,this.i_t()),this.jGt=!!t.isVisible,this.uGt("create",t),this.e_t(!0)}A2t(t){this.jGt!==(t=!!t)&&(this.jGt=t,this.ZGt("set-visible",{isVisible:t}))}yZ(){this.e_t(!1)}h_t(){const t=this.Pf.yL().Dj();return"Android"===oa.mi.gi&&("scale-inner"===t||"scale-outer"===t||"crop"===t)}e_t(u){if(!this.RV().kj()){let t=this.lO(),s=t.uO(),i=t.B4(),[e,h]=s.eB(i.Wl(),i.Vl()),[r,n]=s.eB(i.jl(),i.Hl()),o=this.Pf.yL(),a=o.ML(),l=o.TL();if(t.TN()&&s.TN())if(!this.h_t()&&(r<=0||n<=0||a<=e||l<=h))this.A2t(!1);else{aa.set(e,h,r,n);const c=o.Mj(),f=o.vj(),d=s.Cj(),p=t.Pj();if(!u&&aa.equals(this.JGt)&&this.qGt===c&&this.XGt===f&&this.YGt===d&&this.$Gt===p)this.A2t(!0);else{this.JGt.I(aa),this.qGt=c,this.XGt=f,this.YGt=d,this.$Gt=p,this.A2t(!0);let t=null;this.UGt&&(t=s.Oj()+this.zGt),this.ZGt("update-position",{left:Math.round(this.JGt.Wl()),top:Math.round(this.JGt.Vl()),width:Math.round(this.JGt.width()),height:Math.round(this.JGt.height()),htmlIndex:d,htmlZIndex:p,fontSize:t})}}else this.A2t(!1)}}iW(){this.QGt("focus",{focus:!0})}eW(){this.QGt("focus",{focus:!1})}Vxt(){this.HGt=!0}jxt(){this.HGt=!1}O2t(){return this.HGt}rW(t,s){this.ZGt("set-css-style",{prop:oa.ta(t),val:s})}E2t(t,s){this.ZGt("set-attribute",{name:t,val:s})}F2t(t){this.ZGt("remove-attribute",{name:t})}r_t(){this.KGt||(this.KGt=!0,Promise.resolve().then(()=>{this.KGt=!1,this.ZGt("update-state",this.i_t())}))}i_t(){}n_t(){return this.VGt}}}{const la=self.Vs,ua=self.mW;la.o_t=class extends la.Mr{constructor(t){super(),this.Pf=t.runtime,this.Cr=t.name??"",this.a_t=la.Tr(la.Pc),this.l_t=la.Tr(la.Pc),this.bxt=t.Mxt,this.Ixt=t.Cxt,this.u_t=null}Gr(){this.l_t.Gr(),this.a_t.Gr(),this.Pf=null}PO(){return this.Pf}Mf(){return this.Cr}Rxt(){}cMt(){return this.bxt}Axt(t=!1){let s=this.Ixt;return t&&"function"!=typeof s&&2<=this.cMt()?globalThis.zj:s}c_t(t){this.a_t.Fc(t)}UK(){return this.a_t.Dc()}yJ(t){this.l_t.Fc(t)}bJ(t){this.l_t.Gc(t)}w5(){return this.l_t.Dc()}Fxt(){const t=this.cMt(),s=(la.DL.Dxt(this,t),this.Axt(!0));if(s){if(this.u_t=new s,!(this.u_t instanceof ua))throw new TypeError("behavior class must derive from IBehavior")}else this.u_t=new ua;la.DL.kxt(t)}oW(){return this.u_t}}}{const ca=self.Vs;ca.f_t=class extends ca.Mr{constructor(t){super(),this.Pf=t.PO(),this.Ywt=t,this.T0t=t.fB(),this.d_t=t.aW(),this.d_t.c_t(this.T0t)}Gr(){this.Pf=null,this.Ywt=null,this.T0t=null,this.d_t=null}Rxt(){}cW(){return this.Ywt}fB(){return this.T0t}PO(){return this.Pf}aW(){return this.d_t}}}{const fa=self.Vs;fa.p_t=class extends fa.Mr{constructor(t,s){super(),this.m_t=t,this.Lxt=s,this.Pi=t.dW(),this.Pf=t.PO(),this.Ywt=t.cW(),this.Zxt=this.Ywt.ovt(),this.u4=!1,this.f4=!1,this.e8=!1,this.W0=null}Gr(){this.Qxt(),this.tGt(),this.g_t(),this.W0&&(this.W0.Gr(),this.W0=null),this.m_t=null,this.Pi=null,this.Pf=null,this.Ywt=null,this.Zxt=null}aW(){return this.Ywt.aW()}y_t(){return this.m_t}dW(){return this.Pi}fB(){return this.Pi.fB()}lO(){return this.Pi.lO()}PO(){return this.Pf}cW(){return this.Ywt}ovt(){return this.Zxt}sGt(){return this.m_t.sGt()}QB(t){return this.Pf.QB(t,this.Pi,this.Ywt)}iGt(t){return this.Pf.iGt(t,this.Pi,this.Ywt)}s4(t){return this.Pf.s4(t,this.Pi,this.Ywt)}S_t(){}yZ(){}pGt(){}w_t(){}mGt(){this.u4||(this.Pf.Kj(this),this.u4=!0)}Qxt(){this.u4&&(this.Pf.Zj(this),this.u4=!1)}gGt(){return this.u4}yGt(){this.f4||(this.Pf.Qj(this),this.f4=!0)}tGt(){this.f4&&(this.Pf.t8(this),this.f4=!1)}SGt(){return this.f4}b_t(){this.e8||(this.Pf.s8(this),this.e8=!0)}g_t(){this.e8&&(this.Pf.i8(this),this.e8=!1)}M_t(){return this.e8}wGt(){return[]}nGt(t,s){this.Pf.e4(this.Lxt,t,s)}v_t(t,s){}dv(){return null}pv(t){}knt(t){}Vnt(t,s){}Oot(t,s){if(0!==s){const i=this.knt(t);if("number"!=typeof i)throw new Error("expected number");this.Vnt(t,i+s)}}bGt(t,s,i,e){}MGt(t,...s){t.call(this,...s)}vGt(t,...s){return t.call(this,...s)}Axt(){return null}Xxt(t,s,i){if(this.m_t.TGt()){const e=this.sGt(),h=fa.Tr(fa.Event,t,s);h.T_t=e,h.fW=e.fW,i&&Object.assign(h,i),e.dispatchEvent(h)}}}}{let s=function(t){if(t!==i)throw new Error("invalid internal API token")},r=(s,self.Vs),i=(r.XY={},r.qlt={},r.Hs()),e=[],h=[],n=[],o=null,a=null,t=null,l=null,u=new Map,c=new Map;r.DL=class extends r.Mr{constructor(t,s){super(),this.Pf=t,this.x_t=[],this.Rwt=null,this.G_t=[],this.__t=new Map,this.I_t=null,this.C_t=null,this.P_t=new Set(s)}R_t(t){const s=t[19],i=this.Pf.DSt(t[0]);if(!i)throw new Error("missing plugin");r.gTt(t,i,s);const e=2<=s?r.oxt:i,h=r.Tr(e,{runtime:this.Pf,OL:t[1],uxt:t[2],jL:t[5],UL:t[8],dxt:t[9],gxt:t[13],$L:t[14],WL:t[17],JL:t[18],Mxt:s,name:t[20],Cxt:2<=s?i:null});h.Rxt(),this.x_t.push(h),u.set(i,h)}A_t(){this.Rwt=r.Tr(r.XY.qY,{runtime:this.Pf,OL:!0}),this.Rwt.Rxt()}E_t(t){const i=t[1],e=t[2],h=this.Pf.DSt(t[0]);if(!h)throw new Error("missing behavior");this.__t.set(h,()=>{const t=2<=i?r.o_t:h,s=r.Tr(t,{runtime:this.Pf,name:e,Mxt:i,Cxt:2<=i?h:null});s.Rxt(),this.G_t.push(s),c.set(h,s),!this.I_t&&r.qlt.F_t&&s instanceof r.qlt.F_t?this.I_t=s:!this.C_t&&r.qlt.D_t&&s instanceof r.qlt.D_t&&(this.C_t=s),s.Fxt()})}k_t(t){const s=this.__t.get(t);s&&(s(),this.__t.delete(t))}static Dxt(t,s=1){if(r.DL.Dxt!==o)throw new Error("invalid method");1===s&&e.push(t),h.push(t)}static kxt(t=1){if(r.DL.kxt!==a)throw new Error("invalid method");1===t&&e.pop(),h.pop()}static gB(){if(r.DL.gB!==t)throw new Error("invalid method");if(0===e.length)throw new Error("no init object set");return e.at(-1)}static FL(t){if(r.DL.FL!==l)throw new Error("invalid method");if(s(t),0===h.length)throw new Error("no init object set");return h.at(-1)}static O_t(t){n.push(t)}static L_t(){n.pop()}static KB(){if(0===n.length)throw new Error("no init properties set");return n.at(-1)}N_t(){for(const t of this.x_t)t.Fxt()}static t5(t){return u.get(t)||null}static gW(t){return c.get(t)||null}UU(){return this.Rwt}B_t(){return this.I_t}W_t(){return this.C_t}S4(t){return this.P_t.has(t)}},o=r.DL.Dxt,a=r.DL.kxt,t=r.DL.gB,l=r.DL.FL}{const da=self.Vs,pa=new Set;da.V_t=class extends da.Mr{constructor(){super(),this.j_t=0,this.r7="",this.n7=0,this.H_t=0,this.U_t=0,this.Tg=0,this.xg=0,this.z_t=!1,this.J_t=!1,this.q_t=null,this.X_t="",this.hC=da.Tr(da.Rect),this.Y_t=da.Tr(da.gu),this.$_t="",this.K_t=new self.IO(this),pa.add(this)}Gr(){this.oC(),this.q_t&&0===this.q_t.w7()&&this.q_t.Gr(),this.q_t=null,pa.delete(this),this.Z_t()}static g7(){for(const t of pa)t.X_t="",t.hC.set(0,0,0,0),t.Y_t.Lu(t.hC)}Q_t(t){this.r7=t[0],this.n7=t[1],this.H_t=t[2],this.U_t=t[3],this.Tg=t[4],this.xg=t[5],this.z_t=t[6],this.J_t=!0}tIt(t,s){if(this.q_t)throw new Error("already loaded asset");this.r7=s;const i={};return da.Eo(s)&&(i.DU="remote"),this.CO(t,i),this.q_t.LU()}sIt(t,s){if(this.q_t)throw new Error("already loaded asset");this.r7="",this.n7=s.size,this.q_t=da.Tr(da.kU,t.pD(),{blob:s,size:this.n7,DU:"local"})}iIt(t){if(t===this)throw new Error("cannot replace with self");this.j_t++,this.oC(),this.r7=t.r7,this.n7=t.n7,this.H_t=t.H_t,this.U_t=t.U_t,this.Tg=t.Tg,this.xg=t.xg,this.z_t=t.z_t,this.J_t=t.J_t,this.q_t=t.q_t,this.X_t=t.X_t,this.hC=t.hC,this.Y_t=t.Y_t,this.Z_t()}OU(){return this.r7}Ic(){return this.n7}eIt(){return this.H_t}hIt(){return this.U_t}NGt(){return this.z_t}Wm(){return this.Tg}$m(){return this.xg}rIt(){return this.q_t.Wm()}nIt(){return this.q_t.$m()}CO(t,s){if(this.q_t)throw new Error("already got asset");s=Object.assign({},s,{url:this.OU(),size:this.Ic()}),this.q_t=t.FU(s)}u7(){return this.q_t&&this.q_t.u7()}async mH(t,s){if(!this.q_t)throw new Error("no asset");if(this.X_t)throw new Error("already loaded texture");const i=this.j_t,e=(this.X_t="loading",await this.q_t.mH(t,s));if(this.j_t!==i)return null;if(!e)return this.X_t="",null;this.X_t="loaded",this.J_t||(this.Tg=e.Wm(),this.xg=e.$m(),this.J_t=!0);const h=this.z_t?this.xg:this.Tg,r=this.z_t?this.Tg:this.xg;return this.hC.set(this.H_t,this.U_t,this.H_t+h,this.U_t+r),this.hC.Pt(e.Wm(),e.$m()),this.Y_t.Lu(this.hC),this.z_t&&this.Y_t.Hu(),e}oC(){this.X_t&&(this.q_t&&this.q_t.oC(),this.X_t="",this.hC.set(0,0,0,0),this.Y_t.Lu(this.hC))}wT(){return this.q_t&&"loaded"===this.X_t?this.q_t.wT():null}gP(){return this.hC}OGt(){return this.Y_t}$V(){return this.K_t}oIt(){return this.q_t}async aIt(t){t=t||await this.q_t.b7();const s=da.zo(this.Tg,this.xg),i=s.getContext("2d");return this.z_t?(i.rotate(Math.PI/-2),i.translate(-this.xg,0),i.drawImage(t,this.H_t,this.U_t,this.xg,this.Tg,0,0,this.xg,this.Tg)):i.drawImage(t,this.H_t,this.U_t,this.Tg,this.xg,0,0,this.Tg,this.xg),s}async lIt(t){if(!this.$_t){const s=await this.aIt(t),i=await da.Jo(s);this.$_t=URL.createObjectURL(i)}return this.$_t}Z_t(){this.$_t&&(URL.revokeObjectURL(this.$_t),this.$_t="")}}}{const ma=self.Vs;ma.uIt=class extends ma.Mr{constructor(t){super(),this.Cr=t[0],this.cIt=t[1],this.Wbt=!!t[2],this.fat=t[3],this.fIt=t[4],this.dIt=!!t[5],this.hz=t[6],this.pIt=t[7].map(t=>ma.Tr(ma.mIt,t)),this.gIt=new self.vW(this)}static yIt(t,s){const i=ma.Tr(ma.uIt,[s,0,!1,0,0,!1,Math.floor(1e15*Math.random()),[]]);return i.pIt.push(ma.mIt.yIt(t)),i}Gr(){for(const t of this.pIt)t.Gr();ma.Kn(this.pIt)}SIt(t){for(const s of this.pIt)s.BW().CO(t)}wIt(s,i){return Promise.all(this.pIt.map(t=>t.BW().mH(s,i)))}bIt(){for(const t of this.pIt)t.BW().oC()}Mf(){return this.Cr}NJ(){return this.hz}AW(){return this.pIt.length}FW(){return this.pIt}MIt(t){if((t=Math.floor(t))<0||t>=this.pIt.length)throw new RangeError("invalid frame");return this.pIt[t]}vIt(t,s){(s=Math.floor(s))<0?this.pIt.unshift(t):s>=this.pIt.length?this.pIt.push(t):this.pIt.splice(s,0,t)}TIt(t){if((t=Math.floor(t))<0||t>=this.pIt.length)throw new RangeError("invalid frame");this.pIt[t].Gr(),this.pIt.splice(t,1)}xIt(i){for(let t=0,s=this.pIt.length;t<s;++t)if(ma.Gh(this.pIt[t].hV(),i))return t;return-1}GIt(t){if("string"!=typeof t)return t;{const s=this.xIt(t);if(-1===s)throw new Error("cannot find animation frame with tag "+t);return s}}TW(){return this.cIt}xW(){return this.Wbt}GW(){return this.fat}IW(){return this.fIt}RW(){return this.dIt}_It(){return this.gIt}}}{const ga=self.Vs,ya=(()=>{const i=atob("iVBORw0KGgoAAAANSUhEUgAAAGQAAABkAQMAAABKLAcXAAAAAXNSR0IArs4c6QAAAANQTFRFAAAAp3o92gAAAAF0Uk5TAEDm2GYAAAATSURBVBgZYxgFo2AUjIJRQFcAAAV4AAHcRQIbAAAAAElFTkSuQmCC"),e=new Uint8Array(i.length);for(let t=0,s=i.length;t<s;++t)e[t]=i.charCodeAt(t);return new Blob([e],{type:"image/png"})})();ga.mIt=class extends ga.Mr{constructor(t){super(),this.IIt=ga.Tr(ga.V_t),this.IIt.Q_t(t),this.CIt=t[7],this.PIt=ga.Tr(ga.gl,t[8],t[9]),this.RIt=t[10].map(t=>ga.Tr(ga.AIt,this,t)),this.EIt=new Map;for(const i of this.RIt)this.EIt.set(i.Mf().toLowerCase(),i);this.FIt=null;const s=t[11];6<=s.length&&(this.FIt=ga.Tr(ga.$u,s)),this.Ey=t[12]||"",this.DIt=new self.NW(this)}static yIt(t){const s=ga.Tr(ga.mIt,["",0,0,0,100,100,!1,1,0,0,[],[],""]);return s.IIt.sIt(t,ya),s}Gr(){this.FIt&&(this.FIt.Gr(),this.FIt=null),this.IIt.Gr(),this.IIt=null}BW(){return this.IIt}WW(){return this.CIt}jW(){return this.PIt.Ml()}UW(){return this.PIt.Tl()}tV(){return this.FIt}ZW(t){return this.EIt.get(t.toLowerCase())||null}KW(t){return(t=Math.floor(t))<0||t>=this.RIt.length?null:this.RIt[t]}qW(){return this.RIt.length}hV(){return this.Ey}DW(){return this.DIt}}}{const Sa=self.Vs;Sa.AIt=class extends Sa.Mr{constructor(t,s){super(),this.kIt=t,this.Cr=s[0],this.OIt=Sa.Tr(Sa.gl,s[1],s[2])}Gr(){}Mf(){return this.Cr}KM(){return this.OIt.Ml()}tv(){return this.OIt.Tl()}LIt(){return this.OIt}}}{const g=self.Vs,wa=self.C3Debugger,ba=self.o5;g.qut=class extends g.Mr{constructor(s,t,i){super();const e=s.DSt(i[1]),[h,r]=(this.Pf=s,this.Jxt=g.DL.t5(e),this.Zxt=null,this.NIt=e.Instance,this.Ay=t,this.hz=i[11],this.Cr=i[0],this.ywt=this.Pf.Z1t(i[14]),this.BIt=!!i[9],this.WIt=!!i[2],this.VIt=!!i[10],this.jIt=i[3].map(t=>({sid:t[0],type:t[1],name:t[2],HIt:s.Z1t(t[3])})),this.UIt=i[4],this.zIt=i[5],this.lxt=this.Jxt.BL(),this.JIt=g.Tr(g.Event.a0),this.Wz=null,s.yD().eL());if(this.qIt=g.Tr(g.XIt,h,r),this.YIt=!0,this.$It=null,this.KIt=null,this.ZIt=-1,this.QIt=null,this.tCt=null,this.sCt=null,this.iCt=null,this.eCt=null,this.hCt=!1,this.rCt=null,this.nCt=i[8].map(t=>g.oCt.BT(this,t)),this.aCt=[],this.lCt=new Map,this.uCt=new Map,this.cCt=new Set,this.fCt=new Map,this.dCt=g.Tr(g.v0t,this),this.pCt=null,this.mCt=0,this.gCt=!1,this.rCt=null,this.IIt=null,this.yCt=null,this.SCt=null,this.wCt=null,this.bCt=0,this.zbt=new Map,this.Jbt=new Map,this.x7=[],this.MCt=new Map,this.vCt=!0,this.Jxt.zL()&&(this.Wz=g.Tr(g.Vz,this,i[12])),i[6]&&(this.IIt=g.Tr(g.V_t),this.IIt.Q_t(i[6])),i[7]){this.yCt=i[7].map(t=>g.Tr(g.uIt,t)),this.SCt=new Map,this.wCt=new Map;for(const a of this.yCt)this.SCt.set(a.Mf().toLowerCase(),a),this.wCt.set(a.NJ(),a)}this.WIt?(this.$It=[],this.KIt=new Set,this.ZIt=this.Pf.TCt()):(this.QIt=[],this.tCt=new Set,this.sCt=[],this.iCt=[],this.eCt=[]);const n=this.Jxt.cMt();if(n<2&&(this.Zxt=g.Tr(e.xCt,this,i[15]),!(this.Zxt instanceof g.zxt)))throw new Error("v1 sdk type must derive from SDKTypeBase");this.GCt=null,this._Ct=null,this.WX=g.Tr(g.Event.a0),g.DL.Dxt(this,n);let o;if(o=2<=n?(o=e.xCt)||globalThis.qV:this.Zxt.Axt()){if(this.GCt=new o(n<2?this:null),n<2&&!(this.GCt instanceof ba))throw new TypeError("script interface class must derive from IObjectClass");if(2<=n&&!(this.GCt instanceof globalThis.qV))throw new TypeError("script interface class must derive from ISDKObjectTypeBase")}else this.GCt=new ba;if(g.DL.kxt(n),i[13]){const l=i[13];if(l){const u=l[0],c=l[1],f=l[2];this.Zxt.qxt(u,c,f)}}this.Pf.ICt()&&!this.WIt&&!this.VIt&&this.lxt||this.Rxt(),this.Jxt.LL()&&(this.Jxt.Ext(this),this.CCt(i)),this.PCt=null}static BT(t,s,i){return g.Tr(g.qut,t,s,i)}Gr(){if(this.JIt.Gr(),this.JIt=null,this.IIt&&(this.IIt.Gr(),this.IIt=null),this.yCt){for(const t of this.yCt)t.Gr();g.Kn(this.yCt),this.SCt.clear(),this.wCt.clear()}this.PCt=null,this.dCt.Gr(),this.dCt=null,this.zbt.clear(),this.Jbt.clear(),this.rCt=null,this.Pf=null}RCt(i){for(let t=1,s=i.length;t<s;++t){const e=this.Pf.nJ(i[t]);this.$It.push(e),this.KIt.add(e),e.QIt.push(this),e.tCt.add(this)}}ACt(t){this.hCt=!0,this.rCt=t}TB(){return this.hCt}fY(){return this.rCt}ECt(){let t=0;if(!this.WIt)for(const s of this.QIt)for(const i of s.FCt()){const e=i.Mf().toLowerCase();this.lCt.set(e,i),this.uCt.set(e,t),this.aCt.push(i),++t}for(const h of this.FCt()){const r=h.Mf().toLowerCase();this.lCt.set(r,h),this.uCt.set(r,t),this.aCt.push(h),++t}for(const n of this.aCt)this.cCt.add(n.aW().constructor);if(!this.WIt&&this.QIt.length){let t=this.Pf.DCt(),s=(g.Qn(this.sCt,t,0),g.Qn(this.iCt,t,0),g.Qn(this.eCt,t,0),[]),i=0,e=0,h=0;for(const o of this.QIt){const a=o.qwt(),l=(this.sCt[a]=i,i+=o.kCt(),this.iCt[a]=e,e+=o.OCt(),this.eCt[a]=h,h+=o.LCt(),o.E5());if(l&&this.Wz)for(const u of l.F5())s.push(u.NCt(this.Wz))}this.Wz&&this.Wz.BCt(s)}}CCt(t){const s=this.Pf.WCt(),i=g.Tr(g.Instance,{runtime:this.Pf,cB:this,uid:s});i.VCt(t[16],[]),this.Pf.jCt(s,i),this.x7.push(i)}ovt(){return this.Zxt}HCt(){return this.VIt}a0(){return this.JIt}Rxt(){this.WIt||(this.Zxt?this.Zxt.Rxt():this.GCt.XV())}UCt(){return 0<this.bCt}async mY(t){this.WIt||(this.bCt++,1===this.bCt&&(this.Zxt?await this.Zxt.mY(t):await this.GCt.KV(this.Pf.yL().zCt())))}MY(){if(!this.WIt){if(this.bCt--,this.bCt<0)throw new Error("released textures too many times");0===this.bCt&&(this.Zxt?this.Zxt.MY():this.GCt.ZV(this.Pf.yL().zCt()))}}SY(){if(this.WIt)throw new Error("not applicable to family");this.Zxt?this.Zxt.SY():this.GCt.QV()}async jY(t){this.WIt||(this.Zxt?await this.Zxt.jY(t):await this.GCt.tj(this.Pf.yL().zCt()))}PO(){return this.Pf}l5(){return this.Jxt}JCt(){return this.NIt}Mf(){return this.Cr}Z1t(){return this.ywt}uD(){return this.Ay}NJ(){return this.hz}RJ(){return this.WIt}gJ(){return this.BIt}BL(){return this.lxt}qwt(){return this.ZIt}FCt(){return this.nCt}OCt(){return this.UIt}qCt(t){return t&&this.cCt.has(t)}kCt(){return this.jIt.length}XCt(){return this.jIt.map(t=>t.sid)}YCt(s){return this.jIt.findIndex(t=>t.sid===s)}Qit(s){return this.jIt.findIndex(t=>t.name===s)}$Ct(){return this.jIt.map(t=>t.name)}KCt(){return this.jIt.map(t=>t.HIt)}iet(t){if((t=Math.floor(t))<0||t>=this.jIt.length)throw new RangeError("invalid instance variable index");return this.jIt[t].type}tet(t){if((t=Math.floor(t))<0||t>=this.jIt.length)throw new RangeError("invalid instance variable index");return this.jIt[t].name}LCt(){return this.zIt}ZCt(){return this.aCt}Prt(t){return this.lCt.get(t.toLowerCase())||null}het(t){const s=this.uCt.get(t.toLowerCase());return void 0===s?-1:s}E5(){return this.Wz}zL(){return this.Jxt.zL()}QCt(){return this.Wz&&this.Wz.tPt()}Vpt(){return this.dCt}b5(){return this.dCt.b5()}BW(){return this.IIt}lJ(t){this.pCt=t}aJ(){return this.pCt}uJ(t){this.mCt=t}sPt(){return this.mCt}iPt(){return this.yCt}ePt(){return this.yCt.length}rpt(){return this.QIt}dvt(t){return this.tCt.has(t)}yyt(){return this.$It}AJ(t){return this.KIt.has(t)}Zwt(t){return this.iCt[t]}Jwt(t){return this.sCt[t]}swt(t){this.fCt.set(t.nwt().toLowerCase(),t)}iwt(t){return!!this.fwt(t)}fwt(t){const s=this.fCt.get(t.toLowerCase());return s&&s.wc()?s:null}hPt(){return this.yCt}rPt(t){if(this.yCt)return this.SCt.get(t.toLowerCase())||null;throw new Error("no animations")}nPt(t){if(this.yCt)return this.wCt.get(t)||null;throw new Error("no animations")}oPt(t){if(this.rPt(t))throw new Error(`animation name '${t}' already exists`);const s=g.uIt.yIt(this.PO(),t);return this.yCt.push(s),this.SCt.set(s.Mf().toLowerCase(),s),this.wCt.set(s.NJ(),s),s}aPt(t){const s=this.rPt(t);if(!s)throw new Error(`animation name '${t}' does not exist`);if(1===this.yCt.length)throw new Error("cannot remove last animation");const i=this.yCt.indexOf(s);this.yCt.splice(i,1),this.SCt.delete(s.Mf().toLowerCase()),this.wCt.delete(s.NJ()),s.Gr()}lPt(){if(this.yCt)return this.yCt[0];throw new Error("no animations")}uPt(){return this.lPt().MIt(0)}cPt(){if(this.yCt){const t=this.uPt().BW();return[t.Wm(),t.$m()]}return this.IIt?[this.IIt.Wm(),this.IIt.$m()]:[100,100]}n5(){if(this.Jxt.LL())return this.x7[0];throw new Error("not a single-global plugin")}w5(){return this.x7}*instances(){yield*this.x7}*S5(){yield*this.x7,yield*this.Pf.y2t(this)}v5(){return this.x7.length}yJ(t){this.x7.push(t)}fPt(){this.vCt=!0}QY(){if(this.vCt&&!this.WIt){let s=this.x7,i=0;for(let t=s.length;i<t;++i)s[i].dPt(i);const t=this.Pf.pPt();for(const e of t)e.fB()===this&&e.dPt(i++);this.vCt=!1}}mPt(t){const s=this.x7;if(t<s.length)return s[t];t-=s.length;const i=this.Pf.pPt();for(const e of i)if(e.fB()===this){if(0===t)return e;--t}return null}t2t(t){if(t&&t.TB()&&t.fB()!==this)for(const i of t.xB())if(i.fB()===this)return i;const s=this.b5().w5();return s.length?s[0]:null}y5(t){const s=this.b5().w5();return 0<s.length?s[t.IB()%s.length]:null}*T2t(t,s){let i=this.b5().w5(),e=i.length,h=s.b5(),r=s.b5().w5(),n=r.length,o=t.IB(),a=(!s.RJ()&&h.k0t()||(o=r.indexOf(t)),Math.ceil(e/n)),l=e%n,u=0,c;c=0==l||o<l?(u=o*a,a):(u=l*a+(o-l)*(a-1),a-1);for(let t=u,s=u+c;t<s;++t)yield i[t]}TMt(t){this.Zxt?.TMt(t)}GSt(){if(this.hCt&&!this.WIt){this.QY();const t=this.b5(),s=t.H0t(),i=t.k0t(),e=this.Pf.j1t(),h=e&&e.YD()&&e.YD().Z0t();for(const r of this.rCt.KY())if(r!==this){r.QY();const n=r.b5();if(n.j0t(i),!i){const o=n.H0t();g.Kn(o);for(const a of s)o.push(r.mPt(a.IB()));if(h){const l=t.U0t(),u=n.U0t();g.Kn(u);for(const c of l)u.push(r.mPt(c.IB()))}}}}}CMt(t,s){for(const i of this.fY().KY()){const e=i.b5();t?g.$n(e.U0t(),s):g.$n(e.H0t(),s)}}gPt(){return this.qIt}yPt(t){this.YIt=!!t}SPt(){if(this.YIt&&this.lxt){for(const t of this.x7)t.lO().wPt();for(const s of this.Pf.pPt())s.fB()===this&&s.lO().wPt();this.YIt=!1}}bPt(s,t,i){if(t){const e=this.MCt.get(t);e&&(e.delete(s),0===e.size)&&this.MCt.delete(t)}if(i){let t=this.MCt.get(i);t||(t=new Set,this.MCt.set(i,t)),t.add(s)}}MPt(){if(this.RJ()){const t=new Set;for(const s of this.$It)for(const i of s.MPt())t.add(i);return t.values()}return this.MCt.keys()}yMt(){return this.zbt||(this.zbt=new Map),this.zbt}SMt(){return this.Jbt||(this.Jbt=new Map),this.Jbt}vPt(){return this.qCt(g.qlt.F_t)}TPt(){return this.qCt(g.qlt.D_t)}xPt(){return this.qCt(g.qlt.NoSave)}pJ(){return this.qCt(g.qlt.GPt)}iX(){const t={instances:this.x7.map(t=>t.dv())};return this.zbt&&this.zbt.size&&(t.ex=g.Zo(this.zbt)),t}eX(t,e){this.zbt&&(this.zbt.clear(),this.zbt=null);const s=t.ex,h=(s&&(this.zbt=g.Qo(s)),this.x7),r=t.instances;for(let t=0,s=Math.min(h.length,r.length);t<s;++t)h[t].pv(r[t]);for(let t=r.length,s=h.length;t<s;++t)this.Pf.SB(h[t]);for(let i=h.length,t=r.length;i<t;++i){let t=r[i],s=null;if(!this.BL()||(s=this.Pf.Vk().sY(t.w.l))){const n=this.Pf.mJ(this.pCt||this,s,!1,0,0,!0);n.pv(t),e&&e.add(n)}}this.PCt=r,this.fPt()}_Pt(){return this.PCt}IPt(){this.PCt=null}CPt(){for(let t=0,s=this.x7;t<s;++t)this.x7[t].CPt()}e5(){return this.GCt}BD(){return this.WX}PPt(){return this._Ct}T5(t){this._Ct=t}T$(t){const s=this.Pf,i=s.a4()&&!s.HD().C5();i&&wa.StartMeasuringScriptTime(),this.WX.dispatchEvent(t),i&&wa.AddScriptTime()}}}{const Ma=self.Vs;Ma.RPt=class extends Ma.Mr{constructor(t,s){super(),this.Pf=t,this.APt=s;for(const i of this.APt)i.ACt(this)}Gr(){this.Pf=null}PO(){return this.Pf}cY(){return this.APt}KY(){return this.APt}s$(){return this.APt.some(t=>t.BL())}}}{let w=self.Vs,h=self.C3Debugger,n=w.DL,o=[],a=0,b=new WeakMap,e=new WeakMap;w.Instance=class extends w.Mr{constructor(t){if(w.DL!==n)throw new Error("invalid addon manager");super(),this.Pf=t.runtime,this.EPt=t.cB,this._it=null,this.FPt=null,this.DPt=null,this.kPt=0,this.OPt=t.uid,this.LPt=a++,this.EMt=0,this.NPt=null;const s=w.So(t.tags),i=(0<s.length&&(this.NPt=new Set(s)),this.BPt=o,this.WPt=o,this.EPt.ZCt()),e=(0<i.length&&(this.WPt=i.map((t,s)=>w.Tr(w.VPt,{runtime:this.Pf,lW:t,fW:this,index:s}))),this.jPt=this.EPt.TB()?[]:null,this.HPt=-1,this.JIt=null,this.l5());if(e.GM()&&(this.EMt|=4),e.BL())if(this._it=w.Tr(w.UPt,this,t.P4),t.zPt)this._it.JPt(t.zPt);else{this._it.qPt();const[h,r]=this.EPt.cPt();this._it.BC(h,r),this.fB().QCt()&&this._it.C4().XPt()}t.YPt?this.$Pt(t.YPt):this.KPt()}Gr(){if(this.DPt&&(this.DPt.yB(),this.DPt=null),0<this.WPt.length){for(const i of this.WPt)i.Gr();w.Kn(this.WPt)}this.FPt&&(this.FPt.Gr(),this.FPt=null);const t=b.get(this),s=(t&&(t.clear(),b.delete(this)),e.get(this));s&&(s.clear(),e.delete(this)),this.jPt&&w.Kn(this.jPt),this.JIt&&(this.JIt.Gr(),this.JIt=null),this.NPt&&this.NPt.clear(),this.NPt=null,this.Pf=null,this.EPt=null,0<this.BPt.length&&w.Kn(this.BPt),this._it&&(this._it.Gr(),this._it=null)}$Pt(t){0<t.length&&(this.BPt=[],w.ho(this.BPt,t))}KPt(){const s=this.EPt.kCt();if(0!==s){this.BPt=[];const i=[0,0,""];for(let t=0;t<s;++t)this.BPt.push(i[this.EPt.iet(t)])}}VCt(t,i){if(this.FPt)throw new Error("already got sdk instance");for(let t=0,s=this.WPt.length;t<s;++t){const e=this.WPt[t];e.VCt(i?i[t]:null)}const s=this.l5().cMt();if(s<2){if(this.FPt=w.Tr(this.EPt.JCt(),this,t),!(this.FPt instanceof w.$xt))throw new Error("sdk type must derive from SDKInstanceBase");!this.l5().BL()&&this.EPt.PPt()&&this.rO()}else{const h=this.l5().Axt();this.ZPt(h.Instance,t)}}sW(){return this.FPt??this.DPt}lO(){return this._it}PO(){return this.Pf}Sk(){return this.HPt}RB(){const t=this.HPt;return-1===t?this.PO().Sk():t}wk(t){((t=+t)<0||!isFinite(t))&&(t=0),this.HPt=t,this.fB().QCt()&&this.Pf.QPt(this,!0)}EB(){this.HPt=-1,this.fB().QCt()&&this.Pf.QPt(this,!1)}zq(){return this.Pf.tRt(this)}a0(){return this.JIt||(this.JIt=w.Tr(w.Event.a0)),this.JIt}Hv(t){this.FPt?this.FPt.Hv(t):this.DPt.oj(this.Pf.yL().zCt())}Rxt(t){this.FPt.Rxt(t)}sRt(){this.EMt|=2}iRt(){return 0!=(2&this.EMt)}eRt(){this.EMt|=1}kj(){return 0!=(1&this.EMt)}GM(){return 0!=(4&this.EMt)||this.FPt.GM()}hRt(){this.EMt|=32}Oq(){return 0!=(32&this.EMt)}rRt(){return 0!=(8&this.EMt)}nRt(t){t?this.EMt|=8:this.EMt&=-9}oRt(){return 0!=(16&this.EMt)}aRt(t){t?this.EMt|=16:this.EMt&=-17}lRt(){return 0!=(64&this.EMt)}uRt(t){t?this.EMt|=64:this.EMt&=-65}cRt(t,s){t<<=16,s?this.EMt|=t:this.EMt&=~t}fRt(t){return 0!=(this.EMt&t<<16)}EGt(){return this.FPt.EGt()}FGt(){return this.FPt.FGt()}DGt(){return this.FPt.DGt()}kGt(){return this.FPt.kGt()}LGt(){return this.FPt.LGt()}Tvt(t){return this.FPt.Tvt(t)}fB(){return this.EPt}Dq(){return this.FPt.Dq()}S2t(t){return t.RJ()?t.AJ(this.fB()):this.fB()===t}dRt(h,t,s){const i=(t,s)=>{const i=s||t.fB(),e=h.get(i);e?e.add(t):h.set(i,new Set([t]))};if(i(this,t),this.TB())for(const e of this.xB())i(e);if(s)for(const r of this.p6())i(r)}pRt(){if(!this.l5().YL())throw new Error("object does not support scene graph")}w6(){return null!==this.n6()}n6(){const t=this.lO();if(!t)return null;const s=t.n6();return s?s.RV():null}a6(){const t=this.lO();if(!t)return null;const s=t.a6();return s?s.RV():null}*l6(){const t=this.lO();if(t)for(const s of t.l6())yield s.RV()}mRt(t){if(t)for(const s of this.children())if(s===t)return!0;return!1}nX(){const t=this.lO();return!!t&&t.nX()}gRt(t){const s=this.lO();if(!s)return[];const i=t.Mf();return s.l$().map(t=>t.RV()).filter(t=>t.fB().Mf()===i)}l$(){const t=this.lO();return t?t.l$().map(t=>t.RV()):[]}*children(){const t=this.lO();if(t)for(const s of t.children())yield s.RV()}*p6(){const t=this.lO();if(t)for(const s of t.p6())yield s.RV()}c6(){const t=this.lO();return t?t.c6():0}yRt(){return[...this.l6()].length}v2t(){const t=this.lO();return t?t.v2t():0}d6(t){const s=this.lO();if(!s)return null;const i=s.d6(t);return i?i.RV():null}SRt(){const t=this.lO();if(!t)return NaN;const s=t.n6();return s?s.wRt(t):NaN}bRt(t){for(const s of this.lO().l$())if(s.RV().GB()===t)return!0;return!1}g6(t,s){this.pRt(),t.pRt(),this.lO().g6(t.lO(),s||{})}y6(t){const s=this.lO();s&&s.y6(t.lO())}N6(){const t=this.lO();return!!t&&t.N6()}NY(){const t=this.lO();if(t){const s=t.MRt();if(s)for(const i of s){const e=this.Pf.hO(i[2]);if(e){const h=i[3];this.g6(e,{M6:!!(h>>0&1),T6:!!(h>>1&1),G6:!!(h>>2&1),I6:!!(h>>3&1),P6:!!(h>>4&1),L6:!!(h>>5&1),A6:!!(h>>6&1),F6:!!(h>>7&1),k6:!!(h>>8&1)})}}}}BY(t,s){const i=t.get(this);if(i)for(const e of i.sceneGraphJson.children){const h=s.get(e.index);if(h){const r=e.flags;this.g6(h,{M6:!!(r>>0&1),T6:!!(r>>1&1),G6:!!(r>>2&1),I6:!!(r>>3&1),P6:!!(r>>4&1),L6:!!(r>>5&1),A6:!!(r>>6&1),F6:!!(r>>7&1),k6:!!(r>>8&1)})}}}PB(){const t=this.Pf.vRt();return t?t.Yut(this):""}TB(){return null!==this.jPt}ZY(t){this.jPt.push(t)}MB(){return this.jPt}TRt(t){return!!this.xRt(t)}xRt(t){const s=this.xB();if(null===s||0===s.length)return!1;for(const i of s)if(i.fB()===t)return i;return null}xB(){return this.jPt}Pgt(){for(const t of this.xB())t.fB().b5().z0t(t)}xMt(){for(const t of this.xB())t.fB().b5().W0t(t)}GMt(t){for(const s of this.xB())s.fB().b5().H0t()[t]=s}IMt(){for(const t of this.xB())t.fB().b5().V0t(t)}_Mt(t){for(const s of this.xB())s.fB().b5().U0t()[t]=s}l5(){return this.EPt.l5()}dPt(t){this.kPt=t}IB(){return this.EPt.QY(),this.kPt}GB(){return this.OPt}GRt(){return this.LPt}_Rt(t){t?this.LB(new Set(t)):this.NPt=null}LB(t){if(0===t.size)this.NPt=null;else{this.NPt?this.NPt.clear():this.NPt=new Set;for(const s of t)this.NPt.add(s)}}kB(){return this.NPt??new Set}J2t(){return Array.from(this.kB()).join(" ")}Y2t(t){t=Math.floor(t);for(const s of this.kB()){if(0===t)return s;--t}return""}Crt(){return this.WPt}IRt(t){if(t)for(const s of this.WPt)if(s.aW()instanceof t)return s;return null}Klt(t){if(!t)return null;const s=this.IRt(t);return s?s.sW():null}Irt(i){const e=this.WPt;for(let t=0,s=e.length;t<s;++t)if(e[t].cW().NJ()===i)return t;return-1}CRt(){return this.BPt}$Ct(){return this.EPt.$Ct()}PRt(){return this.BPt.length}Unt(t){const s=this.BPt;if((t|=0)<0||t>=s.length)throw new RangeError("invalid instance variable");return s[t]}Uwt(t){return this.BPt[t]}RRt(t){const s=this.BPt[t];return 0===this.EPt.iet(t)?!!s:s}znt(t,s){const i=this.BPt;if((t|=0)<0||t>=i.length)throw new RangeError("invalid instance variable");const e=this.EPt.iet(t);switch(e){case 0:i[t]=s?1:0;break;case 1:i[t]="number"==typeof s?s:parseFloat(s);break;case 2:i[t]="string"==typeof s?s:s.toString();break;default:throw new Error("unknown instance variable type")}}Lot(t,s){if(0!==s){const i=this.BPt;if((t|=0)<0||t>=i.length)throw new RangeError("invalid instance variable");const e=i[t];if("number"!=typeof e)throw"boolean"==typeof e?new Error("can not set offset of boolean variable"):"string"==typeof e?new Error("can not set offset of string variable"):new Error("unknown instance variable type");i[t]+="number"==typeof s?s:parseFloat(s)}}yMt(){let t=b.get(this);return t||(t=new Map,b.set(this,t)),t}SMt(){let t=e.get(this);return t||(t=new Map,e.set(this,t)),t}ARt(t){const s=this.fB();if(s.BD().d0(t))return!0;for(const i of s.rpt())if(i.BD().d0(t))return!0;return!!this.Pf.BD().d0(t)}I5(){const t=new Set,s=(t.add(this),this.lO());if(s&&s.nX())for(const i of this.p6())if(t.add(i),i.TB())for(const e of i.xB())t.add(e);if(this.TB())for(const h of this.xB())t.add(h);for(const r of t.values())r.WY();this.VY()}ERt(){this.EPt.PPt()&&this.rO();for(const t of this.WPt)t.S_t()}FRt(){this.ERt()}WY(){if(this.ERt(),this.ARt("instancecreate")){const t=this.fB(),s=new w.Event("instancecreate");s.fW=this.rO(),t.T$(s);for(const i of t.rpt())i.T$(s);this.Pf.T$(s)}this.Pf.QB(this.l5().mmt().JY.Z2t,this,null)}VY(){if(this.l5().YL()){if(this.T$(new w.Event("hierarchyready")),this.ARt("hierarchyready")){const t=this.fB(),s=new w.Event("hierarchyready");s.fW=this.rO(),t.T$(s);for(const i of t.rpt())i.T$(s);this.Pf.T$(s)}this.Pf.QB(this.l5().mmt().JY.m2t,this,null)}}DRt(){this.Pf.QB(this.l5().mmt().JY.Q2t,this,null)}kRt(t){if(this.DPt){const s=new w.Event("destroy");s.ORt=t,this.T$(s)}if(this.ARt("instancedestroy")){const i=this.fB(),e=new w.Event("instancedestroy");e.fW=this.rO(),e.ORt=t,i.T$(e);for(const h of i.rpt())h.T$(e);this.Pf.T$(e)}}LRt(){return this.FPt?this.FPt.wGt():this.DPt.d4()}dv(t="full",s=null){const i={},e=("full"===t?i.uid=this.GB():i.c3=!0,this.kB());if(0<e.size&&(i.tags=Array.from(e)),"visual-state"!==t){const r=b.get(this);if(r&&r.size&&(i.ex=w.Zo(r)),-1!==this.Sk()&&(i.mts=this.Sk()),0<this.EPt.kCt()){const n={},o=this.EPt.XCt();for(let t=0,s=this.BPt.length;t<s;++t)n[o[t].toString()]=this.BPt[t];i.ivs=n}if(this.WPt.length){const a={};for(const l of this.WPt){const u=l.dv(t);u&&(a[l.cW().NJ().toString()]=u)}i.behs=a}}this._it&&(i.w=this._it.iX(t,s));const h=this.FPt?this.FPt.dv():this.DPt.m4();return h&&(i.data=h),i}SK(t="full",s){this._it&&this._it.SK(t)}bK(t,s="full",i=null){this._it&&this._it.bK(t,s,i)}NRt(t,s="full",i=null){this._it&&this._it.NRt(t,s,i)}CPt(){this.l5().BL()&&this._it.CPt()}pv(s,t="full",i){if("full"===t)this.OPt=s.uid;else if(!s.c3)return;if(this._Rt(s.tags),"visual-state"!==t){let t=b.get(this);t&&(t.clear(),b.delete(this));const h=s.ex,r=(h&&(t=w.Qo(h),b.set(this,t)),this.HPt=s.hasOwnProperty("mts")?s.mts:-1,s.ivs);if(r)for(const[n,o]of Object.entries(r)){const a=parseInt(n,10),l=this.EPt.YCt(a);if(!(l<0||l>=this.BPt.length)){let t=o;null===t&&(t=NaN),this.BPt[l]=t}}}if(this.l5().BL()){const u=s.w;if(u){const c=u.l;if(this._it.uO().NJ()!==c){const f=this._it.uO(),d=f.zk().sY(c);d?(this._it.pO(d),f.bJ(this,!0),d.yJ(this,!0),d.mO(this),this._it.R4()):"full"===t&&this.Pf.SB(this)}this._it.eX(u,t)}}if("visual-state"!==t){const p=s.behs;if(p)for(const[m,g]of Object.entries(p)){const y=parseInt(m,10),S=this.Irt(y);S<0||S>=this.WPt.length||this.WPt[S].pv(g,t)}}const e=s.data;e&&(this.FPt?this.FPt.pv(e,t):this.DPt.g4(e))}rO(){return this.DPt||this.ZPt()}TGt(){return!!this.DPt}ZPt(t,s){const i=this._it?t?self.sj:self.Y6:t?self.VB:self.uB,e=t||this.FPt.Axt(),h=this.EPt.PPt(),r=h||e||i,n=this.l5().cMt();if(w.DL.Dxt(this,n),w.DL.O_t(s),this.DPt=new r,w.DL.L_t(),w.DL.kxt(n),e&&!(this.DPt instanceof i))throw new TypeError(`script interface class '${e.name}' does not extend the right base class '${i.name}'`);if(h){const o=e||i;if(!(this.DPt instanceof o))throw new TypeError(`setInstanceClass(): class '${h.name}' does not extend the right base class - check it extends the right class, e.g. globalThis.InstanceType.MyObjectName`)}return this.DPt}dB(t){if(0!==this.BPt.length){const i={},e=this.EPt.KCt();for(let t=0,s=e.length;t<s;++t)i[e[t]]={configurable:!1,enumerable:!0,get:w.Instance.prototype.RRt.bind(this,t),set:w.Instance.prototype.znt.bind(this,t)};const s=Object.create(Object.prototype,i);t.BRt={value:s,writable:!1}}}pB(t){const s=this.WPt;if(0!==s.length){const i={};for(const h of s)i[h.cW().Z1t()]={value:h.sGt(),writable:!1};const e=Object.create(Object.prototype,i);t.mgt={value:e,writable:!1}}}T$(t){if(this.TGt()){const s=this.rO(),i=(t.fW=s,this.Pf),e=i.a4()&&!i.HD().C5();e&&h.StartMeasuringScriptTime(),s.dispatchEvent(t),e&&h.AddScriptTime()}}}}{const va=self.Vs;va.c$=class extends va.Mr{constructor(e){super(),this.vv=e,this.kgt=null,this.WRt=[],this.VRt=e.Wm(),this.jRt=e.$m(),this.HRt=1,this.URt=1,this.zRt=0,this.JRt=1,this.qRt=e.mA(),this.XRt=null,this.YRt=null,this.$Rt=NaN,this.KRt=!1,this.uX=NaN,this.cX=NaN,this.ZRt=t=>{if(t.fW===this.kgt.RV()){const s=e.PO(),i=(s.a0().removeEventListener("instancecreate",this.ZRt),this.kgt.RV().sW());this.KRt=!!i.wet(),this.uX=this.KRt?i.yet():NaN,this.cX=this.KRt?i.Met():NaN}}}Gr(){this.kgt=null,this.XRt=null,this.YRt=null,this.$Rt=NaN,this.KRt=!1,this.uX=NaN,this.cX=NaN,va.Kn(this.WRt)}QRt(t){if(this.JRt=this.vv.mA(),this.qRt=this.JRt,this.kgt=t,this.zRt=t?t.GetAngle():0,this.kgt){const s=this.vv,i=s.PO(),e=this.kgt.RV().l5().cMt();if(e<2){const h=this.kgt.RV().sW();h?(this.KRt=!!h.wet(),this.uX=this.KRt?h.yet():NaN,this.cX=this.KRt?h.Met():NaN):this.kgt.RV().kj()||i.a0().addEventListener("instancecreate",this.ZRt)}else this.KRt=!1,this.uX=NaN,this.cX=NaN}else this.KRt=!1,this.uX=NaN,this.cX=NaN}n6(){return this.kgt}nX(){return 0<this.WRt.length}l$(){return this.WRt}tAt(){this.nX()&&1!==this.WRt.length&&(this.YRt?this.WRt.sort((t,s)=>{const i=this.YRt.get(t.RV()),e=this.YRt.get(s.RV());return va.we(i)&&va.we(e)?i-e:0}):this.WRt.sort((t,s)=>{const i=t.sot().sAt(),e=s.sot().sAt();return va.we(i)&&va.we(e)?i-e:0}))}sAt(){return this.$Rt}iot(){return this.HRt}iAt(t){this.HRt=t}hot(){return this.URt}eAt(t){this.URt=t}dot(){return this.qRt}zvt(){return this.JRt}hAt(t){this.JRt=t}tot(){return 0===this.VRt?Number.EPSILON:this.VRt}eot(){return 0===this.jRt?Number.EPSILON:this.jRt}rAt(){if(this.vv._6()){let t=this.kgt,s=t.Wm(),i=t.sot().tot();return 0===s&&(s=Number.EPSILON),i===Number.EPSILON&&s===Number.EPSILON?1:i===Number.EPSILON&&s!==Number.EPSILON&&this.KRt?1+s/this.uX:s/i}return 1}nAt(){if(this.vv.C6()){let t=this.kgt,s=t.$m(),i=t.sot().eot();return 0===s&&(s=Number.EPSILON),i===Number.EPSILON&&s===Number.EPSILON?1:i===Number.EPSILON&&s!==Number.EPSILON&&this.KRt?1+s/this.cX:s/i}return 1}oAt(){return 0}aAt(){return{sw:this.VRt,sh:this.jRt,sx:this.HRt,sy:this.URt,psa:this.zRt,oo:this.JRt,so:this.qRt,pi:this.vv.RV().SRt()}}iX(t,s=null){const i=this.aAt();return s&&s.selfOnly?Object.assign(i,{p:null,c:[]}):Object.assign(i,{p:this.lAt(t),c:this.uAt(t)})}cAt(t){let s="";return t.v6()&&(s+="x"),t.x6()&&(s+="y"),t._6()&&(s+="w"),t.C6()&&(s+="h"),t.R6()&&(s+="a"),t.E6()&&(s+="z"),t.N6()&&(s+="d"),t.D6()&&(s+="o"),t.O6()&&(s+="v"),s}lAt(t){return this.kgt&&this.kgt.RV()&&!this.kgt.RV().kj()?this.fAt(this.kgt,this.vv,t):null}uAt(s){return this.WRt.map(t=>this.fAt(t,t,s)).filter(t=>t)}fAt(t,s,i){const e=t.RV();if(e&&e.kj())return null;const h={};return h.uid=e.GB(),h.f=this.cAt(s),h.offsets=s.dAt(),h.data=va.c$.pAt(e),h.oci=e.fB().uD(),"state"===i?(h.inst=e.dv("full",{selfOnly:!0}),h.instIndex=NaN):(h.instIndex=e.fB().w5().indexOf(e),h.inst=null),h}eX(t){this.VRt=t.sw,this.jRt=t.sh,this.HRt=t.sx,this.URt=t.sy,this.zRt=t.psa,this.JRt=t.oo,this.qRt=t.so,this.$Rt=va.we(t.pi)?t.pi:NaN}mAt(t,s){if(!t&&!s&&this.XRt)for(const i of this.XRt)i.kj()||i.w6()||i.PO().SB(i);this.XRt=t,this.YRt=s}bK(t,s){const i=this.vv,e=i.PO(),h=new Set;if(t.p&&!this.kgt){const o=t.p.uid,a=e.hO(o);if(s?.aTt,a){const l=a.lO();if(a.mRt(i.RV()))this.kgt=l;else{a.bRt(i.RV().GB())?e.SB(i.RV()):a.g6(i.RV(),this.gAt(t.p.f)),h.has(i)||(i.yAt(t.p.offsets),this.SAt(a,t.p,s)),h.add(i);const u=a.lO();u.sot().tAt()}}else if(va.we(t.p.oci)){const c=e.nJ(t.p.oci),f=(e.UU(),e.x5(c,i.uO(),0,0,!0));if(s?.aTt,f){const d=this.wAt(t.p,e),p=(d&&f.pv(d),f.lO()),m=(p.uO().G5(f),f.g6(i.RV(),this.gAt(t.p.f)),f.lO());m.sot().tAt()}}}const r=[];for(const g of t.c){const y=g.uid,S=e.hO(y);S&&r.push(S)}let n=0;for(const w of t.c){const b=w.uid,M=e.hO(b);if(s?.aTt,M){if(this.XRt){if(this.XRt.includes(M)){const G=M;if(G.fB()!==M.fB()){n++;continue}if(G.kj()){n++;continue}const _=t.c[n];if(!s?.aTt&&this.bAt(G,r,i)){this.MAt(n,_,i,h,s),n++;continue}if(G.w6()&&G.n6()!==i.RV()){const I=this.vAt(_,s);this.TAt(I,_,h,s),n++;continue}this.TAt(G.lO(),_,h,s,!0),n++;continue}if(this.XRt[n]){const C=this.XRt[n];if(C.fB()!==M.fB()){n++;continue}if(C.kj()){n++;continue}const P=t.c[n];if(!s?.aTt&&this.bAt(C,r,i)){this.MAt(n,P,i,h,s),n++;continue}if(C.w6()&&C.n6()!==i.RV()){const R=this.vAt(P,s);this.TAt(R,P,h,s),n++;continue}this.TAt(C.lO(),P,h,s,!0),n++;continue}}const v=M.fB(),T=this.xAt(r,v),x=i.RV().gRt(v).length;if(T===x){const A=i.RV().d6(n);if(A){const E=A.lO();E&&(h.has(E)||(E.yAt(w.offsets),this.SAt(A,w,s)),h.add(E))}n++;continue}if(M.w6()&&M.n6()!==i.RV()){const F=this.vAt(w,s);this.TAt(F,w,h,s),n++;continue}this.TAt(M.lO(),w,h,s)}else if(this.XRt&&this.XRt[n]){const D=this.XRt[n],O=e.nJ(this.GAt(w));if(D.fB()!==O){n++;continue}if(D.kj()){n++;continue}const k=t.c[n];if(!s?.aTt&&this.bAt(D,r,i)){this.MAt(n,k,i,h,s),n++;continue}if(D.w6()&&D.n6()!==i.RV()){const L=this.vAt(k,s);this.TAt(L,k,h,s),n++;continue}this.TAt(D.lO(),k,h,s)}else{const N=this.vAt(w,s);this.TAt(N,w,h,s)}n++}}bAt(t,s,i){const e=t.fB(),h=this.xAt(s,e),r=i.RV().gRt(e).length;return h===r}MAt(t,s,i,e,h){const r=i.RV().d6(t,s);if(r){const n=r.lO();n&&(e.has(n)||(n.yAt(s.offsets),this.SAt(r,s,h)),e.add(n))}}gAt(t){const s={};return s.M6=t.includes("x"),s.T6=t.includes("y"),s.G6=t.includes("w"),s.I6=t.includes("h"),s.P6=t.includes("a"),s.A6=t.includes("z"),s.L6=t.includes("d"),s.F6=t.includes("o"),s.k6=t.includes("v"),s}GAt(t){return va.we(t.oci)?t.oci:t[1]}vAt(e,h){if(va.we(e.oci)){let t=this.vv,s=t.PO(),i;if(e.data)i=s.mJ(e.data,t.uO(),!1,0,0,!1,!0);else{const r=s.nJ(e.oci);i=s.x5(r,t.uO(),0,0,!0)}if(h?.aTt,i){const n=this.wAt(e,s),o=(n&&i.pv(n),i.lO());return o.uO().G5(i,!0),o}}}TAt(t,s,i,e,h=!0){const r=this.vv,n=r.g6(t,this.gAt(s.f));n&&h&&(i.has(t)||(t.yAt(s.offsets),this.SAt(t.RV(),s,e)),i.add(t)),this.tAt()}SAt(t,s,i){let e=this.wAt(s,this.vv.PO());e&&((e=JSON.parse(JSON.stringify(e))).w=null,t.pv(e))}xAt(t,s){return t.filter(t=>t.fB().Mf()===s.Mf()).length}wAt(t,s){if(va.we(t.instIndex)){const i=s.nJ(t.oci),e=i._Pt();return e?e[t.instIndex]:null}return va.Pe(t.inst)?JSON.parse(t.inst):t.inst||void 0}static pAt(t){let s=t.lO().uO().cJ(t.GB());if(!s)return null;s=JSON.parse(JSON.stringify(s));const i=[];for(const e of[...t.l$()]){const h=e.lO();i.push([h.zk().NJ(),h.uO().uD(),e.GB(),va.c$.u$(h),e.fB().TB()?1:0,h.cO(),va.c$.pAt(e)])}return va.Ue(s[0][14])?s[0][14][1]=i:(s[0][14]=[],s[0][14][0]=va.c$._At(),s[0][14][1]=i,s[0][14][2]=t.lO().cO()),s}static u$(t){let s=0;return(s|=Number(t.O6())<<8)|Number(t.D6())<<7|Number(t.E6())<<6|Number(t.N6())<<5|Number(t.R6())<<4|Number(t.C6())<<3|Number(t._6())<<2|Number(t.x6())<<1|Number(t.v6())<<0}static _At(t){let s=0;return s,511}}}{let d=self.Vs,t=self.xs,r=(t.Es,d.Tr(d.Rect)),n=d.Tr(d.gu),s=d.Tr(d.Event,"bboxchange",!1),f=d.Tr(d.na,0,0,0,0),u=d.Tr(d.$u),i=d.Tr(d.na,1,1,1,1),o=d.Tr(d.Rect,0,0,-1,-1),h=d.Tr(d.Rect,0,0,-1,-1),p=new Set(["absolute","relative"]),e=[],m=!0,g=new WeakMap,a=new WeakMap;d.UPt=class extends d.Mr{constructor(t,s){super(),this.Pi=t,this.T0t=t.fB(),this.Pf=t.PO(),this.IAt=s,this.T0t.bPt(this,null,s),this.CAt=-1,this.PAt=-1,this.EMt=196635,this.T0t.l5().HL()&&(this.EMt|=128),this.yl=NaN,this.Sl=NaN,this.NM=NaN,this.RAt=NaN,this.AAt=NaN,this.tT=NaN,this.ua=NaN,this.EAt=NaN,this.FAt=NaN,this.DAt=NaN,this.kAt=NaN,this.OAt=d.Tr(d.Rect),this.LAt=d.Tr(d.gu),this.NAt=h,this.BAt=o,this.WAt=null,this.VAt=null,this.jAt=null,this.LM=i,this.HAt=i,this.UAt=null,this.zAt=null,this.Pi.fB().QCt()&&(this.zAt=d.Tr(d.JAt,this.Pi,this)),this.qAt=null,this.XRt=null,this.YRt=null,this.XAt=-1,this.YAt=null}eRt(){this.EMt|=256}Gr(){if(this.T0t.bPt(this,this.IAt,null),this.UAt&&(this.Pf.bM().Ow(this.UAt),this.UAt=null),this.WAt=null,this.VAt&&(this.VAt.$At.Gr(),this.VAt=null),this.jAt&&(this.jAt.clear(),this.jAt=null),this.j6(),this.zAt&&this.zAt.Gr(),this.w6()&&this.n6().y6(this),this.nX()){const t=[...this.l$()];for(const s of t)this.y6(s)}this.KAt(),this.ZAt(),g.delete(this),a.delete(this),this.Pi=null,this.T0t=null,this.Pf=null,this.IAt=null}JPt(t){if(m=!1,this.A4(t[0],t[1]),this.rv(t[2]),this.BC(t[3],t[4]),this.tT=0,this.HL()?this.N5(t[6]):this.ua=0,f.nl(t[7]),this.QAt(f),this.mot(t[8]),this.yot(t[9]),this.WM(t[10]),this.zAt&&this.zAt.tEt(t[12]),t[14]&&g.set(this,{sEt:t[14][1],iEt:t[14][2]}),t[15]){const s=t[15],e=(this.W6(s[0],s[1]),this.q6()),h=s[2];for(let i=0,t=h.length;i<t;++i){const r=h[i];for(let t=0,s=r.length;t<s;++t){const n=r[t],o=e.Vv(t,i);o.ZM(n[0]),o.sv(n[1]),o.rv(n[2]),o.ov(n[3]),o.lv(n[4])}}}if(t[16]){const i=t[16][0],a=t[16][1],l=!!a,u=!l,c=this.Pf.vRt();l&&c&&c.Xut(this.RV(),a),u&&c&&c.Xut(this.RV(),i)}m=!0,this.eEt()}qPt(){this.yl=0,this.Sl=0,this.NM=0,this.RAt=0,this.AAt=0,this.tT=0,this.ua=0,this.EAt=0,this.FAt=1,this.DAt=0,this.kAt=0,this.eEt()}PO(){return this.Pf}fB(){return this.T0t}RV(){return this.Pi}hEt(){return this.R6()?this.rEt(this.n6().nEt()-this.qAt.oAt()):0}ZM(t){if(t=+t,this.v6()){const s=this.qAt,i=t-this.KM(),e=-this.hEt();0==e?this.yl+=i/s.rAt():(this.yl+=Math.cos(e)*i/s.rAt(),this.x6()&&(this.Sl+=Math.sin(e)*i/s.nAt()))}else this.yl=t}$nt(t,s=!1){t=+t,!s&&this.v6()?this.ZM(this.KM()+t):this.yl+=t}KM(){if(this.v6()){let t=this.yl,s=this.qAt,i=this.n6(),e=this.hEt();return 0===e?t*=s.rAt():(t=t*s.rAt()*Math.cos(e),this.x6()&&(t-=this.Sl*s.nAt()*Math.sin(e))),i.KM()+t}return this.yl}sv(t){if(t=+t,this.x6()){const s=this.qAt,i=t-this.tv(),e=-this.hEt();0==e?this.Sl+=i/s.nAt():(this.v6()&&(this.yl-=Math.sin(e)*i/s.rAt()),this.Sl+=Math.cos(e)*i/s.nAt())}else this.Sl=t}Knt(t,s=!1){t=+t,!s&&this.x6()?this.sv(this.tv()+t):this.Sl+=t}tv(){if(this.x6()){let t=this.Sl,s=this.qAt,i=this.n6(),e=this.hEt();return 0===e?t*=s.nAt():(t=t*s.nAt()*Math.cos(e),this.v6()&&(t+=this.yl*s.rAt()*Math.sin(e))),i.tv()+t}return this.Sl}A4(t,s){if(t=+t,s=+s,this.oEt()){const i=this.v6(),e=this.x6(),h=this.qAt,r=t-this.KM(),n=s-this.tv(),o=-this.hEt();if(0==o)i?this.yl+=r/h.rAt():this.yl=t,e?this.Sl+=n/h.nAt():this.Sl=s;else{const a=Math.sin(o),l=Math.cos(o);i?this.yl+=e?(l*r-a*n)/h.rAt():l*r/h.rAt():this.yl=t,e?this.Sl+=i?(a*r+l*n)/h.nAt():l*n/h.nAt():this.Sl=s}}else this.yl=t,this.Sl=s}aEt(){return[this.KM(),this.tv()]}D4(t,s){t=+t,s=+s,this.oEt()?this.A4(this.KM()+t,this.tv()+s):(this.yl+=t,this.Sl+=s)}Mvt(t,s){return this.KM()===t&&this.tv()===s}rv(t){if(t=+t,this.E6()&&(t-=this.n6().hv()),this.NM!==t){this.NM=t,this.lEt();const s=this.uO();0!==this.NM&&s.TJ(),s.mO(this)}}lEt(){if(this.eEt(),this.nX()){const i=this.l$();for(let t=0,s=i.length;t<s;t++){const e=i[t];e.E6()&&e.lEt()}}}Sot(t){this.rv(this.hv()+t)}hv(){return this.E6()?this.n6().hv()+this.NM:this.NM}L4(){return this.uO().hv()+this.hv()}wet(){const t=this.RV().l5().cMt();return t<2&&this.RV().sW().wet()}qm(t){if(t=+t,this._6()){const s=this.Wm();0===s?this.RAt=Number.EPSILON:this.RAt*=t/s}else this.RAt=t;this.uEt()}wg(t,s){t=+t,!s&&this._6()?this.qm(this.Wm()+t):this.RAt+=t,this.uEt()}Wm(){if(this._6()){const t=this.n6(),s=t.Wm(),i=t.sot().tot();return i===Number.EPSILON?(this.sot().tot()+s)*this.RAt:s*this.RAt}return this.RAt}Vm(t){if(t=+t,this.C6()){const s=this.$m();0===s?this.AAt=Number.EPSILON:this.AAt*=t/s}else this.AAt=t;this.uEt()}rot(t,s){t=+t,!s&&this.C6()?this.Vm(this.$m()+t):this.AAt+=t,this.uEt()}$m(){if(this.C6()){const t=this.n6(),s=t.$m(),i=t.sot().eot();return i===Number.EPSILON?(this.sot().eot()+s)*this.AAt:s*this.AAt}return this.AAt}BC(t,s){if(t=+t,s=+s,this._6()){const i=this.Wm();0===i?this.RAt=Number.EPSILON:this.RAt*=t/i}else this.RAt=t;if(this.C6()){const e=this.$m();0===e?this.AAt=Number.EPSILON:this.AAt*=s/e}else this.AAt=s;this.uEt()}Ic(){return[this.Wm(),this.$m()]}kq(){return this.tT}cEt(t){if(t<0)throw new RangeError("invalid depth");this.tT=t}fEt(){if(this.w6()){const t=this.qAt;return Math.min(t.rAt(),t.nAt())}return 1}HL(){return 0!=(128&this.EMt)}N5(t){t=+t,this.HL()&&(this.R6()&&(t-=this.n6().GetAngle()),t=d.Ar(t),this.ua!==t)&&(this.ua=t,this.uEt())}not(t){0!=(t=+t)&&this.HL()&&(this.ua=d.Ar(this.ua+t),this.uEt())}uEt(){if(this.EMt|=1<<18,this.nX()){const i=this.l$();for(let t=0,s=i.length;t<s;t++)i[t].uEt()}}GetAngle(){return this.R6()&&this.HL()?this.rEt(d.Ar(this.n6().nEt()+this.ua)):this.ua}nEt(){return this.R6()&&this.HL()?d.Ar(this.n6().nEt()+this.ua):this.ua}rEt(t){return this._6()&&this.a6().Wm()<0&&(t=d.Ar(d.zr(t,this.a6().GetAngle()+Math.PI))),this.C6()&&this.a6().$m()<0?d.zr(t,this.a6().GetAngle()):t}dEt(){const t=this.n6();return!!(this._6()&&t.Wm()<0)||!!(this.C6()&&t.$m()<0)}pEt(){const t=this.n6();return!!(this._6()&&t.Wm()<0&&this.C6()&&t.$m()<0)}mEt(){const t=this.EMt;if(0!=(t&1<<18)){const s=this.GetAngle();this.EAt=Math.sin(s),this.FAt=Math.cos(s),this.EMt=-262145&t}}_vt(){return this.mEt(),this.EAt}Gvt(){return this.mEt(),this.FAt}mot(t){this.DAt=+t}pot(t){this.DAt+=+t}jW(){return this.DAt}yot(t){this.kAt=+t}got(t){this.kAt+=+t}UW(){return this.kAt}QAt(t){this.LM.equals(t)||(this.LM===i?(this.LM=d.Tr(d.na,t),this.HAt=d.Tr(d.na,t),this.HAt.Na()):t.Da(1,1,1,1)?(this.LM=i,this.HAt=i):(this.LM.set(t),this.HAt.set(t),this.HAt.Na()),this.eEt())}yA(t){if(t=d.Rr(+t,0,1),this.D6()){if(this.sot().zvt()===t)return;this.sot().hAt(t),t=this.mA()}else if(this.LM.a===t)return;this.gEt(t)}yEt(){if(this.nX()){const i=this.l$();for(let t=0,s=i.length;t<s;t++){const e=i[t];e.gEt(e.mA())}}}gEt(t){f.xa(this.LM),f.a=t,this.QAt(f),this.yEt()}lot(t){this.D6()?this.yA(this.sot().zvt()+t):this.yA(this.mA()+t)}mA(){return this.D6()?this.n6().mA()*this.sot().zvt():this.LM.a}J4(t){this.LM.Ea(t)||(f.xa(t),f.a=this.mA(),this.QAt(f))}jnt(t,s,i){f.fa(t,s,i),this.J4(f)}SEt(t,s,i){0===t&&0===s&&0===i||(f.xa(this.LM),f.r+=t,f.g+=s,f.b+=i,this.J4(f))}z4(){return this.LM}Uz(){return this.HAt}N6(){return 0!=(512&this.EMt)}wEt(t){this.bEt(512,t)}v6(){return 0!=(1024&this.EMt)}MEt(t){this.bEt(1024,t)}x6(){return 0!=(2048&this.EMt)}oEt(){return 0!=(3072&this.EMt)}vEt(t){this.bEt(2048,t)}_6(){return 0!=(4096&this.EMt)}TEt(t){this.bEt(4096,t)}C6(){return 0!=(8192&this.EMt)}xEt(t){this.bEt(8192,t)}R6(){return 0!=(16384&this.EMt)}GEt(t){this.bEt(16384,t)}E6(){return 0!=(32768&this.EMt)}_Et(t){this.bEt(32768,t)}D6(){return 0!=(this.EMt&1<<22)}IEt(t){this.bEt(1<<22,t)}O6(){return 0!=(this.EMt&1<<23)}CEt(t){this.bEt(1<<23,t)}PEt(){this.EMt&=-12647937}g6(t,s){if(t===this)return!1;if(t.w6())return!1;if(this.REt(t))return!1;if(this.AEt(t))return!1;const i=t.KM(),e=t.tv(),h=t.Wm(),r=t.$m(),n=t.GetAngle(),o=t.hv(),a=t.mA(),l=(t.EEt(this),t.MEt(s.M6),t.vEt(s.T6),t.TEt(s.G6),t.xEt(s.I6),t.GEt(s.P6),t._Et(s.A6),t.IEt(s.F6),t.CEt(s.k6),t.wEt(s.L6),i-this.KM()),u=e-this.tv(),c=-this.GetAngle(),f=Math.cos(c),d=Math.sin(c);if(s.M6&&(s.P6?t.yl=l*f-u*d:t.yl=l,s.G6)){const p=this.Wm()/this.qAt.tot();0!=p&&(t.yl/=p)}if(s.T6&&(s.P6?t.Sl=l*d+u*f:t.Sl=u,s.I6)){const m=this.$m()/this.qAt.eot();0!=m&&(t.Sl/=m)}if(s.G6){const g=this.Wm();0===g||g===Number.EPSILON?(t.RAt=1,t.qAt.iAt(1)):(t.RAt=h/this.Wm(),t.qAt.iAt(t.RAt))}if(s.I6){const y=this.$m();0===y||y===Number.EPSILON?(t.AAt=1,t.qAt.eAt(1)):(t.AAt=r/this.$m(),t.qAt.eAt(t.AAt))}return s.P6&&(t.ua=n-this.GetAngle()),s.A6&&(t.NM=o-this.hv()),s.F6&&t.qAt.hAt(a),s.k6&&t.MN(this.TN()),this.FEt(t),this.R4(),this.yEt(),!0}y6(t){if(t.n6()===this){const s=t.KM(),i=t.tv(),e=t.Wm(),h=t.$m(),r=t.GetAngle(),n=t.hv(),o=t.mA();t.EEt(null),t.PEt(),t.A4(s,i),t.BC(e,h),t.N5(r),t.rv(n),t.yA(o),this.DEt(t),this.R4()}}kEt(){return this.XAt}OEt(){this.LEt();const t=[...this.children()];for(const i of t)this.y6(i);const s=this.n6();s&&s.y6(this),this.PEt()}LEt(){if(this.NEt(),!this.XRt){const s=[...this.children()];s.length&&(this.XRt=[],this.YRt=new WeakMap);let t=0;for(const i of s){const e=i.RV();this.XRt.push(e),this.YRt.set(e,t),t++}}const t=this.n6();t&&t.LEt()}NEt(){if(-1===this.XAt){const t=[...this.l6()];this.XAt=t.length;for(const i of t)i.NEt();const s=[...this.children()];for(const e of s)e.NEt()}}ZAt(){this.XRt&&(this.XRt.length=0),this.XRt=null,this.YRt=null;const t=this.n6();t&&t.ZAt(),this.XAt=-1}w6(){return null!==this.n6()}n6(){const t=this.qAt;return null!==t?t.n6():null}a6(){let t=this;for(;t.w6();)t=t.n6();return t}*l6(){let t=this.n6();for(;t;)yield t,t=t.n6()}mRt(t){return this.l$().includes(t)}nX(){const t=this.qAt;return null!==t&&t.nX()}l$(){const t=this.qAt;return null!==t?t.l$():e}children(){return this.l$()}*p6(){for(const t of this.children())yield t,yield*t.p6()}c6(){return this.l$().length}v2t(){return[...this.p6()].length}d6(t){const s=this.l$();return(t=Math.floor(+t))<0||t>=s.length?null:s[t]}wRt(s){if(s){const i=this.l$();if(i)for(let t=0;t<i.length;t++)if(s===i[t])return t}return NaN}BEt(t){this.qAt||(this.qAt=d.Tr(d.c$,this)),t&&this.qAt.QRt(t)}sot(){return this.qAt}KAt(){this.qAt&&(this.qAt.Gr(),this.qAt=null)}EEt(t){t?(t.BEt(null),this.BEt(t)):(this.qAt&&this.qAt.QRt(null),this.nX()||this.KAt())}AEt(t){if(!this.w6())return!1;const s=this.n6();return s===t||s.AEt(t)}REt(t){if(this.mRt(t))return!0;for(const s of this.l$())if(s.REt(t))return!0;return!1}FEt(t){this.qAt.l$().push(t)}DEt(t){const s=this.qAt.l$(),i=s.indexOf(t);-1!==i&&s.splice(i,1),0!==s.length||this.w6()||this.KAt(),t.nX()||t.KAt()}MRt(){const t=g.get(this);return t?t.sEt:null}WEt(){const t=g.get(this);return t?t.iEt:NaN}rX(){const t=a.get(this);return d.we(t)?t:NaN}VEt(t){a.set(this,t)}jEt(){this.bEt(1<<19,!0),this.eEt()}eEt(){if(m){const s=this.Pf.bM();this.UAt&&s.Ow(this.UAt);let t;t=0!=(this.EMt&1<<19)?s.yw()||"<point>":s.pw()||"<default>",this.UAt=s.Ew(t,this.qN(),this.HAt,this.hv())}}jq(){return this.UAt}jJ(){return this.LM===i}WM(t){if((t|=0)<0||31<t)throw new RangeError("invalid blend mode");this.qN()!==t&&(this.EMt=this.EMt&~(31<<26)|t<<26,this.eEt())}qN(){return(this.EMt&31<<26)>>26}pO(t,s){const i=s&&this.IAt!==t;i&&this.MJ(),this.T0t.bPt(this,this.IAt,t),this.IAt=t,i&&this.HEt(),0!==this.hv()&&this.IAt.TJ()}uO(){return this.IAt}zk(){return this.uO().zk()}GJ(t){this.CAt=0|t}cO(){return this.IAt.D9(),this.CAt}N9(t){this.PAt=0|t}Pj(){return this.IAt.O9(),this.PAt}M7(){return this.CAt}bEt(t,s){s?this.EMt|=t:this.EMt&=~t}TN(){return 0!=(1&this.EMt)}MN(t){if(this.bEt(1,t),this.nX())for(const s of this.l$())s.O6()&&s.MN(t)}e6(){return 0!=(8&this.EMt)}h6(t){t=!!t,this.e6()!==t&&(this.bEt(8,t),t?this.R4():this.UEt())}zEt(t,s){if(this.bEt(32,t),this.jAt&&this.jAt.clear(),s.trim()){this.jAt||(this.jAt=new Set);for(const i of s.split(" "))i&&this.jAt.add(i.toLowerCase())}else this.jAt=null}JEt(t){const s=0!=(32&this.EMt),i=this.jAt;if(t&&i)for(const e of i)if(t.has(e))return s;return!s}R4(){if(this.EMt|=65554,this.T0t.yPt(!0),this.Pf.gO(),this.IAt.iJ()&&(this.qEt(this.OAt,this.LAt,!0),this.EMt&=-3,this.HEt()),0!=(4&this.EMt)&&this.Pi.a0().dispatchEvent(s),null!==this.qAt){const i=this.qAt.l$();for(let t=0,s=i.length;t<s;++t)i[t].R4()}}qEt(t,s,i){const e=this.KM(),h=this.tv(),r=this.Wm(),n=this.$m(),o=this.GetAngle();t.El(e-this.DAt*r,h-this.kAt*n,r,n),i&&this.J6()&&this.XEt(t),0===o?s.Lu(t):(t.offset(-e,-h),s.Bu(t,this._vt(),this.Gvt()),s.offset(e,h),s.Wu(t)),t.normalize()}YEt(){const t=this.EMt;0!=(2&t)&&(this.qEt(this.OAt,this.LAt,!0),this.EMt=-3&t)}B4(){return this.YEt(),this.OAt}V4(){return this.YEt(),this.LAt}$Et(t){const s=this.KM(),i=this.tv(),e=Math.round(s)-s,h=Math.round(i)-i;return 0==e&&0==h?t:(n.I(t),n.offset(e,h),n)}KEt(t){this.OAt.I(t),this.LAt.Lu(this.OAt),this.EMt&=-3,this.wPt(),this.HEt()}ZEt(t){this.bEt(4,t)}QEt(){return 0!=(4&this.EMt)}Rq(t,s,i){return s&&0!==this.kq()?this.Fq(this.uO().Eq()):0===this.hv()||i?t.uu(this.B4()):this.t3t()}t3t(){const t=this.uO(),s=this.L4();return!(s>=t.n9())&&(t.h9(s,r),r.uu(this.B4()))}Fq(t){const s=this.B4(),i=s.Wl(),e=s.jl(),h=s.Vl(),r=s.Hl(),n=this.L4(),o=n+this.kq();return t.$y(i,h,n,e,r,o)}H4(){const t=this.uO();if(t.S9())return this.Fq(t.Eq());{const s=t.zk();return this.Rq(t.KN(),s.Pq(),s.fN())}}Bq(t){this.bEt(1<<20,t)}Nq(t){this.bEt(1<<21,t)}s3t(){return 0!=(this.EMt&1<<20)}i3t(){return 0!=(this.EMt&1<<21)}e3t(t){this.WAt=t,this.h3t(),this.J6()&&(this.YAt.r3t=null)}n3t(){return this.WAt}o3t(){return null!==this.WAt||this.J6()}a3t(){return this.l3t(this.Wm(),this.$m(),this.GetAngle(),this._vt(),this.Gvt())}u3t(t,s,i){let e=0,h=1;return 0!==i&&(e=Math.sin(i),h=Math.cos(i)),this.l3t(t,s,i,e,h)}l3t(h,r,t,n,o){let s=this.VAt;null===s&&(s={$At:d.Tr(d.$u),width:NaN,height:NaN,angle:NaN},this.VAt=s);const a=s.$At;if(s.width!==h||s.height!==r||s.angle!==t){const l=this.WAt;if(this.J6()){let t=this.jW(),s=this.UW(),i=this.q6(),e=this.YAt.r3t;e||(l?(u.I(l),u.offset(t,s)):u.rc(),e=i.zv(u),this.YAt.r3t=e),i.Jv(e,a),a.offset(-t,-s),a.lc(h,r,n,o)}else l?(a.I(l),a.lc(h,r,n,o)):a.ac(this.V4(),-this.KM(),-this.tv());s.width=h,s.height=r,s.angle=t}return a}h3t(){this.c3t(!0);const t=this.VAt;null!==t&&(t.width=NaN)}W6(t,s){if(t=Math.floor(t),s=Math.floor(s),!this.RV().l5().KL())throw new Error("object does not support mesh");this.j6(),this.YAt={f3t:d.Tr(d.Ny.wv,t,s),d3t:d.Tr(d.Ny.wv,t,s),r3t:null}}J6(){return null!==this.YAt}q6(){if(this.J6())return this.YAt.f3t;throw new Error("no mesh")}p3t(){if(this.J6())return this.YAt.d3t;throw new Error("no mesh")}m3t(t){this.bEt(65536,t)}g3t(){return 0!=(65536&this.EMt)}c3t(t){this.bEt(1<<17,t)}y3t(){return 0!=(this.EMt&1<<17)}XEt(t){const s=this.YAt.f3t,i=Math.min(s.kv(),0),e=Math.min(s.Ov(),0),h=Math.max(s.Lv(),1),r=Math.max(s.Nv(),1),n=t.width(),o=t.height();t.offsetLeft(i*n),t.offsetTop(e*o),t.$l((h-1)*n),t.Kl((r-1)*o),this.tT=s.Bv()}j6(){this.YAt&&(this.YAt.f3t.Gr(),this.YAt.d3t.Gr(),this.YAt=null,this.h3t())}U6(t,s,i){t=Math.floor(t),s=Math.floor(s);const e=i.mode||"absolute";if(!p.has(e))throw new Error("invalid mode");let h="relative"===e,r=i.x,n=i.y,o=i.WN,a="number"==typeof i.u?i.u:h?0:-1,l="number"==typeof i.v?i.v:h?0:-1;if(!this.J6())return!1;const u=this.q6(),c=u.Vv(t,s);if(null===c)return!1;let f=!1;return"number"==typeof o&&c.hv()!==o&&(c.rv(o),f=!0),h&&(r+=t/(u.Rv()-1),n+=s/(u.Av()-1)),a=-1!==a||h?(h&&(a+=t/(u.Rv()-1)),d.Rr(a,0,1)):c.nv(),l=-1!==l||h?(h&&(l+=s/(u.Av()-1)),d.Rr(l,0,1)):c.av(),c.KM()===r&&c.tv()===n&&c.nv()===a&&c.av()===l?f:(c.ZM(r),c.sv(n),c.ov(a),c.lv(l),this.h3t(),!0)}iRt(){return this.Pi.iRt()}r6(t,s){return!!this.B4().fu(t,s)&&!!this.V4().fu(t,s)&&(this.iRt()?this.Pi.sW().BGt(t,s):!this.o3t()||this.a3t().fu(t-this.KM(),s-this.tv()))}S3t(){return 0!=(16&this.EMt)}wPt(){if(this.S3t()&&this.e6()&&0==(256&this.EMt)){const t=this.B4(),s=this.T0t.gPt(),i=this.NAt;if(r.set(s.N7(t.Wl()),s.B7(t.Vl()),s.N7(t.jl()),s.B7(t.Hl())),!i.equals(r)){const e=this.Pi;i===h?(s.W7(e,null,r),this.NAt=d.Tr(d.Rect,r)):(s.W7(e,i,r),i.I(r)),this.EMt&=-17}}}w3t(){this.EMt|=16}UEt(){const t=this.NAt;t!==h&&(this.T0t.gPt().W7(this.Pi,t,null),this.NAt=h)}HEt(){const t=this.uO();if(t.iJ()&&0==(256&this.EMt)){const s=t.UJ(),i=this.B4(),e=this.BAt;if(r.set(s.N7(i.Wl()),s.B7(i.Vl()),s.N7(i.jl()),s.B7(i.Hl())),!e.equals(r)){const h=this.Pi;e===o?(s.W7(h,null,r),this.BAt=d.Tr(d.Rect,r)):(s.W7(h,e,r),e.I(r)),t.zJ()}}}MJ(){const t=this.BAt;t!==o&&(this.uO().UJ().W7(this.Pi,t,null),this.BAt=o)}k9(){return this.BAt}X4(){const t=this.Pi,s=this.IAt,i=s.dO();i.length&&i.at(-1)===t||(s.bJ(t,!1),s.yJ(t,!1),this.Pf.gO())}K4(){const t=this.Pi,s=this.IAt,i=s.dO();i.length&&i[0]===t||(s.bJ(t,!1),s.wJ(t,!1),this.Pf.gO())}Q4(t){const s=this.Pi,i=this.IAt;if(i.zk()!==t.zk())throw new Error("layer from different layout");t!==i&&(i.bJ(s,!0),this.pO(t),t.yJ(s,!0),this.Pf.gO())}s6(t,s){let i=this.Pi,e=!1,h=this.IAt;if(t.GB()!==i.GB()){const r=t.lO();if(!r)throw new Error("expected world instance");const n=r.uO(),o=(h.uD()!==n.uD()&&(h.bJ(i,!0),this.pO(n),n.yJ(i,!0),e=!0),n.V9(i,t,!!s));(e||o)&&this.Pf.gO()}}C4(){return this.zAt}b3t(t){this.bEt(64,t)}X9(){return 0!=(64&this.EMt)}iX(t,s=null){const i={x:this.KM(),y:this.tv(),w:this.Wm(),h:this.$m(),l:this.uO().NJ(),zi:this.cO()},e=(0!==this.hv()&&(i.ze=this.hv()),0!==this.GetAngle()&&(i.a=this.nEt()),this.jJ()||(i.c=this.LM.toJSON()),.5!==this.jW()&&(i.oX=this.jW()),.5!==this.UW()&&(i.oY=this.UW()),0!==this.qN()&&(i.bm=this.qN()),this.TN()||(i.v=this.TN()),this.e6()||(i.ce=this.e6()),this.QEt()&&(i.be=this.QEt()),this.zAt&&(i.fx=this.zAt.iX()),0!=(32&this.EMt));return e&&(i.sfi=e),this.jAt&&(i.sft=[...this.jAt].join(" ")),this.qAt&&"visual-state"!==t&&(i.sgi=this.qAt.iX(t,s),g.has(this))&&(i.sgcd=g.get(this).sEt,i.sgzid=g.get(this).iEt),this.J6()&&(i.mesh=this.q6().dv()),i}dAt(){return{x:this.yl,y:this.Sl,z:this.NM,w:this.RAt,h:this.AAt,a:this.ua,sgi:this.sot()?this.sot().aAt():null}}yAt(t){t&&(this.yl=t.x,this.Sl=t.y,this.NM=t.z,this.RAt=t.w,this.AAt=t.h,this.ua=t.a,t.sgi&&this.sot()&&this.sot().eX(t.sgi),this.uEt(),this.R4())}CPt(){this.ZAt(),this.OEt(),this.BEt(null),this.qAt&&this.qAt.mAt(this.XRt,this.YRt)}SK(t){"visual-state"!==t&&this.OEt()}bK(t,s="full",i=null){t.hasOwnProperty("sgi")&&"visual-state"!==s&&0==(256&this.EMt)&&this.qAt.bK(t.sgi,i)}NRt(t,s="full",i){t.hasOwnProperty("sgi")&&"visual-state"!==s&&0==(256&this.EMt)&&(this.qAt.mAt(null,null),this.ZAt(),this.R4())}eX(t,s){if(m=!1,this.ZM(t.x),this.sv(t.y),this.qm(t.w),this.Vm(t.h),this.GJ(t.zi),this.rv(t.hasOwnProperty("ze")?t.ze:0),this.N5(t.hasOwnProperty("a")?t.a:0),t.hasOwnProperty("c")?f.nl(t.c):t.hasOwnProperty("o")?(f.xa(this.LM),f.a=t.o):f.ca(1,1,1,1),this.QAt(f),this.mot(t.hasOwnProperty("oX")?t.oX:.5),this.yot(t.hasOwnProperty("oY")?t.oY:.5),this.WM(t.hasOwnProperty("bm")?t.bm:0),this.MN(!t.hasOwnProperty("v")||t.v),this.h6(!t.hasOwnProperty("ce")||t.ce),this.ZEt(!!t.hasOwnProperty("be")&&t.be),this.zEt(!!t.hasOwnProperty("sfi")&&t.sfi,t.hasOwnProperty("sft")?t.sft:""),this.zAt&&t.hasOwnProperty("fx")&&this.zAt.eX(t.fx),!t.hasOwnProperty("sgi")&&"visual-state"!==s&&this.XRt)for(const i of this.XRt)i.kj()||this.Pf.SB(i);if(t.hasOwnProperty("sgi")&&"visual-state"!==s){this.BEt(null);const e=this.qAt,h=t.sgi;e.eX(h),e.mAt(this.XRt,this.YRt),t.sgcd&&d.we(t.sgzid)&&g.set(this,{sEt:t.sgcd,iEt:t.sgzid})}if(t.hasOwnProperty("mesh")){const r=t.mesh;this.W6(r.cols,r.rows),this.q6().pv(r)}else this.j6();this.R4(),m=!0,this.eEt(),"visual-state"!==s&&this.Pf.M3t(this.RV(),t)}}}{const Ta=self.Vs;Ta.oCt=class extends Ta.Mr{constructor(t,s){super();const i=t.PO(),e=i.DSt(s[1]),h=(i.v3t().k_t(e),this.Pf=i,this.T0t=t,this.d_t=Ta.DL.gW(e),this.Zxt=null,this.T3t=null,this.NIt=e.Instance,this.hz=s[2],this.Cr=s[0],this.ywt=this.Pf.Z1t(s[3]),this.d_t.cMt());if(h<2&&(this.Zxt=Ta.Tr(e.xCt,this),!(this.Zxt instanceof Ta.f_t)))throw new Error("v1 sdk type must derive from SDKBehaviorBase");if(Ta.DL.Dxt(this,h),2<=h){const r=e.xCt??globalThis.Jj;if(this.T3t=new r,!(this.T3t instanceof globalThis.Jj))throw new Error("script interface class must derive from ISDKBehaviorTypeBase")}else this.T3t=new globalThis.pW;Ta.DL.kxt(h),this.Rxt()}static BT(t,s){return Ta.Tr(Ta.oCt,t,s)}Gr(){this.Pf=null,this.d_t=null,this.Zxt&&(this.Zxt.Gr(),this.Zxt=null),this.NIt=null}ovt(){return this.Zxt}Rxt(){this.Zxt?this.Zxt.Rxt():this.T3t&&this.T3t.XV()}PO(){return this.Pf}fB(){return this.T0t}aW(){return this.d_t}JCt(){return this.NIt}Mf(){return this.Cr}NJ(){return this.hz}uW(){return this.T3t}Z1t(){return this.ywt}}}{const xa=self.Vs,Ga=self.nW;xa.VPt=class extends xa.Mr{constructor(t){super(),this.Pf=t.runtime,this.Ywt=t.lW,this.d_t=this.Ywt.aW(),this.Pi=t.fW,this.Ay=t.index,this.FPt=null,this.DPt=null,this.d_t.yJ(this.Pi)}Gr(){this.DPt&&(this.DPt.yB(),this.DPt=null),this.d_t.bJ(this.Pi),this.FPt&&(this.FPt.Gr(),this.FPt=null),this.Pf=null,this.Ywt=null,this.d_t=null,this.Pi=null}VCt(t){if(this.FPt)throw new Error("already got sdk instance");const s=this.aW().cMt();if(s<2){if(this.FPt=xa.Tr(this.Ywt.JCt(),this,t),!(this.FPt instanceof xa.p_t))throw new Error("v1 sdk type must derive from SDKBehaviorInstanceBase")}else{const i=this.aW().Axt();this.Fxt(i.Instance,t)}}sW(){return this.FPt??this.DPt}dW(){return this.Pi}PO(){return this.Pf}cW(){return this.Ywt}aW(){return this.d_t}Cnt(){return this.Ay}S_t(){this.FPt?this.FPt.S_t():this.DPt.$j()}v_t(t,s){this.FPt&&this.FPt.v_t(t,s)}LRt(){return this.FPt?this.FPt.wGt():this.DPt.d4()}dv(t="full"){return this.FPt?this.FPt.dv(t):this.DPt.m4(t)}pv(t,s="full"){if(this.FPt)return this.FPt.pv(t,s);this.DPt.g4(t,s)}static x3t(t,s,i){let e=globalThis.qj,h,r;h=s instanceof e?t.Z5(s):s.y_t(),r=i instanceof e?t.Z5(i):i.y_t();const n=h.dW(),o=r.dW(),a=n.fB().uD(),l=o.fB().uD();if(a!==l)return a-l;const u=n.GRt(),c=o.GRt();return u!==c?u-c:h.Cnt()-r.Cnt()}Fxt(t,s){const i=Ga,e=t??this.FPt.Axt(),h=e||i,r=this.aW().cMt();if(xa.DL.Dxt(this,r),xa.DL.O_t(s),this.DPt=new h,xa.DL.L_t(),xa.DL.kxt(r),!e||this.DPt instanceof i)return this.DPt;throw new TypeError(`script interface class '${e.name}' does not extend the right base class '${i.name}'`)}sGt(){return this.DPt||this.Fxt()}TGt(){return!!this.DPt}}}{const _a=self.Vs;_a.Vz=class extends _a.Mr{constructor(t,s){super(),this.vv=t,this.G3t=[],this._3t=[],this.I3t=new Map,this.C3t=[],this.P3t=[],this.R3t=new Set,this.aM=!0;for(const i of s){const e=_a.Tr(_a.A3t,this,i,this.G3t.length);this.G3t.push(e),this.I3t.set(e.Mf().toLowerCase(),e),3<=i.length&&this.C3t.push(this.E3t(e,i[2]))}this.PO().F3t(this)}Gr(){this.PO().D3t(this);for(const t of this.P3t)t.Gr();_a.Kn(this.P3t),_a.Kn(this.G3t),_a.Kn(this._3t),this.I3t.clear(),_a.Kn(this.C3t),this.vv=null}k3t(t){this.R3t.add(t)}O3t(t){this.R3t.delete(t)}L3t(t){t.hw()&&(this.P3t=this.G3t.map(t=>{const s=t.Xx();return 0<s.GetCustomParametersByteSize()?_a.Tr(_a.Ny.WebGPUEffectCustomParamsBuffer,s):null}),this.N3t());for(const s of this.R3t)s.L3t(t)}BCt(t){if(t.length){this.G3t=t.concat(this.G3t);for(const s of t)this.I3t.set(s.Mf().toLowerCase(),s);for(let t=0,s=this.G3t.length;t<s;++t)this.G3t[t].FJ(t)}}E3t(t,s){t.B3t(s[0]);const i=s.slice(1);for(let t=0,s=i.length;t<s;++t){const e=i[t];if(Array.isArray(e)){const h=_a.Tr(_a.na);h.nl(e),i[t]=h}}return i}Ev(){return this.vv}PO(){return this.vv.PO()}wW(){_a.Kn(this._3t);let t=!0;for(const s of this.G3t)s.bgt()&&(this._3t.push(s),s.Xx()._M()||(t=!1));this.aM=t}F5(){return this.G3t}tPt(){return 0<this.G3t.length}Art(t){return this.I3t.get(t.toLowerCase())||null}W3t(t){if((t=Math.floor(+t))<0||t>=this.G3t.length)throw new RangeError("invalid effect type index");return this.G3t[t]}yW(t){return this.W3t(t).bgt()}SW(t,s){this.W3t(t).B3t(s)}HJ(){return this._3t}X9(){return 0<this._3t.length}_M(){return this.aM}Rrt(t){return this.C3t[t]}Jz(t){return(t<this.P3t.length?this.P3t:this.C3t)[t]}bW(t,s){if(t<0||t>=this.C3t.length)return null;const i=this.C3t[t];return s<0||s>=i.length?null:i[s]}MW(t,s,i){if(t<0||t>=this.C3t.length)return!1;const e=this.C3t[t];if(s<0||s>=e.length)return!1;const h=e[s];if(h instanceof _a.na){if(h.Ea(i))return!1;h.xa(i)}else{if(h===i)return!1;e[s]=i}return t<this.P3t.length&&this.P3t[t].SetParameterValue(s,i),!0}N3t(){const i=this.C3t,e=this.P3t;for(let t=0,s=Math.min(i.length,e.length);t<s;++t){const h=e[t],r=i[t];for(let t=0,s=r.length;t<s;++t)h.SetParameterValue(t,r[t])}}static V3t(t){return t&&t instanceof _a.na?{t:"color",v:t.toJSON()}:t}static j3t(t){if(null===t)return NaN;if("object"!=typeof t)return t;{const s=t.t;if("color"!==s)throw new Error("invalid effect parameter type");{const i=_a.Tr(_a.na);return i.nl(t.v),i}}}static H3t(t){return t.map(_a.Vz.V3t)}static U3t(t){return t.map(_a.Vz.j3t)}dv(){return this.G3t.map(t=>({name:t.Mf(),active:t.bgt(),params:_a.Vz.H3t(this.C3t[t.uD()])}))}pv(t){for(const s of t){const i=this.Art(s.name);i&&(i.B3t(s.active),this.C3t[i.uD()]=_a.Vz.U3t(s.params))}this.wW(),this.N3t()}}}{const Ia=self.Vs;Ia.A3t=class extends Ia.Mr{constructor(t,s,i){super(),this.Wz=t,this.Af=s[0],this.Cr=s[1],this.Ay=i,this.DM=null,this.C0=!0}Gr(){this.Wz=null,this.DM=null}NCt(t){const s=Ia.Tr(Ia.A3t,t,[this.Af,this.Cr],-1);return s.DM=this.DM,s.C0=this.C0,s}L3t(t){const s=t.fw(this.Af);if(!s)throw new Error("failed to find shader program '"+this.Af+"'");this.DM=s}E5(){return this.Wz}Mf(){return this.Cr}FJ(t){this.Ay=t}uD(){return this.Ay}Ev(){return this.Wz.Ev()}PO(){return this.Wz.PO()}B3t(t){this.C0=!!t}bgt(){return this.C0}Xx(){return this.DM}z3t(){const i=[];for(let t=0,s=this.DM.Yx();t<s;++t){const e=this.DM.$x(t);if("float"===e||"percent"===e)i.push(0);else{if("color"!==e)throw new TypeError("unknown effect parameter type");i.push(Ia.Tr(Ia.na,1,1,1,1))}}return i}}}{const Ca=self.Vs;Ca.JAt=class extends Ca.Mr{constructor(t,s){super(),this.Pi=t,this.J3t=s,this.Wz=t.fB().E5(),this.q3t=!0,this.Xz=!0,this.X3t=!1,this.Y3t=!1,this.$3t=!1,this.K3t=!1,this.nD=Ca.Tr(Ca.Ny.e3,t.PO().yL().jz(),{JE:(t,s)=>{const i=s.ZF(),e=i.lO();t.VM(e.Uz()),t.$w(e.L4()),i.Hv(t),t.$w(0)},qE:t=>{const s=t.DGt(),[i,e]=t.FGt();return{zF:s,JF:i,qF:e}},XE:t=>this.Jz(t)}),this.Z3t=[],this._3t=[],this.aM=!0,this.C3t=[],this.P3t=[],this.L3t(t.PO().bM());for(let t=0,s=this.Wz.F5().length;t<s;++t)this.Z3t.push(!0);this.wW(),this.Wz.k3t(this)}Gr(){this.Wz.O3t(this);for(const t of this.P3t)t&&t.Gr();Ca.Kn(this.P3t),this.nD.Gr(),this.nD=null,Ca.Kn(this.Z3t),Ca.Kn(this._3t),Ca.Kn(this.C3t),this.Pi=null,this.Wz=null}L3t(t){t.hw()&&(this.P3t=this.Wz.F5().map(t=>{const s=t.Xx();return 0<s.GetCustomParametersByteSize()?Ca.Tr(Ca.Ny.WebGPUEffectCustomParamsBuffer,s):null}))}tEt(t){let s=0;for(const i of t)this.C3t.push(this.E3t(s,i)),++s;this.N3t(),this.wW()}E3t(t,s){this.Z3t[t]=s[0];const i=s.slice(1);for(let t=0,s=i.length;t<s;++t){const e=i[t];if(Array.isArray(e)){const h=Ca.Tr(Ca.na);h.nl(e),i[t]=h}}return i}XPt(){for(const t of this.Wz.F5())this.C3t.push(t.z3t());this.N3t()}Ev(){return this.vv}E5(){return this.Wz}lD(){return this.VJ(),this.nD}PO(){return this.Pi.PO()}wW(){Ca.Kn(this._3t);let t=this.J3t,i=this.Wz.F5(),e=this._3t,h=this.Z3t,r=!0;for(let t=0,s=i.length;t<s;++t)if(h[t]){const n=i[t];e.push(n),n.Xx()._M()||(r=!1)}this.aM=r,t.b3t(!!e.length),this.q3t=!0}VJ(){const t=this.Pi,s=this.J3t,i=s.jJ(),e=t.l5().qL(),h=0!==s.GetAngle()||0!==s.uO().GetAngle()||s.Wm()<0||s.$m()<0,r=t.LGt(),n=t.GM();(this.q3t||i!==this.Xz||e!==this.X3t||h!==this.Y3t||r!==this.$3t||n!==this.K3t||this.nD.K3())&&(this.nD.Z3(this._3t.map(t=>t.Xx()),{$E:this._3t.map(t=>t.uD()),KE:!i||n,QE:e,t3:r,s3:h}),this.q3t=!1,this.Xz=i,this.X3t=e,this.Y3t=h,this.$3t=r,this.K3t=n)}HJ(){return this._3t}Rrt(t){return this.C3t[t]}Jz(t){return(t<this.P3t.length?this.P3t:this.C3t)[t]}bW(t,s){if(t<0||t>=this.C3t.length)return null;const i=this.C3t[t];return s<0||s>=i.length?null:i[s]}MW(t,s,i){if(t<0||t>=this.C3t.length)return!1;const e=this.C3t[t];if(s<0||s>=e.length)return!1;const h=e[s];if(h instanceof Ca.na){if(h.Ea(i))return!1;h.xa(i)}else{if(h===i)return!1;e[s]=i}return t<this.P3t.length&&this.P3t[t].SetParameterValue(s,i),!0}N3t(){const i=this.C3t,e=this.P3t;for(let t=0,s=e.length;t<s;++t){const h=e[t],r=i[t];for(let t=0,s=r.length;t<s;++t)h.SetParameterValue(t,r[t])}}_M(){return this.aM}Q3t(){return this._3t.some(t=>t.Xx().PM())}yW(t){return this.Z3t[t]}SW(t,s){this.Z3t[t]=!!s}F5(){return this.Wz.F5()}iX(){return this.Wz.F5().map(t=>({name:t.Mf(),active:this.Z3t[t.uD()],params:Ca.Vz.H3t(this.C3t[t.uD()])}))}eX(t){for(const s of t){const i=this.Wz.Art(s.name);i&&(this.Z3t[i.uD()]=s.active,this.C3t[i.uD()]=Ca.Vz.U3t(s.params))}this.wW(),this.N3t()}}}{let _=self.Vs,r=[],b=[],n=[],M=_.Tr(_.$u),S=_.Tr(_.$u),v=_.Tr(_.gu),d=_.Tr(_.Rect),p=_.Tr(_.Rect),m=null,g=null,y=null;_.tFt=class extends _.Mr{constructor(t){super(),this.Pf=t,this.sFt=0,this.iFt=0,this.eFt=[],this.hFt=0,this.rFt=0,this.nFt=0,this.oFt=0,this.aFt=new self.XO(this)}Gr(){this.Pf=null}PO(){return this.Pf}gD(){return this.aFt}lFt(){this.rFt=this.hFt,this.hFt=0,this.oFt=this.nFt,this.nFt=0}uFt(){return this.rFt}cFt(){return this.oFt}fFt(t,s){const i=t.lO(),e=s.lO();i&&e&&i.e6()&&e.e6()&&this.eFt.push([t,s])}c2t(s,i,e){for(const[h,r]of this.eFt){let t=null;if(s===h)t=r;else{if(s!==r)continue;t=h}t.S2t(i)&&!e.includes(t)&&e.push(t)}}f2t(t,s){if(this.eFt.length)for(const[i,e]of this.eFt)if(t===i&&s===e||t===e&&s===i)return!0;return!1}dFt(){_.Kn(this.eFt)}$O(t,s){if(!t||!s||t===s)return!1;const i=t.lO(),e=s.lO();if(!i.e6()||!e.e6())return!1;this.hFt++;const h=i.uO(),r=e.uO(),n=h.R9(r);return n?this.pFt(i,e):this.mFt(i,e)}pFt(t,s){if(!t.B4().uu(s.B4()))return!1;if(this.nFt++,!t.V4().ju(s.V4()))return!1;if(t.iRt()&&s.iRt())return!1;if(t.iRt())return this.gFt(t,s);if(s.iRt())return this.gFt(s,t);if(!t.o3t()&&!s.o3t())return!0;const i=t.a3t(),e=s.a3t();return i.uc(e,s.KM()-t.KM(),s.tv()-t.tv())}mFt(i,e){const t=i.iRt(),s=e.iRt();if(t&&!s)return this.yFt(i,e);if(s&&!t)return this.yFt(e,i);if(s||t)return!1;{const h=i.uO(),r=e.uO(),n=(M.I(i.a3t()),S.I(e.a3t()),M.ic());for(let t=0,s=n.length;t<s;t+=2){const a=t+1,l=n[t],u=n[a],[c,f]=h.eB(l+i.KM(),u+i.tv());n[t]=c,n[a]=f}const o=S.ic();for(let t=0,s=o.length;t<s;t+=2){const d=t+1,p=o[t],m=o[d],[g,y]=r.eB(p+e.KM(),m+e.tv());o[t]=g,o[d]=y}return M.nc(),S.nc(),this.nFt++,M.uc(S,0,0)}}yFt(t,s){const i=t.uO(),e=s.uO(),h=(m=m||_.Tr(_.$u),g=g||_.Tr(_.Rect),y=y||_.Tr(_.gu),s.KM()),r=s.tv(),[n,o]=e.eB(h,r),[a,l]=i.QN(n,o),u=a-h,c=l-r;if(g.I(s.B4()),g.offset(u,c),!t.B4().uu(g))return!1;if(y.I(s.V4()),y.offset(u,c),this.nFt++,!t.V4().ju(y))return!1;m.I(s.a3t());const f=m.ic();for(let t=0,s=f.length;t<s;t+=2){const d=t+1;f[t]+=u,f[d]+=c}return m.nc(),this.gFt(t,s,a,l,m,g,y)}gFt(t,e,s,i,h,r,n){const o=void 0!==r?r:e.B4(),a=t.KM(),l=t.tv(),u=t.RV().sW(),c=void 0!==s?s:e.KM(),f=void 0!==i?i:e.tv(),d=e.o3t(),p=void 0!==n?n:e.V4(),m=b;u.SFt(o,m);for(let t=0,s=m.length;t<s;++t){const g=m[t],y=g.wFt();if(this.hFt++,o.cu(y,a,l)&&(v.Lu(y),v.offset(a,l),v.ju(p)))if(d){let t=void 0!==h?h:e.a3t(),s=c,i=f;void 0!==h&&(s=e.KM(),i=e.tv());const S=g.bFt();if(S){if(this.nFt++,S.uc(t,s-(a+y.Wl()),i-(l+y.Vl())))return _.Kn(m),!0}else if(M.ac(v,0,0),M.uc(t,s,i))return _.Kn(m),!0}else{const w=g.bFt();if(!w)return _.Kn(m),!0;if(M.ac(p,0,0),w.uc(M,-(a+y.Wl()),-(l+y.Vl())))return _.Kn(m),!0}}return _.Kn(m),!1}MFt(t,o,a){const l=t.b5(),s=this.Pf.YD();if(!s)throw new Error("cannot call outside event");const u=s.Z0t(),i=new Map,c=t=>{let s=i.get(t);return void 0===s&&(s=t.RN(),i.set(t,s)),s};if(l.k0t()){a||(l.j0t(!1),_.Kn(l.H0t())),u&&_.Kn(l.U0t());for(const e of t.w5()){let h=e.lO(),r=h.uO();if(!(!c(r)||!h.H4())&&o.some(([t,s])=>{const[i,e]=r.QN(t,s,h.L4());return h.r6(i,e)})){if(a)return!1;l.W0t(e)}else u&&l.V0t(e)}}else{let i,e=!1,n=(!u||s.Uyt(this.Pf.H1t())||this.Pf.fvt()&&!l.U0t().length&&l.H0t().length?i=l.H0t():(i=l.U0t(),e=!0),0);for(let s=0,t=i.length;s<t;++s){let t=i[s],h=t.lO(),r=h.uO();if(!(!c(r)||!h.H4())&&o.some(([t,s])=>{const[i,e]=r.QN(t,s,h.L4());return h.r6(i,e)})){if(a)return!1;e?l.W0t(t):i[n++]=t}else e?i[n++]=t:u&&l.V0t(t)}a||(i.length=n)}return t.GSt(),i.clear(),!!a||l.O0t()}vFt(t,s){if(t)for(const i of s.MPt())if(!t.R9(i))return!1;return!0}cvt(t,s,i,e){if(s.RJ())for(const h of s.yyt())this.vFt(t,h)?(h.SPt(),h.gPt().V7(i,e)):_.nr(e,h.w5());else this.vFt(t,s)?(s.SPt(),s.gPt().V7(i,e)):_.nr(e,s.w5())}nL(t,s,i,e){for(const h of s)this.cvt(t,h,i,e)}TFt(t,s,i){const e=this.Pf.B_t();e&&this.nL(t,e.UK(),s,i)}xFt(t,s,i){const e=this.Pf.W_t();e&&this.nL(t,e.UK(),s,i)}JEt(t,s){return t.rRt()&&(!s||s.lO().JEt(t.yMt().get("solidTags")))}QO(t){const s=t.lO();this.TFt(s.uO(),s.B4(),r);for(const i of r)if(this.JEt(i,t)&&this.$O(t,i))return _.Kn(r),i;return _.Kn(r),null}GFt(t,s){this.TFt(null,t,r);for(const i of r)if(this.JEt(i,s)&&this._Ft(t,i))return _.Kn(r),i;return _.Kn(r),null}IFt(t,s){let i=null;s&&(i=n,_.Kn(i));const e=t.lO();this.xFt(e.uO(),e.B4(),r);for(const h of r)if(h.oRt()&&this.$O(t,h)){if(!s)return _.Kn(r),h;i.push(h)}return _.Kn(r),i}CFt(s,i,e,h,r){h=h||50;const n=s.lO(),o=n.KM(),a=n.tv();for(let t=0;t<h;++t)if(n.A4(o+i*t,a+e*t),n.R4(),!this.$O(s,r))return!0;return n.A4(o,a),n.R4(),!1}PFt(s,i,e,h,r,n){h=h||50;let o=s.lO(),a=o.KM(),l=o.tv(),u=null,c=null;for(let t=0;t<h;++t)if(o.A4(a+i*t,l+e*t),o.R4(),!this.$O(s,u))if(u=this.QO(s))c=u;else if(r&&(u=n?this.$O(s,n)?n:null:this.IFt(s))&&(c=u),!u)return c&&this.RFt(s,i,e,c,16,!0),!0;return o.A4(a,l),o.R4(),!1}AFt(i,e,h,t){t=t||50;let r=i.lO(),n=r.KM(),o=r.tv(),a=null,l=null;for(let s=0;s<t;++s)for(let t=0;t<2;++t){const u=2*t-1;if(r.A4(n+e*s*u,o+h*s*u),r.R4(),!this.$O(i,a)){if(!(a=this.QO(i)))return l&&this.RFt(i,e*u,h*u,l,16,!0),!0;l=a}}return r.A4(n,o),r.R4(),!1}RFt(t,s,i,e,h,r){let n=2,o=!1,a=!1,l=t.lO(),u=l.KM(),c=l.tv();for(;n<=h;){const f=1/n;n*=2,l.D4(s*f*(o?1:-1),i*f*(o?1:-1)),l.R4(),this.$O(t,e)||r&&this.QO(t)?(o=!0,a=!0):(o=!1,a=!1,u=l.KM(),c=l.tv())}a&&(l.A4(u,c),l.R4())}EFt(i,t=100){let e=0,h=i.lO(),r=h.KM(),n=h.tv(),o=0,a=this.QO(i);if(!a)return!0;for(;e<=t;){let t=0,s=0;switch(o){case 0:t=0,s=-1,e++;break;case 1:t=1,s=-1;break;case 2:t=1,s=0;break;case 3:t=1,s=1;break;case 4:t=0,s=1;break;case 5:t=-1,s=1;break;case 6:t=-1,s=0;break;case 7:t=-1,s=-1}if(o=(o+1)%8,h.A4(Math.floor(r+t*e),Math.floor(n+s*e)),h.R4(),!this.$O(i,a)&&!(a=this.QO(i)))return!0}return h.A4(r,n),h.R4(),!1}FFt(t,s,i,e){const h=t.lO(),r=h.KM(),n=h.tv(),o=Math.max(10,_.Or(s,i,r,n)),a=_.Nr(s,i,r,n),l=e||this.QO(t);if(!l)return _.Ar(a+Math.PI);let u=l,c=0,f=0,d=_.Er(5),p;for(p=1;p<36;++p){const x=a-p*d;if(h.A4(s+Math.cos(x)*o,i+Math.sin(x)*o),h.R4(),!this.$O(t,u)&&!(u=e?null:this.QO(t))){c=x;break}}for(36===p&&(c=_.Ar(a+Math.PI)),u=l,p=1;p<36;++p){const G=a+p*d;if(h.A4(s+Math.cos(G)*o,i+Math.sin(G)*o),h.R4(),!this.$O(t,u)&&!(u=e?null:this.QO(t))){f=G;break}}if(36===p&&(f=_.Ar(a+Math.PI)),h.A4(r,n),h.R4(),f===c)return f;let m=_.Br(f,c)/2,g;g=_.Vr(f,c)?_.Ar(c+m+Math.PI):_.Ar(f+m);const y=Math.cos(a),S=Math.sin(a),w=Math.cos(g),b=Math.sin(g),M=y*w+S*b,v=y-2*M*w,T=S-2*M*b;return _.Nr(0,0,v,T)}DFt(t,s,i,e,h){if(!h)return!1;const r=h.lO();if(!r.e6())return!1;if(this.hFt++,d.set(Math.min(t,i),Math.min(s,e),Math.max(t,i),Math.max(s,e)),!r.B4().uu(d))return!1;if(h.iRt())return this.kFt(t,s,i,e,h,r);if(this.nFt++,!r.V4().Vu(t,s,i,e))return!1;if(!r.o3t())return!0;const n=r.a3t();return n.Vu(r.KM(),r.tv(),t,s,i,e)}kFt(i,e,h,r,t,s){const n=s.KM(),o=s.tv(),a=t.sW(),l=b;p.set(i,e,h,r),p.normalize(),a.SFt(p,l);for(let t=0,s=l.length;t<s;++t){const u=l[t],c=u.wFt();if(this.hFt++,d.cu(c,n,o)&&(v.Lu(c),v.offset(n,o),v.Vu(i,e,h,r))){const f=u.bFt();if(!f)return _.Kn(l),!0;if(this.nFt++,f.Vu(n+c.Wl(),o+c.Vl(),i,e,h,r))return _.Kn(l),!0}}return _.Kn(l),!1}_Ft(t,s){if(!s)return!1;const i=s.lO();if(!i.e6())return!1;if(this.hFt++,!i.B4().uu(t))return!1;if(s.iRt())return this.OFt(t,s,i);if(this.nFt++,v.Lu(t),!i.V4().ju(v))return!1;if(!i.o3t())return!0;const e=M,h=(e.Lu(t,i.KM(),i.tv()),i.a3t());return e.uc(h,0,0)}OFt(i,t,s){const e=s.KM(),h=s.tv(),r=t.sW(),n=b;r.SFt(i,n);for(let t=0,s=n.length;t<s;++t){const o=n[t],a=o.wFt();if(this.hFt++,i.cu(a,e,h)){const l=o.bFt();if(!l)return _.Kn(n),!0;if(this.nFt++,M.Lu(i,0,0),l.uc(M,-(e+a.Wl()),-(h+a.Vl())))return _.Kn(n),!0}}return _.Kn(n),!1}LFt(t,s){if(t){const i=t.lO();i.e6()&&(this.hFt++,i.B4().uu(s.rect))&&(t.iRt()?this.NFt(t,i,s):(this.nFt++,i.o3t()?s.BFt(t,i.KM(),i.tv(),i.a3t()):s.WFt(t,i.V4())))}}NFt(i,e,h){const r=e.KM(),n=e.tv(),o=b;i.sW().SFt(h.rect,o);for(let t=0,s=o.length;t<s;t++){const a=o[t],l=a.wFt();if(this.hFt++,h.rect.cu(l,r,n)){const u=a.bFt();this.nFt++,u?h.BFt(i,r+l.Wl(),n+l.Vl(),u):h.VFt(i,e.KM(),e.tv(),l)}}_.Kn(o)}sL(t,s){if(t!==this.sFt||s!==this.iFt){this.sFt=t,this.iFt=s;const i=this.Pf.PJ();for(const e of i)if(e.BL()){for(const h of e.S5())h.lO().UEt();e.gPt().jFt(t,s),e.yPt();for(const r of e.S5()){const n=r.lO();n.w3t(),n.wPt()}}}}eL(){return[this.sFt,this.iFt]}HFt(t,s){this.sFt=t,this.iFt=s}}}{const Pa=self.Vs;Pa.XIt=class extends Pa.Mr{constructor(t,s){super(),this.D7=t,this.k7=s,this.O7=Pa.Tr(Pa.Mc)}Gr(){this.O7.Gr(),this.O7=null}jFt(t,s){if(!this.O7.xc())throw new Error("grid not empty");this.D7=t,this.k7=s}L7(t,s,i){let e=this.O7.oi(t,s);return e||(i?(e=Pa.Tr(Pa.UFt,this,t,s),this.O7.Set(t,s,e),e):null)}N7(t){const s=Math.floor(t/this.D7);return isFinite(s)?s:0}B7(t){const s=Math.floor(t/this.k7);return isFinite(s)?s:0}W7(e,h,r){if(h)for(let i=h.Wl(),t=h.jl();i<=t;++i)for(let t=h.Vl(),s=h.Hl();t<=s;++t)if(!r||!r.fu(i,t)){const n=this.L7(i,t,!1);n&&(n.V0(e),n.xc())&&this.O7.Gc(i,t)}if(r)for(let i=r.Wl(),t=r.jl();i<=t;++i)for(let t=r.Vl(),s=r.Hl();t<=s;++t)h&&h.fu(i,t)||this.L7(i,t,!0).R7(e)}V7(t,s){let i=this.N7(t.Wl()),e=this.B7(t.Vl()),h=this.N7(t.jl()),r=this.B7(t.Hl());if(isFinite(h)&&isFinite(r))for(;i<=h;++i)for(let t=e;t<=r;++t){const n=this.L7(i,t,!1);n&&n.E7(s)}}}}{const Ra=self.Vs;Ra.UFt=class extends Ra.Mr{constructor(t,s,i){super(),this.T7=t,this.yl=s,this.Sl=i,this.x7=Ra.Tr(Ra.Pc)}Gr(){this.x7.Gr(),this.x7=null,this.T7=null}xc(){return this.x7.xc()}R7(t){this.x7.Fc(t)}V0(t){this.x7.Gc(t)}E7(t){Ra.nr(t,this.x7.Dc())}}}{const Aa=self.Vs;Aa.zFt=class{constructor(){this.x1=0,this.y1=0,this.x2=0,this.y2=0,this.dx=0,this.dy=0,this.rect=new Aa.Rect,this.JFt=2,this.qFt=null,this.XFt=0,this.YFt=0,this.$Ft=0,this.KFt=0,this.ZFt=0,this.At=0,this.QFt=1,this.tDt=0,this.sDt=1,this.iDt=0}eDt(){return this.JFt<1+1e-6}P0(){this.JFt=2}Set(t,s,i,e){return this.x1=t,this.y1=s,this.x2=i,this.y2=e,this.dx=i-t,this.dy=e-s,this.rect.set(t,s,i,e),this.rect.normalize(),this.JFt=2,this.qFt=null,this.XFt=0,this.YFt=0,this.$Ft=0,this.KFt=0,this.ZFt=0,this.At=0,this.QFt=1,this.tDt=0,this.sDt=1,this.iDt=0,this}hDt(){if(!1!==this.eDt()){const t=this.dx*this.JFt,s=this.dy*this.JFt,i=Aa.Dr(t,s),e=t/i,h=s/i,r=(this.At=i-1e-6,this.KFt=this.x1+e*this.At,this.ZFt=this.y1+h*this.At,this.XFt=Math.atan2(this.$Ft,this.YFt)+Math.PI/2,this.QFt=Math.cos(this.XFt),this.tDt=Math.sin(this.XFt),e*this.QFt+h*this.tDt);if(this.sDt=e-2*this.QFt*r,this.iDt=h-2*this.tDt*r,0<r){const n=Math.PI;this.XFt=Aa.Ar(this.XFt+n),this.QFt=-this.QFt,this.tDt=-this.tDt}}}rDt(t,s,i,e,h){const r=Aa.In(this.x1,this.y1,this.x2,this.y2,s,i,e,h);0<=r&&r<this.JFt&&(this.JFt=r,this.qFt=t.GB(),this.YFt=s-e,this.$Ft=i-h)}VFt(t,s,i,e){const h=s+e.Wl(),r=s+e.jl(),n=i+e.Vl(),o=i+e.Hl();this.rDt(t,h,n,r,n),this.rDt(t,r,n,r,o),this.rDt(t,r,o,h,o),this.rDt(t,h,o,h,n)}WFt(t,s){const i=s.Sn(),e=s.wn(),h=s.bn(),r=s.Mn(),n=s.vn(),o=s.Tn(),a=s.xn(),l=s.Gn();this.rDt(t,i,e,h,r),this.rDt(t,h,r,n,o),this.rDt(t,n,o,a,l),this.rDt(t,a,l,i,e)}BFt(i,e,h,t){const r=t.ic();for(let t=0,s=r.length;t<s;t+=2){const n=(t+2)%s,o=r[t]+e,a=r[t+1]+h,l=r[n]+e,u=r[1+n]+h;this.rDt(i,o,a,l,u)}}}}{const M=self.Vs,Ea=new Set(["off","crop","scale-inner","scale-outer","letterbox-scale","letterbox-integer-scale"]),Fa=new Set(["high","low"]),Da=self.xs,Th=Da.Cs,xh=Da.Es,ka=Th.create(),Oa=M.Tr(M.gu),v=M.Tr(M.Rect);M.nDt=class extends M.Mr{constructor(t){super(),this.Pf=t,this.oDt=[],this.aDt=!1,this.lDt=null,this.uDt=null,this.cDt=null,this.fDt="high-performance",this.dDt=!1,this.pDt="auto",this.mDt=0,this.gDt=0,this.yDt="",this.SDt=0,this.wDt=0,this.bDt=0,this.MDt=0,this.vDt=0,this.TDt=0,this.rS="normalized",this.xDt=0,this.GDt=1,this._Dt=1e4,this.kS=!0,this.IDt=0,this.R3=0,this.A3=0,this.CDt="letterbox-scale",this.PDt="letterbox-scale",this.RDt=0,this.ADt=0,this.EDt=Th.create(),this.FDt="high",this.DDt=this.FDt,this.kDt=!1,this.ODt=[],this.LDt=new Set,this.NDt=self.C3_Shaders,this.BDt=M.Tr(M.Ny.EE,{CE:()=>[this.cq(),this.fq()],PE:()=>this.WDt(),RE:t=>this.VDt(t),getTime:()=>this.PO().mk(),AE:()=>this.PO().gO()}),this.jDt=0,this.HDt=0,this.UDt=NaN,this.zDt=null,this.JDt=new Map,this.qDt=NaN,this.XDt=new Map,this.YDt="",this.$Dt=1,this.KDt=M.Tr(M.Rect),this.ZDt="",this.QDt=null,this.tkt=null,this.skt=0,this.ikt=0,this.ekt=-1,this.hkt=0,this.rkt=t=>this.hkt=t.progress,this.nkt=null,this.okt={akt:null,lkt:null,ukt:null},this.ckt=0,this.fkt=0,this.dkt=0,this.pkt="fade-in",this.mkt=null,this.gkt=new Promise(t=>this.mkt=t)}ykt(t){this.fDt=t}Skt(t){this.aDt=!!t}wkt(t){this.rS=t}bkt(){return this.rS}Mkt(t){this.xDt=t}vkt(t,s){this.GDt=t,this._Dt=s}Tkt(t){this.dDt=!!t}xkt(t){this.pDt=t}async zo(t){let s=t.canvas,i=(this.oDt.push({canvas:s,Gkt:null}),this.Pf.e4("runtime","window-resize",t=>this._kt(t)),this.Pf.e4("runtime","fullscreenchange",t=>this.Ikt(t)),this.Pf.e4("runtime","fullscreenerror",t=>this.Ckt(t)),s.addEventListener("webglcontextlost",t=>this.Pkt(t)),s.addEventListener("webglcontextrestored",t=>this.Rkt(t)),this.kDt=!!t.isFullscreen,this.yDt=t.cssDisplayMode,navigator.gpu&&this.aDt),e=!1;if(i)try{await this.Akt(!0)}catch(t){this.Ekt("WebGPU",t),this.uDt=null}if(!this.bM())try{await this.Fkt(!0)}catch(t){this.Ekt("WebGL",t),this.lDt=null}if(this.bM()||(e=!0),!this.bM()&&i)try{await this.Akt(!1)}catch(t){this.Ekt("WebGPU",t),this.uDt=null}if(!this.bM())try{await this.Fkt(!1)}catch(t){this.Ekt("WebGL",t),this.lDt=null}const h=this.bM();if(!h)throw new Error("failed to acquire a renderer - check WebGL or WebGPU is supported");h.Hb(e),this.uDt&&(this.uDt.Dkt=()=>this.kkt(),this.uDt.Okt=()=>this.Lkt()),"normalized"===this.rS?h.ZS():(h.QS(),h.$S(this.xDt)),this.BC(t.windowInnerWidth,t.windowInnerHeight,!0),await this.L3t()}Ekt(t,s){s&&"string"==typeof s.message&&s.message.startsWith("renderer-unavailable")||console.error(`Error creating ${t} renderer: `,s)}async Akt(t){let s={Zy:this.GDt,Qy:this._Dt},i=!0;"no"===this.pDt?i=!1:"auto"===this.pDt&&(i=M.mi.Ti);const e={powerPreference:this.fDt,depth:this.Pf.y9(),failIfMajorPerformanceCaveat:t,Nkt:this.Pf.Mq(),Bkt:this.Pf.Wkt(),XP:this.Pf.Vkt(),jkt:i};this.uDt=M.Tr(M.Ny.WebGPURenderer,s),await this.uDt.BT(this.oDt[0].canvas,e)}async Fkt(t){const s={alpha:!0,powerPreference:this.fDt,qP:"xbox-uwp-webview2"!==this.Pf.dL(),depth:this.Pf.y9(),XP:this.Pf.Vkt(),failIfMajorPerformanceCaveat:t,Zy:this.GDt,Qy:this._Dt};this.dDt&&(s.YP=1),this.lDt=M.Tr(M.Ny.ZP,this.oDt[0].canvas,s),await this.lDt.WS()}async Hkt(){if(this.NDt){const t=[];for(const[s,i]of Object.entries(this.NDt)){i.src=i.Ukt;const e=M.Ny.WebGPUShaderProgram.pG();t.push(this.uDt.sA(Object.assign({OT:e,name:s},i)))}await Promise.all(t)}}async zkt(){if(this.NDt){const s=[];for(const[i,e]of Object.entries(this.NDt)){let t;if(e.Jkt&&2<=this.lDt.v2())e.src=e.Jkt,t=M.Ny.DT.mG();else{if(!e.qkt)throw new Error(`shader '${i}' does not support WebGL 1`);e.src=e.qkt,t=M.Ny.DT.pG()}s.push(this.lDt.sA(Object.assign({OT:t,name:i},e)))}await Promise.all(s),this.lDt.iA(),this.lDt.mw()}this.lDt.mE()&&(this.zDt=M.Tr(M.Ny.LP,this.lDt))}async L3t(){this.uDt?await this.Hkt():this.lDt&&await this.zkt();const t=this.bM();t.Vb(this.kS),t.mE()&&(this.UDt=0);for(const s of this.Pf.Xkt()){for(const i of s.F5())i.L3t(t);s.L3t(t),s.wW()}this.cDt=new self.L8(this.Pf,t)}Gr(){this.Pf=null,this.lDt=null,this.oDt.length=0}ID(){return this.Pf.ID()}_kt(t){const s=this.Pf;if(!s.Ykt()){const i=t.devicePixelRatio,e=(this.ID()&&(self.devicePixelRatio=i),s.$kt(i),this.kDt=!!t.isFullscreen,this.yDt=t.cssDisplayMode,this.BC(t.innerWidth,t.innerHeight),s.gO(),new M.Event("window-resize")),h=(e.data=t,s.a0().S0(e),new M.Event("resize"));h.Kkt=this.ML(),h.Zkt=this.TL(),h.Qkt=this.GL(),h.tOt=this.IL(),s.T$(h),s.a4()&&(s.Apt()||self.C3Debugger.IsDebuggerPaused())&&s.oF()}}Ikt(t){this.kDt=!!t.isFullscreen,this.BC(t.innerWidth,t.innerHeight,!0),this.Pf.gO()}Ckt(t){this.kDt=!!t.isFullscreen,this.BC(t.innerWidth,t.innerHeight,!0),this.Pf.gO()}BC(t,s,i=!1){if(t=Math.floor(t),s=Math.floor(s),t<=0||s<=0)throw new Error("invalid size");if(this.mDt!==t||this.gDt!==s||i){this.mDt=t,this.gDt=s;const e=this.sOt();"letterbox-scale"===e?this.iOt(t,s):"letterbox-integer-scale"===e?this.eOt(t,s):"off"===e?this.hOt(t,s):this.rOt(t,s),this.nOt(e);for(const{canvas:n}of this.oDt)n.width=this.bDt,n.height=this.MDt;this.Pf.Ef("canvas","update-size",{marginLeft:this.vDt,marginTop:this.TDt,styleWidth:this.SDt,styleHeight:this.wDt,displayScale:this.Oj()});const h=this.bM();h.BC(this.bDt,this.MDt,!0);for(const o of this.ODt)h.lE(o);M.Kn(this.ODt),this.oOt();const r=this.Pf.Uk();r.z$(),r.J$()}}oOt(){this.bM().ew(this.EDt,this.cq()/this.fq())}pq(){return this.EDt}iOt(t,s){const i=this.Pf.CL(),e=this.Pf.PD(),h=this.Pf.AD(),r=e/h,n=t/s;if(r<n){const o=s*r;this.SDt=Math.round(o),this.wDt=s,this.vDt=Math.floor((t-this.SDt)/2),this.TDt=0}else{const a=t/r;this.SDt=t,this.wDt=Math.round(a),this.vDt=0,this.TDt=Math.floor((s-this.wDt)/2)}this.bDt=Math.round(this.SDt*i),this.MDt=Math.round(this.wDt*i),this.Pf.aOt(e,h)}eOt(t,s){let i=this.Pf.CL(),e=(1!==i&&(t+=1,s+=1),this.Pf.PD()),h=this.Pf.AD(),r=e/h,n=t/s,o;if(r<n){const a=s*r;o=a*i/e}else{const l=t/r;o=l*i/h}1<o?o=Math.floor(o):o<1&&(o=1/Math.ceil(1/o)),this.bDt=Math.round(e*o),this.MDt=Math.round(h*o),this.SDt=this.bDt/i,this.wDt=this.MDt/i,this.vDt=Math.max(Math.floor((t-this.SDt)/2),0),this.TDt=Math.max(Math.floor((s-this.wDt)/2),0),this.Pf.aOt(e,h)}rOt(t,s){const i=this.Pf.CL(),e=(this.SDt=t,this.wDt=s,this.bDt=Math.round(this.SDt*i),this.MDt=Math.round(this.wDt*i),this.vDt=0,this.TDt=0,this.Oj());this.Pf.aOt(this.SDt/e,this.wDt/e)}hOt(t,s){const i=this.Pf.CL();this.SDt=this.Pf.o9(),this.wDt=this.Pf.a9(),this.bDt=Math.round(this.SDt*i),this.MDt=Math.round(this.wDt*i),this.lOt()?(this.vDt=Math.floor((t-this.SDt)/2),this.TDt=Math.floor((s-this.wDt)/2)):(this.vDt=0,this.TDt=0),this.Pf.aOt(this.Pf.o9(),this.Pf.a9())}nOt(i){if("high"===this.FDt)this.R3=this.bDt,this.A3=this.MDt,this.DDt="high";else{let t,s;if(s="off"===this.sOt()?(t=this.Pf.o9(),this.Pf.a9()):(t=this.Pf.PD(),this.Pf.AD()),this.bDt<t||this.MDt<s)this.R3=this.bDt,this.A3=this.MDt,this.DDt="high";else if(this.R3=t,this.A3=s,this.DDt="low","scale-inner"===i){const e=t/s,h=this.mDt/this.gDt;h<e?this.R3=this.A3*h:e<h&&(this.A3=this.R3/h)}else if("scale-outer"===i){const r=t/s,n=this.mDt/this.gDt;r<n?this.R3=this.A3*n:n<r&&(this.A3=this.R3/n)}}}PO(){return this.Pf}uOt(){return this.oDt[0].canvas}jz(){return this.BDt}lOt(){return this.kDt}cOt(){return this.yDt}fOt(t){if(!Ea.has(t))throw new Error("invalid fullscreen mode");this.CDt=t;const s=this.Pf.Uk();s.z$(),s.J$()}Dj(){return this.CDt}dOt(t){if(!Ea.has(t))throw new Error("invalid fullscreen mode");this.PDt=t;const s=this.Pf.Uk();s.z$(),s.J$()}pOt(){return this.PDt}sOt(){return this.lOt()?this.pOt():this.Dj()}mOt(t){if(!Fa.has(t))throw new Error("invalid fullscreen scaling quality");this.FDt=t,this.Pf.Uk().z$()}gOt(){return this.FDt}vq(){return this.DDt}static yOt(t){switch(t){case 0:return"off";case 1:return"crop";case 2:return"scale-inner";case 3:return"scale-outer";case 4:return"letterbox-scale";case 5:return"letterbox-integer-scale";default:throw new Error("invalid fullscreen mode")}}Mj(){return this.mDt}vj(){return this.gDt}cq(){return this.R3}fq(){return this.A3}Vb(t){this.kS=!!t}SOt(t){this.IDt=t}y7(){return this.IDt}wOt(){return this.bM().pP()}Pkt(t){console.log("[Construct] WebGL context lost"),t.preventDefault(),this.ODt=[],this.LDt.clear(),this.BDt.jM(),this.lDt.jM(),this.Pf.TY()}kkt(){console.log("[Construct] WebGPU device lost"),this.ODt=[],this.LDt.clear(),this.BDt.jM(),this.Pf.TY()}async Rkt(t){await this.lDt.HM(),await this.L3t(),await this.Pf.bOt(),console.log("[Construct] WebGL context restored")}async Lkt(){await this.L3t(),await this.Pf.bOt(),console.log("[Construct] WebGPU device restored")}MOt(){return this.lDt}vOt(){return this.uDt}bM(){return this.uDt||this.lDt}zCt(){return this.cDt}gL(){let t="";return t=this.Pf.vOt()?"webgpu":"webgl"+this.Pf.MOt().v2(),this.Pf.bM().Ub()&&(t+="-software"),t}wL(){return this.Pf.vOt()?this.Pf.vOt().GetAdapterInfoString():this.Pf.MOt().xE()}lB(){return"low"===this.DDt?1/this.Pf.CL():this.Oj()}Oj(){const t=this.sOt();if("off"===t||"crop"===t)return 1;const s=this.Pf.PD(),i=this.Pf.AD(),e=s/i,h=this.bDt/this.MDt;return"scale-inner"!==t&&e<h||"scale-inner"===t&&h<e?this.wDt/i:this.SDt/s}Jq(){return"low"===this.vq()?1:this.Oj()}Uq(){return"low"===this.vq()?1:this.Pf.CL()}TOt(t,s){this.RDt=t,this.ADt=s}TH(s,i,e,t=!0){i=i||this.R3,e=e||this.A3;const h=i/2+this.RDt,r=e/2+this.ADt;if(t){let t=this.pq();i===this.R3&&e===this.A3||(s.ew(ka,i/e),t=ka),s.hA(t)}const n=s.aw(h,r,s.jS(e),h,r,0,e);s.uA(n)}xOt(t,s=!0){const i=this.ML(),e=this.TL(),h=i/2,r=e/2,n=(s&&t.hA(this.pq()),t.aw(h,r,t.jS(e),h,r,0,e));t.uA(n)}GL(){return this.bDt}IL(){return this.MDt}ML(){return this.SDt}TL(){return this.wDt}tB(){return this.vDt}sB(){return this.TDt}rY(){return this.oDt.length}GOt(){return"undefined"!=typeof OffscreenCanvas&&this.uOt()instanceof OffscreenCanvas&&("Chromium"!==M.mi.Mi||124<=M.mi.bi)}async CY(e,h=!1){if(e<1)throw new Error("invalid HTML layer count");if(this.oDt.length!==e){let t=this.Pf.Uk().Vk(),s={count:e,layersDomState:t.LJ().filter(t=>t.IN()).map(t=>t.W9()),immediate:h,marginLeft:this.vDt,marginTop:this.TDt,styleWidth:this.SDt,styleHeight:this.wDt},i;if(i=this.ID()?await this.Pf.SO("canvas","set-html-layer-count",s):self.c3_runtimeInterface._OnSetHTMLLayerCount(s),e<this.oDt.length)this.oDt.length=e;else for(const r of i.addedCanvases){r.width=this.bDt,r.height=this.MDt;const n=this.GOt()?"bitmaprenderer":"2d",o=r.getContext(n);if(!o)throw new Error(`failed to acquire '${n}' canvas context`);this.oDt.push({canvas:r,Gkt:o})}this.Pf.gO()}}b$(t){if(!(t>=this.oDt.length)){const s=this.uOt(),i=this.oDt[t].Gkt;this.GOt()?i.transferFromImageBitmap(s.transferToImageBitmap()):(i.globalCompositeOperation="copy",i.drawImage(s,0,0))}}Tq(s){s.depth=this.Pf.y9();let t=this.ODt,i=t.findIndex(t=>t.CT(s)),e;return-1!==i?(e=t[i],t.splice(i,1)):e=this.bM().hE(s),this.LDt.add(e),e}zz(t){if(!this.LDt.has(t))throw new Error("render target not in use");this.LDt.delete(t),this.ODt.push(t)}WDt(){const t={t2:this.Pf.ED()};return"low"===this.vq()&&(t.width=this.cq(),t.height=this.fq()),this.Tq(t)}VDt(t){this.zz(t)}*_Ot(){for(const t of this.Pf.Uk().j$())for(const s of t.q5()){const i=this.JDt.get(s);i&&(yield i)}}Sq(t){if(!this.bM().mE())return null;let s=this.JDt.get(t);return s||(s={P4:t,name:t.Mf(),IOt:M.Tr(M.Ny.LP,this.lDt),COt:0,POt:0,ROt:0},this.JDt.set(t,s)),s.IOt}AOt(){const t=this.bM();if(t.mE()&&0===this.HDt){this.HDt=t.Bb(),this.qDt=NaN;for(const s of this._Ot())s.COt=NaN}}EOt(){this.lDt&&this.lDt.mE()&&this.FOt(),this.uDt&&this.uDt.mE()&&this.DOt()}FOt(){if(isNaN(this.qDt)&&(this.qDt=this.zDt.UP(this.jDt,this.HDt),!isNaN(this.qDt))){if(this.Pf.a4())for(const t of this._Ot())if(t.COt=t.IOt.UP(this.jDt,this.HDt),isNaN(t.COt))return;if(this.zDt.zP(this.HDt),this.UDt=Math.min(this.qDt,1),this.Pf.a4()){const i=new Map;for(const h of this._Ot())h.IOt.zP(this.HDt),h.POt=Math.min(h.COt,1),i.set(h.P4,h.POt);for(const r of this._Ot()){const n=r.P4,o=i.get(n)||0,a=o-n.yN().reduce((t,s)=>t+(i.get(s)||0),0);r.ROt=M.Rr(a,0,1)}const s=this.Pf.Vk(),e=this.UDt-s.LJ().reduce((t,s)=>t+(i.get(s)||0),0);self.C3Debugger.UpdateGPUProfile(M.Rr(e,0,1),this.UDt,[...this._Ot()])}this.jDt=this.HDt,this.HDt=0}}kOt(){return this.zDt}DOt(){if(0!==this.HDt){for(let t=this.jDt;t<this.HDt;++t){const i=this.XDt.get(t);if(i&&!i._P())return}let t=this.Pf.Vk(),n=M.ra(t.QX()+1,0),s=0;for(let t=this.jDt;t<this.HDt;++t){const o=this.XDt.get(t);if(o){let i=o.IP(),e=BigInt(0),h=BigInt(0),r=BigInt(0);for(let t=0,s=Math.min(n.length,i.length/2);t<s;++t){const u=i[2*t],c=i[2*t+1],f=(u!==r&&(e===r||u<e)&&(e=u),c>h&&(h=c),c-u),d=Number(f)/1e9;n[t]+=d}const a=h-e,l=Number(a)/1e9;s+=l}}if(this.UDt=M.Rr(s,0,1),this.Pf.a4()){const e=t.q5(),h=new Map;for(let t=0,s=Math.min(e.length,n.length-1);t<s;++t){const g=n[t+1];h.set(e[t],g)}const r=[],p=new Map;for(const[y,S]of h){const w=[...y.wN()].reduce((t,s)=>t+(h.get(s)||0),0);p.set(y,w),r.push({name:y.Mf(),ROt:M.Rr(S,0,1),POt:M.Rr(w,0,1)})}const m=this.UDt-t.LJ().reduce((t,s)=>t+(p.get(s)||0),0);self.C3Debugger.UpdateGPUProfile(M.Rr(m,0,1),this.UDt,r)}for(let t=this.jDt;t<this.HDt;++t)this.XDt.delete(t);this.jDt=this.HDt,this.HDt=0}}OOt(t){this.XDt.set(this.uDt.Bb(),t)}_k(){return this.UDt}LOt(t,s,i,e,h,r){return this.YDt=t,this.$Dt=s,this.KDt.El(i,e,h,r),this.QDt||(this.QDt=new Promise(t=>{this.tkt=t})),this.QDt}NOt(){if(this.YDt){let t=this.uOt(),s=this.KDt,i=M.Rr(Math.floor(s.Wl()),0,t.width),e=M.Rr(Math.floor(s.Vl()),0,t.height),h=s.width(),r=(h=0===h?t.width-i:M.Rr(Math.floor(h),0,t.width-i),s.height());if(r=0===r?t.height-e:M.Rr(Math.floor(r),0,t.height-e),(0!==i||0!==e||h!==t.width||r!==t.height)&&0<h&&0<r){const n=M.zo(h,r),o=n.getContext("2d");o.drawImage(t,i,e,h,r,0,0,h,r),t=n}M.Jo(t,this.YDt,this.$Dt).then(t=>{this.ZDt&&URL.revokeObjectURL(this.ZDt),this.ZDt=URL.createObjectURL(t),this.QDt=null,this.tkt(this.ZDt)}),this.YDt="",this.$Dt=1}}BOt(){return this.ZDt}WOt(t){t?this.skt++:this.skt--}VOt(){return 0<this.skt}jOt(t){const s=this.bM();if(2===t)this.nkt=M.Tr(M.Ny.Kb,this.bM()),this.nkt.mC("Arial"),this.nkt.gC(16),this.nkt.RC("center"),this.nkt.EC("center"),this.nkt.BC(300,200);else if(0===t){const i=this.Pf.HOt();i&&i.mH(s).catch(t=>console.warn("[C3 runtime] Failed to create texture for loading logo: ",t))}else 4===t&&(this.UOt("splash-images/splash-logo.svg").then(t=>{"done"===this.pkt?s.dT(t):this.okt.akt=t}).catch(t=>console.warn("Failed to load splash image: ",t)),this.zOt("splash-images/splash-poweredby-512.png").then(t=>{"done"===this.pkt?s.dT(t):this.okt.lkt=t}).catch(t=>console.warn("Failed to load splash image: ",t)),this.zOt("splash-images/splash-website-512.png").then(t=>{"done"===this.pkt?s.dT(t):this.okt.ukt=t}).catch(t=>console.warn("Failed to load splash image: ",t)))}async UOt(t){t=new URL(t,this.Pf.JOt()).toString();const s=await M.No(t),i=await this.Pf.qOt(s,2048,2048);return this.bM().eE(i,{h2:"high"})}async zOt(t){t=new URL(t,this.Pf.JOt()).toString();const s=await M.No(t);return this.bM().eE(s,{h2:"high"})}XOt(){this.Pf.Ef("runtime","hide-cordova-splash")}YOt(){this.ikt=Date.now(),this.Pf.a0().addEventListener("loadingprogress",this.rkt),this.ekt=requestAnimationFrame(()=>this.$Ot());const t=this.Pf.KOt();3!==t&&this.XOt()}async ZOt(){const t=this.bM(),s=(this.hkt=1,this.Pf.KOt());4===s&&await this.gkt,this.mkt=null,this.gkt=null,-1!==this.ekt&&(cancelAnimationFrame(this.ekt),this.ekt=-1),this.Pf.a0().removeEventListener("loadingprogress",this.rkt),this.rkt=null,this.nkt&&(this.nkt.Gr(),this.nkt=null),this.Pf.QOt(),t.qA(),this.okt.akt&&(t.dT(this.okt.akt),this.okt.akt=null),this.okt.lkt&&(t.dT(this.okt.lkt),this.okt.lkt=null),this.okt.ukt&&(t.dT(this.okt.ukt),this.okt.ukt=null),t.JA(0,0,0,0),t.Lb(),this.pkt="done",this.jDt=t.Bb(),3===s&&this.XOt()}$Ot(){if(-1!==this.ekt){const t=this.bM(),s=(t.qA(),this.ekt=-1,this.Pf.pD().jU()),i=this.Pf.KOt();if(3!==i&&(this.xOt(t),t.JA(0,0,0,0),t.SA(),t.mw(),t.bA(null)),0===i)this.tLt(s);else if(1===i)this.sLt(s,120,0);else if(2===i)this.iLt(s);else if(3===i)M.qn();else{if(4!==i)throw new Error("invalid loader style");this.eLt(s)}t.Lb(),this.ekt=requestAnimationFrame(()=>this.$Ot())}}iLt(t){t?this.nkt.PC(1,0,0):this.nkt.PC(.6,.6,.6),this.nkt.Ff(Math.round(100*this.hkt)+"%");const s=this.SDt/2,i=this.wDt/2,e=(Oa.Gu(s-150,i-100,150+s,100+i),this.bM());e.bA(this.nkt.wT()),e.ob(Oa,this.nkt.gP())}sLt(t,s,i){const e=this.bM(),h=(e.Mw(),t?e.gA(1,0,0,1):e.gA(.118,.565,1,1),this.SDt/2),r=this.wDt/2,n=s/2;v.El(h-n,r-4+i,Math.floor(s*this.hkt),8),e.Rect(v),v.El(h-n,r-4+i,s,8),v.offset(-.5,-.5),v.Ql(.5,.5),e.gA(0,0,0,1),e.fb(v),v.Ql(1,1),e.gA(1,1,1,1),e.fb(v)}tLt(t){const s=this.bM(),i=this.Pf.HOt();if(i){const e=i.wT();if(e){const h=e.Wm(),r=e.$m(),n=this.SDt/2,o=this.wDt/2,a=h/2,l=r/2;Oa.Gu(n-a,o-l,n+a,o+l),s.bA(e),s.gu(Oa),this.sLt(t,h,16+l)}else this.sLt(t,120,0)}else this.sLt(t,120,0)}eLt(t){let s=this.bM(),i=this.okt.akt,e=this.okt.lkt,h=this.okt.ukt,r=Date.now(),n=(0===this.ckt&&(this.ikt=r),this.Pf.hLt()||this.Pf.rLt()&&!this.Pf.nLt()),o=n?0:200,a=n?0:3e3,l=1,u=("fade-in"===this.pkt?l=Math.min((r-this.ikt)/300,1):"fade-out"===this.pkt&&(l=Math.max(1-(r-this.dkt)/300,0)),s.Mw(),s.gA(.231*l,.251*l,.271*l,l),v.set(0,0,this.SDt,this.wDt),s.Rect(v),Math.ceil(this.SDt)),c=Math.ceil(this.wDt),f,d;256<this.wDt?(s.gA(.302*l,.334*l,.365*l,l),f=u,d=Math.max(.005*c,2),v.El(0,.8*c-d/2,f,d),s.Rect(v),t?s.gA(l,0,0,l):s.gA(.161*l,.953*l,.816*l,l),f=u*this.hkt,v.El(.5*u-f/2,.8*c-d/2,f,d),s.Rect(v),s.gA(l,l,l,l),s.mw(),e&&(f=1.5*M.Rr(.22*c,105,.6*u),d=f/8,v.El(.5*u-f/2,.2*c-d/2,f,d),s.bA(e),s.Rect(v)),i&&(f=Math.min(.395*c,.95*u),d=f,v.El(.5*u-f/2,.485*c-d/2,f,d),s.bA(i),s.Rect(v)),h&&(f=1.5*M.Rr(.22*c,105,.6*u),d=f/8,v.El(.5*u-f/2,.868*c-d/2,f,d),s.bA(h),s.Rect(v))):(s.gA(.302*l,.334*l,.365*l,l),f=u,d=Math.max(.005*c,2),v.El(0,.85*c-d/2,f,d),s.Rect(v),t?s.gA(l,0,0,l):s.gA(.161*l,.953*l,.816*l,l),f=u*this.hkt,v.El(.5*u-f/2,.85*c-d/2,f,d),s.Rect(v),s.gA(l,l,l,l),s.mw(),i&&(f=.55*c,d=f,v.El(.5*u-f/2,.45*c-d/2,f,d),s.bA(i),s.Rect(v))),this.ckt++,"fade-in"===this.pkt&&300<=r-this.ikt&&2<=this.ckt&&(this.pkt="wait",this.fkt=r),"wait"===this.pkt&&r-this.fkt>=a&&1<=this.hkt&&(this.pkt="fade-out",this.dkt=r),("fade-out"===this.pkt&&r-this.dkt>=300+o||n&&1<=this.hkt&&r-this.ikt<500)&&this.mkt()}}}{let j=self.Vs,H=self.C3Debugger,h=self.qj,i={messagePort:null,runtimeBaseUrl:"",headless:!1,hasDom:!0,isInWorker:!1,useAudio:!0,exportType:""},n=!0;j.oLt=class extends j.Mr{constructor(t){t=Object.assign({},i,t),super(),this.aLt=t.messagePort,this.lLt=t.runtimeBaseUrl,this.uLt=t.previewUrl,this.cLt=!!t.headless,this.fLt=!!t.hasDom,this.dLt=!!t.isInWorker,n=t.ife,this.pLt=!!t.useAudio,this.mLt=t.exportType,this.gLt=t.isNWjs,this.zH=!!t.isiOSCordova,this.yLt=!!t.isiOSWebView,this.SLt=!!t.isWindowsWebView2,this.wLt=!!t.isAnyWebView2Wrapper,this.bLt=!!t.isFBInstantAvailable,this.MLt=!("preview"!==this.mLt||!t.isDebug),this.vLt=this.MLt,this.TLt=this.MLt,this.xLt=0,this.GLt=[],this._Lt=[],this.ILt=!1,this.CLt="",this.PLt="",this.RLt="",this.ALt="",this.ELt=0,this.FLt=0,this.DLt=0,this.W3=self.devicePixelRatio,this.kLt=0,this.OLt=0,this.LLt=0,this.NLt=0,this.BLt=0,this.WLt=!1,this.wy=!0,this.VLt=!1,this.jLt=!1,this.HLt=!1,this.ULt=null,this.h7=j.Tr(j.VH,this,t),this.lX=j.Tr(j._$,this),this.tdt=j.Tr(j.Kdt,this),this.zLt=j.Tr(j.DL,this,t.wrapperComponentIds),this.JLt=j.Tr(j.tFt,this),this.ntt=j.Tr(j.q$,this),this.qLt=j.Tr(j.Wut,this),this.XLt=j.Tr(j.jut,this),this.ict=j.Tr(j.$ut,this),this.uy=j.Tr(j.Xg,{Kg:t=>this.YLt(t),Qg:t=>this.$Lt(t)}),this.KLt=new Map,this.ZLt=[],this.QLt=new Map,this.t5t=new Map,this.s5t=0,this.i5t=[],this.e5t=new Set,this.h5t=[],this.r5t=[],this.n5t=new Map,this.o5t=!1,this.a5t=!1,this.l5t=0,this.u5t=0,this.c5t=new Map,this.f5t=new Set,this.d5t=new Set,this.p5t=[],this.m5t=[],this.g5t=null,this.y5t=!1,this.S5t="vsync",this.f2="trilinear",this.w5t=!1,this.b5t=!0,this.M5t=!1,this.v5t=!1,this.T5t=null,this.x5t={G5t:t=>{this.ekt=-1,this._5t=-1,this.yZ(t)},I5t:t=>{this._5t=-1,this.yZ(t,!1,"skip-render")},C5t:()=>{this.ekt=-1,this.oF()}},this.ekt=-1,this._5t=-1,this.P5t=0,this.R5t=0,this.A5t=!1,this.E5t=!1,this.F5t=!1,this.D5t=!0,this.k5t=!0,this.O5t=!1,this.L5t=0,this.N5t=new j.Ld(1),this.B5t=()=>Math.random(),this.W5t=0,this.V5t=0,this.j5t=0,this.H5t=0,this.U5t=0,this.HPt=1,this.z5t=1/30,this.J5t=0,this.q5t=j.Tr(j.H0),this.X5t=j.Tr(j.H0),this.Y5t=j.Tr(j.H0),this.$5t=new Map,this.K5t=-1,this.Z5t=0,this.Q5t=0,this.tNt=-1,this.sNt=0,this.iNt=0,this.eNt=0,this.hNt=!1,this.rNt="",this.nNt=!1,this.oNt="",this.g4=null,this.aNt="",this.lNt=null,this.uNt=null,this.JIt=j.Tr(j.Event.a0),this.cNt=new Map,this.fNt=new Map,this.dNt=0,this.pNt=!1,this.mNt=!1,this.gNt=!1,this.yNt=[],this.SNt={pretick:j.Tr(j.Event,"pretick",!1),tick:j.Tr(j.Event,"tick",!1),tick2:j.Tr(j.Event,"tick2",!1),instancecreate:j.Tr(j.Event,"instancecreate",!1),instancedestroy:j.Tr(j.Event,"instancedestroy",!1),beforelayoutchange:j.Tr(j.Event,"beforelayoutchange",!1),layoutchange:j.Tr(j.Event,"layoutchange",!1)},this.SNt.instancecreate.fW=null,this.SNt.instancedestroy.fW=null,this.WX=j.Tr(j.Event.a0),this.wNt=null;const s=(t,s)=>j.VPt.x3t(this,t,s);this.bNt=j.Tr(j.Z0,s),this.MNt=j.Tr(j.Z0,s),this.vNt=j.Tr(j.Z0,s),this.TNt=j.Tr(j.xNt,this,t.jobScheduler),t.canvas&&(this.g5t=j.Tr(j.nDt,this)),this.aLt.onmessage=t=>this._OnMessageFromDOM(t.data),this.e4("runtime","visibilitychange",t=>this.GNt(t)),this.e4("runtime","wrapper-extension-message",t=>this._Nt(t)),this.e4("runtime","get-remote-preview-status-info",()=>this.INt()),this.e4("runtime","js-invoke-function",t=>this.G1t(t)),this.e4("runtime","go-to-last-error-script",self.goToLastErrorScript),this.e4("runtime","offline-audio-render-completed",t=>this.CNt(t)),this.JIt.addEventListener("window-blur",t=>this.PNt(t)),this.JIt.addEventListener("window-focus",()=>this.RNt()),this.ntt._K(),this.XLt._K(),this.ANt=null,this.ENt=new WeakMap,this.FNt={keyboard:null,Zk:null,Qk:null,tO:null},this.DNt=new WeakMap,this.kNt=[]}static BT(t){return j.Tr(j.oLt,t)}Gr(){j.Kn(this.ZLt),this.QLt.clear(),this.t5t.clear(),this.lX.Gr(),this.lX=null,this.tdt.Gr(),this.tdt=null,this.zLt.Gr(),this.zLt=null,this.h7.Gr(),this.h7=null,this.JLt.Gr(),this.JLt=null,this.ntt.Gr(),this.ntt=null,this.qLt.Gr(),this.qLt=null,this.XLt.Gr(),this.XLt=null,this.ict.Gr(),this.ict=null,this.uy.Gr(),this.uy=null,this.g5t&&(this.g5t.Gr(),this.g5t=null),this.JIt.Gr(),this.JIt=null,this.ONt=null}["_OnMessageFromDOM"](t){const s=t.type;if("event"===s)this.LNt(t);else{if("result"!==s)throw new Error(`unknown message '${s}'`);this.NNt(t)}}LNt(t){if(this.gNt){const s=t.component,i=t.handler,e=t.data,h=t.dispatchOpts,r=!(!h||!h.dispatchRuntimeEvent),n=!(!h||!h.dispatchUserScriptEvent),o=t.responseId;if("runtime"===s){if(r){const l=new j.Event(i);l.data=e,this.JIt.S0(l)}if(n){const u=new j.Event(i,!0);for(const[c,f]of Object.entries(e))u[c]=f;this.T$(u)}}const a=this.cNt.get(s);if(a){const d=a.get(i);if(d){let t=null;try{t=d(e)}catch(t){return console.error(`Exception in '${s}' handler '${i}':`,t),void(null!==o&&this.BNt(o,!1,""+t))}null!==o&&(t&&t.then?t.then(t=>this.BNt(o,!0,t)).catch(t=>{console.error(`Rejection from '${s}' handler '${i}':`,t),this.BNt(o,!1,""+t)}):this.BNt(o,!0,t))}else r||n||console.warn(`[Runtime] No DOM handler '${i}' for component '${s}'`)}else r||n||console.warn(`[Runtime] No DOM event handlers for component '${s}'`)}else this.yNt.push(t)}BNt(t,s,i){this.aLt.postMessage({type:"result",responseId:t,isOk:s,result:i})}NNt(t){const s=t.responseId,i=t.isOk,e=t.result,h=this.fNt.get(s);i?h.resolve(e):h.reject(e),this.fNt.delete(s)}e4(t,s,i){let e=this.cNt.get(t);if(e||(e=new Map,this.cNt.set(t,e)),e.has(s))throw new Error(`[Runtime] Component '${t}' already has handler '${s}'`);e.set(s,i)}Ef(t,s,i,e){this.aLt.postMessage({type:"event",component:t,handler:s,data:i,responseId:null},e)}SO(t,s,i,e){const h=this.dNt++,r=new Promise((t,s)=>{this.fNt.set(h,{resolve:t,reject:s})});return this.aLt.postMessage({type:"event",component:t,handler:s,data:i,responseId:h},e),r}r8(t,s,i,e=-1){this.Ef("runtime","send-wrapper-extension-message",{componentId:t,messageId:s,params:i,asyncId:e})}n8(t,s,i){const e=this.dNt++,h=new Promise((t,s)=>{this.fNt.set(e,{resolve:t,reject:s})});return this.r8(t,s,i,e),h}_Nt(t){if(-1!==t.asyncId){const s=t.asyncId,i=this.fNt.get(s);i.resolve(t.params),this.fNt.delete(s)}else this.LNt({component:"wrapper-extension:"+t.componentId,handler:t.messageId,data:t.params,responseId:null})}b4(t,s,i){this.e4("wrapper-extension:"+t,s,i)}S4(t){return this.zLt.S4(t)}WNt(t){if(!this.a4())throw new Error("not in debug mode");this.Ef("runtime","post-to-debugger",t)}async JPt(t){j.pvt(this),this.a4()?await H.JPt(this):self.C3Debugger&&self.C3Debugger.InitPreview(this);const s=await this.h7.Lo("data.json");if(await this.VNt(s),await this.jNt(t),this.hLt()||console.info("%cMade with Construct, the game and animation creation tool. Visit: https://www.construct.net","font-weight: bold"),this.MOt()){const i=this.MOt();console.info(`[C3 runtime] Hosted in ${this.ID()?"worker":"DOM"}, rendering with WebGL ${i.v2()} [${i.xE()}]`)}else this.vOt()&&console.info(`[C3 runtime] Hosted in ${this.ID()?"worker":"DOM"}, rendering with WebGPU [${this.vOt().GetAdapterInfoString()}]`);this.bM().Ub()&&console.warn("[C3 runtime] The renderer indicates a major performance caveat. Software rendering may be in use. This can result in significantly degraded performance."),this.gNt=!0;for(const e of this.yNt)this.LNt(e);j.Kn(this.yNt),this.g5t&&this.g5t.YOt();for(const h of t.runOnStartupFunctions)this.GLt.push(this.HNt(h));if(await Promise.all([this.h7.WU(),...this.GLt]),j.Kn(this.GLt),!this.h7.jU())return this.g5t&&await this.g5t.ZOt(),await this.JIt.g0(new j.Event("beforeruntimestart")),await this.qA(),this.aLt.postMessage({type:"runtime-ready"}),this;this.g5t&&this.g5t.XOt()}async HNt(t){try{await t(this.ANt)}catch(t){console.error("[C3 runtime] Error in runOnStartup function: ",t)}}async VNt(t){const s=t.project,i=(this.CLt=s[0],this.PLt=s[16],this.RLt=s[31],this.ALt=s[38],this.ELt=s[36],s[39]||"loading-logo.png"),e=(this.w5t=!!s[9],this.FLt=this.LLt=s[10],this.DLt=this.NLt=s[11],this.JLt.HFt(this.FLt,this.DLt),this.kLt=this.FLt/2,this.OLt=this.DLt/2,this.S5t=s[37],this.y5t=!!s[40],this.f2=s[14],this.VLt=s[15],this.jLt=s[42],this.HLt=s[17],this.WLt=!!s[18],this.BLt=s[19],this.u5t=s[21],this.M5t=s[22],this.h7);if(e.yU(s[45]),e.YU(s[7],s[25]),e.wU(s[8]),e.bU(s[32]),e.vU(s[28]),e.zU(s[29]),0===this.BLt){let t;(t="flat"===e.LO()?e.TU()+i:i)&&(this.ULt=e.FU({url:t}))}this.g5t&&(this.g5t.fOt(j.nDt.yOt(s[12])),this.g5t.mOt(s[23]?"high":"low"),this.g5t.Vb(0!==s[24]),this.g5t.ykt(s[34]),this.g5t.SOt(s[41]),this.g5t.Skt(s[13]),this.g5t.wkt(s[30]),this.g5t.vkt(s[46],s[47]),this.g5t.Mkt(s[26]),this.g5t.Tkt(s[48]),this.g5t.xkt(s[50]));const h=s[43],r=(h&&await this.UNt(h),this.zNt(),this.zLt.A_t(),this.p5t=self.JNt(),s[2]);for(const l of r[1])this.zLt.E_t(l);for(const u of r[0])this.zLt.R_t(u);this.p5t=self.JNt(),this.qNt(),this.zLt.N_t();for(const c of s[3]){const f=j.qut.BT(this,this.ZLt.length,c);this.ZLt.push(f),this.QLt.set(f.Mf().toLowerCase(),f),this.t5t.set(f.NJ(),f)}for(const d of s[4]){const p=this.ZLt[d[0]];p.RCt(d)}for(const m of s[27]){const g=m.map(t=>this.ZLt[t]);this.i5t.push(j.Tr(j.RPt,this,g))}this.XNt();for(const y of this.ZLt)y.ECt();for(const S of s[5])this.lX.BT(S);const n=s[1];if(n){const w=this.lX.L$(n);w&&this.lX.k$(w)}for(const b of s[35])this.qLt.BT(b);for(const M of s[33])this.ntt.BT(M);for(const v of s[44])this.XLt.BT(v);this.XLt.zut()||(this.XLt.Gr(),this.XLt=null);for(const T of s[49])this.ict.BT(T);this.ict.tct()||(this.ict.Gr(),this.ict=null);for(const x of s[6])this.tdt.BT(x);this.tdt.C1t(),this.YNt(),j.Kn(this.p5t),this.R5();let o="any",a=s[20];1===a?o="portrait":2===a&&(o="landscape"),this.Ef("runtime","set-target-orientation",{targetOrientation:o})}async UNt(t){const s=t.format;"image-sequence"===s?this.T5t=new self.C3ExportToImageSequence(this,t):"image-sequence-gif"===s?this.T5t=new self.C3ExportToGIF(this,t):"webm"===s?this.T5t=new self.C3ExportToWebMVideo(this,t):"mp4"===s&&(this.T5t=new self.C3ExportToMP4Video(this,t)),this.S5t="unlimited-frame",this.g5t.fOt("off"),this.W3=1,self.devicePixelRatio=1,await this.SO("runtime","set-exporting-to-video",{message:this.T5t.GetExportingMessageForPercent(0),duration:this.T5t.WW()})}KOt(){return this.BLt}Ykt(){return null!==this.T5t}$Nt(){return this.T5t.WW()}KNt(){return this.T5t.GetFramerate()}ZNt(){return this.T5t.JPt({width:this.g5t.GL(),height:this.g5t.IL()})}QNt(){const t=this.P5t/this.KNt();return this.T5t.AddFrame(this.g5t.uOt(),t)}tBt(){this.T5t&&this.T5t.ket()}CNt(t){this.T5t.OnOfflineAudioRenderCompleted(t)}sBt(){return this.T5t.Lb()}rLt(){return this.bLt}Gy(){return this.wy}vO(t){this.GLt.push(t)}RY(t){this.ILt=!!t}iBt(t){this.ILt&&this._Lt.push(t)}OY(){return this._Lt}TCt(){return this.s5t++}DCt(){return this.s5t}F3t(t){this.e5t.add(t)}D3t(t){this.e5t.delete(t)}Xkt(){return this.e5t}async jNt(t){this.g5t&&(await this.g5t.zo(t),this.g5t.jOt(this.BLt))}async qA(){this.A5t=!0,this.W5t=Date.now();let s=null,t=new Promise(t=>s=t);if(this.WLt){for(const h of this.ZLt)h.RJ()||h.HCt()||!h.BL()||h.Rxt();(async()=>{await this.h7.WU(),await t,this.wy=!1,this.eBt()})()}else this.wy=!1;this.h7.VU(),this.a4()&&H.RuntimeInit(n);for(const r of this.lX.qk())r.t$();this.Ykt()&&await this.ZNt();const i=this.lX.O$(),e=(await i.pY(null,this.bM()),await i.xY(!0),this.Z5t=performance.now(),s(),this.WLt||this.eBt(),await this.SO("runtime","before-start-ticking"));e.isSuspended&&!this.Ykt()?(this.L5t++,this.O5t=!0):this.yZ()}eBt(){this.QB(j.XY.qY.JY.hBt,null,null),this.Ef("runtime","register-sw")}DSt(t){t=Math.floor(t);const s=this.p5t;if(t<0||t>=s.length)throw new Error("invalid object reference");return s[t]}qNt(){for(const t of self.rBt){const s=j.first(Object.keys(t));this.m5t.push(s)}}Z1t(t){t=Math.floor(t);const s=this.m5t;if(t<0||t>=s.length)throw new Error("invalid prop reference");return s[t]}nBt(){return this.fLt}oBt(){return this.cLt}ID(){return this.dLt}JOt(){return this.lLt}aBt(){return this.uLt}HD(){return this.tdt}ek(){return this.tdt.ek()}j1t(){return this.tdt.j1t()}YD(){return this.tdt.YD()}H1t(){return this.tdt.H1t()}fvt(){return 0===this.j1t().wdt()}z1t(){return this.tdt.z1t()}v3t(){return this.zLt}UU(){return this.zLt.UU()}nJ(t){if((t=Math.floor(t))<0||t>=this.ZLt.length)throw new RangeError("invalid index");return this.ZLt[t]}lBt(t){return this.QLt.get(t.toLowerCase())||null}m8(t){return this.t5t.get(t)||null}$rt(t){const s=j.DL.t5(t);return s?s.h5():null}PJ(){return this.ZLt}*uBt(){for(const t of this.ZLt)t.RJ()||(yield*t.instances())}a0(){return this.JIt}BD(){return this.WX}T$(t){t.runtime=this.kL();const s=this.a4()&&!this.tdt.C5();s&&H.StartMeasuringScriptTime(),this.WX.dispatchEvent(t),s&&H.AddScriptTime()}HY(t){return t.runtime=this.kL(),this.WX.g0(t)}PD(){return this.FLt}AD(){return this.DLt}cBt(t,s){if(this.FLt!==t||this.DLt!==s){this.FLt=t,this.DLt=s;const i=this.Uk();i.z$(),i.J$()}}o9(){return this.LLt}a9(){return this.NLt}aOt(t,s){if(this.LLt!==t||this.NLt!==s){this.LLt=t,this.NLt=s;const i=this.Uk();i.z$(),i.J$()}}$kt(t){this.Ykt()||(this.W3=t)}CL(){return this.W3}hq(){return this.kLt}rq(){return this.OLt}yL(){return this.g5t}cq(){return this.g5t?this.g5t.cq():this.LLt}fq(){return this.g5t?this.g5t.fq():this.NLt}lB(){return this.g5t?this.g5t.lB():1}Oj(){return this.g5t?this.g5t.Oj():1}Jq(){return this.g5t?this.g5t.Jq():1}Uq(){return this.g5t?this.g5t.Uq():1}tB(){return this.g5t?this.g5t.tB():0}sB(){return this.g5t?this.g5t.sB():0}fBt(){return this.g5t?this.g5t.ML():0}dBt(){return this.g5t?this.g5t.TL():0}Dj(){return this.g5t?this.g5t.Dj():"off"}Tq(t){return this.g5t?this.g5t.Tq(t):null}zz(t){this.g5t&&this.g5t.zz(t)}Mq(){return this.VLt}Wkt(){return this.jLt}Vkt(){return this.HLt}_k(){return this.g5t?this.g5t._k():NaN}MT(){return"nearest"!==this.ED()}Ck(){return this.S5t}Pk(t){this.S5t!==t&&(this.S5t=t,-1!==this.ekt||-1!==this._5t)&&(this.pBt(),this.mBt())}ED(){return this.f2}ICt(){return this.WLt}HOt(){return this.ULt}QOt(){this.ULt&&(this.ULt.oC(),this.ULt.Gr(),this.ULt=null)}Uk(){return this.lX}Vk(){return this.lX.Vk()}Utt(){return this.ntt}gBt(){return this.qLt}vRt(){return this.XLt}xct(){return this.ict}pD(){return this.h7}FU(t){return this.h7.FU(t)}x5(t,s,i,e,h,r){if(r&&this.XLt){if(t instanceof j.qut&&t.RJ()){const o=t.yyt(),a=Math.floor(this.Wk()*o.length);return this.x5(o[a],s,i,e,h,r)}const n=this.XLt.Jut(t,r);if(n){const l=this.mJ(n,s,!1,i,e,!1,h,void 0,h);return this.XLt.Xut(l,r),l}}return this.mJ(t,s,!1,i,e,!1,h,void 0,h)}mJ(t,s,i,e,h,r,n,o,a){let l=null,u=null;if(t instanceof j.qut){if((u=t).RJ()){const b=u.yyt(),M=Math.floor(this.Wk()*b.length);u=b[M]}l=u.aJ()}else l=t,u=this.nJ(l[1]);const c=u.l5().BL();if(this.wy&&c&&!u.HCt())return null;const f=s;c||(s=null);let d;d=i&&!r&&l&&!this.c5t.has(l[2])?l[2]:this.u5t++;const p=l?l[0]:null,m=j.Tr(j.Instance,{runtime:this,cB:u,P4:s,zPt:p,YPt:l?l[3]:null,uid:d,tags:l?l[6]:null});this.c5t.set(d,m);let g=null,y=(c&&(g=m.lO(),void 0!==e&&void 0!==h&&(g.ZM(e),g.sv(h)),u.yPt(!0)),s&&(a||s.yJ(m,!0),s.zk().gY(u)),this.l5t++,!0);if(o){const v=o.fB();if(v.TB()&&u.TB()){const T=u.fY(),x=v.fY();T===x&&(y=!1)}}if(u.TB()&&!i&&!r&&y){const G=new Set;for(const _ of u.fY().KY())if(_!==u){const I=this.yBt(_,g,G);if(I){const C=this.mJ(I,f,!1,g?g.KM():e,g?g.tv():h,!0,!1,void 0,a);m.ZY(C)}else{const N=this.mJ(_,f,!1,g?g.KM():e,g?g.tv():h,!0,!1,void 0,a);m.ZY(N)}}for(const P of m.xB()){P.ZY(m);for(const R of m.xB())P!==R&&P.ZY(R)}}if(c&&!i&&n&&this.SBt(m,p,g,s,e,h,a),u.TB()&&!i&&!r&&n)for(const A of m.xB()){const E=A.lO();if(E){const B=A.l5(),F=A.fB().aJ()[0];B.BL()?this.SBt(A,F,E,s,E.KM(),E.tv(),a):this.SBt(A,F,E,s,void 0,void 0,a)}}if(!r&&n){void 0===e&&(e=p[0]),void 0===h&&(h=p[1]);const D=g.a6(),W=e-g.KM()+D.KM(),V=h-g.tv()+D.tv();D.A4(W,V)}u.fPt();const O=l?j.do(l[5]):null,L=l?l[4].map(t=>j.do(t)):null,S=c&&p&&p[13];if(S&&m.sRt(),m.VCt(O,L),S){const k=p[13];m.sW().qxt(k[2],k[0],k[1])}this.r5t.push(m),this.o5t=!0,this.a4()&&H.InstanceCreated(m);const w=this.SNt.instancecreate;return w.fW=m,this.JIt.dispatchEvent(w),m}wAt(t){const s=t[0],i=t[1],e=t[2],h=t[6];if(h)return h;const r=this.lX.N$(s),n=r.uO(i);return n.cJ(e)}yBt(t,s,i){const e=s?.MRt()??[];for(const h of e){const r=this.wAt(h),n=!!h[4],o=this.nJ(r[1]);if(!i.has(r)&&t===o&&n)return i.add(r),r}}SBt(a,t,s,l,u,c,f){const i=s.WEt(),e=s.MRt();if(a.lO().VEt(i),e){void 0===u&&(u=t[0]),void 0===c&&(c=t[1]);const d=new Set,p=t[0],m=t[1];for(const g of e){let t=g[0],s=g[1],i=g[2],e=g[3],h=!!g[4],r=g[5],n=g[6],o;if(n)o=n;else{const b=this.lX.N$(t),M=b.uO(s);o=M.cJ(i)}const y=this.nJ(o[1]),S=a.TRt(y),w=d.has(y);if(S&&!w&&h){const v=a.xRt(y),T=(v.lO().JPt(o[0]),u+o[0][0]-p),x=c+o[0][1]-m;v.lO().A4(T,x),v.lO().VEt(r),a.g6(v,{M6:!!(e>>0&1),T6:!!(e>>1&1),G6:!!(e>>2&1),I6:!!(e>>3&1),P6:!!(e>>4&1),L6:!!(e>>5&1),A6:!!(e>>6&1),F6:!!(e>>7&1),k6:!!(e>>8&1)}),d.add(y)}else{const G=u+o[0][0]-p,_=c+o[0][1]-m,I=this.mJ(o,l,!1,G,_,!1,!0,a,f);I.lO().VEt(r),a.g6(I,{M6:!!(e>>0&1),T6:!!(e>>1&1),G6:!!(e>>2&1),I6:!!(e>>3&1),P6:!!(e>>4&1),L6:!!(e>>5&1),A6:!!(e>>6&1),F6:!!(e>>7&1),k6:!!(e>>8&1)})}}}}SB(i){if(!this.f5t.has(i)){let t=i.fB(),s=this.n5t.get(t);if(s){if(s.has(i))return;s.add(i)}else(s=new Set).add(i),this.n5t.set(t,s);if(this.a4()&&H.InstanceDestroyed(i),i.eRt(),this.o5t=!0,i.TB())for(const e of i.xB())this.SB(e);for(const h of i.children())h.N6()&&this.SB(h);if(!this.lX.P5()&&!this.hNt){const r=this.HD();r._5(!0),i.DRt(),r._5(!1)}i.kRt(this.lX.P5())}}R5(){this.o5t&&(this.a5t=!0,this.wBt(),this.bBt(),this.a5t=!1,this.o5t=!1,this.gO())}wBt(){for(const t of this.r5t){const s=t.fB();s.yJ(t);for(const i of s.rpt())i.yJ(t),i.fPt()}j.Kn(this.r5t)}bBt(){this.JIt.s0(!0);for(const[t,s]of this.n5t.entries())this.MBt(t,s),s.clear();this.n5t.clear(),this.JIt.s0(!1)}MBt(t,s){for(const i of s){const e=this.SNt.instancedestroy,h=(e.fW=i,this.JIt.dispatchEvent(e),this.c5t.delete(i.GB()),this.$5t.delete(i),i.lO());h&&(h.UEt(),h.MJ(),h.eRt()),this.f5t.add(i),this.l5t--}j.uo(t.w5(),s),t.fPt(),this.d5t.add(t);for(const r of t.rpt())j.uo(r.w5(),s),r.fPt(),this.d5t.add(r);if(t.l5().BL()){const n=new Set([...s].map(t=>t.lO().uO()));for(const o of n)o.F9(s)}}pPt(){return this.r5t}*y2t(t){for(const s of this.pPt())t.RJ()?s.fB().dvt(t)&&(yield s):s.fB()===t&&(yield s)}WCt(){return this.u5t++}jCt(t,s){this.c5t.set(t,s)}u8(t){this.k5t!==(t=!!t)&&(this.k5t=!!t,this.k5t)&&this.O5t&&(this.d8(!1),this.O5t=!1)}c8(){return this.k5t}TY(){this.JIt.dispatchEvent(j.Tr(j.Event,"renderercontextlost")),this.d8(!0);for(const s of this.ZLt)!s.RJ()&&s.UCt()&&s.MY();const t=this.Vk();t&&t.TY(),j.V_t.g7(),j.kU.g7()}async bOt(){await this.Vk().pY(null,this.bM()),this.JIt.dispatchEvent(j.Tr(j.Event,"renderercontextrestored")),this.d8(!1),this.gO()}GNt(t){if(this.k5t){const s=t.hidden;this.d8(s),(this.O5t=s)||this.gO()}}PNt(t){this.hLt()&&this.M5t&&!j.mi.xi&&!t.data.parentHasFocus&&(this.d8(!0),this.v5t=!0)}RNt(){this.v5t&&(this.d8(!1),this.v5t=!1)}mBt(){const t=this.x5t;"vsync"===this.S5t?-1===this.ekt&&(this.ekt=self.requestAnimationFrame(t.G5t)):"unlimited-tick"===this.S5t?(-1===this._5t&&(this._5t=j._o(t.I5t)),-1===this.ekt&&(this.ekt=self.requestAnimationFrame(t.C5t))):-1===this._5t&&(this._5t=j._o(t.G5t))}pBt(){-1!==this.ekt&&(self.cancelAnimationFrame(this.ekt),this.ekt=-1),-1!==this._5t&&(j.Io(this._5t),this._5t=-1)}ck(){return 0<this.L5t}d8(t){if(!this.Ykt()){const s=this.ck(),i=(this.L5t+=t?1:-1,this.L5t<0&&(this.L5t=0),this.ck());if(!s&&i)console.log("[Construct] Suspending"),this.pBt(),this.JIt.dispatchEvent(j.Tr(j.Event,"suspend")),this.QB(j.XY.qY.JY.vBt,null,null);else if(s&&!i){console.log("[Construct] Resuming");const e=performance.now();this.V5t=e,this.Z5t=e,this.K5t=0,this.Q5t=0,this.tNt=0,this.sNt=0,this.eNt=0,this.iNt=0,this.JIt.dispatchEvent(j.Tr(j.Event,"resume")),this.QB(j.XY.qY.JY.TBt,null,null),this.Apt()||this.yZ(e)}}}Kj(t){this.bNt.Fc(t)}s8(t){this.MNt.Fc(t)}Qj(t){this.vNt.Fc(t)}Zj(t){this.bNt.V0(t)}i8(t){this.MNt.V0(t)}t8(t){this.vNt.V0(t)}xBt(t,s){let i=s?performance.now():0,e;return t instanceof h?(e=t.l4(),s&&H.AddIndividualBehaviorTickTime(t.behavior,performance.now()-i)):(e=t.yZ(),s&&H.AddIndividualBehaviorTickTime(t.aW(),performance.now()-i)),e}GBt(){const t=this.a4();this.bNt.kd(!0);for(const s of this.bNt)this.xBt(s,t);this.bNt.kd(!1)}_Bt(t,s){let i=s?performance.now():0,e;return t instanceof h?(e=t.h8(),s&&H.AddIndividualBehaviorTickTime(t.behavior,performance.now()-i)):(e=t.w_t(),s&&H.AddIndividualBehaviorTickTime(t.aW(),performance.now()-i)),e}IBt(){const t=this.a4();this.MNt.kd(!0);for(const s of this.MNt)this._Bt(s,t);this.MNt.kd(!1)}CBt(t,s){let i=s?performance.now():0,e;return t instanceof h?(e=t.c4(),s&&H.AddIndividualBehaviorTickTime(t.behavior,performance.now()-i)):(e=t.pGt(),s&&H.AddIndividualBehaviorTickTime(t.aW(),performance.now()-i)),e}PBt(){const t=this.a4();this.vNt.kd(!0);for(const s of this.vNt)this.CBt(s,t);this.vNt.kd(!1)}*RBt(){const t=this.a4();this.bNt.kd(!0);for(const s of this.bNt){const i=this.xBt(s,t);j.ea(i)&&(yield*i)}this.bNt.kd(!1)}*ABt(){const t=this.a4();this.MNt.kd(!0);for(const s of this.MNt){const i=this._Bt(s,t);j.ea(i)&&(yield*i)}this.MNt.kd(!1)}*EBt(){const t=this.a4();this.vNt.kd(!0);for(const s of this.vNt){const i=this.CBt(s,t);j.ea(i)&&(yield*i)}this.vNt.kd(!1)}async yZ(a,t,s){this.F5t=!0;const l="background-wake"===s,u="background-wake"!==s&&"skip-render"!==s,c=this.Uk(),f=this.yL();if(this.A5t&&(!this.ck()||t||l)){let t=performance.now(),s=(this.E5t=!0,this.FBt(a||0),this.tNt++,this.DBt(),this.kBt()),i=(this.u2t()&&await s,this.JIt.y0(this.SNt.pretick)),e=(i instanceof Promise&&await i,this.T$(this.wNt.pretick),this.OBt()),h=(this.u2t()&&await e,this.LBt()&&await this.NBt(),c.Yk()&&await this.BBt(),this.WBt()),r=(this.u2t()&&await h,c.Vk()),n=r.nY(),o=!1;if(-1!==n&&(r.aY(),f.rY()!==n)){const d=this.yL().CY(n);this.ID()&&(o=!0,await d)}this.Ef("canvas","update-html-layer-dom-state",{layersDomState:r.LJ().filter(t=>t.IN()).map(t=>t.W9())}),u&&this.oF(),o&&this.Ef("canvas","cleanup-html-layers"),this.Ykt()&&(await this.QNt(),this.mk()>=this.$Nt())?this.sBt():(this.ck()||l||this.mBt(),this.P5t++,this.R5t++,this.E5t=!1,this.iNt+=performance.now()-t)}}async kBt(){const t=this.tdt,s=this.a4();this.R5(),t._5(!0),this.wpt(this.Vk()),s&&H.StartMeasuringTime(),this.u2t()?await t.Zpt():t.qpt(),s&&H.AddEventsTime(),this.bpt(),t._5(!1),this.R5(),t._5(!0)}async OBt(){const t=this.tdt,s=this.a4(),i=this.u2t(),e=this.JIt,h=this.SNt,r=this.wNt;s&&H.StartMeasuringTime(),i?await this.VBt(this.RBt()):this.GBt(),i?await this.VBt(this.ABt()):this.IBt(),s&&H.AddBehaviorTotalTickTime(),s&&H.StartMeasuringTime(),i?await this.jBt(h.tick):e.dispatchEvent(h.tick),s&&H.AddPluginTotalTickTime(),t._5(!1),this.T$(r.tick)}async WBt(){const t=this.tdt,s=this.JIt,i=this.SNt,e=this.wNt,h=this.a4(),r=this.u2t();h&&H.StartMeasuringTime(),r?await t.Mpt(this.lX):t.Spt(this.lX),h&&H.AddEventsTime(),this.JLt.dFt(),this.DBt(),this.D5t=!1,t._5(!0),h&&H.StartMeasuringTime(),r?await this.VBt(this.EBt()):this.PBt(),h&&H.AddBehaviorTotalTickTime(),h&&H.StartMeasuringTime(),r?await this.jBt(i.tick2):s.dispatchEvent(i.tick2),h&&H.AddPluginTotalTickTime(),t._5(!1),this.T$(e.tick2),r&&await t.Ept()}DBt(){if(0!==this.f5t.size){const t=this.JIt;t.s0(!0);for(const s of this.d5t)s.Vpt().R0t(this.f5t);this.d5t.clear(),this.tdt.tmt(this.f5t);for(const i of this.f5t)i.Gr();this.f5t.clear(),t.s0(!1)}}async BBt(){let t=this.Uk(),s=0;for(;t.Yk()&&s++<10;)await this.HBt(t.U$())}FBt(t){let s=0;if(this.Ykt())s=1/this.KNt(),this.j5t=s,this.H5t=s;else if(0!==this.V5t){const i=Math.max(t-this.V5t,0);.5<(s=i/1e3)&&(s=0),this.j5t=s,this.H5t=j.Rr(s,this.J5t,this.z5t)}this.V5t=t,this.U5t=this.H5t*this.HPt,this.q5t.Fc(this.U5t),this.X5t.Fc(s*this.HPt),this.Y5t.Fc(this.H5t);for(const[e,h]of this.$5t)h.Fc(this.H5t*e.Sk());this.g5t&&this.g5t.EOt(),1e3<=t-this.Z5t&&(this.Z5t+=1e3,1e3<=t-this.Z5t&&(this.Z5t=t),this.Q5t=this.K5t,this.K5t=0,this.sNt=this.tNt,this.tNt=0,this.eNt=Math.min(this.iNt/1e3,1),this.iNt=0,this.g5t&&this.g5t.AOt(),this.JLt.lFt(),this.a4())&&H.Update1sPerfStats()}QPt(t,s){if(s){if(!this.$5t.has(t)){const i=j.Tr(j.H0);i.X0(this.q5t),this.$5t.set(t,i)}}else this.$5t.delete(t)}tRt(t){const s=this.$5t.get(t);return s?s.oi():this.mk()}async HBt(t){const s=this.JIt,i=this.Uk(),e=i.Vk();await e.i$(),e.vY(t,this.bM()),e===t&&this.tdt.r$(),this.JLt.dFt(),this.DBt(),s.dispatchEvent(this.SNt.beforelayoutchange),j.e0.b0(!0),await t.pY(e,this.bM()),j.e0.b0(!1),await t.xY(!1),s.dispatchEvent(this.SNt.layoutchange),this.gO(),this.D5t=!0,this.R5(),this.tBt()}gO(){this.b5t=!0}MOt(){return this.g5t?this.g5t.MOt():null}vOt(){return this.g5t?this.g5t.vOt():null}bM(){return this.g5t?this.g5t.bM():null}oF(){const i=this.g5t;if(i&&!i.wOt()){const e=this.bM(),t=e.mE(),h=t&&e.zb(),r=t&&e.hw();if(h&&e.sE(),this.b5t||this.Ykt()){const n=this.lX.Vk(),o=(this.K5t++,e.qA(),this.a4());o&&H.StartMeasuringTime(),this.b5t=!1;let t=null,s=(h&&(t=i.kOt().jP(),e.pE(t)),null);r&&(s=e.StartFrameTiming(2*(1+n.QX())),e.StartMeasuringRenderPassTime(0,1)),this.y9()&&"low"===i.vq()?e.nA(i.cq(),i.fq()):e.oA(),this.UBt(this.bM(),n),t&&e.gE(t),r&&(e.StopMeasuringRenderPassTime(),this.g5t.OOt(s)),e.Lb(),o&&(H.AddDrawCallsTime(),H.UpdateInspectHighlight()),i&&i.NOt()}else e.Wb()}}m$(t){return"low"===this.yL().vq()||t.zb()&&(this.Mq()||this.y9())}UBt(s,i){s.mw(),s.xA(),s.gA(1,1,1,1),s.rE(null),s.bA(null),s.YA(this.y9()),this.m$(s)&&i.d$(s);const e=i.rY();for(let t=1;t<e;++t)i.w$(s,t),s.hw()&&s.Restart();this.m$(s)||i.d$(s),i.S$(s)}QB(t,s,i){if(!this.A5t)return!1;let e=!this.E5t&&!this.tdt.Opt(),h=0;e&&(h=performance.now());const r=this.a4(),n=(r&&this.I8(!1),this.tdt.Gpt(this.lX,t,s,i));if(e){const o=performance.now()-h;this.iNt+=o,r&&H.AddTriggersTime(o)}return r&&this.I8(!0),n}iGt(t,s,i){if(!this.u2t())return this.QB(t,s,i);if(this.Apt())throw new Error("called DebugTrigger() while stopped on breakpoint");if(this.E5t||this.tdt.Opt())return this.tdt.Cpt(this.lX,t,s,i);throw new Error("called DebugTrigger() outside of event code - use TriggerAsync() instead")}async s4(t,s,i){if(!this.u2t())return this.QB(t,s,i);if(!this.A5t)return!1;if(this.Apt())return this.tdt.Ppt(t,s,i);if(!this.Vk())return this.tdt._pt(t,s,i);let e=performance.now(),h=this.tdt.Cpt(this.lX,t,s,i),r=h.next();for(;!r.done;)await this.Tpt(r.value),r=h.next();return this.ck()||this.tdt.Opt()||(await this.tdt.Ept(),this.F5t&&!this.E5t&&this.mBt()),this.iNt+=performance.now()-e,r.value}eGt(t,s,i){const e=this.a4(),h=(e&&this.I8(!1),this.tdt.Fpt(this.lX,t,s,i));return e&&this.I8(!0),h}hGt(t,s,i){return this.tdt.Dpt(this.lX,t,s,i)}rGt(t){return this.N5t.Fc(t)}wpt(t){this.h5t.push(t)}bpt(){if(!this.h5t.length)throw new Error("layout stack empty");this.h5t.pop()}oO(){return this.h5t.length?this.h5t.at(-1):this.Vk()}fk(t){return t&&-1!==t.Sk()?this.H5t*t.Sk():this.U5t}mZ(){return this.U5t}gZ(){return this.H5t}pk(){return this.j5t}Sk(){return this.HPt}wk(t){(isNaN(t)||t<0)&&(t=0),this.HPt=t}Ek(t){this.J5t=Math.max(t,0)}Ak(){return this.J5t}kk(t){this.z5t=Math.max(t,0)}Dk(){return this.z5t}bk(){return this.Q5t}vk(){return this.sNt}xk(){return this.eNt}zBt(){return this.W5t}mk(){return this.q5t.oi()}JBt(){return this.X5t.oi()}yk(){return this.Y5t.oi()}wst(){return this.P5t}qBt(){return this.R5t}XBt(){return this.l5t}MD(){return this.CLt}TD(){return this.PLt}YBt(){return this.RLt}$Bt(){return this.ALt}GD(){return this.ELt}hO(t){if(this.hNt)throw new Error("cannot call while loading state - wait until afterload event");return this.c5t.get(t)||null}$Y(){this.c5t.clear();for(const t of this.ZLt)if(!t.RJ())for(const s of t.w5())this.c5t.set(s.GB(),s)}hLt(){return"preview"===this.mLt}a4(){return this.MLt}dL(){return this.mLt}pL(){return"nwjs"===this.dL()||this.gLt}nLt(){return"cordova"===this.mLt}KBt(){return"Android"===j.mi.gi&&("cordova"===this.mLt||"playable-ad-single-file"===this.mLt||"playable-ad-zip"===this.mLt||"instant-games"===this.mLt)}ZBt(){return this.zH}QBt(){return this.yLt}mL(){return this.SLt}t4t(){return this.wLt}yD(){return this.JLt}B_t(){return this.zLt.B_t()}W_t(){return this.zLt.W_t()}y9(){return this.y5t}s4t(){return this.bM().zS(this.a9())}jS(t){return this.bM().jS(t||this.a9())}i4t(){return this.D5t}e4t(t){this.w5t!==(t=!!t)&&(this.w5t=t,this.Uk().J$(),this.gO())}DD(){return this.w5t}h4t(t){if(!this.KLt.has(t)){const i=()=>this.r4t(t);this.KLt.set(t,i),t.a0().addEventListener("animationframeimagechange",i)}const s=this.uy.ty(t);return s.xy()||s._y().then(()=>this.gO()),s}r4t(t){this.uy.ny(t)}YLt(t){const s=[];for(const i of t.iPt())for(const e of i.FW()){const h=e.BW();s.push({source:e,width:h.Wm(),height:h.$m(),tag:e.hV()})}return{My:s}}async $Lt(t){const s=j.Tr(j.Ld),i=[],h=new Map;for(const n of t.iPt())for(const o of n.FW()){const a=o.BW().oIt();h.has(a)||(h.set(a,null),i.push(s.Fc(async()=>{const t=await a.b7();h.set(a,t)})))}await Promise.all(i);const e=[];for(const l of t.iPt())for(const u of l.FW())e.push(s.Fc(async()=>{const t=u.BW(),s=h.get(t.oIt()),i=await t.aIt(s),e=await createImageBitmap(i);return{Cy:e}}));const r=await Promise.all(e);for(const c of h.values())c instanceof ImageBitmap&&c.close&&c.close();return{My:r}}n4t(t){this.rNt=t,this.nNt=!1}o4t(){this.rNt="",this.nNt=!0}a4t(t){this.oNt=t}rTt(t){this.g4=t}l4t(){return this.aNt}LBt(){return!!(this.rNt||this.nNt||this.oNt||null!==this.g4)}async NBt(){if(this.rNt&&(this.R5(),await this.u4t(this.rNt),this.c4t()),this.oNt&&(await this.f4t(this.oNt),this.c4t(),this.a4())&&H.StepIfPausedInDebugger(),this.nNt){const t=await this.d4t();this.aNt=t,await this.s4(j.XY.qY.JY.p4t,null),this.aNt="",this.c4t()}if(null!==this.g4){this.R5();try{await this.m4t(this.g4),this.aNt=this.g4,await this.s4(j.XY.qY.JY.g4t,null),this.aNt=""}catch(t){console.error("[Construct] Failed to load state from JSON string: ",t),await this.s4(j.XY.qY.JY.y4t,null)}this.c4t()}}c4t(){this.rNt="",this.nNt=!1,this.oNt="",this.g4=null}RL(){return this.lNt||(this.lNt=localforage.Vi({name:"c3-localstorage-"+this.YBt(),description:this.MD()})),this.lNt}S4t(){return this.uNt||(this.uNt=localforage.Vi({name:"c3-savegames-"+this.YBt(),description:this.MD()})),this.uNt}async u4t(t){const s=await this.d4t();try{await this.S4t().setItem(t,s),console.log("[Construct] Saved state to storage ("+s.length+" chars)"),this.aNt=s,await this.s4(j.XY.qY.JY.p4t,null),this.aNt=""}catch(t){console.error("[Construct] Failed to save state to storage: ",t),await this.s4(j.XY.qY.JY.w4t,null)}}async f4t(t){try{const s=await this.S4t().getItem(t);if(!s)throw new Error("empty slot");console.log("[Construct] Loaded state from storage ("+s.length+" chars)"),await this.m4t(s),this.aNt=s,await this.s4(j.XY.qY.JY.g4t,null),this.aNt=""}catch(t){console.error("[Construct] Failed to load state from storage: ",t),await this.s4(j.XY.qY.JY.y4t,null)}}async d4t(){const t={c3save:!0,version:1,rt:{time:this.mk(),timeRaw:this.JBt(),walltime:this.yk(),timescale:this.Sk(),tickcount:this.wst(),next_uid:this.u5t,running_layout:this.Vk().NJ(),start_time_offset:Date.now()-this.W5t},types:{},layouts:{},events:this.tdt.iX(),timelines:this.ntt.iX(),user_script_data:null};for(const i of this.ZLt)i.RJ()||i.xPt()||(t.types[i.NJ().toString()]=i.iX());for(const e of this.lX.qk())t.layouts[e.NJ().toString()]=e.iX();const s=this.b4t("save");return s.saveData=null,await this.HY(s),t.user_script_data=s.saveData,JSON.stringify(t)}LY(){return this.hNt}async m4t(t){const s=this.Uk(),i=JSON.parse(t);if(i.c2save)throw new Error("C2 saves are incompatible with C3 runtime");if(!i.c3save)throw new Error("not valid C3 save data");if(1<i.version)throw new Error("C3 save data from future version");this.nTt(),this.JIt.dispatchEvent(j.Tr(j.Event,"beforeload"));for(const a of this.uBt()){const l=a.fB();l.xPt()||a.SK()}let e=i.rt,h=(this.q5t.Set(e.time),e.hasOwnProperty("timeRaw")&&this.X5t.Set(e.timeRaw),this.Y5t.Set(e.walltime),this.HPt=e.timescale,this.P5t=e.tickcount,this.W5t=Date.now()-e.start_time_offset,e.running_layout),r=!(this.hNt=!0);if(h!==this.Vk().NJ()){const u=s.N$(h);if(!u)return;await this.HBt(u),r=!0}for(const[c,f]of Object.entries(i.layouts)){const d=parseInt(c,10),p=s.N$(d);p&&p.eX(f)}const n=new Set;for(const[m,g]of Object.entries(i.types)){const y=parseInt(m,10),S=this.m8(y);!S||S.RJ()||S.xPt()||S.eX(g,n)}for(const w of this.lX.qk())for(const b of w.X5())b.hX();if(this.R5(),this.$Y(),this.hNt=!1,r){for(const M of this.uBt())M.NY();for(const[v,T]of Object.entries(i.types)){const x=parseInt(v,10),G=this.m8(x);!G||G.RJ()||G.xPt()||G.CPt(T)}}this.u5t=e.next_uid,this.tdt.eX(i.events);for(const _ of this.ZLt)if(!_.RJ()&&_.TB())for(const I of _.w5()){const C=I.IB();for(const P of _.fY().KY())if(P!==_){const R=P.w5();if(C<0||C>=R.length)throw new Error("missing sibling instance");I.ZY(R[C])}}this.ntt.eX(i.timelines),s.z$(),s.J$();for(const A of n)A.FRt();this.oTt(),this.JIt.dispatchEvent(j.Tr(j.Event,"afterload")),this.T$(this.b4t("afterload"));for(const[E,F]of Object.entries(i.types)){const D=parseInt(E,10),k=this.m8(D);k&&k.IPt()}const o=this.b4t("load");o.saveData=i.user_script_data,await this.HY(o),this.gO()}M4t(t,s){return t.lO().kEt()-s.lO().kEt()}M3t(t,s){t.lO()&&!this.DNt.has(t)&&(this.DNt.set(t,s),this.kNt.push(t))}nTt(){this.DNt=new WeakMap,j.Kn(this.kNt)}oTt(t="full",s=null){this.kNt.sort(this.M4t);for(const i of this.kNt)i.bK(this.DNt.get(i),t,s);for(const e of this.kNt)e.NRt(this.DNt.get(e),t,s);this.nTt()}async v4t(t){const s=await Promise.all(t.map(async t=>{const s=this.nLt()&&this.h7.xU();if(s||"playable-ad-single-file"===this.dL()){const i=await this.h7.No(t);return URL.createObjectURL(i)}return new URL(t,location.href).toString()}));this.TNt.T4t(s)}x4t(t,s){this.TNt.G4t(t,s)}_4t(t,s){this.TNt.I4t(t,s)}C4t(t,s,i,e){return this.TNt.C4t(t,s,i,null,null,e)}P4t(t,s,i,e){return this.TNt.P4t(t,s,i,e)}R4t(){return this.TNt.A4t()}iO(t,s){this.Ef("runtime","invoke-download",{url:t,filename:s})}async qOt(t,s,i,e,h,r){if(e=e||s,h=h||i,this.ID()){const n=await this.SO("runtime","raster-svg-image",{blob:t,imageWidth:s,imageHeight:i,surfaceWidth:e,surfaceHeight:h,imageBitmapOpts:r});return n.imageBitmap}{const o=await self.C3_RasterSvgImageBlob(t,s,i,e,h);return r?self.createImageBitmap(o,r):o}}async E4t(t){return this.ID()?this.SO("runtime","get-svg-image-size",{blob:t}):self.C3_GetSvgImageSize(t)}F4t(){this.pNt||(this.pNt=!0,this.Ef("runtime","enable-device-orientation"))}D4t(){this.mNt||(this.mNt=!0,this.Ef("runtime","enable-device-motion"))}Wk(){return this.B5t()}k4t(t){this.B5t=t}INt(){const t=this.bM();return{fps:this.bk(),tps:this.vk(),cpu:this.xk(),gpu:this._k(),layout:this.Vk()?this.Vk().Mf():"",renderer:t.zb()?t.xE():t.GetAdapterInfoString()}}Apt(){return!!this.a4()&&H.Apt()}Tpt(t){return this.u2t()?H.Tpt(t):Promise.resolve()}rSt(){return!!this.u2t()&&H.BreakNext()}O4t(t){this.vLt=!!t,this.L4t()}N4t(){return this.vLt}u2t(){return this.TLt}I8(t){t?this.xLt--:this.xLt++,this.L4t()}L4t(){this.TLt=this.a4()&&this.vLt&&0===this.xLt}Tgt(){return this.a4()&&H.Tgt()}yq(){return this.a4()&&this.bM().mE()&&H.yq()}async VBt(t){if(t)for(const s of t)await this.Tpt(s)}jBt(t){return this.VBt(this.JIt.w0(t))}G1t(t){return this.tdt.G1t(t.name,t.params)}bO(t){if(this.ID())throw new Error("not supported in worker mode");return self.c3_runtimeInterface._GetHTMLWrapElement(t)}kL(){return this.ANt}b4t(t){const s=j.Tr(j.Event,t,!1);return s.runtime=this.ANt,s}zNt(){this.ANt=new self.cD(this),this.wNt={pretick:this.b4t("pretick"),tick:this.b4t("tick"),tick2:this.b4t("tick2")}}XNt(){const t={};for(const s of this.ZLt)t[s.Z1t()]={value:s.e5(),enumerable:!0,writable:!1};this.ANt.WD(t)}YNt(){const t={};for(const s of this.HD().npt())t[s.Z1t()]=s.Q1t();this.ANt.VD(t)}Kk(){return this.FNt}ZL(t,s){this.ENt.set(t,s)}Z5(t){return this.ENt.get(t)}rL(t){if(!(t instanceof self.o5))throw new TypeError("expected IObjectClass");const s=this.Z5(t);if(s&&s instanceof j.qut)return s;throw new Error("invalid IObjectClass")}g5(t){if(!(t instanceof self.uB))throw new TypeError("expected IInstance");const s=this.Z5(t);if(s&&s instanceof j.Instance)return s;throw new Error("invalid IInstance")}aO(t){if(!(t instanceof self.Y6))throw new TypeError("expected IWorldInstance");const s=this.Z5(t);if(s&&s instanceof j.Instance)return s;throw new Error("invalid IInstance")}},self.C3_CreateRuntime=j.oLt.BT,self.C3_InitRuntime=(t,s)=>t.JPt(s)}{const La=self.Vs;La.xNt=class extends La.Mr{constructor(t,s){super(),this.Pf=t,this.B4t=new Map,this.W4t=0,this.V4t=s.inputPort,s.outputPort.onmessage=t=>this.j4t(t),this.H4t=s.maxNumWorkers,this.U4t=1,this.z4t=!1,this.J4t=!1}A4t(){return this.H4t}T4t(t){this.V4t.postMessage({type:"_import_scripts",scripts:t})}G4t(t,s){this.V4t.postMessage({type:"_send_blob",blob:t,id:s})}I4t(t,s){this.V4t.postMessage({type:"_send_buffer",buffer:t,id:s},[t])}C4t(t,s,i,e,h,r){if(i=i||[],"number"==typeof r&&(r=Math.floor(r))<=0)throw new Error("invalid maxWorkerNum");const n=this.W4t++,o={type:t,isBroadcast:!1,maxWorkerNum:r,jobId:n,params:s,transferables:i},a=new Promise((t,s)=>{this.B4t.set(n,{resolve:t,progress:e,reject:s,q4t:!1,maxWorkerNum:r})});return h&&h.B0(()=>this.X4t(n)),this.V4t.postMessage(o,i),this.Y4t(),a}P4t(t,s,i,e){if(i=i||[],"number"==typeof e&&(e=Math.floor(e))<=0)throw new Error("invalid maxWorkerNum");const h=this.W4t++,r={type:t,isBroadcast:!0,maxWorkerNum:e,jobId:h,params:s,transferables:i};this.V4t.postMessage(r,i)}X4t(t){const s=this.B4t.get(t);s&&(s.q4t=!0,s.resolve=null,s.progress=null,s.reject=null,this.V4t.postMessage({type:"_cancel",jobId:t}))}j4t(t){const s=t.data,i=s.type,e=s.jobId;switch(i){case"result":this.$4t(e,s.result);break;case"progress":this.K4t(e,s.progress);break;case"error":this.Z4t(e,s.error);break;case"ready":this.Q4t();break;default:throw new Error(`unknown message from worker '${i}'`)}}$4t(t,s){const i=this.B4t.get(t);if(!i)throw new Error("invalid job ID");i.q4t||i.resolve(s),this.B4t.delete(t)}K4t(t,s){const i=this.B4t.get(t);if(!i)throw new Error("invalid job ID");!i.q4t&&i.progress&&i.progress(s)}Z4t(t,s){const i=this.B4t.get(t);if(!i)throw new Error("invalid job ID");i.q4t||i.reject(s),this.B4t.delete(t)}Q4t(){this.z4t&&(this.z4t=!1,this.U4t++,this.U4t<this.H4t?this.Y4t():this.V4t.postMessage({type:"_no_more_workers"}))}t6t(){let t=0,s=[...this.B4t.values()].sort((t,s)=>{const i=t.maxWorkerNum||1/0,e=s.maxWorkerNum||1/0;return i-e});for(const i of s){const e=i.maxWorkerNum||1/0;t<e&&t++}return t}async Y4t(){if(!(this.U4t>=this.H4t||this.z4t||this.J4t||this.t6t()<=this.U4t))try{this.z4t=!0;const t=await this.Pf.SO("runtime","create-job-worker");t.outputPort.onmessage=t=>this.j4t(t)}catch(t){this.J4t=!0,this.z4t=!1,console.error(`[Construct] Failed to create job worker; stopping creating any more (created ${this.U4t} so far)`,t)}}}}self.C3_Shaders={},self.C3_Shaders.hsladjust={qkt:"varying mediump vec2 vTex;\nuniform lowp sampler2D samplerFront;\nprecision mediump float;\nuniform float huerotate;\nuniform float satadjust;\nuniform float lumadjust;\nvec3 rgb_to_hsl(vec3 color)\n{\nvec3 hsl = vec3(0.0, 0.0, 0.0);\nfloat fmin = min(min(color.r, color.g), color.b);\nfloat fmax = max(max(color.r, color.g), color.b);\nfloat delta = fmax - fmin;\nhsl.z = (fmax + fmin) / 2.0;\nif (delta == 0.0)\n{\nhsl.x = 0.0;\nhsl.y = 0.0;\n}\nelse\n{\nif (hsl.z < 0.5)\nhsl.y = delta / (fmax + fmin);\nelse\nhsl.y = delta / (2.0 - fmax - fmin);\nfloat dR = (((fmax - color.r) / 6.0) + (delta / 2.0)) / delta;\nfloat dG = (((fmax - color.g) / 6.0) + (delta / 2.0)) / delta;\nfloat dB = (((fmax - color.b) / 6.0) + (delta / 2.0)) / delta;\nif (color.r == fmax)\nhsl.x = dB - dG;\nelse if (color.g == fmax)\nhsl.x = (1.0 / 3.0) + dR - dB;\nelse if (color.b == fmax)\nhsl.x = (2.0 / 3.0) + dG - dR;\nif (hsl.x < 0.0)\nhsl.x += 1.0;\nelse if (hsl.x > 1.0)\nhsl.x -= 1.0;\n}\nreturn hsl;\n}\nfloat hue_to_rgb(float f1, float f2, float hue)\n{\nif (hue < 0.0)\nhue += 1.0;\nelse if (hue > 1.0)\nhue -= 1.0;\nfloat ret;\nif ((6.0 * hue) < 1.0)\nret = f1 + (f2 - f1) * 6.0 * hue;\nelse if ((2.0 * hue) < 1.0)\nret = f2;\nelse if ((3.0 * hue) < 2.0)\nret = f1 + (f2 - f1) * ((2.0 / 3.0) - hue) * 6.0;\nelse\nret = f1;\nreturn ret;\n}\nvec3 hsl_to_rgb(vec3 hsl)\n{\nvec3 rgb = vec3(hsl.z);\nif (hsl.y != 0.0)\n{\nfloat f2;\nif (hsl.z < 0.5)\nf2 = hsl.z * (1.0 + hsl.y);\nelse\nf2 = (hsl.z + hsl.y) - (hsl.y * hsl.z);\nfloat f1 = 2.0 * hsl.z - f2;\nrgb.r = hue_to_rgb(f1, f2, hsl.x + (1.0 / 3.0));\nrgb.g = hue_to_rgb(f1, f2, hsl.x);\nrgb.b = hue_to_rgb(f1, f2, hsl.x - (1.0 / 3.0));\n}\nreturn rgb;\n}\nvoid main(void)\n{\nvec4 front = texture2D(samplerFront, vTex);\nvec3 rgb = rgb_to_hsl(front.rgb) + vec3((huerotate > 0.5 ? huerotate - 1.0 : huerotate), 0, (lumadjust - 1.0) * front.a);\nrgb.y *= satadjust;\nrgb = hsl_to_rgb(rgb);\ngl_FragColor = vec4(rgb, front.a);\n}",Jkt:"",Ukt:"%%SAMPLERFRONT_BINDING%% var samplerFront : sampler;\n%%TEXTUREFRONT_BINDING%% var textureFront : texture_2d<f32>;\nstruct ShaderParams {\nhuerotate : f32,\nsatadjust : f32,\nlumadjust : f32\n};\n%%SHADERPARAMS_BINDING%% var<uniform> shaderParams : ShaderParams;\n%%C3_UTILITY_FUNCTIONS%%\n%%FRAGMENTINPUT_STRUCT%%\n%%FRAGMENTOUTPUT_STRUCT%%\n@fragment\nfn main(input : FragmentInput) -> FragmentOutput\n{\nvar front : vec4<f32> = textureSample(textureFront, samplerFront, input.fragUV);\nvar huerotate : f32 = shaderParams.huerotate;\nif (huerotate > 0.5)\n{\nhuerotate = huerotate - 1.0;\n}\nvar rgb : vec3<f32> = c3_RGBtoHSL(front.rgb) + vec3<f32>(huerotate, 0.0, (shaderParams.lumadjust - 1.0) * front.a);\nrgb.y = rgb.y * shaderParams.satadjust;\nrgb = c3_HSLtoRGB(rgb);\nvar output : FragmentOutput;\noutput.color = vec4<f32>(rgb, front.a);\nreturn output;\n}",mM:!1,yM:!1,sM:0,eM:0,rM:!1,oM:!1,lM:!0,cM:!1,dM:!1,parameters:[["huerotate",0,"percent"],["satadjust",0,"percent"],["lumadjust",0,"percent"]]};{let w=function(t,s){const i=t[1],e=s[1];if("number"==typeof i&&"number"==typeof e)return i-e;{const h=""+i,r=""+e;return h<r?-1:r<h?1:0}},b=(w,self.Vs),i=null,e="",h="",r=[],n="",o="",a="",M=b.Tr(b.$dt);b.XY.qY=class extends b.oxt{constructor(t){super(t),this.zdt=this.Pf.HD().G8(),this.A0t=this.Pf.HD().ek(),this.s6t=0,this.i6t=0,this.e6t=new Map}Gr(){super.Gr()}gO(){this.Pf.gO()}QB(t){this.Pf.QB(t,null,null)}h6t(t,s){return i&&t===e&&s===h||(i=new RegExp(t,s),e=t,h=s),i.lastIndex=0,i}r6t(t,s,i){if(t!==n||s!==o||i!==a){const e=this.h6t(s,i);r=t.match(e),n=t,o=s,a=i}return r}async n6t(t,s){if(s.length){this.s6t+=s.length;const i=[];for(const e of s)i.push(t.gY(e));await b.To(i,()=>{this.i6t++}),this.i6t++,this.i6t===this.s6t&&(this.i6t=0,this.s6t=0,this.Pf.QB(b.XY.qY.JY.o6t,null,null))}}HU(){return 0===this.s6t?1:this.i6t/this.s6t}a6t(t,s){for(const i of s)0===i.v5()&&t.bY(i)}l6t(){return M}u6t(s){const i=this.Pf.HD(),t=i.ek(),e=t.T8(),h=e.YD(),r=h.v8(),n=e.Adt(),o=t.x8(h),a=i.G8(),l=a.x8();if(l.Xdt(s),n)for(let t=0;t<s&&!l.k8();++t)i.P8(r),l.F8(t),h.A8(e,o),i.E8(r);else for(let t=0;t<s&&!l.k8();++t)l.F8(t),h.A8(e,o);return t.O8(),a.O8(),!1}*c6t(s){const i=this.Pf.HD(),t=i.ek(),e=t.T8(),h=e.YD(),r=h.v8(),n=e.Adt(),o=t.x8(h),a=i.G8(),l=a.x8();if(l.Xdt(s),n)for(let t=0;t<s&&!l.k8();++t)i.P8(r),l.F8(t),yield*h.gSt(e,o),i.E8(r);else for(let t=0;t<s&&!l.k8();++t)l.F8(t),yield*h.gSt(e,o);return t.O8(),a.O8(),!1}f6t(){const s=this.Pf.HD(),t=s.ek(),i=t.T8(),e=i.YD(),h=e.v8(),r=i.Adt(),n=t.x8(e),o=s.G8(),a=o.x8();if(r)for(let t=0;!a.k8();++t)s.P8(h),a.F8(t),e.A8(i,n)||a.oV(),s.E8(h);else for(let t=0;!a.k8();++t)a.F8(t),e.A8(i,n)||a.oV();return t.O8(),o.O8(),!1}*d6t(){const s=this.Pf.HD(),t=s.ek(),i=t.T8(),e=i.YD(),h=e.v8(),r=i.Adt(),n=t.x8(e),o=s.G8(),a=o.x8();if(r)for(let t=0;!a.k8();++t){s.P8(h),a.F8(t);const l=yield*e.gSt(i,n);l||a.oV(),s.E8(h)}else for(let t=0;!a.k8();++t){a.F8(t);const u=yield*e.gSt(i,n);u||a.oV()}return t.O8(),o.O8(),!1}p6t(t,s,i){const e=this.Pf.HD(),h=e.ek(),r=h.T8(),n=r.YD(),o=n.v8(),a=r.Adt(),l=h.x8(n),u=e.G8(),c=u.x8();if(c._8(t),c.Xdt(i),i<s)if(a)for(let t=s;t>=i&&!c.k8();--t)e.P8(o),c.F8(t),n.A8(r,l),e.E8(o);else for(let t=s;t>=i&&!c.k8();--t)c.F8(t),n.A8(r,l);else if(a)for(let t=s;t<=i&&!c.k8();++t)e.P8(o),c.F8(t),n.A8(r,l),e.E8(o);else for(let t=s;t<=i&&!c.k8();++t)c.F8(t),n.A8(r,l);return h.O8(),u.O8(),!1}*m6t(t,s,i){const e=this.Pf.HD(),h=e.ek(),r=h.T8(),n=r.YD(),o=n.v8(),a=r.Adt(),l=h.x8(n),u=e.G8(),c=u.x8();if(c._8(t),c.Xdt(i),i<s)if(a)for(let t=s;t>=i&&!c.k8();--t)e.P8(o),c.F8(t),yield*n.gSt(r,l),e.E8(o);else for(let t=s;t>=i&&!c.k8();--t)c.F8(t),yield*n.gSt(r,l);else if(a)for(let t=s;t<=i&&!c.k8();++t)e.P8(o),c.F8(t),yield*n.gSt(r,l),e.E8(o);else for(let t=s;t<=i&&!c.k8();++t)c.F8(t),yield*n.gSt(r,l);return h.O8(),u.O8(),!1}g6t(i){const t=i.b5(),s=t.w5();if(0!==s.length){const e=this.Pf.HD(),h=e.ek(),r=h.T8(),n=r.YD(),o=n.v8(),a=r.Adt(),l=h.x8(n),u=e.G8(),c=u.x8(),f=i.TB(),d=M.x8();if(b.ho(d,s),c.Xdt(d.length),a)for(let t=0,s=d.length;t<s&&!c.k8();++t){e.P8(o);const p=d[t];i.b5().z0t(p),f&&p.Pgt(),c.F8(t),n.A8(r,l),e.E8(o)}else{t.j0t(!1);const m=t.H0t();b.Kn(m),m.push(null);for(let t=0,s=d.length;t<s&&!c.k8();++t){const g=d[t];m[0]=g,f&&g.Pgt(),c.F8(t),n.A8(r,l)}}h.O8(),u.O8(),b.Kn(d),M.O8()}return!1}*y6t(i){const t=i.b5(),s=t.w5();if(0!==s.length){const e=this.Pf.HD(),h=e.ek(),r=h.T8(),n=r.YD(),o=n.v8(),a=r.Adt(),l=h.x8(n),u=e.G8(),c=u.x8(),f=i.TB(),d=M.x8();if(b.ho(d,s),c.Xdt(d.length),a)for(let t=0,s=d.length;t<s&&!c.k8();++t){e.P8(o);const p=d[t];i.b5().z0t(p),f&&p.Pgt(),c.F8(t),yield*n.gSt(r,l),e.E8(o)}else{t.j0t(!1);const m=t.H0t();b.Kn(m),m.push(null);for(let t=0,s=d.length;t<s&&!c.k8();++t){const g=d[t];m[0]=g,f&&g.Pgt(),c.F8(t),yield*n.gSt(r,l)}}h.O8(),u.O8(),b.Kn(d),M.O8()}return!1}S6t(i,t){const s=i.b5(),e=s.w5();if(0!==e.length){const h=this.Pf.HD(),r=h.ek(),n=h.H1t(),o=r.T8(),a=o.YD(),l=a.v8(),u=o.Adt(),c=r.x8(a),f=h.G8(),d=f.x8(),p=i.TB(),m=M.x8();b.Kn(m),d.Xdt(e.length);for(let t=0,s=e.length;t<s;++t)m.push([e[t],n.RMt(1,t)]);if(m.sort(w),1===t&&m.reverse(),u)for(let t=0,s=m.length;t<s&&!d.k8();++t){h.P8(l);const g=m[t][0];i.b5().z0t(g),p&&g.Pgt(),d.F8(t),a.A8(o,c),h.E8(l)}else{s.j0t(!1);const y=s.H0t();b.Kn(y),y.push(null);for(let t=0,s=m.length;t<s&&!d.k8();++t){const S=m[t][0];y[0]=S,p&&S.Pgt(),d.F8(t),a.A8(o,c)}}r.O8(),f.O8(),b.Kn(m),M.O8()}return!1}*w6t(i,t){const s=i.b5(),e=s.w5();if(0!==e.length){const h=this.Pf.HD(),r=h.ek(),n=h.H1t(),o=r.T8(),a=o.YD(),l=a.v8(),u=o.Adt(),c=r.x8(a),f=h.G8(),d=f.x8(),p=i.TB(),m=M.x8();b.Kn(m),d.Xdt(e.length);for(let t=0,s=e.length;t<s;++t)m.push([e[t],n.RMt(1,t)]);if(m.sort(w),1===t&&m.reverse(),u)for(let t=0,s=m.length;t<s&&!d.k8();++t){h.P8(l);const g=m[t][0];i.b5().z0t(g),p&&g.Pgt(),d.F8(t),yield*a.gSt(o,c),h.E8(l)}else{s.j0t(!1);const y=s.H0t();b.Kn(y),y.push(null);for(let t=0,s=m.length;t<s&&!d.k8();++t){const S=m[t][0];y[0]=S,p&&S.Pgt(),d.F8(t),yield*a.gSt(o,c)}}r.O8(),f.O8(),b.Kn(m),M.O8()}return!1}b6t(t,s){let i=this.e6t.get(t);if(!i){if(!s)return null;i={M6t:null,v6t:new Map},this.e6t.set(t,i)}return i}T6t(t,s,i,e,h){s.qD().ESt(i,s.ZD()),e&&t.E8(h)}*x6t(t,s,i,e,h){yield*s.qD().FSt(i,s.ZD()),e&&t.E8(h)}}}{const Na=self.Vs;Na.XY.qY.xCt=class extends Na.Mr{constructor(t){super(),this.T0t=t,this.Pf=t.PO(),this.Jxt=t.l5()}Rxt(){}Gr(){this.T0t=null,this.Pf=null,this.Jxt=null}}}{const Ba=self.Vs;Ba.XY.qY.Instance=class extends Ba.Mr{constructor(t,s){super(),this.Pi=t,this.T0t=this.Pi.fB(),this.Zxt=this.T0t.ovt(),this.Pf=this.Pi.PO()}Gr(){this.Pi=null,this.T0t=null,this.Zxt=null,this.Pf=null}}}{const T=self.Vs,Wa=[];T.XY.qY.JY={G6t(){return!0},zY(){return!0},e$(){return!0},vBt(){return!0},TBt(){return!0},ck(){return this.Pf.ck()},dyt(){const t=this.Pf.j1t();return!t._dt()&&!t.xdt()},_6t(){let t=this.Pf.H1t(),s=t.yMt(),i=s.get("TriggerOnce_lastTick");void 0===i&&(i=-1,s.set("TriggerOnce_lastTick",-1));const e=this.Pf.wst();return s.set("TriggerOnce_lastTick",e),this.Pf.i4t()||i!==e-1},I6t(t){const s=this.Pf.H1t(),i=s.yMt(),e=i.get("Every_lastTime")||0,h=this.Pf.mk(),r=(i.has("Every_seconds")||i.set("Every_seconds",t),i.get("Every_seconds"));return e+r<=h?(i.set("Every_lastTime",e+r),h>=i.get("Every_lastTime")+.04&&i.set("Every_lastTime",h),i.set("Every_seconds",t),!0):(h<e-.1&&i.set("Every_lastTime",h),!1)},Pmt(t){const s=this.Pf.HD().upt(t);return s&&s.Pmt()},hLt(){return this.Pf.hLt()},xi(){return T.mi.xi},hBt(){return!0},C6t(){return!0},P6t(){return!0},p4t(){return!0},w4t(){return!0},g4t(){return!0},y4t(){return!0},R6t(t){return!!this.Pf.hO(t)},A6t(t){switch(t){case 0:return"browser"===T.mi.vi;case 1:return"iOS"===T.mi.gi;case 2:return"Android"===T.mi.gi;case 8:return"cordova"===T.mi.vi;case 9:return"scirra-arcade"===this.Pf.dL();case 10:return"nwjs"===T.mi.vi;case 13:return"windows-uwp"===this.Pf.dL();default:return!1}},E6t(t,s,i){const e=this.h6t(s,i);return e.test(t)},F6t(t,s,i){return T.compare(t,s,i)},D6t(t,s,i){return s<=t&&t<=i},k6t(t,s,i){return T.compare(t.xht(),s,i)},O6t(t){return!!t.xht()},L6t(t,s){const i=this.Pf.mk();if(0!==t)return T.compare(i,t,s);{const e=this.Pf.H1t(),h=e.yMt();return!h.get("CompareTime_executed")&&s<=i&&(h.set("CompareTime_executed",!0),!0)}},N6t(t){return isNaN(t)},ITt(t,s,i){return T.Br(T.Er(t),T.Er(i))<=T.Er(s)},CTt(t,s){return T.Vr(T.Er(t),T.Er(s))},Nvt(t,s,i){let e=T.Er(t),h=T.Er(s),r=T.Er(i),n=!T.Vr(r,h);return n?!(!T.Vr(e,h)&&T.Vr(e,r)):T.Vr(e,h)&&!T.Vr(e,r)},B6t(t,s){return"number"==typeof t?0===s:1===s},W6t(t){return!!t},omt(t){return t.toLowerCase()===this.Pf.HD().cmt()},V6t(t,i,e,h){if(!t)return!1;let s=this.l6t(),r=s.x8(),n=t.b5(),o=(T.ho(r,n.w5()),n.k0t()&&T.Kn(n.U0t()),this.Pf.H1t()),a=0;for(let t=0,s=r.length;t<s;++t){const u=r[t];r[a]=u,i=o.RMt(1,t),h=o.RMt(3,t),T.compare(i,e,h)?++a:n.V0t(u)}T.$n(r,a),n.J0t(r);const l=!!r.length;return T.Kn(r),s.O8(),t.GSt(),l},j6t(t,s){if(!t)return!1;let i=this.l6t(),e=i.x8(),h=t.b5(),r=(T.ho(e,h.w5()),h.k0t()&&T.Kn(h.U0t()),this.Pf.H1t()),n=0;for(let t=0,s=e.length;t<s;++t){const a=e[t];e[n]=a,r.RMt(1,t)?++n:h.V0t(a)}T.$n(e,n),h.J0t(e);const o=!!e.length;return T.Kn(e),i.O8(),t.GSt(),o},H6t(t,i,e){if(!t)return!1;const s=t.b5(),h=s.w5();if(0===h.length)return!1;let r=this.Pf.H1t(),n=null,o=0;for(let t=0,s=h.length;t<s;++t){const a=h[t];e=r.RMt(2,t),(null===n||0===i&&e<o||1===i&&e>o)&&(o=e,n=a)}return s.K0t(n),t.GSt(),!0},U6t(t,s){if(!t)return!1;const i=t.b5(),e=i.w5();if((s=Math.floor(s))>=e.length)return!1;const h=e[s];return i.K0t(h),t.GSt(),!0},z6t(t){if(!t)return!1;const s=t.b5(),i=s.w5(),e=Math.floor(this.Pf.Wk()*i.length);if(e>=i.length)return!1;const h=i[e];return s.K0t(h),t.GSt(),!0},J6t(t){if(!t)return!1;if(!t.v5())return!1;const s=t.b5();return s.j0t(!0),t.GSt(),!0},q6t(t,i,e){if(!t)return!1;const h=t.b5(),s=h.w5(),r=this.Pf.YD(),n=r.Z0t(),o=this.Pf.H1t().fMt();h.k0t()?(T.ho(Wa,s),h.D0t(),h.j0t(!1)):n?(T.ho(Wa,h.U0t()),T.Kn(h.U0t())):(T.ho(Wa,h.H0t()),T.Kn(h.H0t()));for(let t=0,s=Wa.length;t<s;++t){const a=Wa[t];T.xor(a.lO().r6(i,e),o)?h.W0t(a):h.V0t(a)}return t.GSt(),T.xor(!!h.H0t().length,o)},X6t(s){if(!s)return!1;let i=s.RJ(),e=null,h=this.Pf.pPt();for(let t=h.length-1;0<=t;--t){const r=h[t];if(i){if(r.fB().dvt(s)){e=r;break}}else if(r.fB()===s){e=r;break}}if(!e){const n=s.w5();n.length&&(e=n.at(-1))}if(!e)return!1;const t=s.b5();return t.K0t(e),s.GSt(),!0},Y6t(t){return this.Pf.u2t()?this.c6t(t):this.u6t(t)},$6t(){return this.Pf.u2t()?this.d6t():this.f6t()},K6t(t,s,i){return this.Pf.u2t()?this.m6t(t,s,i):this.p6t(t,s,i)},Od(t){return this.Pf.u2t()?this.y6t(t):this.g6t(t)},Z6t(t,s,i){return this.Pf.u2t()?this.w6t(t,i):this.S6t(t,i)},Q6t(t){return!!t&&t.TN()},tWt(t){return!!t&&t.RN()},sWt(t){return!!t&&t.IN()},iWt(t){return!!t&&!t.v5()},eWt(t,s,i){return!!t&&T.compare(100*t.mA(),s,i)},hWt(t){const s=this.Pf.Vk();return!!s&&s.tY(t)},o6t(){return!0},rWt(){return 0<this.s6t},nWt(t,s){const i=this.Pf.vRt();return!!i&&!!s&&!!i.Jut(t,s)}}}{let m=function(t,s){const i=t[0],e=s[0],h=i-e;if(0!=h)return h;const r=t[1],n=s[1];return r-n},g=function(t,s){return t[1]-s[1]};m,g;const Va=self.Vs,ja=[],Ha=[],Ua=Va.Tr(Va.Rect),za=Va.Tr(Va.na),Ja=[];Va.XY.qY.Krt={oWt(t,s){t.rrt(s)},aWt(t,s){t.Se()&&"number"!=typeof s&&(s=parseFloat(s)),t.rrt(t.xht()+s)},lWt(t,s){t.Se()&&t.rrt(t.xht()-s)},uWt(t,s){t.rrt(!!s)},cWt(t){t.rrt(!t.xht())},fWt(t){t.rrt(t.V1t())},dWt(t){this.Pf.HD().apt(t)},pWt(t,s,i,e,h,r){if(t&&s){const n=this.Pf.x5(t,s,i,e,h,r);if(n){h&&s.G5(n);const o=this.Pf.HD(),a=(o._5(!0),n.I5(),o._5(!1),new Map);n.dRt(a,t,h);for(const[l,u]of a)l.b5().q0t(u)}}},mWt(t,s,i,e,h,r){if(t&&s){const n=this.Pf.lBt(t);n&&Va.XY.qY.Krt.pWt.call(this,n,s,i,e,h,r)}},CJ(h,r,n,o,a,t,l,u,c,f,d){if(h){let s=this.Pf.oO(),i=s;if(t){const p=this.Pf.Uk().L$(t);if(!p)return;i=p}let e=null;if(!("number"!=typeof l||0<=l)||(e=i.uO(l))){let t=null;if(!("number"!=typeof u||0<=u)||(t=s.uO(u))){Ua.set(r,n,o,a);const m=i.CJ(h,Ua,e,t,c,f,d);h.b5().J0t(m),h.GSt()}}}},gWt(){const t=this.zdt;t.Vdt()&&t.Bdt().oV()},Rmt(t,s){const i=this.Pf.HD().upt(t);i&&(0===s?i.Rmt(!1):1===s?i.Rmt(!0):i.Rmt(!i.Pmt()))},yWt(t){this.Pf.wk(t)},SWt(t,s){if(s<0&&(s=0),t){const i=t.b5(),e=i.w5();for(const h of e)h.wk(s)}},wWt(t){if(t){const s=t.b5(),i=s.w5();for(const e of i)e.EB()}},zn(t,s){if(!(t<0)){const i=this.Pf.HD().Upt();return s?i.KTt(t):i.ZTt(t),!0}},lk(t){return this.Pf.HD().Upt().QTt(t),!0},bWt(){const t=this.Pf.HD();return t.Upt().txt(t.nmt()),!0},nk(t){this.Pf.HD().nk(t)},async LOt(t,s,i,e,h,r){const n=this.Pf.yL();n&&(this.gO(),await n.LOt(0===t?"image/png":"image/jpeg",s/100,i,e,h,r),await this.Pf.s4(Va.XY.qY.JY.C6t,null))},MWt(t,s){if(!(t<=0||s<=0)){this.Pf.aOt(t,s),this.Pf.oO().Xq();const i=this.Pf.yL();i&&("off"!==i.sOt()&&this.Pf.cBt(t,s),i.BC(i.Mj(),i.vj(),!0),this.Pf.gO())}},vWt(t){const s=this.Pf.yL();s&&"off"!==s.sOt()&&(s.mOt(0!==t?"high":"low"),s.BC(s.Mj(),s.vj(),!0))},jet(t){this.Pf.n4t(t)},TWt(){this.Pf.o4t()},xWt(t){this.Pf.a4t(t)},GWt(t){this.Pf.rTt(t)},_Wt(t){},IWt(){for(const t of this.Pf.Uk().qk())t.f$()},CWt(t){this.Pf.e4t(0!==t)},PWt(t,s){this.Pf.kk(1/t),this.Pf.Ek(1/s)},RWt(t,s){this.Pf.Ek(t),this.Pf.kk(s)},AWt(t){this.Pf.Pk(["vsync","unlimited-tick","unlimited-frame"][t])},EWt(t,i){if(t){const s=t.b5(),e=s.w5(),h=ja,r=Ha,n=this.Pf.oO(),o=t.RJ(),a=t.qwt();for(let t=0,s=e.length;t<s;++t){const l=e[t],u=l.lO();if(u){let t;t=o?l.Unt(i+l.fB().Jwt(a)):l.Unt(i),h.push([u.uO().uD(),u.cO()]),r.push([l,t])}}if(h.length){h.sort(m),r.sort(g);let i=!1;for(let t=0,s=h.length;t<s;++t){const c=r[t][0],f=n.fO(h[t][0]),d=h[t][1],p=f.dO();p[d]!==c&&((p[d]=c).lO().pO(f,!0),f.mO(c),i=!0)}i&&this.Pf.gO(),Va.Kn(ja),Va.Kn(Ha)}}},sL(t,s){t=Math.floor(t),s=Math.floor(s),t<=0||s<=0||!Number.isFinite(t)||!Number.isFinite(s)||this.Pf.yD().sL(t,s)},FWt(t){if(!this.Pf.Gy()){const s=this.Pf.Uk();s.Yk()||s.$k(t)}},DWt(t){if(!this.Pf.Gy()){const s=this.Pf.Uk();if(!s.Yk()){const i=s.L$(t);i&&s.$k(i)}}},kWt(t){if(!this.Pf.Gy()){const s=this.Pf.Uk();if(!s.Yk()){const i=s.qk(),e=i.indexOf(s.Vk());if((!t||0!==e)&&(t||e!==i.length-1)){const h=i[e+(t?-1:1)];s.$k(h)}}}},OWt(){if(!this.Pf.Gy()){const t=this.Pf.Uk();t.Yk()||(t.$k(t.Vk()),this.Pf.HD().ppt())}},LWt(t,s){t&&t.MN(s)},NWt(t,s){t&&t.GN(s)},BWt(t,s){t&&t.CN(s)},WWt(t,s){t&&t.yA(s/100)},VWt(t,s){t&&t.AN(s)},jWt(t,s){t&&t.FN(s)},HWt(t,s){t&&t.N5(Va.Er(+s))},UWt(t,s,i){t&&(t.YN(!0),t.B5(s),t.V5(i))},zWt(t){t&&t.YN(!1)},JWt(t,s,i){t&&t.l9(s/100,i/100)},qWt(t,s){t&&t.rv(+s)},XWt(t,s){if(t){za.Wa(s),za.Rr();const i=t.XN();i.Ea(za)||(i.xa(za),this.gO())}},YWt(t,s){t&&t.jN(s)},$Wt(t,s){t&&t.WM(s)},KWt(t,s,i){if(t){const e=t.E5(),h=e.Art(i);if(h){const r=1===s;h.bgt()!==r&&(h.B3t(r),t.wW(),this.Pf.gO())}}},ZWt(t,s,i,e){if(t){const h=t.E5(),r=h.Art(s);if(r){i=Math.floor(i);const n=r.Xx().$x(i);if(n){"color"===n?(za.Wa(e),e=za):"percent"===n&&(e/=100);const o=h.MW(r.uD(),i,e);o&&r.bgt()&&this.Pf.gO()}}}},QWt(t,s){t&&t.zN(s)},tVt(t){this.Pf.oO().O5(+t)},sVt(t){this.Pf.oO().N5(Va.Er(+t))},iVt(t,s){const i=this.Pf.oO(),e=i.E5(),h=e.Art(s);if(h){const r=1===t;h.bgt()!==r&&(h.B3t(r),i.wW(),this.Pf.gO())}},eVt(t,s,i){const e=this.Pf.oO(),h=e.E5(),r=h.Art(t);if(r){s=Math.floor(s);const n=r.Xx().$x(s);if(n){"color"===n?(za.Wa(i),i=za):"percent"===n&&(i/=100);const o=h.MW(r.uD(),s,i);o&&r.bgt()&&this.Pf.gO()}}},hVt(t,s){const i=this.Pf.oO();i.oN(t/100,s/100)},rVt(t){const s=this.Pf.oO();0===t?s.uN():s.cN()},nVt(t){const s=this.Pf.oO();s.B5(t)},oVt(t){const s=this.Pf.oO();s.V5(t)},aVt(t,s){const i=this.Pf.oO();i.B5(t),i.V5(s)},lVt(t){if(t){const s=t.t2t();if(s){const i=s.lO();if(i){const e=this.Pf.oO();e.B5(i.KM()),e.V5(i.tv())}}}},Q5(t,s,i){const e=this.Pf.oO();try{e.Q5(t,s,i)}catch(t){console.warn("[Construct] Cannot add layer: ",t)}},sN(t,s,i){if(t){const e=this.Pf.oO();try{e.sN(t,s,i)}catch(t){console.warn("[Construct] Cannot move layer: ",t)}}},eN(t){if(t){const s=this.Pf.oO();s.eN(t)}},rN(){this.Pf.oO().rN()},async uVt(t){const s=this.Pf.Vk();if(s&&t&&!this.Pf.Gy()){const i=t.RJ()?t.yyt():[t];await this.n6t(s,i)}},async cVt(t){await Va.XY.qY.Krt.uVt.call(this,this.Pf.lBt(t))},fVt(t){const s=this.Pf.Vk();if(s&&t){const i=t.RJ()?t.yyt():[t];this.a6t(s,i)}},dVt(t){Va.XY.qY.Krt.fVt.call(this,this.Pf.lBt(t))},pVt(){const t=this.Pf.Vk();if(t){const s=t.dY();this.a6t(t,s)}},async mVt(t){const s=this.Pf.Vk();t&&s&&!this.Pf.Gy()&&await this.n6t(s,t.uY())},async gVt(t){const s=this.Pf.Vk(),i=this.Pf.Uk().L$(t);i&&s&&!this.Pf.Gy()&&await this.n6t(s,i.uY())},rk(t){const s=this.A0t.ik();if(s)switch(s.hk()){case 1:"number"==typeof t&&s.rk(t);break;case 2:"string"==typeof t&&s.rk(t);break;case 3:s.rk(t)}},yVt(t,s,i){const e=this.b6t(t.toLowerCase(),!0),h=e.v6t,r=s.toLowerCase(),n=(h.has(r)&&console.warn(`[Construct] Function map '${t}' string '${s}' already in map; overwriting entry`),Va.first(h.values())||e.M6t);if(n){const o=0!==n.QD(),a=0!==i.QD();if(o!=a)return void console.error(`[Construct] Function map '${t}' string '${s}' function return type not compatible with other functions in the map; entry ignored`)}h.set(r,i)},SVt(t,s){const i=this.b6t(t.toLowerCase(),!0),e=(i.M6t&&console.warn(`[Construct] Function map '${t}' already has a default; overwriting entry`),Va.first(i.v6t.values())||i.M6t);if(e){const h=0!==e.QD(),r=0!==s.QD();if(h!=r)return void console.error(`[Construct] Function map '${t}' default: function return type not compatible with other functions in the map; entry ignored`)}i.M6t=s},wVt(t,s,i){const e=this.Pf,h=e.u2t()?Ja:null,r=(i=Math.floor(i),this.b6t(t.toLowerCase(),!1));if(!r)return console.warn(`[Construct] Call mapped function: map name '${t}' not found; call ignored`),h;let n=r.v6t.get(s.toLowerCase());if(!n){if(!r.M6t)return console.warn(`[Construct] Call mapped function: no function associated with map '${t}' string '${s}'; call ignored (consider setting a default)`),h;n=r.M6t,i=0}if(!n.wc())return h;if(0!==n.QD())return console.warn(`[Construct] Call mapped function: map '${t}' string '${s}' has a return type so cannot be called`),h;const o=e.HD(),a=o.YD(),l=a.XD(),u=0<l.length,c=(u&&(n.ZD()?o.P8(l):o.jpt(l)),[]),f=o.Omt(a);if(f){const p=f.Nmt();for(let t=i,s=p.length;t<s;++t)c.push(p[t].xht())}const d=n.Nmt();for(let t=c.length,s=d.length;t<s;++t)c.push(d[t].V1t());return e.u2t()?this.x6t(o,n,c,u,l):this.T6t(o,n,c,u,l)}}}{const x=self.Vs;x.XY.qY.Zrt={bVt:function(t){return"string"==typeof t&&(t=parseInt(t,10),isNaN(t))&&(t=0),Math.floor(t)},float:function(t){return"string"==typeof t&&(t=parseFloat(t),isNaN(t))?0:t},L(t){return t.toString()},qt(t){return"string"==typeof t?t.length:0},random(t,s){return void 0===s?this.Pf.Wk()*t:this.Pf.Wk()*(s-t)+t},Awt(...t){const s=Math.floor(this.Pf.Wk()*t.length);return t[s]},MVt(t,...s){return"number"!=typeof t&&(t=0),s[t=x.Rr(Math.floor(t),0,s.length-1)]},pi(){return Math.PI},vVt(){return 1/0},sqrt(t){return Math.sqrt(t)},abs(t){return Math.abs(t)},round(t){return Math.round(t)},TVt(t,s){s=Math.max(Math.floor(s),0);const i=Math.pow(10,s);return Math.round((t+Number.EPSILON)*i)/i},floor(t){return Math.floor(t)},ceil(t){return Math.ceil(t)},sign(t){return Math.sign(t)},sin(t){return Math.sin(x.Er(t))},cos(t){return Math.cos(x.Er(t))},tan(t){return Math.tan(x.Er(t))},asin(t){return x.Fr(Math.asin(t))},acos(t){return x.Fr(Math.acos(t))},atan(t){return x.Fr(Math.atan(t))},exp(t){return Math.exp(t)},Qt(t){return Math.log(t)},log10(t){return Math.log10(t)},max(...i){let e=i[0];"number"!=typeof e&&(e=0);for(let s=1,t=i.length;s<t;++s){let t=i[s];"number"==typeof t&&e<t&&(e=t)}return e},min(...i){let e=i[0];"number"!=typeof e&&(e=0);for(let s=1,t=i.length;s<t;++s){let t=i[s];"number"==typeof t&&e>t&&(e=t)}return e},Rr(t,s,i){return x.Rr(t,s,i)},At(t,s,i,e){return x.Or(t,s,i,e)},angle(t,s,i,e){return x.Fr(x.Nr(t,s,i,e))},Lt(t,s,i){return x.Lt(t,s,i)},Jr(t,s,i){return x.Jr(t,s,i)},Xr(t,s,i,e){return x.Xr(t,s,i,e)},Yr(t,s,i,e,h){return x.Yr(t,s,i,e,h)},$r(t,s,i){return x.$r(t,s,i)},xVt(t,s){return x.Fr(x.Br(x.Er(t),x.Er(s)))},GVt(t,s,i){return x.Fr(x.jr(x.Er(t),x.Er(s),i))},_Vt(t,s,i){return x.Fr(x.Wr(x.Er(t),x.Er(s),x.Er(i)))},IVt(t,s,i){return(t|=0)&~(1<<(s|=0))|(i=0!==i?1:0)<<s},CVt(t,s){return(t|=0)^1<<(0|s)},PVt(t,s){return(t|=0)&1<<(0|s)?1:0},RVt(){return"\n"},AVt(t){return"string"==typeof t?t.toUpperCase():""},EVt(t){return"string"==typeof t?t.toLowerCase():""},left(t,s){return"string"==typeof t?t.substr(0,s):""},mid(t,s,i){return"string"!=typeof t?"":i<0?t.substr(s):t.substr(s,i)},right(t,s){return"string"==typeof t?t.substr(Math.max(t.length-s,0)):""},trim(t){return"string"==typeof t?t.trim():""},FVt(t,s,i){if("string"!=typeof t||"string"!=typeof i)return"";let e=t.split(i);return(s=Math.floor(s))<0||s>=e.length?"":e[s]},DVt(t,s){return"string"==typeof t&&"string"==typeof s&&t.length?t.split(s).length:0},find(t,s){return"string"==typeof t&&"string"==typeof s?t.search(new RegExp(x.ge(s),"i")):-1},kVt(t,s){return"string"==typeof t&&"string"==typeof s?t.search(new RegExp(x.ge(s),"")):-1},replace(t,s,i){return"string"==typeof t&&"string"==typeof s&&"string"==typeof i?t.replace(new RegExp(x.ge(s),"gi"),i):"string"==typeof t?t:""},OVt(t,...i){let e=t;for(let t=0,s=i.length;t<s;++t)e=e.replaceAll(`{${t}}`,i[t].toString());return e},LVt(t,s,i){const e=this.h6t(s,i);return t?t.search(e):-1},NVt(t,s,i,e){const h=this.h6t(s,i);return t?t.replace(h,e):""},BVt(t,s,i){const e=this.r6t(t.toString(),s,i);return e?e.length:0},WVt(t,s,i,e){e=Math.floor(e);const h=this.r6t(t.toString(),s,i);return!h||e<0||e>=h.length?"":h[e]},VVt(t,s){let i=t<0?"-":"",e=s-(t=t<0?-t:t).toString().length;return(i+="0".repeat(Math.max(e,0)))+t.toString()},jVt(t){return encodeURIComponent(t)},HVt(t){return decodeURIComponent(t)},dt(){return this.Pf.mZ()},UVt(){return this.Pf.gZ()},timescale(){return this.Pf.Sk()},zVt(){return(Date.now()-this.Pf.zBt())/1e3},JVt(){return Date.now()},time(){return this.Pf.mk()},tickcount(){return this.Pf.wst()},qVt(){return this.Pf.XBt()},fps(){return this.Pf.bk()},XVt(){return this.Pf.xk()},YVt(){return this.Pf._k()},$Vt(){return this.Pf.yL().GL()},KVt(){return this.Pf.yL().IL()},ZVt(){return this.Pf.PD()},QVt(){return this.Pf.AD()},tjt(){return this.Pf.PD()},sjt(){return this.Pf.AD()},ijt(){return this.Pf.oO().W5()},ejt(){return this.Pf.oO().j5()},hjt(){return this.Pf.oO().Mf()},rjt(){return this.Pf.oO().L5()},njt(){return x.Fr(this.Pf.oO().GetAngle())},ojt(){return this.Pf.oO().Wm()},ajt(){return this.Pf.oO().$m()},ljt(){return 100*this.Pf.oO().i9()},ujt(){return 100*this.Pf.oO().e9()},cjt(t){const s=this.Pf.oO().uO(t);return s?s.s9().Wl():0},fjt(t){const s=this.Pf.oO().uO(t);return s?s.s9().Vl():0},djt(t){const s=this.Pf.oO().uO(t);return s?s.s9().jl():0},pjt(t){const s=this.Pf.oO().uO(t);return s?s.s9().Hl():0},mjt(t){const s=this.Pf.oO().uO(t);return s?s.s9().width():0},gjt(t){const s=this.Pf.oO().uO(t);return s?s.s9().height():0},yjt(t){const s=this.Pf.oO().uO(t);if(s){const i=s.s9();return(i.Wl()+i.jl())/2}return 0},Sjt(t){const s=this.Pf.oO().uO(t);if(s){const i=s.s9();return(i.Vl()+i.Hl())/2}return 0},wjt(t,s,i){const e=this.Pf.oO().uO(t);return e?e.QN(s,i)[0]:0},bjt(t,s,i){const e=this.Pf.oO().uO(t);return e?e.QN(s,i)[1]:0},Mjt(t,s,i){const e=this.Pf.oO().uO(t);return e?e.eB(s,i)[0]:0},vjt(t,s,i){const e=this.Pf.oO().uO(t);return e?e.eB(s,i)[1]:0},Tjt(t,s,i,e){const h=this.Pf.oO(),r=h.uO(t),n=h.uO(s);if(!r||!n||r===n)return i;const[o,a]=r.eB(i,e);return n.QN(o,a)[0]},xjt(t,s,i,e){const h=this.Pf.oO(),r=h.uO(t),n=h.uO(s);if(!r||!n||r===n)return e;const[o,a]=r.eB(i,e);return n.QN(o,a)[1]},Gjt(t){const s=this.Pf.oO().uO(t);return s?s.EN():0},_jt(t){const s=this.Pf.oO().uO(t);return s?x.Fr(s.kN()):0},Ijt(t){const s=this.Pf.oO().uO(t);return s?100*s.mA():0},Cjt(t){const s=this.Pf.oO().uO(t);return s?s.DN():0},Pjt(t){const s=this.Pf.oO().uO(t);return s?s.W5():0},Rjt(t){const s=this.Pf.oO().uO(t);return s?s.j5():0},Ajt(t){const s=this.Pf.oO().uO(t);return s?100*s.LN():0},Ejt(t){const s=this.Pf.oO().uO(t);return s?100*s.BN():0},Fjt(t){const s=this.Pf.oO().uO(t);return s?s.hv():0},Djt(t){const s=this.Pf.oO().uO(t);return s?s.uD():-1},kjt(){const t=this.Pf.yL();return t?t.BOt():""},Ojt(t){const s=this.zdt;if(!s.Vdt())return 0;if(t){const i=s.Hdt(t);return i?i.uD():0}return s.Bdt().uD()},Ljt(){return this.Pf.l4t()},Njt(t,s,...i){const e=this.b6t(t.toLowerCase(),!1);if(!e)return console.warn(`[Construct] Call mapped function: map name '${t}' not found; returning 0`),0;let h=e.v6t.get(s.toLowerCase());if(!h){if(!e.M6t)return console.warn(`[Construct] Call mapped function: no function associated with map '${t}' string '${s}'; returning 0 (consider setting a default)`),0;h=e.M6t}const r=h.QD(),n=h.zD();if(0===r)return console.warn(`[Construct] Call mapped function: map '${t}' string '${s}' has no return type so cannot be called from an expression; returning 0`),0;if(!h.wc())return n;const o=this.Pf,a=o.HD(),l=a.YD(),u=l.XD(),c=0<u.length,f=(c&&(h.ZD()?a.P8(u):a.jpt(u)),h.Nmt());for(let t=i.length,s=f.length;t<s;++t)i.push(f[t].V1t());const d=h.qD(),p=d.KD(d.XD(),h.ZD(),r,n,...i);return c&&a.E8(u),p},Bjt(){return this.Pf.pD().Lk()},Wjt(){return this.HU()},renderer(){return this.Pf.vOt()?"webgpu":"webgl"},Vjt(){return this.Pf.vOt()?this.Pf.vOt().GetAdapterInfoString():this.Pf.MOt().xE()},jjt(){let t=this.Pf.bM().Xb();return Math.round(100*t/1048576)/100},Hjt(t,s,i){return x.rn(t,s,i)},Ujt(t,s,i){return x.an(t/100,s/100,i/100)},zjt(t,s,i,e){return x.nn(t/100,s/100,i/100,e/100)},Jjt(t,s,i){return x.an(t/255,s/255,i/255)},qjt(t,s,i,e){return x.nn(t/255,s/255,i/255,e/255)},Xjt(){return this.Pf.MD()},Yjt(){return this.Pf.TD()},$jt(){return this.Pf.YD().ZX().Mf()},Kjt(){return this.Pf.YD().kyt()}}}{const qa=self.Vs;qa.XY.Zjt=class extends qa.oxt{constructor(t){super(t)}Gr(){super.Gr()}},qa.XY.Zjt.Qjt=-2147483648,qa.XY.Zjt.t8t=1073741824,qa.XY.Zjt.s8t=536870912,qa.XY.Zjt.i8t=3758096384,qa.XY.Zjt.e8t=536870911}{const Xa=self.Vs,Ya=Xa.XY.Zjt.Qjt,$a=Xa.XY.Zjt.t8t,Ka=Xa.XY.Zjt.s8t,Za=Xa.XY.Zjt.e8t;Xa.XY.Zjt.xCt=class extends Xa.zxt{constructor(t){super(t),this.h8t=[],this.r8t=!1,this.n8t=0,this.o8t=[],this.a8t=null}Gr(){this.a8t.clear(),this.a8t=null,super.Gr()}Rxt(){this.BW().CO(this.Pf)}mY(t){return this.BW().mH(t,{t2:this.Pf.ED()})}MY(){this.BW().oC()}SY(){for(const t of this.fB().S5())t.sW().l8t()}qxt(t,s,i){this.n8t=s;for(const e of t)if(e){const h=e[0],r=!!e[1];this.h8t.push({$At:h,use:r,u8t:[[[null,null],[null,null]],[[null,null],[null,null]]]})}else this.h8t.push(null);for(const n of i){const o=n[0],a=n[1],l=n[2];this.o8t.push({name:o,type:a,c8t:l})}}f8t(t,s){this.r8t=!1,this.d8t(t,s)}d8t(i,e){if(!this.r8t){this.r8t=!0;for(let t=0,s=this.h8t.length;t<s;++t)this.h8t[t]&&(this.p8t(t,i,e,!1,!1,!1),this.p8t(t,i,e,!1,!1,!0),this.p8t(t,i,e,!1,!0,!1),this.p8t(t,i,e,!1,!0,!0),this.p8t(t,i,e,!0,!1,!1),this.p8t(t,i,e,!0,!1,!0),this.p8t(t,i,e,!0,!0,!1),this.p8t(t,i,e,!0,!0,!0))}}p8t(t,s,i,e,h,r){if(!(t<0||t>=this.h8t.length)){const n=this.h8t[t];if(n){const o=Xa.Tr(Xa.$u,n.$At,n.use);o.transform(s,i,0),r&&o.qu(),e&&o.Uu(s/2),h&&o.Ju(i/2),n.u8t[e?1:0][h?1:0][r?1:0]=null,n.u8t[e?1:0][h?1:0][r?1:0]=o}}}m8t(t){if(-1===t)return null;const s=t&Za;if(s<0||s>=this.h8t.length)return null;const i=this.h8t[s];if(!i)return null;const e=t&Ya?1:0,h=t&$a?1:0,r=t&Ka?1:0;return i.u8t[e][h][r]}g8t(t){return!t||t.wc()}y8t(){return this.n8t}S8t(s){this.a8t||(this.a8t=new Map);const t=this.a8t.get(s);if("number"==typeof t&&0<=t)return this.o8t[t];for(let t=0;t<this.o8t.length;t++)if(this.o8t[t].name===s)return this.a8t.set(s,t),this.o8t[t]}}}{let s=function(t){const e=[],i=t.split(",");for(let t=0,s=i.length;t<s;++t){const h=i[t],r=h.indexOf("x");if(-1<r){let t=parseInt(h.substring(0,r),10),s=h.substring(r+1),i=parseInt(s,10);for(s.includes("h")&&(i|=sl),s.includes("v")&&(i|=il),s.includes("d")&&(i|=el);0<t;--t)e.push(i)}else{let t=parseInt(h,10);h.includes("h")&&(t|=sl),h.includes("v")&&(t|=il),h.includes("d")&&(t|=el),e.push(t)}}return e};s;const Qa=self.Vs,tl=self.Zs,sl=Qa.XY.Zjt.Qjt,il=Qa.XY.Zjt.t8t,el=Qa.XY.Zjt.s8t,hl=Qa.XY.Zjt.i8t,rl=Qa.XY.Zjt.e8t,nl=Qa.Tr(Qa.Rect),ol=Qa.Tr(Qa.Rect),al=Qa.Tr(Qa.Rect),ll=(Qa.XY.Zjt.Instance=class extends Qa.xGt{constructor(t,s){super(t);const i=this.lO();this.w8t=32,this.b8t=32,this.M8t=0,this.v8t=0,this.T8t=0,this.x8t=0,this.G8t=0,this._8t=0,this.I8t=i.Wm(),this.C8t=i.$m(),this.D7=0,this.k7=0,this.P8t=[],this.R8t=new Map,this.A8t=!0,this.E8t=null,s&&(i.MN(s[0]),this.w8t=Math.max(s[1],1),this.b8t=Math.max(s[2],1),this.M8t=s[3],this.v8t=s[4],this.T8t=s[5],this.x8t=s[6]),this.D7=Math.ceil(this.Pf.PD()/this.w8t),this.k7=Math.ceil(this.Pf.AD()/this.b8t),this.Zxt.d8t(this.w8t,this.b8t),this.F8t=null}Gr(){this.D8t(),Qa.Kn(this.P8t),this.P8t=null,this.R8t.clear(),this.R8t=null,super.Gr()}D8t(){this.E8t&&(this.E8t.Gr(),this.E8t=null)}qxt(t,s,i){this.G8t=s,this._8t=i,this.k8t(!0),this.O8t(t),this.L8t()}k8t(t){const[s,h]=this.N8t();if(!(s<=this.G8t&&h<=this._8t)||t){let i=0,e=0;t?(i=Math.ceil(this._8t/this.k7),e=Math.ceil(this.G8t/this.D7)):(i=this.P8t.length,e=Math.ceil(this.G8t/this.D7),h>this._8t&&(this._8t=h,i=Math.ceil(this._8t/this.k7)),s>this.G8t&&(this.G8t=s,e=Math.ceil(this.G8t/this.D7)),this.B8t(),this.W8t(),this.Pf.gO());const r=this.P8t;if(r.length<i)for(let t=r.length;t<i;++t)r.push([]);for(let s=0;s<i;++s){const n=r[s];for(let t=n.length;t<e;++t)n.push(Qa.Tr(Qa.XY.Zjt.V8t,this,t,s))}}}O8t(t){let i=s(t),e=0,h=this.G8t,r=this.D7,n=this.k7;for(let s=0,t=this._8t;s<t;++s)for(let t=0;t<h;++t){const o=i[e++],a=this.j8t(t,s);a&&a.H8t(t%r,s%n,o)}}U8t(){let l="";if(!(this.G8t<=0||this._8t<=0)){let i=1,e=this.z8t(0,0),[h,t]=this.N8t(),r=-1,n=!1,o=!1,a=!1;for(let s=0;s<t;++s)for(let t=0===s?1:0;t<h;++t){const u=this.z8t(t,s);u===e?++i:(a=-1===e?(r=-1,n=!1,o=!1):(r=e&rl,n=0!=(e&sl),o=0!=(e&il),0!=(e&el)),1===i?l+=""+r:l+=i+"x"+r,n&&(l+="h"),o&&(l+="v"),a&&(l+="d"),l+=",",i=1,e=u)}a=-1===e?(r=-1,n=!1,o=!1):(r=e&rl,n=0!=(e&sl),o=0!=(e&il),0!=(e&el)),1===i?l+=""+r:l+=i+"x"+r,n&&(l+="h"),o&&(l+="v"),a&&(l+="d")}return l}B8t(){const i=this.P8t;for(let t=0,s=i.length;t<s;++t){const e=i[t];for(let t=0,s=e.length;t<s;++t)e[t].J8t()}this.A8t=!0}L8t(){if(this.A8t){this.A8t=!1;const i=this.P8t;for(let t=0,s=i.length;t<s;++t){const e=i[t];for(let t=0,s=e.length;t<s;++t)e[t].q8t()}}}X8t(){this.A8t=!0,this.W8t(),this.Pf.gO()}W8t(){this.lO().c3t(!0)}j8t(t,s){if(t<0||s<0)return null;const i=Math.floor(s/this.k7);if(i>=this.P8t.length)return null;const e=this.P8t[i],h=Math.floor(t/this.D7);return h>=e.length?null:e[h]}Y8t(t,s){if(t<0||s<0||s>=this.P8t.length)return null;const i=this.P8t[s];return t>=i.length?null:i[t]}z8t(t,s){if(t=Math.floor(t),s=Math.floor(s),t<0||s<0||t>=this.G8t||s>=this._8t)return-1;const i=this.j8t(t,s);return i?i.$8t()[s%this.k7][t%this.D7]:-1}H8t(t,s,i){if(t=Math.floor(t),s=Math.floor(s),!(t<0||s<0||t>=this.G8t||s>=this._8t||-1!==i&&(i&rl)>this.y8t())){const e=this.j8t(t,s);e&&e.H8t(t%this.D7,s%this.k7,i)}}y8t(){return this.Zxt.y8t()}K8t(t){return Math.floor((t-this.lO().KM())/(this.D7*this.w8t))}Z8t(t){return Math.floor((t-this.lO().tv())/(this.k7*this.b8t))}Q8t(t){return Math.floor((t-this.lO().KM())/this.w8t)}tHt(t){return Math.floor((t-this.lO().tv())/this.b8t)}sHt(){return this.G8t}iHt(){return this._8t}eHt(){return Math.floor(this.lO().Wm()/this.hHt())}rHt(){return Math.floor(this.lO().$m()/this.nHt())}N8t(){const t=this.lO();return[Math.floor(t.Wm()/this.hHt()),Math.floor(t.$m()/this.nHt())]}hHt(){return this.w8t}nHt(){return this.b8t}oHt(){return this.D7}aHt(){return this.k7}SFt(t,i){const e=this.K8t(t.Wl()),h=this.Z8t(t.Vl()),r=this.K8t(t.jl()),n=this.Z8t(t.Hl());for(let s=e;s<=r;++s)for(let t=h;t<=n;++t){const o=this.Y8t(s,t);o&&(o.q8t(),Qa.nr(i,o.lHt()))}}BGt(t,s){const i=this.Q8t(t),e=this.tHt(s),h=this.z8t(i,e);if(-1===h)return!1;const r=this.Zxt.m8t(h);if(!r)return!0;if(!this.Zxt.g8t(r))return!1;const n=this.lO(),o=Math.floor((t-n.KM())/this.w8t)*this.w8t+n.KM(),a=Math.floor((s-n.tv())/this.b8t)*this.b8t+n.tv();return t-=o,s-=a,r.fu(t,s)}uHt(i){const e=this.P8t;for(let t=0,s=e.length;t<s;++t){const h=e[t];for(let t=0,s=h.length;t<s;++t){const r=h[t];r.q8t(),Qa.nr(i,r.lHt())}}}EGt(){return this.E8t||this.T0t.BW()}cHt(t){const s=this.R8t,i=s.get(t);if(i)return i;const e=t&rl,h=0!=(t&sl),r=0!=(t&il),n=0!=(t&el),o=this.EGt(),a=o.Wm(),l=this.w8t,u=this.M8t,c=this.T8t,f=Math.floor((a-u)/(l+c)*l)+c,d=Math.floor(f/l),p=e%d,m=Math.floor(e/d),g=o.eIt()+this.M8t+(this.w8t+this.T8t)*p,y=o.hIt()+this.v8t+(this.b8t+this.x8t)*m,S=(nl.El(g,y,this.w8t,this.b8t),nl.Pt(o.rIt(),o.nIt()),Qa.Tr(Qa.gu));return S.Lu(nl),n&&S.qu(),h&&S.Uu(),r&&S.Ju(),S.offset(p,m),s.set(t,S),S}l8t(){this.R8t.clear(),this.B8t()}Hv(h){const t=this.EGt(),s=t.wT();if(s){nl.I(t.gP()),nl.offsetLeft(this.M8t/s.Wm()),nl.offsetTop(this.v8t/s.$m()),h.ww(),h.jA(nl,s.Wm(),s.$m(),this.w8t,this.b8t,this.T8t,this.x8t),h.bA(s);const r=this.lO(),n=r.uO();r.Wm()===this.I8t&&r.$m()===this.C8t||(this.W8t(),this.B8t(),this.I8t=r.Wm(),this.C8t=r.$m());let i=r.KM(),e=r.tv();this.Pf.DD()&&(i=Math.round(i),e=Math.round(e));const o=this.D7*this.w8t,a=this.k7*this.b8t,l=r.L4(),u=ol;if(n.S9()){u.set(-1/0,-1/0,1/0,1/0);const c=al,f=n.Eq();for(const d of this.P8t)for(const p of d)p.fHt(c),f.$y(c.Wl(),c.Vl(),l,c.jl(),c.Hl(),l)&&(p.q8t(),p.Hv(h,u,i,e))}else{n.h9(l,u);const m=Math.floor((u.Wl()-i)/o),g=Math.floor((u.jl()-i)/o),y=Math.floor((u.Vl()-e)/a),S=Math.floor((u.Hl()-e)/a);for(let s=m;s<=g;++s)for(let t=y;t<=S;++t){const w=this.Y8t(s,t);w&&(w.q8t(),w.Hv(h,u,i,e))}}}}dv(){this.k8t();const[t,s]=this.N8t();return{tw:this.w8t,th:this.b8t,tox:this.M8t,toy:this.v8t,tsx:this.T8t,tsy:this.x8t,w:t,h:s,d:this.U8t()}}pv(t){this.w8t=t.tw,this.b8t=t.th,this.M8t=t.tox,this.v8t=t.toy,this.T8t=t.tsx,this.x8t=t.tsy,this.G8t=t.w,this._8t=t.h,this.k8t(!0),this.O8t(t.d),this.W8t(),this.B8t()}dHt(){this.k8t();const[t,s]=this.N8t();return JSON.stringify({c2tilemap:!0,width:t,height:s,data:this.U8t()})}pHt(t){switch(t){case 0:return 0;case 1:return sl;case 2:return il;case 3:return sl|el;case 4:return sl|il;case 5:return il|el;case 6:return sl|il|el;case 7:return el;default:return 0}}knt(t){switch(t){case 1:return this.w8t;case 2:return this.b8t;case 3:return this.M8t;case 4:return this.v8t;case 5:return this.T8t;case 6:return this.x8t}}Vnt(t,s){switch(t){case 1:this.w8t!==s&&(this.w8t=Math.max(s,1),this.D7=Math.ceil(this.Pf.PD()/this.w8t),this.Zxt.f8t(),this.mHt());break;case 2:this.b8t!==s&&(this.b8t=Math.max(s,1),this.k7=Math.ceil(this.Pf.AD()/this.b8t),this.Zxt.f8t(),this.mHt());break;case 3:this.M8t!==s&&(this.M8t=s,this.mHt());break;case 4:this.v8t!==s&&(this.v8t=s,this.mHt());break;case 5:this.T8t!==s&&(this.T8t=s,this.mHt());break;case 6:this.x8t!==s&&(this.x8t=s,this.mHt())}}mHt(){this.R8t.clear(),this.B8t(),this.L8t()}Axt(){return ul}},new WeakMap),ul=self.gHt=class extends self.Y6{constructor(){super(),ll.set(this,self.uB.mB().sW())}get yHt(){return ll.get(this).sHt()}get SHt(){return ll.get(this).iHt()}wHt(){const t=ll.get(this);return[t.sHt(),t.iHt()]}get bHt(){return ll.get(this).eHt()}get MHt(){return ll.get(this).rHt()}vHt(){const t=ll.get(this);return[t.eHt(),t.rHt()]}get THt(){return ll.get(this).hHt()}get xHt(){return ll.get(this).nHt()}GHt(){const t=ll.get(this);return[t.hHt(),t.nHt()]}_Ht(t,s){return tl._e(t),tl._e(s),ll.get(this).z8t(t,s)}IHt(t,s,i){tl._e(t),tl._e(s),tl._e(i);const e=ll.get(this);e.k8t(),e.H8t(t,s,i)}async CHt(t){tl.ah(t,Blob);const s=ll.get(this),i=s.PO(),e=Qa.Tr(Qa.V_t);e.sIt(i,t),await e.mH(i.bM(),{t2:i.ED()}),s._r()?e.Gr():(s.D8t(),s.E8t=e,s.R8t.clear(),s.B8t(),i.gO())}};ul.Qjt=sl,ul.t8t=il,ul.s8t=el,ul.i8t=hl,ul.e8t=rl}{const cl=self.Vs,fl=cl.XY.Zjt.i8t,dl=cl.XY.Zjt.e8t;cl.XY.Zjt.JY={PHt(t,s,i,e){let h=this.z8t(t,s);return-1!==h&&(h&=dl),cl.compare(h,i,e)},RHt(t,s,i){let e=this.z8t(t,s);return(-1!==e?e&fl:0)===this.pHt(i)},AHt(){return!0},EHt(){return!0},FHt(t){return this.F8t||(this.F8t=new cl.XY.Zjt.DHt(this,this.Zxt)),this.F8t.FHt(t)}}}{const pl=self.Vs,ml=pl.XY.Zjt.e8t;pl.XY.Zjt.Krt={kHt(t,s){this.k8t(),this.H8t(t,s,-1)},OHt(t,s,i,e){this.k8t(),this.H8t(t,s,i&ml|this.pHt(e))},LHt(t,s,i){const e=this.z8t(t,s);-1!==e&&(this.k8t(),this.H8t(t,s,e&ml|this.pHt(i)))},NHt(t,s,i,e){const h=Math.floor(Math.max(t,0)),r=Math.floor(Math.max(s,0)),n=Math.floor(Math.min(t+i,this.G8t)),o=Math.floor(Math.min(s+e,this._8t));for(let s=r;s<o;++s)for(let t=h;t<n;++t)this.H8t(t,s,-1)},BHt(t,s,i,e,h,r){this.k8t();const n=Math.floor(Math.max(t,0)),o=Math.floor(Math.max(s,0)),a=Math.floor(Math.min(t+i,this.G8t)),l=Math.floor(Math.min(s+e,this._8t)),u=h&ml|this.pHt(r);for(let s=o;s<l;++s)for(let t=n;t<a;++t)this.H8t(t,s,u)},WHt(t,s,i,e,h){this.k8t();const r=Math.floor(Math.max(t,0)),n=Math.floor(Math.max(s,0)),o=Math.floor(Math.min(t+i,this.G8t)),a=Math.floor(Math.min(s+e,this._8t)),l=this.pHt(h);for(let s=n;s<a;++s)for(let t=r;t<o;++t){const u=this.z8t(t,s);-1!==u&&this.H8t(t,s,u&ml|l)}},VHt(t){let s=null;try{s=JSON.parse(t)}catch(t){return void console.error("[Construct] Failed to parse tilemap JSON: ",t)}s.c2tilemap?(this.G8t=s.width,this._8t=s.height,this.k8t(!0),this.O8t(s.data),this.B8t(),this.W8t()):console.error("[Construct] Unrecognized JSON data format")},jHt(t){const s=URL.createObjectURL(new Blob([this.dHt()],{type:"application/json"}));this.Pf.iO(s,t)},async HHt(t,s){if(!this.E8t||this.E8t.OU()!==t){const i=this.Pf,e=pl.Tr(pl.V_t);try{if(await e.tIt(i,t),!e.u7())throw new Error("image failed to load");if(this._r())return e.Gr(),null;const h=await e.mH(i.bM(),{t2:i.ED()});if(!h)return}catch(t){return console.error("Load image from URL failed: ",t),void(this._r()||this.QB(pl.XY.Zjt.JY.EHt))}this._r()?e.Gr():(this.D8t(),this.E8t=e,i.gO(),this.R8t.clear(),this.B8t(),await this.s4(pl.XY.Zjt.JY.AHt))}},UHt(t){2<=t&&t++,this.lO().WM(t),this.Pf.gO()},zHt(t,s,i){this.k8t(),this.F8t||(this.F8t=new pl.XY.Zjt.DHt(this,this.Zxt)),this.F8t.JHt(t,s,i)},qHt(t,s,i){this.k8t(),this.F8t||(this.F8t=new pl.XY.Zjt.DHt(this,this.Zxt)),this.F8t.XHt(t,s,i)},YHt(t,s,i){pl.XY.Zjt.Krt.zHt.call(this,t,s,i)},$Ht(t,s,i){pl.XY.Zjt.Krt.qHt.call(this,t,s,i)}}}{const gl=self.Vs,yl=gl.XY.Zjt.e8t;gl.XY.Zjt.Zrt={KHt(t,s){const i=this.z8t(t,s);return-1===i?-1:i&yl},ZHt(t){return this.Q8t(t)},QHt(t){return this.tHt(t)},tUt(t){return t*this.w8t+this.lO().KM()+this.w8t/2},sUt(t){return t*this.b8t+this.lO().tv()+this.b8t/2},iUt(t){const s=this.lO().KM();return Math.floor((t-s)/this.w8t)*this.w8t+s+this.w8t/2},eUt(t){const s=this.lO().tv();return Math.floor((t-s)/this.b8t)*this.b8t+s+this.b8t/2},hUt(){return this.dHt()},rUt(){return this.hHt()},nUt(){return this.nHt()},oUt(){return this.eHt()},aUt(){return this.rHt()}}}{const Sl=self.Vs,wl=Sl.XY.Zjt.Qjt,bl=Sl.XY.Zjt.t8t,Ml=Sl.XY.Zjt.s8t,vl=Sl.XY.Zjt.e8t,Tl=Sl.Tr(Sl.Rect),xl=Sl.Tr(Sl.gu);Sl.XY.Zjt.lUt=class extends Sl.Mr{constructor(){super(),this.Af=-1,this.uUt=-1,this.cUt=!1,this.fUt=!1,this.dUt=!1,this.pUt=Sl.Tr(Sl.Rect),this.mUt=null}W7(t,s,i,e,h,r,n,o){this.Af=t,this.uUt=t&vl,this.cUt=0!=(t&wl),this.fUt=0!=(t&bl),this.dUt=0!=(t&Ml),this.pUt.El(e*s+r,h*i+n,s,i),this.mUt=o.cHt(this.Af)}Hv(t,s,i,e,h){Tl.I(this.pUt),Tl.offset(i,e),Tl.uu(s)&&(xl.Lu(Tl),t.RA(xl,this.mUt))}}}{const Gl=self.Vs;Gl.XY.Zjt.gUt=class extends Gl.Mr{constructor(){super(),this.Af=-1,this.yUt=null,this.pUt=Gl.Tr(Gl.Rect)}W7(t,s,i,e,h,r,n,o){this.Af=t,this.yUt=s,this.pUt.El(h*i+n,r*e+o,i,e)}SUt(t){this.pUt.Ol(this.pUt.jl()+t)}wUt(){return this.Af}bUt(){return!!this.yUt}bFt(){return this.yUt}wFt(){return this.pUt}}}{const _l=self.Vs,Il=_l.XY.Zjt.e8t;_l.XY.Zjt.V8t=class extends _l.Mr{constructor(t,s,i){super();const e=t.oHt(),h=t.aHt();this.FPt=t,this.yl=s,this.Sl=i,this.Cl=this.yl*e*t.hHt(),this.Pl=this.Sl*h*t.nHt(),this.MUt=[],this.vUt=[],this.TUt=[],this.xUt=!1;for(let t=0;t<h;++t){const r=new Int32Array(e);r.fill(-1),this.MUt.push(r)}}Tc(){const i=this.FPt.oHt(),s=this.FPt.aHt(),e=this.MUt;if(e.length<s)for(let t=e.length;t<s;++t)e.push(new Int32Array(i));else e.length>s&&_l.$n(e,s);for(let s=0,t=e.length;s<t;++s){let t=e[s];t.length!==i&&(t=new Int32Array(i),e[s]=t),t.fill(-1)}}fHt(t){const s=this.FPt,i=s.lO(),e=s.oHt()*s.hHt(),h=s.aHt()*s.nHt(),r=i.KM()+this.Cl,n=i.tv()+this.Pl;t.set(r,n,r+e,n+h)}J8t(){this.xUt=!1}q8t(){if(!this.xUt){const u=this.FPt,c=u.ovt(),s=u.lO(),f=u.hHt(),d=u.nHt(),p=u.oHt(),m=u.aHt(),g=this.Cl,y=this.Pl;if(!(f<=0||d<=0)){let e=Math.min(u.sHt(),Math.floor(s.Wm()/f)),t=Math.min(u.iHt(),Math.floor(s.$m()/d)),h=(e-=g/f,t-=y/d,e>p&&(e=p),t>m&&(t=m),this.MUt),r=this.vUt,n=0;for(let i=0;i<t;++i){const S=h[i];for(let s=0;s<e;++s){const w=S[s];if(-1!==w){let t=null;n<r.length?t=r[n]:(t=_l.Tr(_l.XY.Zjt.lUt),r.push(t)),t.W7(w,f,d,s,i,g,y,u),++n}}}n<r.length&&_l.$n(r,n);let i=null,o=!1,a=this.TUt;_l.Kn(a);for(let s=0;s<t;++s){const b=h[s];for(let t=0;t<e;++t){const M=b[t],v=(Il,c.m8t(M)),T=c.g8t(v);-1!==M&&T?!i||v||o?(i&&a.push(i),(i=_l.Tr(_l.XY.Zjt.gUt)).W7(M,v,f,d,t,s,g,y),o=!!v):i.SUt(f):i&&(a.push(i),i=null,o=!1)}i&&(a.push(i),i=null,o=!1)}let l=a.length;for(let s=0;s<l;++s){const x=a[s];if(!x.bUt()){const G=x.wFt();for(let t=s+1;t<l;++t){const _=a[t],I=_.wFt();I.Vl()<G.Hl()||I.Vl()>G.Hl()||I.jl()>G.jl()||I.Wl()>G.Wl()||_.bUt()||I.Wl()===G.Wl()&&I.jl()===G.jl()&&(a.splice(t,1),--l,G.Ll(G.Hl()+d),--t)}}}this.xUt=!0}}}H8t(t,s,i){this.MUt[s][t]!==i&&(this.MUt[s][t]=i,this.xUt=!1,this.FPt.X8t())}$8t(){return this.MUt}lHt(){return this.TUt}Hv(i,e,h,r){const n=this.FPt,o=this.vUt;for(let t=0,s=o.length;t<s;++t)o[t].Hv(i,e,h,r,n)}}}{const Cl=self.Vs,Pl=Object.freeze([[0,0,0],[0,0,0],[0,0,0]]);Cl.XY.Zjt.DHt=class{constructor(t,s){this.FPt=t,this.Zxt=s,this.GUt=[null,null],this._Ut=[Cl.XY.Zjt.IUt,Cl.XY.Zjt.CUt],this.PUt=new Cl.Sf}get RUt(){return Pl}get AUt(){return-999}get EUt(){return-998}get FUt(){return-1}get DUt(){return 0}get kUt(){return 1}OUt(){return this.FPt}ovt(){return this.Zxt}JHt(t,s,i){this.FHt(i)&&(this.LUt(i,0),this.NUt(t,s,this.BUt(t,s,i)))}XHt(t,s,i){this.FHt(i)&&(this.LUt(i,1),this.WUt(t,s),this.NUt(t,s,this.BUt(t,s,i)))}FHt(t){return!!this.ovt().S8t(t)}VUt(t,s){return this.OUt().z8t(t,s)}jUt(t,s,i){const e=this.VUt(t,s);return!!this.HUt(e,!0,e,i)}HUt(t,s,i,e){return-1===t||(!s||-998!==t)&&s&&e&&!this.UUt(i,e)?0:1}zUt(t,s,i,e){const h=e.c8t[t];if(!h.length)return-1;if(1===h.length)return h[0][0];const r=this.VUt(s,i);if(this.HUt(r)){const n=h.some(t=>r===t[0]);if(n)return r}this.PUt.Tc();for(let[t,s]of h)"number"!=typeof s&&(s=1),this.PUt.xf(s,t);return this.PUt.Tf()}JUt(t,s,i){-1!==t&&this.OUt().H8t(t,s,i)}WUt(t,s){this.OUt().H8t(t,s,-1)}UUt(t,s){for(const i of s.c8t)for(const[e]of i)if(e===t)return!0;return!1}NUt(t,s,i){i&&(this.JUt(t-1,s-1,i[0][0]),this.JUt(t,s-1,i[1][0]),this.JUt(t+1,s-1,i[2][0]),this.JUt(t-1,s,i[0][1]),this.JUt(t,s,i[1][1]),this.JUt(t+1,s,i[2][1]),this.JUt(t-1,s+1,i[0][2]),this.JUt(t,s+1,i[1][2]),this.JUt(t+1,s+1,i[2][2]))}qUt(t){const s=this.ovt().S8t(t);return s.type}XUt(t){const s=this.qUt(t);this.GUt[s]||(this.GUt[s]=new this._Ut[s](this))}LUt(t,s){this.XUt(t);const i=this.qUt(t);this.GUt[i]&&this.GUt[i].YUt(s)}BUt(t,s,i){this.XUt(i);const e=this.ovt().S8t(i);if(this.GUt[e.type])return this.GUt[e.type].$Ut(t,s,e)}}}{const Rl=self.Vs;Rl.XY.Zjt.IUt=class{constructor(t){this.KUt=t,this.ZUt=t.DUt}YUt(t){this.ZUt=t}$Ut(t,s,i){return this.QUt(t,s,i)}QUt(t,s,i){const e=this.ZUt===this.KUt.DUt?this.t7t(t,s,void 0,i):this.KUt.FUt,h=this.s7t(t,s-1,"s",i),r=this.s7t(t-1,s,"e",i),n=this.s7t(t+1,s,"w",i),o=this.s7t(t,s+1,"n",i),a=this.KUt.RUt;return a[0][0]=this.KUt.AUt,a[1][0]=this.i7t(h,t,s-1,i),a[2][0]=this.KUt.AUt,a[0][1]=this.i7t(r,t-1,s,i),a[1][1]=this.i7t(e,t,s,i),a[2][1]=this.i7t(n,t+1,s,i),a[0][2]=this.KUt.AUt,a[1][2]=this.i7t(o,t,s+1,i),a[2][2]=this.KUt.AUt,a}s7t(t,s,i,e){return this.KUt.jUt(t,s,e)?this.t7t(t,s,i,e):this.KUt.AUt}t7t(t,s,i,e){this.ZUt===this.KUt.kUt&&(i=void 0);const h=this.KUt.VUt(t,s-1),r=this.KUt.VUt(t-1,s),n=this.KUt.VUt(t+1,s),o=this.KUt.VUt(t,s+1),a="n"===i?this.KUt.EUt:h,l="w"===i?this.KUt.EUt:r,u="e"===i?this.KUt.EUt:n,c="s"===i?this.KUt.EUt:o,f=this.KUt.HUt(a,!0,h,e),d=this.KUt.HUt(l,!0,r,e),p=this.KUt.HUt(u,!0,n,e),m=this.KUt.HUt(c,!0,o,e);return+f+2*d+4*p+8*m}i7t(t,s,i,e){return t===this.KUt.AUt||t===this.KUt.FUt?t:this.KUt.zUt(t,s,i,e)}}}{const Al=self.Vs,El=new Map([[2,1],[8,2],[10,3],[11,4],[16,5],[18,6],[22,7],[24,8],[26,9],[27,10],[30,11],[31,12],[64,13],[66,14],[72,15],[74,16],[75,17],[80,18],[82,19],[86,20],[88,21],[90,22],[91,23],[94,24],[95,25],[104,26],[106,27],[107,28],[120,29],[122,30],[123,31],[126,32],[127,33],[208,34],[210,35],[214,36],[216,37],[218,38],[219,39],[222,40],[223,41],[248,42],[250,43],[251,44],[254,45],[255,46],[0,47]]);Al.XY.Zjt.CUt=class{constructor(t){this.KUt=t,this.ZUt=t.DUt}YUt(t){this.ZUt=t}$Ut(t,s,i){return this.e7t(t,s,i)}e7t(t,s,i){const e=this.ZUt===this.KUt.DUt?this.h7t(t,s,void 0,i):this.KUt.FUt,h=this.r7t(t-1,s-1,"se",i),r=this.r7t(t,s-1,"s",i),n=this.r7t(t+1,s-1,"sw",i),o=this.r7t(t-1,s,"e",i),a=this.r7t(t+1,s,"w",i),l=this.r7t(t-1,s+1,"ne",i),u=this.r7t(t,s+1,"n",i),c=this.r7t(t+1,s+1,"nw",i),f=this.KUt.RUt;return f[0][0]=this.n7t(h,t-1,s-1,i),f[1][0]=this.n7t(r,t,s-1,i),f[2][0]=this.n7t(n,t+1,s-1,i),f[0][1]=this.n7t(o,t-1,s,i),f[1][1]=this.n7t(e,t,s,i),f[2][1]=this.n7t(a,t+1,s,i),f[0][2]=this.n7t(l,t-1,s+1,i),f[1][2]=this.n7t(u,t,s+1,i),f[2][2]=this.n7t(c,t+1,s+1,i),f}r7t(t,s,i,e){return this.KUt.jUt(t,s,e)?this.h7t(t,s,i,e):this.KUt.AUt}h7t(t,s,i,e){this.ZUt===this.KUt.kUt&&(i=void 0);const h=this.KUt.VUt(t,s-1),r=this.KUt.VUt(t-1,s),n=this.KUt.VUt(t+1,s),o=this.KUt.VUt(t,s+1),a=this.KUt.VUt(t-1,s-1),l=this.KUt.VUt(t+1,s-1),u=this.KUt.VUt(t-1,s+1),c=this.KUt.VUt(t+1,s+1),f="n"===i?this.KUt.EUt:h,d="w"===i?this.KUt.EUt:r,p="e"===i?this.KUt.EUt:n,m="s"===i?this.KUt.EUt:o,g="nw"===i?this.KUt.EUt:a,y="ne"===i?this.KUt.EUt:l,S="sw"===i?this.KUt.EUt:u,w="se"===i?this.KUt.EUt:c,b=this.KUt.HUt(f,!0,h,e),M=this.KUt.HUt(d,!0,r,e),v=this.KUt.HUt(p,!0,n,e),T=this.KUt.HUt(m,!0,o,e),x=b&&M?this.KUt.HUt(g,!0,a,e):0,G=b&&v?this.KUt.HUt(y,!0,l,e):0,_=T&&M?this.KUt.HUt(S,!0,u,e):0,I=T&&v?this.KUt.HUt(w,!0,c,e):0;return+x+2*b+4*G+8*M+16*v+32*_+64*T+128*I}n7t(t,s,i,e){return t===this.KUt.AUt||t===this.KUt.FUt?t:this.KUt.zUt(El.get(t),s,i,e)}}}{const Fl=self.Vs;Fl.XY.Drt=class extends Fl.oxt{constructor(t){super(t)}Gr(){super.Gr()}}}{const Dl=self.Vs,kl=self.Zs,Ol=[],Ll=(Dl.XY.Drt.xCt=class extends Dl.zxt{constructor(t){super(t),this.yCt=t.iPt()}Gr(){Dl.Kn(this.yCt),super.Gr()}Rxt(){for(const t of this.yCt)t.SIt(this.Pf)}mY(s){const i={t2:this.Pf.ED()};return Promise.all(this.yCt.map(t=>t.wIt(s,i)))}MY(){for(const t of this.yCt)t.bIt()}SY(){this.o7t()}o7t(){for(const t of this.T0t.S5())t.sW().a7t()}TMt(t){Dl.XY.Drt.NTt(this,t)}avt(t){Ol.push({Yxt:null,l7t:!1,instances:[]})}u7t(t,s,i){const e=Ol.at(-1);e.Yxt=t,e.l7t=i,e.instances.push(s)}lvt(t){const s=Ol.pop(),i=s.Yxt,e=s.l7t;if(i){const h=new Map;for(const r of s.instances)r.dRt(h,i,e);for(const[n,o]of h)n.b5().q0t(o)}}c7t(t){const s=this.fB().oPt(t),i=this.PO(),e=s.MIt(0);return e.BW().mH(i.bM(),{t2:i.ED()}).then(()=>this.o7t()),s}f7t(t){for(const s of this.T0t.S5())s.sW().d7t(t);this.fB().aPt(t)}p7t(t,s){const i=this.T0t.rPt(t);if(!i)throw new Error(`cannot find animation name '${t}'`);let e=i.GIt(s);e<0&&(e+=i.AW()+1);const h=Dl.mIt.yIt(this.PO()),r=(i.vIt(h,e),this.PO());h.BW().mH(r.bM(),{t2:r.ED()}).then(()=>this.o7t());for(const n of this.T0t.S5())n.sW().m7t();return h}g7t(t,s){const i=this.T0t.rPt(t);if(!i)throw new Error(`cannot find animation name '${t}'`);if(1===i.AW())throw new Error(`cannot remove last frame from animation '${t}'`);let e=i.GIt(s);e<0&&(e+=i.AW()),i.TIt(e);for(const h of this.T0t.S5())h.sW().m7t()}Axt(){return self.y7t}},new WeakMap);self.y7t=class extends self.o5{constructor(t){super(t),Ll.set(this,t.ovt())}S7t(t){kl.Re(t);const s=Ll.get(this).fB().rPt(t);return s?s._It():null}w7t(){return Ll.get(this).fB().hPt().map(t=>t._It())}b7t(t){return kl.Re(t),Ll.get(this).c7t(t)._It()}M7t(t){kl.Re(t),Ll.get(this).f7t(t)}v7t(t,s){if(kl.Re(t),"number"!=typeof s&&"string"!=typeof s)throw new TypeError("invalid insert location");return Ll.get(this).p7t(t,s).DW()}T7t(t,s){if(kl.Re(t),"number"!=typeof s&&"string"!=typeof s)throw new TypeError("invalid insert location");Ll.get(this).g7t(t,s)}}}{const G=self.Vs,Nl=self.Zs,Bl=G.Tr(G.Rect),Wl=G.Tr(G.gu),Vl=G.Tr(G.gl),jl=(G.XY.Drt.Instance=class extends G.xGt{constructor(t,s){super(t);let i=!0,e="",h=0,r=!0;s&&(i=!!s[0],e=s[1],h=s[2],r=s[3]),this.x7t=this.T0t.rPt(e)||this.T0t.iPt()[0],this.G7t=G.Rr(h,0,this.x7t.AW()-1),this._7t=this.x7t.MIt(this.G7t);const n=this._7t.BW(),o=(this.I7t=n.wT(),this.C7t=n.gP(),this.P7t=n.OGt(),this.CGt(),t.cRt(2,!0),t.cRt(1,0<=this.x7t.TW()),this.R7t=Math.abs(this.x7t.TW()),this.A7t=this.x7t.IW(),this.E7t=G.Tr(G.H0),this.F7t=0,this.D7t=0,this.k7t="",this.O7t=-1,this.L7t="",this.N7t=0,this.lO());this.B7t=o.V4(),o.MN(i),o.h6(r),o.mot(this._7t.jW()),o.yot(this._7t.UW()),o.e3t(this._7t.tV()),o.R4(),1===this.T0t.ePt()&&1===this.T0t.iPt()[0].AW()||0===this.R7t||this.mGt()}Gr(){this.x7t=null,this._7t=null,this.I7t=null,this.E7t=null,super.Gr()}EGt(){return this._7t.BW()}wet(){return!0}g7(){this.I7t=null}AGt(){this.a7t()}Hv(t){const s=this.I7t;if(null!==s){t.bA(s);const i=this.lO();i.J6()?this.W7t(i,t):this.V7t(i,t)}}V7t(t,s){let i=this.B7t;this.Pf.DD()&&(i=t.$Et(i)),s.RA(i,this.P7t)}W7t(s,t){const i=s.p3t();if(s.g3t()){s.qEt(Bl,Wl,!1);let t=Wl;this.Pf.DD()&&(t=s.$Et(t)),i.jv(s.q6(),t,this.P7t),s.m3t(!1)}i.Hv(t)}j7t(){return this.E7t.oi()}H7t(){return this.Pi.fRt(2)}U7t(t){this.Pi.cRt(2,t)}z7t(){return this.Pi.fRt(1)}J7t(t){this.Pi.cRt(1,t)}q7t(){return this.Pi.fRt(4)}X7t(t){this.Pi.cRt(4,t)}yZ(){this.L7t&&this.Y7t(),0<=this.O7t&&this.$7t();const t=this.R7t;if(this.H7t()&&0!==t){const s=this.Pf.fk(this.Pi),i=(this.E7t.Fc(s),this.j7t()),e=this._7t,h=e.WW()/t;if(!(i<this.F7t+h)){const r=this.x7t,n=this.A7t,o=r.AW(),a=r.GW(),l=r.xW(),u=r.RW(),c=(this.z7t()?this.G7t++:this.G7t--,this.F7t+=h,this.G7t>=o&&(u?(this.J7t(!1),this.G7t=o-2):!l&&(this.D7t++,this.D7t>=a)?this.K7t(!1):this.G7t=n),this.G7t<0&&(u?(this.G7t=1,this.J7t(!0),l||(this.D7t++,this.D7t>=a&&this.K7t(!0))):!l&&(this.D7t++,this.D7t>=a)?this.K7t(!0):this.G7t=n),this.G7t=G.Rr(this.G7t,0,o-1),r.MIt(this.G7t));i>this.F7t+c.WW()/t&&(this.F7t=i),this.Z7t(e,c)}}else this.Qxt()}K7t(t){this.G7t=t?0:this.x7t.AW()-1,this.U7t(!1),this.k7t=this.x7t.Mf(),this.X7t(!0),this.Xxt("animationend",!1,{animationName:this.k7t}),this.QB(G.XY.Drt.JY.Q7t),this.QB(G.XY.Drt.JY.tzt),this.X7t(!1),this.D7t=0}Z7t(i,e,t){if(i!==e){const s=this.lO(),h=i.BW(),r=e.BW(),n=h.Wm(),o=h.$m(),a=r.Wm(),l=r.$m(),u=(t&&t.onFrameChange?t.onFrameChange(s,n,o,a,l):(n!==a&&s.qm(s.Wm()*(a/n)),o!==l&&s.Vm(s.$m()*(l/o))),s.mot(e.jW()),s.yot(e.UW()),s.e3t(e.tV()),s.R4(),this._7t=e,this.I7t=r.wT(),this.C7t=r.gP(),this.P7t=r.OGt(),this.RV().Crt());for(let t=0,s=u.length;t<s;++t)u[t].v_t(i,e);this.Xxt("framechange",!1,{animationName:this.x7t.Mf(),szt:this.G7t}),this.QB(G.XY.Drt.JY.izt),this.Pf.gO()}}ezt(t){this.U7t(!0),this.F7t=this.j7t(),1===t&&0!==this.G7t&&(this.O7t=0,this.q7t()||this.$7t()),this.mGt()}hzt(t,s,i){this.L7t=t,this.N7t=s,this.mGt(),!i&&this.q7t()||this.Y7t()}rzt(){return this.x7t}nzt(){return this.L7t||this.x7t.Mf()}d7t(t){G.Gh(t,this.nzt())&&this.hzt(this.T0t.lPt().Mf(),1,!0)}ozt(t){if("string"==typeof t)if(String(Number(t))===t)t=Number(t);else{const s=this.T0t.rPt(this.nzt());if(!s)return;if(-1===(t=s.xIt(t)))return}isFinite(t)&&(this.O7t=t,this.q7t()||this.$7t())}m7t(){if(!this.L7t&&-1===this.O7t){const t=this._7t,s=this.x7t.MIt(G.Rr(this.G7t,0,this.x7t.AW()-1));t!==s&&this.Z7t(t,s),1<this.x7t.AW()&&0<this.R7t&&this.mGt()}}azt(){return this.G7t}lzt(){return this._7t.hV()}uzt(t){this.R7t=Math.abs(t),this.J7t(0<=t),0<this.R7t&&this.mGt()}czt(){return this.z7t()?this.R7t:-this.R7t}fzt(t){"string"==typeof t&&-1===(t=this.x7t.xIt(t))||(t=G.Rr(Math.floor(t),0,this.x7t.AW()-1),this.A7t=t)}dzt(){return this.A7t}Y7t(t){const s=this._7t,i=this.T0t.rPt(this.L7t);if(this.L7t="",i&&(i!==this.x7t||!this.H7t())){this.x7t=i,this.J7t(0<=i.TW()),this.R7t=Math.abs(i.TW()),this.A7t=i.IW(),this.G7t=G.Rr(this.G7t,0,this.x7t.AW()-1),1===this.N7t&&(this.G7t=0),this.U7t(!0),this.F7t=this.j7t();const e=this.x7t.MIt(this.G7t);this.Z7t(s,e,t)}}$7t(t){const s=this._7t,i=this.G7t;if(this.G7t=G.Rr(Math.floor(this.O7t),0,this.x7t.AW()-1),this.O7t=-1,t||i!==this.G7t){const e=this.x7t.MIt(this.G7t);this.Z7t(s,e),this.F7t=this.j7t()}}a7t(){const t=this._7t.BW();this.I7t=t.wT(),this.C7t=t.gP(),this.P7t=t.OGt(),this.lO().m3t(!0)}wT(){return this.I7t}gP(){return this.C7t}OGt(){return this.P7t}qW(){return this._7t.qW()}Tvt(t){let s=this._7t,i=this.lO(),e=null;if("string"==typeof t)e=s.ZW(t);else{if("number"!=typeof t)throw new TypeError("expected string or number");e=s.KW(t-1)}let h=i.L4();if(!e)return[i.KM(),i.tv(),h];if(Vl.I(e.LIt()),i.J6()){const[r,n,o]=i.q6().Yv(Vl.Ml(),Vl.Tl());Vl.set(r,n),h+=o}return Vl.offset(-s.jW(),-s.UW()),Vl.scale(i.Wm(),i.$m()),Vl.rotate(i.GetAngle()),Vl.offset(i.KM(),i.tv()),[Vl.Ml(),Vl.Tl(),h]}pzt(){return this.lO().a3t().ec()}mzt(t){t=Math.floor(t);const s=this.lO(),i=s.a3t(),e=i.ec();if((t=t===e?0:t)<0||e<=t)return[0,0];const h=i.ic();return[h[2*t+0]+s.KM(),h[2*t+1]+s.tv()]}wGt(){const s=G.XY.Drt.Krt,t="plugins.sprite.debugger.animation-properties";return[{title:t+".title",properties:[{name:t+".current-animation",value:this.x7t.Mf(),gzt:t=>this.MGt(s.yzt,t,0)},{name:t+".current-frame",value:this.G7t,gzt:t=>this.MGt(s.Szt,t)},{name:t+".is-playing",value:this.H7t(),gzt:t=>t?this.MGt(s.wzt,0):this.MGt(s.bzt)},{name:t+".speed",value:this.R7t,gzt:t=>this.MGt(s.Mzt,t)},{name:t+".repeats",value:this.D7t,gzt:t=>this.D7t=t}]}]}dv(){const t={a:this.x7t.NJ()},s=(0!==this.F7t&&(t.fs=this.F7t),this.j7t()),i=(0!==s&&(t.at=s),0!==this.G7t&&(t.f=this.G7t),0!==this.R7t&&(t.cas=this.R7t),1!==this.D7t&&(t.ar=this.D7t),0!==this.A7t&&(t.rt=this.A7t),this.H7t()||(t.ap=this.H7t()),this.z7t()||(t.af=this.z7t()),this.lO());return i.e6()&&(t.ce=i.e6()),t}pv(t){const s=this.fB().nPt(t.a),i=(s&&(this.x7t=s),this.F7t=t.hasOwnProperty("fs")?t.fs:0,this.E7t.Set(t.hasOwnProperty("at")?t.at:0),t.hasOwnProperty("f")?t.f:0),e=(this.G7t=G.Rr(i,0,this.x7t.AW()-1),this.R7t=t.hasOwnProperty("cas")?t.cas:0,this.D7t=t.hasOwnProperty("ar")?t.ar:1,t.hasOwnProperty("rt")?t.rt:0),h=(this.A7t=G.Rr(e,0,this.x7t.AW()-1),this.U7t(!t.hasOwnProperty("ap")||!!t.ap),this.J7t(!t.hasOwnProperty("af")||!!t.af),this.x7t.MIt(this.G7t)),r=(this._7t=h,this.a7t(),this.lO());r.mot(h.jW()),r.yot(h.UW()),r.e3t(h.tV()),r.h6(!!t.ce),this.H7t()&&this.mGt()}knt(t){const s=this.lO();switch(t){case 3:return s.e6();case 2:return G.Rr(this.G7t,0,this.x7t.AW()-1);case 1:return this.x7t.Mf()}}Vnt(t,s,i){const e=this.lO();switch(t){case 3:e.h6(!!s);break;case 2:{this.U7t(!1);const h=this.x7t.AW()-1,r=s=G.Rr(s,0,h),n=this.x7t.MIt(this.G7t),o=this.x7t.MIt(r);this.Z7t(n,o,i),this.G7t=G.Rr(r,0,h);break}case 1:{this.L7t=s,this.Y7t(i);const a=this.x7t.AW();1<a&&0<this.x7t.TW()?this.mGt():this.Qxt();break}}}Axt(){return self.vzt}},new WeakMap),Hl=new Map([["current-frame",0],["beginning",1]]);self.vzt=class extends self.Y6{constructor(){super(),jl.set(this,self.uB.mB().sW())}JW(){return jl.get(this).qW()}XW(t){return this.YW(t)[0]}$W(t){return this.YW(t)[1]}Tzt(t){return this.YW(t)[2]}YW(t){if("string"!=typeof t&&"number"!=typeof t)throw new TypeError("expected string or number");return jl.get(this).Tvt(t)}QW(){return jl.get(this).pzt()}sV(t){return Nl._e(t),jl.get(this).mzt(t)[0]}eV(t){return Nl._e(t),jl.get(this).mzt(t)[1]}iV(t){return Nl._e(t),jl.get(this).mzt(t)}xzt(){jl.get(this).U7t(!1)}Gzt(t="current-frame"){Nl.Re(t);const s=Hl.get(t);if(void 0===s)throw new Error("invalid mode");jl.get(this).ezt(s)}_zt(t,s="beginning"){Nl.Re(t),Nl.Re(s);const i=Hl.get(s);if(void 0===i)throw new Error("invalid mode");const e=jl.get(this);if(!e.fB().rPt(t))throw new Error(`animation name "${t}" does not exist`);e.hzt(t,i)}S7t(t){Nl.Re(t);const s=jl.get(this).fB().rPt(t);return s?s._It():null}get animation(){return jl.get(this).rzt()._It()}get animationName(){return jl.get(this).nzt()}set szt(t){Nl._e(t),jl.get(this).ozt(t)}get szt(){return jl.get(this).azt()}set Izt(t){Nl.Re(t),jl.get(this).ozt(t)}get Izt(){return jl.get(this).lzt()}set Czt(t){Nl._e(t),jl.get(this).uzt(t)}get Czt(){return jl.get(this).czt()}set Pzt(t){Nl._e(t),jl.get(this).fzt(t)}get Pzt(){return jl.get(this).dzt()}get imageWidth(){return jl.get(this).EGt().Wm()}get imageHeight(){return jl.get(this).EGt().$m()}Rzt(){const t=jl.get(this).EGt();return[t.Wm(),t.$m()]}async Azt(t){Nl.ah(t,Blob);const s=jl.get(this),i=s.PO(),e=s.EGt(),h=G.Tr(G.V_t);if(h.sIt(i,t),await h.mH(i.bM(),{t2:i.ED()}),s._r())h.Gr();else{e.iIt(h);const r=s.ovt();r.o7t(),r.fB().a0().dispatchEvent(new G.Event("animationframeimagechange")),i.gO()}}Ezt(t,s){Nl.Re(s),jl.get(this).lO().zEt(!!t,s)}}}{const Ul=self.Vs;Ul.XY.Drt.JY={Fzt(t){return Ul.Gh(this.nzt(),t)},Dzt(t,s){return Ul.compare(this.G7t,t,s)},kzt(t,s){if("string"!=typeof s)return!1;const i=this._7t.hV();return Ul.compare(i.toLowerCase(),t,s.toLowerCase())},Ozt(t,s){return Ul.compare(this.czt(),t,s)},tzt(t){return Ul.Gh(this.k7t,t)},Q7t(){return!0},izt(){return!0},Lzt(){return this.lO().Wm()<0},Nzt(){return this.lO().$m()<0},AHt(){return!0},EHt(){return!0},e6(){return this.lO().e6()}}}{const zl=self.Vs;zl.XY.Drt.Krt={Bzt(t,s,i,e,h){if(t&&s){const[r,n]=this.Tvt(i),o=this.Pf.x5(t,s,r,n,e,h);if(o){if(e&&s.G5(o),t.l5().HL()){const l=o.lO();l.N5(this.lO().GetAngle()),l.R4()}const a=this.Pf.HD();a._5(!0),o.I5(),a._5(!1),t!==this.Pf.z1t().fB()&&this.Zxt.u7t(t,o,e)}}},bzt(){this.U7t(!1)},wzt(t){this.ezt(t)},yzt(t,s){this.hzt(t,s)},Szt(t){this.ozt(t)},Mzt(t){this.uzt(t)},Wzt(t){this.fzt(t)},Vzt(s,t){try{0===s?this.ovt().c7t(t):this.ovt().f7t(t)}catch(t){console.error(`[Construct] Error ${0===s?"adding":"removing"} animation: `,t)}},jzt(s,t,i){try{0===s?this.ovt().p7t(t,i):this.ovt().g7t(t,i)}catch(t){console.error(`[Construct] Error ${0===s?"adding":"removing"} animation frame: `,t)}},Hzt(t){const s=this.lO(),i=s.Wm(),e=Math.abs(i)*(0===t?-1:1);i!==e&&(s.qm(e),s.R4())},Uzt(t){const s=this.lO(),i=s.$m(),e=Math.abs(i)*(0===t?-1:1);i!==e&&(s.Vm(e),s.R4())},O5(t){const s=this._7t,i=s.BW(),e=this.lO(),h=e.Wm()<0?-1:1,r=e.$m()<0?-1:1,n=i.Wm()*t*h,o=i.$m()*t*r;e.Wm()===n&&e.$m()===o||(e.BC(n,o),e.R4())},async HHt(t,s,i){const e=this._7t,h=e.BW(),r=this.lO(),n=this.Pf,o=this.Zxt;if(h.OU()===t)0===s&&(r.BC(h.Wm(),h.$m()),r.R4()),this.QB(zl.XY.Drt.JY.AHt);else{const a=zl.Tr(zl.V_t);try{if(await a.tIt(n,t),!a.u7())throw new Error("image failed to load");if(this._r())return void a.Gr();await a.mH(n.bM(),{t2:n.ED()})}catch(t){return console.error("Load image from URL failed: ",t),void(this._r()||this.QB(zl.XY.Drt.JY.EHt))}this._r()?a.Gr():(h.iIt(a),o.o7t(),o.fB().a0().dispatchEvent(new zl.Event("animationframeimagechange")),n.gO(),0===s&&(r.BC(h.Wm(),h.$m()),r.R4()),await this.s4(zl.XY.Drt.JY.AHt))}},zzt(t){this.lO().h6(t)},zEt(t,s){this.lO().zEt(0===t,s)},UHt(t){this.lO().WM(t),this.Pf.gO()}}}{const Jl=self.Vs;Jl.XY.Drt.Zrt={Jzt(){return this.azt()},qzt(){return this.lzt()},Xzt(){return this.x7t.AW()},Yzt(){return this.x7t.Mf()},$zt(){return this.czt()},Kzt(){return this.x7t.TW()},Zzt(t){return this.Tvt(t)[0]},Qzt(t){return this.Tvt(t)[1]},tJt(t){return this.Tvt(t)[2]},sJt(){return this.qW()},iJt(){return this.EGt().Wm()},eJt(){return this.EGt().$m()},hJt(t){return this.mzt(t)[0]},rJt(t){return this.mzt(t)[1]},nJt(){return this.pzt()}}}{const ql=self.Vs;ql.XY.oJt=class extends ql.oxt{constructor(t){super(t)}Gr(){super.Gr()}}}{let i=function(t){switch(t){case 0:return"clamp-to-edge";case 1:return"repeat";case 2:return"mirror-repeat"}return"repeat"};i;const Xl=self.Vs;Xl.XY.oJt.xCt=class extends Xl.zxt{constructor(t,s){super(t),this.u2="repeat",this.c2="repeat",s&&(this.u2=i(s[0]),this.c2=i(s[1]))}Gr(){super.Gr()}Rxt(){this.BW().CO(this.Pf)}mY(t){return this.BW().mH(t,{t2:this.Pf.ED(),Zv:this.u2,Qv:this.c2})}MY(){this.BW().oC()}aJt(){return this.u2}lJt(){return this.c2}}}{const Yl=self.Vs,$l=self.Zs,Kl=Yl.Tr(Yl.Rect),Zl=Yl.Tr(Yl.gu),Ql=Yl.Tr(Yl.Rect),tu=Yl.Tr(Yl.gu),I=(Yl.XY.oJt.Instance=class extends Yl.xGt{constructor(t,s){super(t),this.uJt=0,this.cJt=0,this.fJt=1,this.dJt=1,this.pJt=0,this.mJt=!1,this.gJt=0,this.yJt=0,this.SJt=0,this.wJt=0,this.bJt=0,this.E8t=null,s&&(this.lO().MN(!!s[0]),this.uJt=s[4],this.cJt=s[5],this.fJt=s[6],this.dJt=s[7],this.pJt=Yl.Er(s[8]),this.mJt=!!s[9],this.gJt=s[10],this.yJt=s[11],this.SJt=s[12],this.wJt=s[13],this.bJt=s[14])}Gr(){this.D8t(),super.Gr()}D8t(){this.E8t&&(this.E8t.Gr(),this.E8t=null)}MJt(t,s,i){const e=this.EGt(),h=e.Wm(),r=e.$m(),n=this.uJt/h,o=this.cJt/r,a=this.pJt;Ql.set(0,0,t/(h*this.fJt),s/(r*this.dJt)),Ql.offset(-n,-o),0===a?i.Lu(Ql):i.Nu(Ql,-a)}vJt(t,s=!0){if(this.mJt){const i=this.EGt();t.bw(),t.HA(i.Wm()*this.fJt,i.$m()*this.dJt,this.gJt,this.yJt,this.SJt,this.wJt,this.bJt)}else s&&t.mw()}Hv(t){const s=this.EGt(),i=s.wT();if(null!==i){this.vJt(t),t.bA(i);const e=s.Wm(),h=s.$m(),r=this.uJt/e,n=this.cJt/h,o=this.lO();Ql.set(0,0,o.Wm()/(e*this.fJt),o.$m()/(h*this.dJt)),Ql.offset(-r,-n),o.J6()?this.W7t(o,t):this.V7t(o,t)}}V7t(t,s){let i=t.V4();this.Pf.DD()&&(i=t.$Et(i)),0===this.pJt?s.ob(i,Ql):(tu.Nu(Ql,-this.pJt),s.RA(i,tu))}W7t(i,t){const e=i.p3t();if(i.g3t()){i.qEt(Kl,Zl,!1);let t=Zl,s=(this.Pf.DD()&&(t=i.$Et(t)),Ql);0!==this.pJt&&(tu.Nu(Ql,-this.pJt),s=tu),e.jv(i.q6(),t,s),i.m3t(!1)}e.Hv(t)}EGt(){return this.E8t||this.T0t.BW()}wet(){return!0}wT(){return this.EGt().wT()}TJt(){this.lO().m3t(!0)}xJt(t){this.uJt!==t&&(this.uJt=t,this.Pf.gO(),this.TJt())}GJt(){return this.uJt}_Jt(t){this.cJt!==t&&(this.cJt=t,this.Pf.gO(),this.TJt())}IJt(){return this.cJt}CJt(t){this.fJt!==t&&(this.fJt=t,this.Pf.gO(),this.TJt())}PJt(){return this.fJt}RJt(t){this.dJt!==t&&(this.dJt=t,this.Pf.gO(),this.TJt())}AJt(){return this.dJt}EJt(t){this.pJt!==t&&(this.pJt=t,this.Pf.gO(),this.TJt())}FJt(){return this.pJt}DJt(t){this.mJt!==(t=!!t)&&(this.mJt=t,this.Pf.gO())}kJt(){return this.mJt}OJt(t){this.gJt!==t&&(this.gJt=t,this.kJt())&&this.Pf.gO()}LJt(){return this.gJt}NJt(t){this.yJt!==t&&(this.yJt=t,this.kJt())&&this.Pf.gO()}BJt(){return this.yJt}WJt(t){this.SJt!==t&&(this.SJt=t,this.kJt())&&this.Pf.gO()}VJt(){return this.SJt}jJt(t){this.wJt!==t&&(this.wJt=t,this.kJt())&&this.Pf.gO()}HJt(){return this.wJt}UJt(t){this.bJt!==t&&(this.bJt=t,this.kJt())&&this.Pf.gO()}zJt(){return this.bJt}dv(){const t={};return 0!==this.uJt&&(t.iox=this.uJt),0!==this.cJt&&(t.ioy=this.cJt),1!==this.fJt&&(t.isx=this.fJt),1!==this.dJt&&(t.isy=this.dJt),0!==this.pJt&&(t.ia=this.pJt),this.mJt&&(t.tr=!0),1!==this.gJt&&(t.trx=this.gJt),1!==this.yJt&&(t.try=this.yJt),1!==this.SJt&&(t.tra=this.SJt),.1!==this.wJt&&(t.trbmx=this.wJt),.1!==this.bJt&&(t.trbmy=this.bJt),t}pv(t){this.uJt=t.iox||0,this.cJt=t.ioy||0,this.fJt=t.hasOwnProperty("isx")?t.isx:1,this.dJt=t.hasOwnProperty("isy")?t.isy:1,this.pJt=t.ia||0,this.mJt=!!t.tr,this.gJt=t.hasOwnProperty("trx")?t.trx:1,this.yJt=t.hasOwnProperty("try")?t.try:1,this.SJt=t.hasOwnProperty("tra")?t.tra:1,this.wJt=t.hasOwnProperty("trbmx")?t.trbmx:.1,this.bJt=t.hasOwnProperty("trbmy")?t.trbmy:.1}wGt(){const t="plugins.tiledbg.properties";return[{title:t+".image-transform.name",properties:[{name:t+".image-offset-x.name",value:this.GJt(),gzt:t=>this.xJt(t)},{name:t+".image-offset-y.name",value:this.IJt(),gzt:t=>this._Jt(t)},{name:t+".image-scale-x.name",value:100*this.PJt(),gzt:t=>this.CJt(t/100)},{name:t+".image-scale-y.name",value:100*this.AJt(),gzt:t=>this.RJt(t/100)},{name:t+".image-angle.name",value:Yl.Fr(this.FJt()),gzt:t=>this.EJt(Yl.Er(t))}]},{title:t+".tile-randomization.name",properties:[{name:t+".enable-tile-randomization.name",value:this.kJt(),gzt:t=>this.DJt(t)},{name:t+".x-random.name",value:100*this.LJt(),gzt:t=>this.OJt(t/100)},{name:t+".y-random.name",value:100*this.BJt(),gzt:t=>this.NJt(t/100)},{name:t+".angle-random.name",value:100*this.VJt(),gzt:t=>this.WJt(t/100)},{name:t+".blend-margin-x.name",value:100*this.HJt(),gzt:t=>this.jJt(t/100)},{name:t+".blend-margin-y.name",value:100*this.zJt(),gzt:t=>this.UJt(t/100)}]}]}knt(t){switch(t){case 4:return this.GJt();case 5:return this.IJt();case 6:return this.PJt();case 7:return this.AJt();case 8:return this.FJt();case 9:return this.kJt();case 10:return this.LJt();case 11:return this.BJt();case 12:return this.VJt();case 13:return this.HJt();case 14:return this.zJt()}}Vnt(t,s){switch(t){case 4:this.xJt(s);break;case 5:this._Jt(s);break;case 6:this.CJt(s);break;case 7:this.RJt(s);break;case 8:this.EJt(s);break;case 9:this.DJt(!!s);break;case 10:this.OJt(s);break;case 11:this.NJt(s);break;case 12:this.WJt(s);break;case 13:this.jJt(s);break;case 14:this.UJt(s)}}Axt(){return self.JJt}},new WeakMap);self.JJt=class extends self.Y6{constructor(){super(),I.set(this,self.uB.mB().sW())}set qJt(t){$l._e(t),I.get(this).xJt(t)}get qJt(){return I.get(this).GJt()}set XJt(t){$l._e(t),I.get(this)._Jt(t)}get XJt(){return I.get(this).IJt()}YJt(t,s){$l._e(t),$l._e(s);const i=I.get(this);i.xJt(t),i._Jt(s)}$Jt(){const t=I.get(this);return[t.GJt(),t.IJt()]}set KJt(t){$l._e(t),I.get(this).CJt(t)}get KJt(){return I.get(this).PJt()}set ZJt(t){$l._e(t),I.get(this).RJt(t)}get ZJt(){return I.get(this).AJt()}QJt(t,s){$l._e(t),$l._e(s);const i=I.get(this);i.CJt(t),i.RJt(s)}t9t(){const t=I.get(this);return[t.PJt(),t.AJt()]}set s9t(t){$l._e(t),I.get(this).EJt(t)}get s9t(){return I.get(this).FJt()}set i9t(t){$l._e(t),I.get(this).EJt(Yl.Er(t))}get i9t(){return Yl.Fr(I.get(this).FJt())}get imageWidth(){return I.get(this).EGt().Wm()}get imageHeight(){return I.get(this).EGt().$m()}Rzt(){const t=I.get(this).EGt();return[t.Wm(),t.$m()]}set e9t(t){I.get(this).DJt(!!t)}get e9t(){return I.get(this).kJt()}set h9t(t){$l._e(t),I.get(this).OJt(t)}get h9t(){return I.get(this).LJt()}set r9t(t){$l._e(t),I.get(this).NJt(t)}get r9t(){return I.get(this).BJt()}n9t(t,s){$l._e(t),$l._e(s);const i=I.get(this);i.OJt(t),i.NJt(s)}o9t(){const t=I.get(this);return[t.LJt(),t.BJt()]}set a9t(t){$l._e(t),I.get(this).WJt(t)}get a9t(){return I.get(this).VJt()}set l9t(t){$l._e(t),I.get(this).jJt(t)}get l9t(){return I.get(this).HJt()}set u9t(t){$l._e(t),I.get(this).UJt(t)}get u9t(){return I.get(this).zJt()}c9t(t,s){$l._e(t),$l._e(s);const i=I.get(this);i.jJt(t),i.UJt(s)}f9t(){const t=I.get(this);return[t.HJt(),t.zJt()]}async CHt(t){$l.ah(t,Blob);const s=I.get(this),i=s.PO(),e=Yl.Tr(Yl.V_t);e.sIt(i,t),await e.mH(i.bM(),{t2:i.ED(),Zv:s.ovt().aJt(),Qv:s.ovt().lJt()}),s._r()?e.Gr():(s.D8t(),s.E8t=e,i.gO())}}}{const su=self.Vs;su.XY.oJt.JY={AHt(){return!0},EHt(){return!0},d9t(){return this.kJt()}}}{const iu=self.Vs;iu.XY.oJt.Krt={p9t(t){this.xJt(t)},m9t(t){this._Jt(t)},g9t(t){this.CJt(t/100)},y9t(t){this.RJt(t/100)},S9t(t){this.EJt(iu.Er(t))},w9t(t){this.DJt(t)},b9t(t,s){this.OJt(t/100),this.NJt(s/100)},M9t(t){this.WJt(t/100)},v9t(t,s){this.jJt(t/100),this.UJt(s/100)},UHt(t){this.lO().WM(t),this.Pf.gO()},async HHt(t,s){if(!this.E8t||this.E8t.OU()!==t){const i=this.Pf,e=iu.Tr(iu.V_t);try{if(await e.tIt(i,t),!e.u7())throw new Error("image failed to load");if(this._r())return e.Gr(),null;const h=await e.mH(i.bM(),{t2:i.ED(),Zv:this.ovt().aJt(),Qv:this.ovt().lJt()});if(!h)return}catch(t){return console.error("Load image from URL failed: ",t),void(this._r()||this.QB(iu.XY.oJt.JY.EHt))}this._r()?e.Gr():(this.D8t(),this.E8t=e,i.gO(),await this.s4(iu.XY.oJt.JY.AHt))}}}}{const eu=self.Vs;eu.XY.oJt.Zrt={iJt(){return this.EGt().Wm()},eJt(){return this.EGt().$m()},T9t(){return this.uJt},x9t(){return this.cJt},G9t(){return 100*this.fJt},_9t(){return 100*this.dJt},I9t(){return eu.Fr(this.pJt)},C9t(){return 100*this.LJt()},P9t(){return 100*this.BJt()},R9t(){return 100*this.VJt()},A9t(){return 100*this.HJt()},E9t(){return 100*this.zJt()}}}{const hu=self.Vs;hu.XY.F9t=class extends hu.oxt{constructor(t){super(t)}Gr(){super.Gr()}}}{const ru=self.Vs;ru.XY.F9t.xCt=class extends ru.zxt{constructor(t){super(t)}Gr(){super.Gr()}Rxt(){this.BW().CO(this.Pf)}mY(t){return this.BW().mH(t,{t2:this.Pf.ED()})}MY(){this.BW().oC()}}}{let s=function(t){return lu.get(t).D9t()};s;const nu=self.Vs,ou=self.Zs,au=nu.Tr(nu.Rect),lu=(nu.XY.F9t.Instance=class extends nu.xGt{constructor(t,s){super(t),this.k9t=!0;const i=nu.Tr(self.O9t);(this.N9t=i).L9t=()=>this.B9t(),this.W9t=null,this.V9t=(t,s,i,e,h,r)=>this.j9t(t,s,i,e,h,r),this.H9t=t=>this.U9t(t);let e=this.z9t=!0;s&&(i.J9t(s[0]),i.q9t(nu.Er(s[1])),i.X9t(s[2]?"one-shot":"continuous-spray"),this.Y9t(this.Pf.m8(s[3])),e=s[4],i.$9t(s[5]),i.K9t(s[6]),i.Z9t(s[7]/100),i.Q9t(s[8]),i.tqt(s[9]),i.sqt(s[10]),i.iqt(s[11]),i.eqt(s[12]),i.hqt(s[13]),i.rqt(s[14]),i.SetGravity(s[15]),i.nqt(s[16]),i.oqt(s[17]),i.aqt(s[18]),i.lqt(s[19]),i.uqt(s[20])),this.cqt(),this.W9t&&(this.z9t=!1),"one-shot"===i.fqt()?i.dqt():i.pqt(!0);const h=this.lO();h.MN(e),h.ZEt(!0),this.Pi.a0().addEventListener("bboxchange",()=>{h.KEt(this.N9t.B4())}),this.PO().bM().hw()&&h.jEt(),this.wK=t=>this.bK(t),this.PO().a0().addEventListener("afterload",this.wK),this.mGt()}Gr(){this.PO().a0().removeEventListener("afterload",this.wK),this.wK=null,this.N9t.Gr(),this.N9t=null,this.V9t=null,this.H9t=null,super.Gr()}D9t(){return this.N9t}mqt(t){this.N9t.J9t(t),"one-shot"===this.N9t.fqt()&&this.k9t&&this.N9t.gqt(t)}Y9t(t){(t=t===this.fB()?null:t)===this.W9t||(this.W9t=t,this.N9t.yqt=t?t=>this.Sqt(t):null,this.W9t)||(this.z9t=!0)}cqt(){const t=this.N9t,s=this.lO();t.wqt(s.mA()),t.CWt(this.Pf.DD()),t.bqt(s.KM()),t.Mqt(s.tv()),t.vqt(s.GetAngle()),t.Tqt(Math.abs(s.fEt()))}B9t(){this.Pf.SB(this.Pi)}Hv(t){if(this.z9t){const s=this.T0t.BW(),i=s.wT();if(i){const e=this.lO(),h=e.uO(),r=au,n=(this.Pf.yL().VOt()?r.set(-1/0,-1/0,1/0,1/0):h.S9()?h.Yq(e.L4(),r):h.h9(e.L4(),r),t.bA(i),h.r9(e.L4()));this.N9t.xqt(h.lB()*n),this.N9t.Hv(t,s.OGt(),r,h.S9())}}}dv(){const t=this.N9t;return{r:t.Gqt(),sc:t._qt(),st:t.fqt(),isp:t.Iqt(),isz:t.Cqt(),io:t.Pqt(),gr:t.Rqt(),xr:t.Aqt(),yr:t.Eqt(),spr:t.Fqt(),szr:t.Dqt(),grnd:t.kqt(),acc:t.Oqt(),g:t.Lqt(),lar:t.Nqt(),lsr:t.Bqt(),lor:t.Wqt(),dm:t.Vqt(),to:t.jqt(),s:t.Hqt(),pcc:t.Uqt(),ft:this.k9t,soc:this.W9t?this.W9t.NJ():null,p:t.zqt().map(t=>t.toJSON())}}pv(t,s){const i=this.N9t;if(i.J9t(t.r),i.q9t(t.sc),i.X9t(t.st),i.$9t(t.isp),i.K9t(t.isz),i.Z9t(t.io),i.Q9t(t.gr),i.tqt(t.xr),i.sqt(t.yr),i.iqt(t.spr),i.eqt(t.szr),i.hqt(t.grnd),i.rqt(t.acc),i.SetGravity(t.g),i.nqt(t.lar),i.oqt(t.lsr),i.aqt(t.lor),i.lqt(t.dm),i.uqt(t.to),i.pqt(t.s),i.Jqt(t.pcc),this.k9t=t.ft,t.hasOwnProperty("soc")){const r=this.PO().m8(t.soc);r&&this.Y9t(r)}const e=t.p,h=(i.gqt(e.length,!1),i.zqt());for(let t=0,s=h.length;t<s;++t)h[t].nl(e[t]);"state"===s&&this.W9t&&(i.qqt(),i.Xqt(this))}bK(){const t=this.N9t,i=(t.qqt(),t.Xqt(this),t.zqt());for(let t=0,s=i.length;t<s;++t){const e=i[t],h=e.Yqt();if(h){const r=h.lO();if(r){const n=r.RV();if(n){const o=e.$qt(),a=n.GB();if(("number"!=typeof o||"number"!=typeof a||o!==a)&&"number"==typeof o){const l=this.PO(),u=l.hO(o);u&&l.SB(u)}}}}}}yZ(){const t=this.Pf.fk(this.Pi);this.cqt(),this.k9t&&"one-shot"===this.N9t.fqt()&&this.N9t.Kqt(),this.N9t.yZ(t),this.N9t.Hqt()&&this.Pf.gO(),this.lO().R4(),this.k9t=!1}Zqt(t){for(this.k9t&&"one-shot"===this.N9t.fqt()&&this.N9t.Kqt();0<t;)this.N9t.yZ(1/60),t-=1/60;this.N9t.Hqt()&&this.Pf.gO(),this.lO().R4(),this.k9t=!1}Sqt(t,s){let i,e=(i=(i=(i="number"==typeof s?this.Pf.hO(s):i)&&i.fB()!==this.W9t?null:i)||this.Pf.x5(this.W9t,this.lO().uO(),t.KM(),t.tv())).lO();return e.BC(t.Ic(),t.Ic()),e.N5(t.GetAngle()),e.yA(t.mA()),e.J4(this.lO().z4()),e.R4(),e.s6(this.RV(),!0),i.WY(),t.Qqt(this.V9t),t.tXt(this.H9t),i}j9t(t,s,i,e,h,r){if(!t.kj()){const n=t.lO();n.D4(s,i),n.BC(n.Wm()+e,n.$m()+e),n.N5(n.GetAngle()+h),n.yA(n.mA()+r),n.R4()}}U9t(t){t.kj()||this.Pf.SB(t)}knt(t){const s=this.N9t;switch(t){case 0:return s.Gqt();case 1:return nu.Fr(s._qt());case 2:return"one-shot"===s.fqt()?1:0;case 5:return s.Iqt();case 6:return s.Cqt();case 7:return 100*s.Pqt();case 8:return s.Rqt();case 9:return s.Aqt();case 10:return s.Eqt();case 11:return s.Fqt();case 12:return s.Dqt();case 13:return s.kqt();case 14:return s.Oqt();case 15:return s.Lqt();case 16:return s.Nqt();case 17:return s.Bqt();case 18:return s.Wqt();case 19:return s.Vqt();case 20:return s.jqt()}}Vnt(t,s){const i=this.N9t;switch(t){case 0:i.J9t(s);break;case 1:i.q9t(nu.Er(s));break;case 2:i.X9t(s?"one-shot":"continuous-spray");break;case 5:i.$9t(s);break;case 6:i.K9t(s);break;case 7:i.Z9t(s/100);break;case 8:i.Q9t(s);break;case 9:i.tqt(s);break;case 10:i.sqt(s);break;case 11:i.iqt(s);break;case 12:i.eqt(s);break;case 13:i.hqt(s);break;case 14:i.rqt(s);break;case 15:i.SetGravity(s);break;case 16:i.nqt(s);break;case 17:i.oqt(s);break;case 18:i.aqt(s);break;case 19:i.lqt(s);break;case 20:i.uqt(s)}}wGt(){const t="plugins.particles",s=t+".properties",i=t+".debugger",e=this.N9t;return[{title:t+".name",properties:[{name:i+".particle-count",value:e.sXt()},{name:s+".type.name",value:[s+".type.items."+e.fqt()]},{name:i+".is-spraying",value:e.Hqt(),gzt:t=>e.pqt(t)},{name:s+".rate.name",value:e.Gqt(),gzt:t=>e.J9t(t)},{name:s+".spray-cone.name",value:nu.Fr(e._qt()),gzt:t=>e.q9t(nu.Er(t))},{name:s+".speed.name",value:e.Iqt(),gzt:t=>e.$9t(t)},{name:s+".size.name",value:e.Cqt(),gzt:t=>e.K9t(t)},{name:s+".opacity.name",value:e.Pqt(),gzt:t=>e.Z9t(t)},{name:s+".grow-rate.name",value:e.Rqt(),gzt:t=>e.Q9t(t)},{name:s+".x-randomiser.name",value:e.Aqt(),gzt:t=>e.tqt(t)},{name:s+".y-randomiser.name",value:e.Eqt(),gzt:t=>e.sqt(t)},{name:s+".initial-speed-randomiser.name",value:e.Fqt(),gzt:t=>e.iqt(t)},{name:s+".size-randomiser.name",value:e.Dqt(),gzt:t=>e.eqt(t)},{name:s+".grow-rate-randomiser.name",value:e.kqt(),gzt:t=>e.hqt(t)},{name:s+".acceleration.name",value:e.Oqt(),gzt:t=>e.rqt(t)},{name:s+".gravity.name",value:e.Lqt(),gzt:t=>e.SetGravity(t)},{name:s+".angle-randomiser.name",value:e.Nqt(),gzt:t=>e.nqt(t)},{name:s+".life-speed-randomiser.name",value:e.Bqt(),gzt:t=>e.oqt(t)},{name:s+".opacity-randomiser.name",value:e.Wqt(),gzt:t=>e.aqt(t)},{name:s+".timeout.name",value:e.jqt(),gzt:t=>e.uqt(t)}]}]}Axt(){return self.iXt}},new WeakMap);self.iXt=class extends self.Y6{constructor(){super(),lu.set(this,self.uB.mB().sW())}set eXt(t){s(this).pqt(!!t)}get eXt(){return s(this).Hqt()}set rate(t){ou._e(t),lu.get(this).mqt(t)}get rate(){return s(this).Gqt()}set hXt(t){ou._e(t),s(this).q9t(t)}get hXt(){return s(this)._qt()}set rXt(t){ou._e(t),s(this).$9t(t)}get rXt(){return s(this).Iqt()}set nXt(t){ou._e(t),s(this).K9t(t)}get nXt(){return s(this).Cqt()}set oXt(t){ou._e(t),s(this).Z9t(t)}get oXt(){return s(this).Pqt()}set aXt(t){ou._e(t),s(this).tqt(t)}get aXt(){return s(this).Aqt()}set lXt(t){ou._e(t),s(this).sqt(t)}get lXt(){return s(this).Eqt()}set uXt(t){ou._e(t),s(this).iqt(t)}get uXt(){return s(this).Fqt()}set cXt(t){ou._e(t),s(this).eqt(t)}get cXt(){return s(this).Dqt()}set fXt(t){ou._e(t),s(this).Q9t(t)}get fXt(){return s(this).Rqt()}set dXt(t){ou._e(t),s(this).hqt(t)}get dXt(){return s(this).kqt()}set acceleration(t){ou._e(t),s(this).rqt(t)}get acceleration(){return s(this).Oqt()}set pXt(t){ou._e(t),s(this).SetGravity(t)}get pXt(){return s(this).Lqt()}set mXt(t){ou._e(t),s(this).nqt(t)}get mXt(){return s(this).Nqt()}set gXt(t){ou._e(t),s(this).oqt(t)}get gXt(){return s(this).Bqt()}set yXt(t){ou._e(t),s(this).aqt(t)}get yXt(){return s(this).Wqt()}set timeout(t){ou._e(t),s(this).uqt(t)}get timeout(){return s(this).jqt()}SXt(t){ou._e(t),lu.get(this).Zqt(t)}wXt(t){const s=lu.get(this);t?s.Y9t(s.PO().rL(t)):s.Y9t(null)}}}{const uu=self.Vs;uu.XY.F9t.JY={Hqt(){return this.N9t.Hqt()}}}{const cu=self.Vs;cu.XY.F9t.Krt={pqt(t){this.N9t.pqt(0!==t)},J9t(t){this.mqt(t)},bXt(t){this.Y9t(t)},MXt(){this.Y9t(null)},q9t(t){this.N9t.q9t(cu.Er(t))},$9t(t){this.N9t.$9t(t)},K9t(t){this.N9t.K9t(t)},Z9t(t){this.N9t.Z9t(t/100)},Q9t(t){this.N9t.Q9t(t)},vXt(t){this.N9t.tqt(t)},TXt(t){this.N9t.sqt(t)},xXt(t){this.N9t.iqt(t)},GXt(t){this.N9t.eqt(t)},_Xt(t){this.N9t.hqt(t)},IXt(t){this.N9t.rqt(t)},SetGravity(t){this.N9t.SetGravity(t)},CXt(t){this.N9t.nqt(t)},PXt(t){this.N9t.oqt(t)},RXt(t){this.N9t.aqt(t)},uqt(t){this.N9t.uqt(t)},AXt(t){this.Zqt(t)},UHt(t){this.lO().WM(t),this.Pf.gO()}}}{const fu=self.Vs;fu.XY.F9t.Zrt={EXt(){return this.N9t.sXt()},FXt(){return this.N9t.Gqt()},DXt(){return fu.Fr(this.N9t._qt())},kXt(){return this.N9t.Iqt()},OXt(){return this.N9t.Cqt()},LXt(){return 100*this.N9t.Pqt()},NXt(){return this.N9t.Rqt()},BXt(){return this.N9t.Aqt()},WXt(){return this.N9t.Eqt()},VXt(){return this.N9t.Dqt()},jXt(){return this.N9t.Fqt()},HXt(){return this.N9t.kqt()},UXt(){return this.N9t.Oqt()},zXt(){return this.N9t.Lqt()},JXt(){return this.N9t.Nqt()},qXt(){return this.N9t.Bqt()},XXt(){return this.N9t.Wqt()},YXt(){return this.N9t.jqt()}}}{const du=self.Vs,pu=[],mu=new Set(["continuous-spray","one-shot"]),gu=["fade-to-invisible","timeout-expired","particle-stopped"],yu=du.Tr(du.Rect);self.O9t=class{constructor(){this.$Xt=0,this.KXt=0,this.ZXt="continuous-spray",this.QXt=!1,this.tYt=0,this.sYt=!1,this.iYt=0,this.eYt=0,this.hYt=0,this.rYt=0,this.nYt=0,this.oYt=1,this.aYt=0,this.lYt=0,this.uYt=0,this.cYt=0,this.fYt=0,this.dYt=0,this.pYt=0,this.mYt=0,this.gYt=0,this.yYt=0,this.SYt=0,this.wYt=0,this.bYt=0,this._0=0,this.MYt=0,this.vYt=1,this.L9t=null,this.yqt=null,this.TYt=[],this.OAt=new du.Rect,this.LM=new du.na}Gr(){this.R0(),du.Kn(this.TYt),this.TYt=null,this.L9t=null,this.yqt=null,this.OAt=null,this.LM=null}R0(){const i=this.TYt;for(let t=0,s=i.length;t<s;++t)i[t].K2t();du.nr(pu,i),du.Kn(i),1e3<pu.length&&du.$n(pu,1e3),this.QXt=!1}dqt(){for(let t=0,s=this.$Xt;t<s;++t)this.xYt();this.TYt.length&&(this.QXt=!0)}xYt(t=!0){let s=null;return pu.length?(s=pu.pop()).GYt(this):s=du.Tr(self._Yt,this),this.TYt.push(s),t?s.JPt(this.yqt):s.JPt(),s}Kqt(){const i=this.TYt,e=this.yqt;for(let t=0,s=i.length;t<s;++t)i[t].JPt(e)}qqt(){const i=this.TYt,e=this.yqt;for(let t=0,s=i.length;t<s;++t)i[t].IYt(e)}Xqt(i){const e=this.TYt;for(let t=0,s=e.length;t<s;++t){const h=e[t],r=h.Yqt();if(r){const n=r.lO();n.ZM(h.KM()),n.sv(h.tv()),n.BC(h.Ic(),h.Ic()),n.yA(h.mA()),n.N5(h.GetAngle()),n.J4(i.lO().z4()),n.R4()}}}gqt(t,s=!0){const i=this.TYt;if(t<i.length){const e=i.length-t;for(let t=0;t<e;++t){const h=i.pop();h.K2t(),pu.push(h)}1e3<pu.length&&du.$n(pu,1e3)}else if(t>i.length){const r=t-i.length;for(let t=0;t<r;++t)this.xYt(s)}}zqt(){return this.TYt}sXt(){return this.TYt.length}yZ(t){this.CYt(t),this.PYt(t),this.RYt()}CYt(t){if("continuous-spray"===this.ZXt&&this.QXt){this.MYt+=t*this.$Xt;const s=Math.floor(this.MYt);this.MYt-=s;for(let t=0;t<s;++t)this.xYt()}}Jqt(t){this.MYt=t}Uqt(){return this.MYt}PYt(i){let e=this.OAt,h=(e.set(this.iYt,this.eYt,this.iYt,this.eYt),this.TYt),r=0;for(let t=0,s=h.length;t<s;++t){const n=h[t];(h[r]=n).yZ(i),n.bgt()?(++r,e.pu(n.B4())):(n.K2t(),pu.push(n))}du.$n(h,r),1e3<pu.length&&du.$n(pu,1e3)}RYt(){"one-shot"===this.ZXt&&0===this.TYt.length&&this.QXt&&(this.L9t&&this.L9t(),this.QXt=!1)}Hv(i,e,h,r){yu.set(e.Sn(),e.wn(),e.vn(),e.Tn()),i.kA(yu),this.LM.I(i.wA());const n=this.TYt;for(let t=0,s=n.length;t<s;++t){const o=n[t];h.uu(o.B4())&&o.Hv(i,e,r)}i.OA()}wA(){return this.LM}J9t(t){this.$Xt=+t}Gqt(){return this.$Xt}q9t(t){this.KXt=+t}_qt(){return this.KXt}X9t(t){if(!mu.has(t))throw new Error("invalid spray type");this.ZXt=t}fqt(){return this.ZXt}pqt(t){this.QXt=!!t}Hqt(){return this.QXt}wqt(t){this.tYt=+t}AYt(){return this.tYt}CWt(t){this.sYt=!!t}EYt(){return this.sYt}bqt(t){this.iYt=+t}FYt(){return this.iYt}Mqt(t){this.eYt=+t}DYt(){return this.eYt}vqt(t){this.hYt=+t}kYt(){return this.hYt}$9t(t){this.rYt=+t}Iqt(){return this.rYt}K9t(t){this.nYt=+t}Cqt(){return this.nYt}Tqt(t){this.oYt=+t}OYt(){return this.oYt}Z9t(t){this.aYt=+t}Pqt(){return this.aYt}Q9t(t){this.lYt=+t}Rqt(){return this.lYt}tqt(t){this.uYt=+t}Aqt(){return this.uYt}sqt(t){this.cYt=+t}Eqt(){return this.cYt}iqt(t){this.fYt=+t}Fqt(){return this.fYt}eqt(t){this.dYt=+t}Dqt(){return this.dYt}hqt(t){this.pYt=+t}kqt(){return this.pYt}rqt(t){this.mYt=+t}Oqt(){return this.mYt}SetGravity(t){this.gYt=+t}Lqt(){return this.gYt}nqt(t){this.yYt=+t}Nqt(){return this.yYt}oqt(t){this.SYt=+t}Bqt(){return this.SYt}aqt(t){this.wYt=+t}Wqt(){return this.wYt}LYt(t){let s=gu.indexOf(t);if(-1===s)throw new Error("invalid destroy mode");this.bYt=s}lqt(t){this.LYt(gu[t])}NYt(){return gu[this.bYt]}Vqt(){return this.bYt}uqt(t){this._0=+t}jqt(){return this._0}xqt(t){this.vYt=+t}BYt(){return this.vYt}B4(){return this.OAt}}}{let p=function(t){return Math.random()*t-t/2},m=(p,self.Vs),l=new m.gu,u=new m.na,t=self.devicePixelRatio||1,c=!1;self._Yt=class{constructor(t){this.WYt=t,this.C0=!1,this.yl=0,this.Sl=0,this.cIt=0,this.Mz=0,this.VYt=1,this.jYt=0,this.HYt=0,this.n7=0,this.UYt=0,this.zYt=0,this.JYt=0,this.Zu=new m.Rect,this.qYt=null,this.XYt=NaN,this.YYt=null,this.$Yt=null}GYt(t){this.WYt=t}JPt(t){const s=this.WYt;this.C0=!0,this.yl=s.FYt()+p(s.Aqt()),this.Sl=s.DYt()+p(s.Eqt()),this.cIt=s.Iqt()+p(s.Fqt()),this.Mz=s.kYt()+p(s._qt()),this.VYt=s.Pqt(),this.jYt=this.VYt,this.n7=(s.Cqt()+p(s.Dqt()))*s.OYt(),this.UYt=this.n7/2,this.HYt=s.Rqt()+p(s.kqt()),this.zYt=0,this.JYt=0,this.KYt(),t?this.qYt||(this.qYt=t(this)):(this.qYt=null,this.YYt=null,this.$Yt=null)}IYt(t){t?this.qYt&&!this.qYt.kj()||(this.qYt=t(this,this.XYt)):(this.qYt=null,this.YYt=null,this.$Yt=null)}Qqt(t){this.YYt=t}tXt(t){this.$Yt=t}K2t(){const t=this.$Yt;t&&t(this.qYt),this.qYt=null,this.YYt=null,this.$Yt=null}toJSON(){let t;return this.qYt&&this.qYt.lO()&&(t=this.qYt.lO().RV().GB()),[this.yl,this.Sl,this.cIt,this.Mz,this.VYt,this.HYt,this.n7,this.zYt,this.JYt,t]}nl(t){this.yl=t[0],this.Sl=t[1],this.cIt=t[2],this.Mz=t[3],this.VYt=t[4],this.jYt=this.VYt,this.HYt=t[5],this.n7=t[6],this.zYt=t[7],this.JYt=t[8],this.XYt=t[9],this.UYt=this.n7/2,this.KYt()}yZ(t){let s=this.WYt,i=this.cIt*t,e=this.Mz,h=Math.cos(e)*i,r=Math.sin(e)*i+this.zYt*t,n=(this.yl+=h,this.Sl+=r,this.HYt*t),o=(this.n7+=n,this.UYt=this.n7/2,this.cIt+=s.Oqt()*t,this.zYt+=s.Lqt()*t,this.JYt+=t,this.KYt(),s.Nqt()),a=s.Bqt(),l=s.Wqt(),u=0;0!==o&&(u=p(o*t),this.Mz+=u),0!==a&&(this.cIt+=p(a*t)),0!==l&&(this.VYt=m.Rr(this.VYt+p(l*t),0,1));const c=1<=this.n7&&(2===s.Vqt()?0<this.cIt:this.JYt<s.jqt()),f=this.YYt;if(f&&c){let t=s.AYt()*this.VYt;0===s.Vqt()&&(t*=1-this.JYt/s.jqt());const d=t-this.jYt;this.jYt=t,f(this.qYt,h,r,n,u,d)}this.C0=c}bgt(){return this.C0}B4(){return this.Zu}KYt(){const t=this.yl,s=this.Sl,i=this.UYt;this.Zu.set(t-i,s-i,t+i,s+i)}Hv(h,r,n){if(!this.qYt){let i=this.WYt,e=i.AYt()*this.VYt;if(0===i.Vqt()&&(e*=1-this.JYt/i.jqt()),!(e<=0)){const o=this.n7,a=o*i.BYt()*t;if(!(a<1)){let t=this.yl,s=this.Sl;i.EYt()&&(t=t+.5|0,s=s+.5|0),h.hw()?h.LA(t,s,o,e):n||a>h.bE()||a<h.wE()?(u.I(i.wA()),u.La(e),h.VM(u),c=!0,l.Lu(this.Zu),h.RA(l,r)):(c&&(h.VM(i.wA()),c=!1),h.LA(t,s,a,e))}}}}Yqt(){return this.qYt}$qt(){return this.XYt}KM(){return this.yl}tv(){return this.Sl}Ic(){return this.n7}GetAngle(){return this.Mz}mA(){return this.VYt}}}{const Su=self.Vs;Su.XY.Keyboard=class extends Su.oxt{constructor(t){super(t)}Gr(){super.Gr()}}}{let i=function(){return s.n5().sW()};i;const wu=self.Vs;wu.XY.Keyboard.xCt=class extends wu.zxt{constructor(t){super(t)}Gr(){super.Gr()}Rxt(){}Axt(){return self.ZYt}};let s=null;self.ZYt=class extends self.o5{constructor(t){super(t),(s=t).PO().Kk().keyboard=this}QYt(t){const s=i();if("string"==typeof t)return s.t$t(t);if("number"==typeof t)return s.s$t(t);throw new TypeError("expected string or number")}}}{const bu=self.Vs;bu.XY.Keyboard.Instance=class extends bu.$xt{constructor(t,s){super(t,"keyboard"),this.i$t=new Set,this.e$t=new Set,this.h$t=0,this.r$t="",this.n$t="",this.o$t=!1;const i=this.PO().a0();this.W0=new bu.L0(bu.A0.O0(i,"keydown",t=>this.a$t(t.data)),bu.A0.O0(i,"keyup",t=>this.l$t(t.data)),bu.A0.O0(i,"window-blur",()=>this.u$t()),bu.A0.O0(i,"keyboard-blur",()=>this.u$t())),this.Pf.vO(this.$M())}Gr(){super.Gr()}async $M(){const t=await this.lGt("init");this.o$t=t.isKeyboardLockSupported}a$t(t){const s=t.which,i=t.code||s.toString(),e=t.key;this.i$t.has(i)||(this.i$t.add(i),this.e$t.add(s),this.r$t=i,this.h$t=s,this.n$t=e,this.QB(bu.XY.Keyboard.JY.c$t),this.QB(bu.XY.Keyboard.JY.f$t),this.QB(bu.XY.Keyboard.JY.d$t),this.QB(bu.XY.Keyboard.JY.p$t))}l$t(t){const s=t.which,i=t.code||s.toString(),e=t.key;this.i$t.delete(i),this.e$t.delete(s),this.r$t=i,this.h$t=s,this.n$t=e,this.QB(bu.XY.Keyboard.JY.m$t),this.QB(bu.XY.Keyboard.JY.g$t),this.QB(bu.XY.Keyboard.JY.y$t),this.QB(bu.XY.Keyboard.JY.S$t)}u$t(){for(const t of this.e$t)this.e$t.delete(t),this.h$t=t,this.QB(bu.XY.Keyboard.JY.m$t),this.QB(bu.XY.Keyboard.JY.g$t),this.QB(bu.XY.Keyboard.JY.S$t);this.i$t.clear()}t$t(t){return this.i$t.has(t)}s$t(t){return this.e$t.has(t)}dv(){return{tk:this.h$t,tkk:this.n$t}}pv(t){this.h$t=t.tk,t.hasOwnProperty("tkk")&&(this.n$t=t.tkk)}wGt(){const t="plugins.keyboard";return[{title:t+".name",properties:[{name:t+".debugger.last-key-code",value:this.h$t},{name:t+".debugger.last-key-string",value:bu.XY.Keyboard.Zrt.w$t(this.h$t)},{name:t+".debugger.last-typed-key",value:this.n$t}]}]}}}{const Mu=self.Vs,vu=["ShiftLeft","ShiftRight","ControlLeft","ControlRight","AltLeft","AltRight","MetaLeft","MetaRight"];Mu.XY.Keyboard.JY={t$t(t){return this.e$t.has(t)},f$t(t){return this.h$t===t},c$t(){return!0},m$t(){return!0},g$t(t){return this.h$t===t},s$t(t){return t=Math.floor(t),this.e$t.has(t)},p$t(t){return this.h$t===t},S$t(t){return this.h$t===t},d$t(t){const s=vu[t];return this.r$t===s},y$t(t){const s=vu[t];return this.r$t===s},b$t(t){const s=vu[t];return this.i$t.has(s)},M$t(){return this.o$t},v$t(){return!0},T$t(){return!0}}}{const Tu=self.Vs;Tu.XY.Keyboard.Krt={async x$t(s){if(this.o$t){let t=[];s&&(t=s.split(","));const i=await this.lGt("lock-keyboard",{keysArr:t});i.isOk?this.QB(Tu.XY.Keyboard.JY.v$t):this.QB(Tu.XY.Keyboard.JY.T$t)}},G$t(){this.o$t&&this.lGt("unlock-keyboard")}}}{let s=function(t){switch(t=Math.floor(t)){case 8:return"backspace";case 9:return"tab";case 13:return"enter";case 16:return"shift";case 17:return"control";case 18:return"alt";case 19:return"pause";case 20:return"capslock";case 27:return"esc";case 33:return"pageup";case 34:return"pagedown";case 35:return"end";case 36:return"home";case 37:return"";case 38:return"";case 39:return"";case 40:return"";case 45:return"insert";case 46:return"del";case 91:return"left window key";case 92:return"right window key";case 93:return"select";case 96:return"numpad 0";case 97:return"numpad 1";case 98:return"numpad 2";case 99:return"numpad 3";case 100:return"numpad 4";case 101:return"numpad 5";case 102:return"numpad 6";case 103:return"numpad 7";case 104:return"numpad 8";case 105:return"numpad 9";case 106:return"numpad *";case 107:return"numpad +";case 109:return"numpad -";case 110:return"numpad .";case 111:return"numpad /";case 112:return"F1";case 113:return"F2";case 114:return"F3";case 115:return"F4";case 116:return"F5";case 117:return"F6";case 118:return"F7";case 119:return"F8";case 120:return"F9";case 121:return"F10";case 122:return"F11";case 123:return"F12";case 144:return"numlock";case 145:return"scroll lock";case 186:return";";case 187:return"=";case 188:return",";case 189:return"-";case 190:return".";case 191:return"/";case 192:return"'";case 219:return"[";case 220:return"\\";case 221:return"]";case 222:return"#";case 223:return"`";default:return String.fromCharCode(t)}};s;const xu=self.Vs;xu.XY.Keyboard.Zrt={_$t(){return this.h$t},w$t(t){return s(t)},I$t(){return this.n$t}}}{const Gu=self.Vs;Gu.XY.C$t=class extends Gu.oxt{constructor(t){super(t)}Gr(){super.Gr()}}}{const _u=self.Vs;_u.XY.C$t.xCt=class extends _u.zxt{constructor(t){super(t),this.P$t=_u.Tr(self.R$t)}Gr(){super.Gr()}Rxt(){this.BW().CO(this.Pf)}mY(t){return this.BW().mH(t,{t2:this.Pf.ED()})}MY(){this.BW().oC()}A$t(){return this.P$t}E$t(t,s,i,e){const h=this.BW(),r=this.P$t;r.qm(h.Wm()),r.Vm(h.$m()),r.F$t(t),r.D$t(s),r.k$t(i),r.O$t(e),r.L$t()}}}{const Iu=self.Vs,Cu=self.Zs,Pu=Iu.Tr(Iu.gl),Ru=["left","center","right"],Au=["top","center","bottom"],Eu=["word","cjk","character"],Fu=(Iu.XY.C$t.Instance=class extends Iu.xGt{constructor(t,s){super(t),this.Rf="",this.N$t=!0,this.B$t=16,this.W$t=16,this.V$t="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789.,;:?!-_~#\"'&()[]|`\\/@+=*$<>";let i="";if(this.j$t=1,this.H$t=0,this.vI=0,this.AI=0,this.EI=0,this.kI="word",this.U$t=!0,this.z$t=!1,this.J$t=null,this.q$t=null,this.X$t=-1,this.Y$t=-1,this.$$t=0,s){this.Rf=s[0],this.N$t=s[1],this.B$t=s[2],this.W$t=s[3],this.V$t=s[4],i=s[5],this.j$t=s[6],this.H$t=s[7],this.vI=s[8],this.AI=s[9],this.EI=s[10],this.kI=Eu[s[11]];const h=this.lO();h.MN(s[12]),this.z$t=!!s[14]}this.Zxt.E$t(this.B$t,this.W$t,this.V$t,i),this.q$t=Iu.Tr(self.K$t,this.Zxt.A$t());const e=this.lO();this.q$t.BC(e.Wm(),e.$m()),this.Z$t(),this.Q$t(),this.Pi.hRt()}Gr(){this.tKt(),this.J$t&&(this.J$t.Gr(),this.J$t=null),this.q$t.Gr(),this.q$t=null,super.Gr()}Z$t(){const t=this.q$t;t&&(t.dC(this.N$t),t.Ff(this.Rf),t.DC(this.kI),t.sKt(Ru[this.AI]),t.iKt(Au[this.EI]),t.eKt(this.H$t),t.wC(this.vI))}hKt(){const t=this.lO();this.q$t.BC(t.Wm(),t.$m()),this.q$t.O5(this.j$t)}Q$t(){if(this.z$t){let t=this.Rf;this.N$t&&(t=Iu.Nh.Em(t)),this.J$t?this.J$t.Ff(t):this.J$t=Iu.Tr(Iu.Cf,this.Pf,t)}else this.J$t&&(this.J$t.Gr(),this.J$t=null)}Hv(e){const h=this.T0t.BW(),r=h.wT();if(r){e.bA(r);let t=this.lO(),s=t.V4(),i=this.q$t;i.O5(this.j$t),i.rKt(t.fEt()),this.Pf.DD()&&(s=t.$Et(s)),i.BC(t.Wm(),t.$m()),i.A$t().nKt(h.gP()),i.VM(t.z4()),i.Hv(e,s.Sn(),s.wn(),t.GetAngle()),this.U$t=!1}}dv(){const t={t:this.Rf,ebbc:this.N$t,csc:this.j$t,csp:this.H$t,lh:this.vI,ha:this.AI,va:this.EI,w:this.kI,cw:this.Zxt.A$t().oKt(),ch:this.Zxt.A$t().aKt(),cs:this.Zxt.A$t().lKt(),sd:this.Zxt.A$t().uKt()};return-1!==this.Y$t&&(t.tw={st:this.X$t,en:this.Y$t,l:this.$$t}),t}pv(t){if(this.tKt(),this.Rf=t.t,this.N$t=t.ebbc,this.j$t=t.csc,this.H$t=t.csp,this.vI=t.lh,this.AI=t.ha,this.EI=t.va,t.hasOwnProperty("w")){const i=t.w;this.kI="boolean"==typeof i?i?"word":"character":i}else this.kI="word";if(t.hasOwnProperty("tw")){const e=t.tw;this.X$t=e.st,this.Y$t=e.en,this.$$t=t.l}const s=this.Zxt.A$t();s.F$t(t.cw),s.D$t(t.ch),s.k$t(t.cs),s.O$t(t.sd),this.Z$t(),this.Q$t(),-1!==this.Y$t&&this.mGt()}knt(t){switch(t){case 0:return this.NC();case 1:return this.N$t;case 2:return this.Zxt.A$t().oKt();case 3:return this.Zxt.A$t().aKt();case 4:return this.Zxt.A$t().lKt();case 5:return this.Zxt.A$t().uKt();case 6:return this.cKt();case 7:return this.fKt();case 8:return this.dKt();case 9:return this.pKt();case 10:return this.mKt();case 11:return this.gKt()}}Vnt(t,s){switch(t){case 0:this.yKt(s);break;case 1:this.N$t!==!!s&&(this.N$t=!!s,this.Z$t());break;case 2:this.Zxt.A$t().F$t(s);break;case 3:this.Zxt.A$t().D$t(s);break;case 4:this.Zxt.A$t().k$t(s);break;case 5:this.Zxt.A$t().O$t(s);break;case 6:this.SKt(s);break;case 7:this.wKt(s);break;case 8:this.bKt(s);break;case 9:this.MKt(s);break;case 10:this.vKt(s);break;case 11:this.TKt(s)}}yKt(t){this.Rf!==t&&(this.Rf=t,this.q$t.Ff(t),this.Q$t(),this.Pf.gO())}NC(){return this.Rf}xKt(t,s){this.yKt(t),this.X$t=this.Pf.yk(),this.Y$t=this.X$t+s/this.RV().RB(),this.$$t=Iu.Up(Iu.Nh.Em(t)),this.q$t.GC(0),this.mGt()}tKt(){this.X$t=-1,this.Y$t=-1,this.$$t=0,this.q$t.GC(-1),this.Qxt()}GKt(){-1!==this.Y$t&&(this.tKt(),this.QB(Iu.XY.C$t.JY._Kt),this.Pf.gO())}SKt(t){this.j$t!==t&&(this.j$t=t,this.q$t.O5(this.j$t),this.Pf.gO())}cKt(){return this.j$t}wKt(t){this.H$t!==t&&(this.H$t=t,this.q$t.eKt(this.H$t),this.Pf.gO())}fKt(){return this.H$t}bKt(t){this.vI!==t&&(this.vI=t,this.q$t.wC(this.vI),this.Pf.gO())}dKt(){return this.vI}MKt(t){this.AI!==t&&(this.AI=t,this.Z$t(),this.Pf.gO())}pKt(){return this.AI}vKt(t){this.EI!==t&&(this.EI=t,this.Z$t(),this.Pf.gO())}mKt(){return this.EI}IKt(t){this.TKt(Eu[t])}TKt(t){this.kI!==t&&(this.kI=t,this.Z$t(),this.Pf.gO())}gKt(){return this.kI}CKt(t){this.z$t=!!t,this.Q$t()}PKt(){return this.z$t}RKt(){return this.hKt(),this.q$t.VC()}AKt(){return this.hKt(),this.q$t.HC()}EKt(t,s){this.hKt();const i=this.lO(),e=(Pu.set(t-i.KM(),s-i.tv()),Pu.rotate(-i.GetAngle()),Pu.offset(i.Wm()*i.jW(),i.$m()*i.UW()),this.q$t.JC(Pu.Ml(),Pu.Tl()));if(e){const h=e.Ng("tag");if(h)return h.param}return""}FKt(t,s,i){const e=this.EKt(s,i);return e&&Iu.Gh(t,e)}DKt(t,s){this.hKt(),s=Math.floor(s);const i=this.q$t.XC(t,s);if(!i)return null;const e=this.lO();return Pu.set(i.Fg(),i.kg()),Pu.offset(-e.Wm()*e.jW(),-e.$m()*e.UW()),Pu.rotate(e.GetAngle()),Pu.offset(e.KM(),e.tv()),{x:Pu.Ml(),y:Pu.Tl(),width:i.Wm(),height:i.$m()}}kKt(t){return this.hKt(),this.q$t.YC(t)}yZ(){const s=this.Pf.yk();if(s>=this.Y$t)this.tKt(),this.QB(Iu.XY.C$t.JY._Kt),this.Pf.gO();else{let t=Iu.qr(this.X$t,this.Y$t,s,0,this.$$t);(t=Math.floor(t))!==this.q$t._C()&&(this.q$t.GC(t),this.Pf.gO())}}wGt(){const t="plugins.spritefont2";return[{title:t+".name",properties:[{name:t+".properties.text.name",value:this.NC(),gzt:t=>this.yKt(t)},{name:t+".properties.scale.name",value:this.cKt(),gzt:t=>this.SKt(t)},{name:t+".properties.character-spacing.name",value:this.fKt(),gzt:t=>this.wKt(t)},{name:t+".properties.line-height.name",value:this.dKt(),gzt:t=>this.bKt(t)}]}]}Axt(){return self.OKt}},new WeakMap),Du=new Map([["left",0],["center",1],["right",2]]),ku=new Map([["top",0],["center",1],["bottom",2]]);self.OKt=class extends self.Y6{constructor(){super(),Fu.set(this,self.uB.mB().sW())}get text(){return Fu.get(this).NC()}set text(t){Cu.Re(t);const s=Fu.get(this);s.tKt(),s.yKt(t)}LKt(t,s){Cu.Re(t),Cu._e(s);const i=Fu.get(this);i.tKt(),i.xKt(t,s)}NKt(){Fu.get(this).GKt()}set BKt(t){Cu._e(t),Fu.get(this).SKt(t)}get BKt(){return Fu.get(this).cKt()}set WKt(t){Cu._e(t),Fu.get(this).wKt(t)}get WKt(){return Fu.get(this).fKt()}set lineHeight(t){Cu._e(t),Fu.get(this).bKt(t)}get lineHeight(){return Fu.get(this).dKt()}set DH(t){Cu.Re(t);const s=Du.get(t);if(void 0===s)throw new Error("invalid mode");Fu.get(this).MKt(s)}get DH(){return Ru[Fu.get(this).pKt()]}set verticalAlign(t){Cu.Re(t);const s=ku.get(t);if(void 0===s)throw new Error("invalid mode");Fu.get(this).vKt(s)}get verticalAlign(){return Au[Fu.get(this).mKt()]}set kH(t){if(!Eu.includes(t))throw new Error("invalid mode");Fu.get(this).TKt(t)}get kH(){return Fu.get(this).gKt()}set VKt(t){Fu.get(this).CKt(!!t)}get VKt(){return Fu.get(this).PKt()}get BH(){return Fu.get(this).RKt()}get WH(){return Fu.get(this).AKt()}jKt(){const t=Fu.get(this);return[t.RKt(),t.AKt()]}HKt(t,s,i){return Cu.Re(t),Cu._e(s),Cu._e(i),Fu.get(this).FKt(t,s,i)}UKt(t,s){return Cu._e(t),Cu._e(s),Fu.get(this).EKt(t,s)}zKt(t,s=0){return Cu.Re(t),Cu._e(s),Fu.get(this).DKt(t,s)}JKt(t){return Cu.Re(t),Fu.get(this).kKt(t)}}}{const Ou=self.Vs;Ou.XY.C$t.JY={qKt(t,s){return s?this.Rf===t:Ou.Gh(this.Rf,t)},XKt(){return-1!==this.Y$t},_Kt(){return!0},YKt(t,s,i){return this.FKt(t,s,i)}}}{const Lu=self.Vs;Lu.XY.C$t.Krt={Ff(t){this.tKt(),"number"==typeof t&&t<1e9&&(t=Math.round(1e10*t)/1e10),this.yKt(t.toString())},$Kt(t){this.tKt(),(t=(t="number"==typeof t&&t<1e9?Math.round(1e10*t)/1e10:t).toString())&&this.yKt(this.Rf+t)},KKt(t,s){this.tKt(),"number"==typeof t&&t<1e9&&(t=Math.round(1e10*t)/1e10),this.xKt(t.toString(),s)},ZKt(){this.GKt()},O5(t){this.SKt(t)},QKt(t){this.wKt(t)},wC(t){this.bKt(t)},F$t(t,s){let i=!1,e=this.Zxt.A$t();for(const h of t)if(" "===h)e.tZt(s),i=!0;else{const r=e.sZt(h);r&&(r.iZt(s),i=!0)}i&&e.eZt(),this.Pf.gO()},UHt(t){this.lO().WM(t),this.Pf.gO()},hZt(t){this.MKt(t)},rZt(t){this.vKt(t)},nZt(t){this.IKt(t)},oZt(t){this.CKt(t)}}}{const Nu=self.Vs;Nu.XY.C$t.Zrt={aZt(t){const s=this.Zxt.A$t().sZt(t);return s?s.lZt():this.Zxt.A$t().oKt()},uZt(){return this.W$t},cZt(){return this.j$t},fZt(){return this.H$t},dZt(){return this.vI},Text(){return this.Rf},pZt(){return this.N$t?Nu.Nh.Em(this.Rf):this.Rf},mZt(){return this.RKt()},gZt(){return this.AKt()},yZt(t,s){return this.EKt(t,s)},SZt(t){return this.kKt(t)},wZt(t,s){const i=this.DKt(t,s);return i?i.x:0},bZt(t,s){const i=this.DKt(t,s);return i?i.y:0},MZt(t,s){const i=this.DKt(t,s);return i?i.width:0},vZt(t,s){const i=this.DKt(t,s);return i?i.height:0}}}{const Bu=self.Vs;self.TZt=class{constructor(t,s,i,e){let h=t.oKt(),r=t.aKt();this.P$t=t,this.xZt=s,this.GZt=new Bu.Rect(i,e,i+h,e+r),this._Zt=new Bu.Rect,this.IZt=-1,this.CZt()}Gr(){this.P$t=null,this.GZt=null,this._Zt=null}CZt(){let t=this.P$t.Wm(),s=this.P$t.$m();this._Zt.I(this.GZt),this._Zt.Pt(t,s),this._Zt.mu(this.P$t.gP())}A$t(){return this.P$t}PZt(){return this.xZt}gP(){return this._Zt}iZt(t){this.IZt=t}lZt(){return this.IZt<0?this.P$t.oKt():this.IZt}}}{let r=function(t,s){t=t.trim();const i=parseFloat(t);return isFinite(i)?t.endsWith("%")?s*i/100:i:0},C=function(t){return(h=h||P.zo(32,32).getContext("2d")).fillStyle="#FFFFFF",h.fillStyle=t,h.fillStyle},P=(r,C,self.Vs),R=new P.Rect,A=new P.gu,E=new P.na,s=new Set(["left","center","right"]),i=new Set(["top","center","bottom"]),e=new Set(["word","cjk","character"]),h=null;self.K$t=class{constructor(t){this.P$t=t,this.jI=0,this.HI=0,this.Rf="",this._I=!1,this.FI=null,this.DI=P.Tr(P.Fm),this.kI="word",this.LI=!1,this.NI=!1,this.AI="left",this.EI="top",this.bz=1,this.RZt=1,this.AZt=0,this.vI=0,this.LM=P.Tr(P.na),this.WI=-1,this.VI=0,this.iC=t=>this.eC(t),this.P$t.EZt(this)}Gr(){this.P$t.FZt(this),this.LM=null,this.iC=null,this.DI.Tc(),this.DI=null,this.P$t=null,this.FI=null}eC(t){if(t.Xm())return{width:0,height:0};const s=t.ug(),i=t.Ng("scale"),e=(i?parseFloat(i.param):this.bz)*this.RZt,h=t.Ng("scalex"),r=(h?parseFloat(h.param):1)*e,n=t.Ng("scaley"),o=(n?parseFloat(n.param):1)*e,a=this.P$t.aKt()*o+this.vI,l=this.A$t(),u=l.oKt()*r,c=this.DZt();if(l.kZt()){let i=0,e=0;for(const f of s){let t=u,s=l.sZt(f);s?t=s.lZt()*r:" "===f&&(t=l.OZt()*r),e+=t,++i}return{width:e+i*c,height:a}}{const d=s.length,p=Math.max(d,0);return{width:u*d+p*c,height:a}}}fC(){this.NI=!0}SI(){this.fC(),this.LI=!0,this.DI.Tc()}BC(t,s){t<=0||s<=0||this.jI===t&&this.HI===s||(this.jI!==t?this.SI():this.fC(),this.jI=t,this.HI=s)}GC(t){this.WI=Math.floor(t)}_C(){return this.WI}JC(t,s){this.jC();const i=this.DI.Om();for(const e of i)if(s>e.kg()&&s<e.kg()+e.$m())for(const h of e.ig())if(t>=h.Fg()&&t<h.Fg()+h.Wm())return h;return null}*qC(t){this.jC();const s=this.DI.Om();for(const i of s)for(const e of i.ig()){const h=e.Ng("tag");h&&P.Gh(h.param,t)&&(yield e)}}XC(t,s){for(const i of this.qC(t)){if(0===s)return i;--s}return null}YC(t){let s=0;for(const i of this.qC(t))++s;return s}jC(){this.iP(),this.eP()}iP(){if(this.LI){!this._I||this.FI&&this.FI.toString()===this.Rf||(this.FI=new P.Nh(this.Rf,{um:!0}));const t=-this.DZt();this.DI.Fm(this._I?this.FI.Gm():this.Rf,this.iC,this.jI,this.kI,t),this.LI=!1}}eP(){this.NI&&(this.hP(),this.NI=!1)}hP(){let i=0,e=this.vI,h=P.do(this.DI.Om());for(const s of h){s.Eg(NaN),s.Dg(NaN);for(const r of s.ig())r.Eg(NaN),r.Dg(NaN)}const t=h.reduce((t,s)=>t+s.$m(),0)-e;"center"===this.EI?i=Math.max(Math.floor(this.HI/2-t/2),0):"bottom"===this.EI&&(i=Math.floor(this.HI-t));for(let t=0,s=h.length;t<s;++t){const n=h[t],o=n.$m();if(0<t&&i>this.HI-(o-e))break;0<=i&&this.lP(n,i),i+=o}}lP(t,s){let i=0;"center"===this.AI?i=Math.max(Math.floor((this.jI-t.Wm())/2),0):"right"===this.AI&&(i=Math.max(Math.floor(this.jI-t.Wm()),0)),t.Eg(i),t.Dg(s);for(const e of t.ig())e.Xm()||(this.LZt(e,i,s),i+=e.Wm())}LZt(t,s,i){const e=t.Ng("offsetx"),h=(s+=e?r(e.param,t.$m()):0,t.Ng("offsety"));i+=h?r(h.param,t.$m()):0,t.Eg(s),t.Dg(i)}Hv(t,s,i,e){this.jC(),this.VI=0;const h=P.do(this.DI.Om()),r=Math.sin(e),n=Math.cos(e);for(const o of h)this.NZt(t,o,s,i,r,n)}NZt(t,s,i,e,h,r){const n=s.Fg(),o=s.kg();if(Number.isFinite(n)&&Number.isFinite(o)){const a=s.$m();for(const l of s.ig())this.fP(t,l,i,e,h,r,a)}}fP(o,a,l,u,c,f,d){let p=a.Fg(),m=a.kg();if(Number.isFinite(p)&&Number.isFinite(m)){let r=a.ug(),n=a.Wm();if(-1!==this.WI){if(this.VI>=this.WI)return;this.VI+r.length>this.WI&&(r=r.slice(0,this.WI-this.VI),n=this.eC(a).width),this.VI+=r.length}const g=a.Ng("background");if(!(P.yp(r)&&!g||a.Bg("hide"))){const y=a.Ng("scale"),S=(y?parseFloat(y.param):this.bz)*this.RZt,w=a.Ng("scalex"),b=(w?parseFloat(w.param):1)*S,M=a.Ng("scaley"),v=(M?parseFloat(M.param):1)*S,T=this.P$t.aKt()*v,x=this.vI;m+=d-x-T;let t=1,s=a.Ng("opacity"),i=(s&&(t=parseFloat(s.param)/100),g&&(o.Mw(),E.Ka(C(g.param)),E.Ta(E.Ca()*t*this.LM.Ca()),E.Na(),o.VM(E),R.set(p,m,p+n,m+T),R.jl()>this.jI&&R.Ol(this.jI),A.Bu(R,c,f),A.offset(l,u),o.gu(A),o.mw()),a.Ng("color")),e=(i?(E.Ka(C(i.param)),E.Ta(this.LM.Ca())):E.I(this.LM),E.Ta(E.Ca()*t),E.Na(),o.VM(E),this.P$t.oKt()*b),h=Math.abs(this.DZt());for(const G of r){const _=this.P$t.sZt(G);if(_){const I=_.lZt()*b;if(p+I>this.jI+h+1e-5)return;R.set(p,m,p+e,m+T),A.Bu(R,c,f),A.offset(l,u),o.ob(A,_.gP()),p+=I+this.AZt}else p+=this.P$t.OZt()*b+this.AZt}}}}A$t(){return this.P$t}dC(t){this._I!==(t=!!t)&&(this._I=t,this.SI())}gI(){return this._I}Ff(t){this.Rf!==t&&(this.Rf=t,this.SI())}DC(t){if(!e.has(t))throw new Error("invalid word wrap mode");this.kI!==t&&(this.kI=t,this.SI())}sKt(t){if(!s.has(t))throw new Error("invalid alignment");this.AI!==t&&(this.AI=t,this.fC())}iKt(t){if(!i.has(t))throw new Error("invalid alignment");this.EI!==t&&(this.EI=t,this.fC())}O5(t){this.bz!==t&&(this.bz=t,this.SI())}L5(){return this.bz}rKt(t){this.RZt!==t&&(this.RZt=t,this.SI())}fEt(){return this.RZt}eKt(t){this.AZt!==t&&(this.AZt=t,this.SI())}DZt(){return this.AZt}wC(t){this.vI=t,this.SI()}bC(){return this.vI}yA(t){t=P.Rr(t,0,1),this.LM.a=t}VM(t){this.LM.equals(t)||this.LM.I(t)}wA(){return this.LM}VC(){return this.jC(),this.DI.Mg()}HC(){this.jC();const t=this.P$t.aKt()*this.bz,s=this.vI,i=t+s;return this.DI.Lm()*i-s}}}{const Wu=self.Vs,Vu={width:256,height:256,BZt:16,WZt:16,characterSet:""};self.R$t=class{constructor(t){if((t=Object.assign({},Vu,t)).width<=0||t.height<=0||t.BZt<=0||t.WZt<=0)throw new Error("invalid size");this.Tg=t.width,this.xg=t.height,this.B$t=t.BZt,this.W$t=t.WZt,this.V$t=t.characterSet,this.VZt="",this.jZt=null,this.HZt=!1,this.UZt=-1,this._Zt=new Wu.Rect(0,0,1,1),this.zZt=new Map,this.JZt=!0,this.qZt=new Set}Gr(){this._Zt=null,this.XZt(),this.zZt=null,this.qZt&&this.qZt.clear(),this.qZt=null}XZt(){for(let t of this.zZt.values())t.Gr();this.zZt.clear()}EZt(t){this.qZt.add(t)}FZt(t){this.qZt.delete(t)}L$t(){if(this.JZt){this.XZt();let s=Wu.jp(this.V$t),h=Math.floor(this.Tg/this.B$t),t=Math.floor(this.xg/this.W$t),i=h*t;for(let e=0,t=s.length;e<t&&!(e>=i);++e){let i=s[e];if(!this.zZt.has(i)){let t=e%h,s=Math.floor(e/h);this.zZt.set(i,Wu.Tr(self.TZt,this,i,t*this.B$t,s*this.W$t))}}if(this.HZt=!1,this.UZt=-1,Array.isArray(this.jZt))for(let s of this.jZt)if(Array.isArray(s)&&2===s.length){let i=s[0],t=s[1];if("number"==typeof i&&isFinite(i)&&"string"==typeof t&&i!==this.B$t)for(let s of t){let t=this.zZt.get(s);t?(t.iZt(i),this.HZt=!0):" "===s&&(this.UZt=i,this.HZt=!0)}}this.JZt=!1;for(let t of this.qZt)t.SI()}}eZt(){this.HZt=!0;for(const t of this.qZt)t.SI()}sZt(t){return this.L$t(),this.zZt.get(t)||null}kZt(){return this.HZt}qm(t){if((t=Math.floor(t))<=0)throw new Error("invalid size");this.Tg!==t&&(this.Tg=t,this.JZt=!0)}Wm(){return this.Tg}Vm(t){if((t=Math.floor(t))<=0)throw new Error("invalid size");this.xg!==t&&(this.xg=t,this.JZt=!0)}$m(){return this.xg}nKt(t){if(!this._Zt.equals(t)){this._Zt.I(t);for(const s of this.zZt.values())s.CZt()}}gP(){return this._Zt}F$t(t){if((t=Math.floor(t))<=0)throw new Error("invalid size");this.B$t!==t&&(this.B$t=t,this.JZt=!0)}oKt(){return this.B$t}D$t(t){if((t=Math.floor(t))<=0)throw new Error("invalid size");this.W$t!==t&&(this.W$t=t,this.JZt=!0)}aKt(){return this.W$t}k$t(t){this.V$t!==t&&(this.V$t=t,this.JZt=!0)}lKt(){return this.V$t}O$t(t){if(this.VZt!==t&&(this.VZt=t,this.JZt=!0,this.jZt=null,this.VZt.length))try{this.jZt=JSON.parse(this.VZt)}catch(t){this.jZt=null}}uKt(){return this.VZt}tZt(t){this.UZt!==(t=t<0?-1:t)&&(this.UZt=t,0<=this.UZt)&&(this.HZt=!0)}OZt(){return this.UZt<0?this.B$t:this.UZt}}}{const ju=self.Vs,Hu=[];ju.XY.Audio=class extends ju.oxt{constructor(t){super(t)}YZt(t){Hu.push(t)}static async $Zt(){await Promise.all(Hu),ju.Kn(Hu)}Gr(){super.Gr()}}}{let s=function(){return i.n5().sW()},t=function(){if(self.C3Audio_DOMInterface)return self.C3Audio_DOMInterface;throw new Error("audio scripting API cannot be used here - make sure the project is using DOM mode, not worker mode")};s,t;const Uu=self.Vs,zu=self.Zs;Uu.XY.Audio.xCt=class extends Uu.zxt{constructor(t){super(t)}Gr(){super.Gr()}Rxt(){}Axt(){return self.KZt}};let i=null;self.KZt=class extends self.o5{constructor(t){super(t),i=t}get ZZt(){return t().GetAudioContextExtern()}get QZt(){return t().GetDestinationNodeExtern()}get isSilent(){return s().tQt()}set isSilent(t){s().sQt(t)}get masterVolume(){return s().iQt()}set masterVolume(t){zu._e(t),s().eQt(t)}hQt(){s().rQt()}}}{const Ju=self.Vs,qu=["interactive","balanced","playback"];Ju.XY.Audio.Instance=class extends Ju.$xt{constructor(t,s){super(t,"audio"),this.nQt=0,this.oQt=[],this.aQt=!0,this.lQt=0,this.uQt=0,this.cQt=!1,this.fQt=1,this.dQt=1,this.pQt=[this.Pf.o9()/2,this.Pf.a9()/2,600],this.mQt=[0,0,-1],this.gQt=[0,1,0],this.yQt=600,this.SQt=1e4,this.wQt=1,this.bQt=null,this.MQt=-1,this.vQt=1,this.TQt=!1,this.xQt=0,this.GQt="suspended",this._Qt=0,this.IQt=new Map,this.CQt=0,this.PQt=0,this.RQt=new Map,this.AQt=new Map;let i="interactive";s&&(this.lQt=s[0],this.uQt=s[1],this.cQt=s[2],i=qu[s[3]],this.aQt=s[4],this.fQt=s[5],this.dQt=s[6],this.pQt[2]=s[7],this.yQt=s[8],this.SQt=s[9],this.wQt=s[10]),this.EQt=[],this.FQt=[],this.DQt=[],this.oGt([["state",t=>this.kQt(t)],["audiocontext-state",t=>this.OQt(t)],["fxstate",t=>this.LQt(t)],["trigger",t=>this.NQt(t)],["buffer-metadata",t=>this.BQt(t)]]);const e=this.PO().a0(),h=(this.W0=new Ju.L0(Ju.A0.O0(e,"instancedestroy",t=>this.WQt(t.fW)),Ju.A0.O0(e,"afterload",()=>this.bK()),Ju.A0.O0(e,"suspend",()=>this.VQt()),Ju.A0.O0(e,"resume",()=>this.jQt())),this.Pf.dL()),r="Safari"===Ju.mi.Si,n=this.Pf.QBt()||"macos-wkwebview"===h,o=this.Pf.pD().xU(),a="playable-ad-single-file"===this.Pf.dL(),l=r||n||o||a;this.Pf.vO(this.lGt("create-audio-context",{preloadList:this.Pf.pD().s7().map(t=>({originalUrl:t.originalUrl,url:t.url,type:t.type,fileSize:t.fileSize})),timeScaleMode:this.lQt,latencyHint:i,panningModel:this.fQt,distanceModel:this.dQt,refDistance:this.yQt,maxDistance:this.SQt,rolloffFactor:this.wQt,listenerPos:this.pQt,usePlayMusicAsSoundWorkaround:l}).then(t=>{this.xQt=t.sampleRate,this.GQt=t.audioContextState,this._Qt=t.outputLatency})),this.mGt()}Gr(){this.bQt=null,super.Gr()}HQt(t){return this.aQt?t.split(" ").filter(t=>!!t):t?[t]:[]}UQt(s,t){for(const i of t){let t=!1;for(const e of s)if(Ju.Gh(e,i)){t=!0;break}if(!t)return!1}return!0}zQt(t,s){return this.UQt(t,this.HQt(s))}YZt(t){this.l5().YZt(t)}WQt(t){this.bQt===t&&(this.bQt=null)}JQt(t){return Math.pow(10,t/20)}qQt(t){const s=this.JQt(t);return isFinite(s)?Math.max(Math.min(s,1),0):0}XQt(t){return Math.log(t)/Math.log(10)*20}YQt(t){return this.XQt(Math.max(Math.min(t,1),0))}VQt(){this.cQt||this.aGt("set-suspended",{isSuspended:!0})}jQt(){this.cQt||this.aGt("set-suspended",{isSuspended:!1})}kQt(t){const s=t.tickCount,i=(this._Qt=t.outputLatency,this.EQt.filter(t=>t.hasOwnProperty("placeholder")&&(t.placeholder>s||-1===t.placeholder)));this.EQt=t.audioInstances,this.DQt=t.analysers,0<i.length&&Ju.nr(this.EQt,i)}BQt(t){this.RQt.set(t.originalUrl,{duration:t.duration})}OQt(t){this.GQt=t.audioContextState}ont(){return this.Pf.Ykt()?"running":this.GQt}LQt(t){this.FQt=t.fxstate}$Qt(t){const s=this.HQt(t);for(const i of this.EQt)if(this.UQt(i.tags,s))return i;return null}KQt(t){const s=this.HQt(t);return this.EQt.some(t=>this.UQt(t.tags,s)&&t.isPlaying)}ZQt(t,s,i,e,h){if(this.KQt(s))return null;const r=this.RQt.get(t),n={tags:this.HQt(s),duration:r?r.duration:0,volume:h,isPlaying:!0,playbackTime:0,playbackRate:1,uid:-1,bufferOriginalUrl:t,bufferUrl:"",bufferType:"",isMusic:i,isLooping:e,isMuted:!1,resumePosition:0,pan:null,placeholder:-1};return this.EQt.push(n),n}QQt(t){const s=this.HQt(t);for(const i of this.EQt)this.UQt(i.tags,s)&&(i.isPlaying=!1)}async NQt(t){const s=t.type,i=(this.oQt=t.tags,t.aiid);if("ended"===s){for(const e of this.EQt)if(e.aiid===i){e.isPlaying=!1;break}await this.s4(Ju.XY.Audio.JY.tts)}else"fade-ended"===s&&await this.s4(Ju.XY.Audio.JY.sts)}its(t){return this.zQt(this.oQt,t)}yZ(){const t={timeScale:this.Pf.Sk(),gameTime:this.Pf.JBt(),instPans:this.ets(),tickCount:this.Pf.qBt()};if(this.bQt){const s=this.bQt.lO();this.pQt[0]=s.KM(),this.pQt[1]=s.tv(),t.listenerPos=this.pQt,t.listenerOrientation=[...this.mQt,...this.gQt]}this.aGt("tick",t)}hts(t,s,i,e,h){if(0!==i){const r=Math.sin(i),n=Math.cos(i),o=(t-=e)*r,a=(s-=h)*r,l=t*n,u=s*n;t=l-a,s=u+o,t+=e,s+=h}return[t,s]}ets(){return this.EQt.filter(t=>-1!==t.uid).map(t=>this.Pf.hO(t.uid)).filter(t=>t).map(t=>{const s=t.lO(),i=s.uO().GetAngle(),[e,h]=this.hts(s.KM(),s.tv(),-i,this.pQt[0],this.pQt[1]);return{uid:t.GB(),x:e,y:h,z:s.L4(),angle:s.GetAngle()-i}})}rts(t,s){for(const i of this.DQt)if(i.index===s&&Ju.Gh(i.tag,t))return i;return null}nts(t){for(const s of this.HQt(t)){const i=s.toLowerCase();this.IQt.set(i,(this.IQt.get(i)||0)+1)}}tQt(){return this.TQt}sQt(t){this.TQt!==(t=!!t)&&(this.TQt=t,this.aGt("set-silent",{isSilent:t}))}iQt(){return this.vQt}eQt(t){this.vQt!==t&&(this.vQt=t,this.aGt("set-master-volume",{vol:t}))}rQt(){this.aGt("stop-all");for(const t of this.EQt)t.isPlaying=!1}ots(t){return!t.hasOwnProperty("placeholder")&&3!==this.uQt&&!(t.isMusic&&1===this.uQt||!t.isMusic&&2===this.uQt)}dv(){return{isSilent:this.TQt,masterVolume:this.vQt,listenerZ:this.pQt[2],listenerForwardVec:this.mQt,listenerUpVec:this.gQt,listenerUid:this.bQt?this.bQt.GB():-1,remoteUrls:[...this.AQt.entries()],playing:this.EQt.filter(t=>this.ots(t)),effects:this.FQt,analysers:this.DQt}}pv(t){if(this.TQt=t.isSilent,this.vQt=t.masterVolume,this.pQt[2]=t.listenerZ,this.bQt=null,this.MQt=t.listenerUid,t.hasOwnProperty("listenerForwardVec")?this.mQt=t.listenerForwardVec:this.mQt=[0,0,-1],t.hasOwnProperty("listenerUpVec")?this.gQt=t.listenerUpVec:this.gQt=[0,1,0],this.AQt.clear(),t.remoteUrls)for(const[s,i]of t.remoteUrls)this.AQt.set(s,i);this.EQt=t.playing;for(const e of this.EQt)e.hasOwnProperty("tag")&&!e.hasOwnProperty("tags")&&(e.tags=[e.tag].filter(t=>!!t));this.FQt=t.effects,this.DQt=t.analysers}bK(){if(-1!==this.MQt&&(this.bQt=this.Pf.hO(this.MQt),this.MQt=-1,this.bQt)){const t=this.bQt.lO();this.pQt[0]=t.KM(),this.pQt[1]=t.tv()}for(const s of this.EQt){const i=this.Pf.pD().t7(s.bufferOriginalUrl);i?(s.bufferUrl=i.url,s.bufferType=i.type):s.bufferUrl=null}for(const e of Object.values(this.FQt))for(const h of e)if(h.hasOwnProperty("bufferOriginalUrl")){const r=this.Pf.pD().t7(h.bufferOriginalUrl);r&&(h.bufferUrl=r.url,h.bufferType=r.type)}this.aGt("load-state",{saveLoadMode:this.uQt,timeScale:this.Pf.Sk(),gameTime:this.Pf.JBt(),listenerPos:this.pQt,listenerOrientation:[...this.mQt,...this.gQt],isSilent:this.TQt,masterVolume:this.vQt,playing:this.EQt.filter(t=>null!==t.bufferUrl),effects:this.FQt})}wGt(){const t=[];for(const[i,e]of Object.entries(this.FQt))t.push({name:"$"+i,value:e.map(t=>t.type).join(", ")});const s="plugins.audio.debugger";return[{title:s+".tag-effects",properties:t},{title:s+".currently-playing",properties:[{name:s+".currently-playing-count",value:this.EQt.length},...this.EQt.map((t,s)=>({name:"$#"+s,value:`${t.bufferOriginalUrl} ("${t.tags}") ${Math.round(10*t.playbackTime)/10} / `+Math.round(10*t.duration)/10}))]}]}}}{const Xu=self.Vs;Xu.XY.Audio.JY={tts(t){return this.its(t)},sts(t){return this.its(t)},ats(){return this.PQt===this.CQt},lts(){return!0},uts(){return this.tQt()},cts(){for(const t of this.EQt)if(t.isPlaying)return!0;return!1},fts(t){return this.KQt(t)}}}{const Yu=self.Vs,$u=["lowpass","highpass","bandpass","lowshelf","highshelf","peaking","notch","allpass"];Yu.XY.Audio.Krt={Play(t,s,i,e,h){const r=Yu.XY.Audio.Krt.dts.call(this,t,s,i,e,h);return this.YZt(r),r},ant(t,s,i,e){Yu.XY.Audio.Krt.dts.call(this,t,0,s,0,i,e)},async dts(t,s,i,e,h,r){if(!this.TQt){const n=t[1],o=this.Pf.pD().t7(t[0]);if(o){const a=this.nQt,l=(this.nQt=0,this.ZQt(t[0],h,n,0!==s,this.qQt(i)));try{await this.lGt("play",{originalUrl:t[0],url:o.url,type:o.type,isMusic:n,tags:this.HQt(h),isLooping:0!==s,vol:this.qQt(i),stereoPan:Yu.Rr(e/100,-1,1),pos:r||0,off:a,trueClock:!!self.C3_GetAudioContextCurrentTime})}finally{l&&(l.placeholder=this.Pf.qBt())}}}},async pts(t,s,i,e,h,r,n,o,a,l,u){if(!this.TQt){const c=t[1],f=this.Pf.pD().t7(t[0]);if(f){const d=this.nQt,p=(this.nQt=0,this.ZQt(t[0],u,c,0!==s,this.qQt(i)));try{await this.lGt("play",{originalUrl:t[0],url:f.url,type:f.type,isMusic:c,tags:this.HQt(u),isLooping:0!==s,vol:this.qQt(i),pos:0,off:d,trueClock:!!self.C3_GetAudioContextCurrentTime,panning:{x:e,y:h,z:r,angle:Yu.Er(n),innerAngle:Yu.Er(o),outerAngle:Yu.Er(a),outerGain:this.qQt(l)}})}finally{p&&(p.placeholder=this.Pf.qBt())}}}},async gts(t,s,i,e,h,r,n,o){if(!this.TQt&&e){const a=e.t2t();if(a&&a.lO()){const l=a.lO(),u=l.uO().GetAngle(),[c,f]=this.hts(l.KM(),l.tv(),-u,this.pQt[0],this.pQt[1]),d=t[1],p=this.Pf.pD().t7(t[0]);if(p){const m=this.nQt,g=(this.nQt=0,this.ZQt(t[0],o,d,0!==s,this.qQt(i)));try{await this.lGt("play",{originalUrl:t[0],url:p.url,type:p.type,isMusic:d,tags:this.HQt(o),isLooping:0!==s,vol:this.qQt(i),pos:0,off:m,trueClock:!!self.C3_GetAudioContextCurrentTime,panning:{x:c,y:f,z:l.L4(),angle:l.GetAngle()-u,innerAngle:Yu.Er(h),outerAngle:Yu.Er(r),outerGain:this.qQt(n),uid:a.GB()}})}finally{g&&(g.placeholder=this.Pf.qBt())}}}}},async yts(t,s,i,e,h,r){if(!this.TQt){const n=1===t,o=this.Pf.pD().t7(s)||this.AQt.get(s.toLowerCase());if(o){const a=this.nQt,l=(this.nQt=0,this.ZQt(s,r,n,0!==i,this.qQt(e)));try{await this.lGt("play",{originalUrl:s,url:o.url,type:o.type,isMusic:n,tags:this.HQt(r),isLooping:0!==i,vol:this.qQt(e),stereoPan:Yu.Rr(h/100,-1,1),pos:0,off:a,trueClock:!!self.C3_GetAudioContextCurrentTime})}finally{l&&(l.placeholder=this.Pf.qBt())}}}},async Sts(t,s,i,e,h,r,n,o,a,l,u,c){if(!this.TQt){const f=1===t,d=this.Pf.pD().t7(s)||this.AQt.get(s.toLowerCase());if(d){const p=this.nQt,m=(this.nQt=0,this.ZQt(s,c,f,0!==i,this.qQt(e)));try{await this.lGt("play",{originalUrl:s,url:d.url,type:d.type,isMusic:f,tags:this.HQt(c),isLooping:0!==i,vol:this.qQt(e),pos:0,off:p,trueClock:!!self.C3_GetAudioContextCurrentTime,panning:{x:h,y:r,z:n,angle:Yu.Er(o),innerAngle:Yu.Er(a),outerAngle:Yu.Er(l),outerGain:this.qQt(u)}})}finally{m&&(m.placeholder=this.Pf.qBt())}}}},async wts(t,s,i,e,h,r,n,o,a){if(!this.TQt&&!this.TQt&&h){const l=h.t2t();if(l&&l.lO()){const u=l.lO(),c=u.uO().GetAngle(),[f,d]=this.hts(u.KM(),u.tv(),-c,this.pQt[0],this.pQt[1]),p=1===t,m=this.Pf.pD().t7(s)||this.AQt.get(s.toLowerCase());if(m){const g=this.nQt,y=(this.nQt=0,this.ZQt(s,a,p,0!==i,this.qQt(e)));try{await this.lGt("play",{originalUrl:s,url:m.url,type:m.type,isMusic:p,tags:this.HQt(a),isLooping:0!==i,vol:this.qQt(e),pos:0,off:g,trueClock:!!self.C3_GetAudioContextCurrentTime,panning:{x:f,y:d,z:u.L4(),angle:u.GetAngle()-c,innerAngle:Yu.Er(r),outerAngle:Yu.Er(n),outerGain:this.qQt(o),uid:l.GB()}})}finally{y&&(y.placeholder=this.Pf.qBt())}}}}},bts(t,s){this.aGt("set-looping",{tags:this.HQt(t),isLooping:0===s})},Mts(t,s){this.aGt("set-muted",{tags:this.HQt(t),isMuted:0===s})},rnt(t,s){this.aGt("set-volume",{tags:this.HQt(t),vol:this.qQt(s)})},vts(t,s,i,e){this.aGt("fade-volume",{tags:this.HQt(t),vol:this.qQt(s),duration:i,stopOnEnd:0===e})},Tts(t,s){this.aGt("set-stereo-pan",{tags:this.HQt(t),p:Yu.Rr(s/100,-1,1)})},async xts(t){const s=t[1],i=this.Pf.pD().t7(t[0]);i&&(this.CQt++,await this.lGt("preload",{originalUrl:t[0],url:i.url,type:i.type,isMusic:s}),this.PQt++)},async Gts(t,s){const i=1===t,e=this.Pf.pD().t7(s)||this.AQt.get(s.toLowerCase());e&&(this.CQt++,await this.lGt("preload",{originalUrl:s,url:e.url,type:e.type,isMusic:i}),this.PQt++)},yV(t,s){this.aGt("set-playback-rate",{tags:this.HQt(t),rate:Math.max(s,0)})},oV(t){this.QQt(t),this.aGt("stop",{tags:this.HQt(t)})},_ts(){this.rQt()},Its(t,s){this.aGt("set-paused",{tags:this.HQt(t),paused:0===s})},Cts(t,s){this.aGt("seek",{tags:this.HQt(t),pos:s})},Pts(t){2===t&&(t=this.tQt()?1:0),this.sQt(0===t)},Rts(t){const s=this.qQt(t);this.eQt(s)},Ats(t,s,i,e,h,r,n){const o=$u[s];this.nts(t),this.aGt("add-effect",{type:"filter",tags:this.HQt(t),params:[o,i,e,h,r,Yu.Rr(n/100,0,1)]})},Ets(t,s,i,e){this.nts(t),this.aGt("add-effect",{type:"delay",tags:this.HQt(t),params:[s,this.qQt(i),Yu.Rr(e/100,0,1)]})},Fts(t,s,i,e,h,r){this.nts(t),this.aGt("add-effect",{type:"flanger",tags:this.HQt(t),params:[s/1e3,i/1e3,e,h/100,Yu.Rr(r/100,0,1)]})},Dts(t,s,i,e,h,r,n){this.nts(t),this.aGt("add-effect",{type:"phaser",tags:this.HQt(t),params:[s,i,e,h,r,Yu.Rr(n/100,0,1)]})},kts(t,s,i,e){const h=this.Pf.pD().t7(s[0]);h&&(this.nts(t),this.aGt("add-effect",{type:"convolution",tags:this.HQt(t),bufferOriginalUrl:s[0],bufferUrl:h.url,bufferType:h.type,params:[0===i,Yu.Rr(e/100,0,1)]}))},Ots(t,s){this.nts(t),this.aGt("add-effect",{type:"gain",tags:this.HQt(t),params:[this.qQt(s)]})},Lts(t,s){this.nts(t),this.aGt("add-effect",{type:"stereopan",tags:this.HQt(t),params:[Yu.Rr(s/100,-1,1)]})},Nts(t){this.nts(t),this.aGt("add-effect",{type:"gain",tags:this.HQt(t),params:[0]})},Bts(t,s,i){this.nts(t),this.aGt("add-effect",{type:"tremolo",tags:this.HQt(t),params:[s,Yu.Rr(i/100,0,1)]})},Wts(t,s,i){this.nts(t),this.aGt("add-effect",{type:"ringmod",tags:this.HQt(t),params:[s,Yu.Rr(i/100,0,1)]})},Vts(t,s,i,e,h,r){this.nts(t),this.aGt("add-effect",{type:"distortion",tags:this.HQt(t),params:[this.JQt(s),this.JQt(i),e,this.JQt(h),Yu.Rr(r/100,0,1)]})},jts(t,s,i,e,h,r){this.nts(t),this.aGt("add-effect",{type:"compressor",tags:this.HQt(t),params:[s,i,e,h/1e3,r/1e3]})},Hts(t,s,i){this.nts(t),this.aGt("add-effect",{type:"analyser",tags:this.HQt(t),params:[s,i]})},Uts(t){const s=this.HQt(t);for(const i of s)this.IQt.set(i.toLowerCase(),0);this.aGt("remove-effects",{tags:s}),this.FQt={}},MW(t,s,i,e,h,r){this.aGt("set-effect-param",{tags:this.HQt(t),index:Math.floor(s),param:i,value:e,ramp:h,time:r})},zts(t){if(t){const s=t.t2t();s&&s.lO()&&(this.bQt=s)}},Jts(t){this.pQt[2]=t},qts(t,s,i,e,h,r){this.mQt[0]=t,this.mQt[1]=s,this.mQt[2]=-i,this.gQt[0]=e,this.gQt[1]=h,this.gQt[2]=-r},Xts(t){this.nQt=Math.max(t,0)},Yts(t){const s=t[1],i=this.Pf.pD().t7(t[0]);i&&this.aGt("unload",{url:i.url,type:i.type,isMusic:s})},$ts(t,s){const i=1===t,e=this.Pf.pD().t7(s)||this.AQt.get(s.toLowerCase());e&&this.aGt("unload",{url:e.url,type:e.type,isMusic:i})},Kts(){this.aGt("unload-all")},Zts(t,s,i){this.AQt.set(i.toLowerCase(),{url:t,type:s})}}}{const Ku=self.Vs;Ku.XY.Audio.Zrt={Qts(t){const s=this.$Qt(t);return s?s.duration:0},snt(t){const s=this.$Qt(t);return s?s.playbackTime:0},nnt(t){const s=this.$Qt(t);return s?s.playbackRate:0},int(t){const s=this.$Qt(t);return s?this.YQt(s.volume):0},tss(){return this.YQt(this.iQt())},sss(t){return this.IQt.get(t.toLowerCase())||0},iss(t,s){const i=this.rts(t,Math.floor(s));return i?i.binCount:0},ess(t,s,i){const e=this.rts(t,Math.floor(s));return!e||(i=Math.floor(i))<0||i>=e.binCount?0:e.freqBins[i]},hss(t,s){const i=this.rts(t,Math.floor(s));return i?i.peak:0},rss(t,s){const i=this.rts(t,Math.floor(s));return i?i.rms:0},nss(){return this.xQt},oss(){return self.C3_GetAudioContextCurrentTime?self.C3_GetAudioContextCurrentTime():performance.now()/1e3},ass(){return this._Qt},lss(t,s){return 0==(t=Ku.Rr(+t,0,100)/100)?-1/0:t<.1?this.YQt(Ku.Lt(0,this.qQt(s),10*t)):Ku.Lt(s,0,(t-.1)/.9)}}}{const Zu=self.Vs;Zu.XY.cst=class extends Zu.oxt{constructor(t){super(t)}Gr(){super.Gr()}}}{let r=function(){return n.n5().sW()},e=function(t){if("string"==typeof t){const s=i.XK(t);if(s)return s;throw new Error(`invalid timeline name '${t}'`)}if(t instanceof self.xV)return n.PO().Z5(t);throw new Error("invalid timeline parameter")},h=function(t,s=!1){if(!(s&&null==t||"string"==typeof t||Array.isArray(t)))throw new Error("invalid tags")};r,e,h;const Qu=self.Vs,tc=self.Zs;Qu.XY.cst.xCt=class extends Qu.zxt{constructor(t){super(t)}Gr(){super.Gr()}Rxt(){}Axt(){return self.uss}};let n=null,i=null;self.uss=class extends self.o5{constructor(t){super(t),n=t,i=t.PO().Utt(),t.PO().Kk().tO=this}css(t,s){let i=n.PO(),e;if(t instanceof self.Y6)e=[i.aO(t)];else{if(!Array.isArray(t))throw new TypeError("invalid instances");e=t.map(t=>i.aO(t))}if(0!==e.length){tc.Ae(s);const h=e[0].fB();r().fss(h,e,s??"")}}play(t,s){const i=e(t);return h(s,!0),r().dss(i,s??[]),i.bit()}*pss(){for(const t of i.VK())yield t.bit()}*mss(t){h(t);for(const s of i.KK(t))yield s.bit()}}}{const sc=self.Vs;sc.XY.cst.Instance=class extends sc.$xt{constructor(t,s){super(t),this.gss=new Map,this.PO().Utt().BK(t)}Gr(){super.Gr()}yss(t,s){for(const i of t)s.oit(i.trackId,i.fW)}Sss(){const t=[],h=(t,s,i)=>{const e=s.d5[s.wss];if(e)return s.wss++,t.bss.includes(e)||e.kj()?h(t,s,i):(t.bss.push(e),{trackId:i,fW:e})};for(const s of this.gss.values())for(const[i,e]of s.Mss.entries()){const r=h(s,e,i);r&&t.push(r)}return t}fss(t,s,i){if(t.RJ()&&(t=t.t2t().fB()),this.gss.has(t)){const e=this.gss.get(t).Mss;if(e.has(i)){const h=new Set([...e.get(i).d5,...s]);e.set(i,{wss:0,d5:Array.from(h)})}else e.set(i,{wss:0,d5:s})}else this.gss.set(t,{bss:[],Mss:new Map([[i,{wss:0,d5:s}]])})}vss(){this.gss&&this.gss.clear()}async dss(h,r,t){if(h){let s=this.Pf.Utt(),i,e=[];if(this.gss.size){let t=this.Sss();for(;t.length&&((i=s.JK(h,t))||((i=s.RK(h)).rit(),this.yss(t,i)),i.nst(r),i.Play()&&e.push(i.bV()),t=this.Sss()),t.length;);}else h.nst(r),h.Play()&&e.push(h.bV());t||this.gss.clear(),await Promise.all(e)}else t||this.gss.clear()}}}{let n=self.Vs,s=[],i=[];n.XY.cst.JY={fst(t){s.push(t)},yst(){s.pop()},Tss(){return s[s.length-1]},Eet(t){i.push(t)},Det(t){i.pop()},xss(){return i[i.length-1]},dst(t){return n.XY.cst.JY.Tss()===t},pst(t){const s=n.XY.cst.JY.Tss();if(s){const i=this.Pf.Utt();for(const e of i.$K(t))if(n.Gh(s.Mf(),e.Mf()))return!0}return!1},mst(t){const s=n.XY.cst.JY.Tss();if(s){const i=this.Pf.Utt();for(const e of i.KK(t))if(e.lV(s.wV()))return!0}return!1},gst(){return!0},bst(t){return n.XY.cst.JY.Tss()===t},Mst(t){const s=n.XY.cst.JY.Tss();if(s){const i=this.Pf.Utt();for(const e of i.$K(t))if(n.Gh(s.Mf(),e.Mf()))return!0}return!1},vst(t){const s=n.XY.cst.JY.Tss();if(s){const i=this.Pf.Utt();for(const e of i.KK(t))if(e.lV(s.wV()))return!0}return!1},Tst(){return!0},IsPlaying(t){return t.IsPlaying()},Gss(t){const s=this.Pf.Utt();for(const i of s.$K(t))if(i.IsPlaying())return!0;return!1},_ss(t){const s=this.Pf.Utt();for(const i of s.KK(t))if(i.IsPlaying())return!0;return!1},cts(){const t=[...this.Pf.Utt().VK()];if(t)return t.some(t=>t.IsPlaying())},vV(t){return t.vV()},Iss(t){const s=this.Pf.Utt();for(const i of s.$K(t))if(i.vV())return!0;return!1},Css(t){const s=this.Pf.Utt();for(const i of s.KK(t))if(i.vV())return!0;return!1},Pss(){const t=[...this.Pf.Utt().VK()];if(t)return t.some(t=>t.vV())},Bst(t){return n.XY.cst.JY.Tss()===t},Wst(t){const s=n.XY.cst.JY.Tss();if(s){const i=this.Pf.Utt();for(const e of i.$K(t))if(s===e)return!0}return!1},Vst(t){const s=n.XY.cst.JY.Tss();if(s){const i=this.Pf.Utt();for(const e of i.KK(t))if(s===e)return!0}return!1},Fet(){return!!n.XY.cst.JY.xss()},_et(t,s){const i=n.XY.cst.JY.xss();if(!i)return!1;if(0===i.wV().length||!t)return!1;const e=t?t.split(" "):[];if(0===s){for(const h of e)if(i.yit(h))return!0;return!1}for(const r of e)if(!i.yit(r))return!1;return!0}}}{const ic=self.Vs;ic.XY.cst.Krt={Rss(t,s){return this.dss(t,s,!1)},async Ass(t,s){const i=this.Pf.Utt(),e=[];for(const h of i.$K(t))e.push(this.dss(h,s,!0));this.gss.clear(),await Promise.all(e)},async Ess(){const t=this.Pf.Utt(),s=[];for(const i of t.VK())i.Play()&&s.push(i.bV());this.gss.clear(),await Promise.all(s)},Fss(t){t&&t.oV()},Dss(t){const s=this.Pf.Utt();for(const i of s.$K(t))ic.XY.cst.Krt.Fss.call(this,i)},kss(t){const s=this.Pf.Utt();for(const i of s.KK(t))ic.XY.cst.Krt.Fss.call(this,i)},Oss(){const t=this.Pf.Utt();for(const s of t.VK())s.oV()},Lss(t){t&&t.aV()},Nss(t){const s=this.Pf.Utt();for(const i of s.$K(t))ic.XY.cst.Krt.Lss.call(this,i)},Bss(t){const s=this.Pf.Utt();for(const i of s.KK(t))ic.XY.cst.Krt.Lss.call(this,i)},Wss(){const t=this.Pf.Utt();for(const s of t.VK())s.aV()},Vss(t){t&&t.P0()},jss(t){const s=this.Pf.Utt();for(const i of s.$K(t))ic.XY.cst.Krt.Vss.call(this,i)},Hss(t){const s=this.Pf.Utt();for(const i of s.KK(t))ic.XY.cst.Krt.Vss.call(this,i)},Uss(){const t=this.Pf.Utt();for(const s of t.VK())s.P0()},zss(t,s){if(t)if(ic.we(s))t.uV(s);else if(ic.Pe(s)){const i=t.mit(s);i?t.uV(i.UE()):ic.XY.cst.Krt.zss.call(this,t,Number(s))}},Jss(t,s){const i=this.Pf.Utt();for(const e of i.$K(t))ic.XY.cst.Krt.zss.call(this,e,s)},qss(t,s){const i=this.Pf.Utt();for(const e of i.KK(t))ic.XY.cst.Krt.zss.call(this,e,s)},Xss(t,s){t&&t.yV(s)},Yss(t,s){const i=this.Pf.Utt();for(const e of i.$K(t))ic.XY.cst.Krt.Xss.call(this,e,s)},$ss(t,s){const i=this.Pf.Utt();for(const e of i.KK(t))ic.XY.cst.Krt.Xss.call(this,e,s)},ait(t,s){const i=[...t.b5().w5()];this.fss(t,i,s)},Kss(){this.vss()}}}{const ec=self.Vs;ec.XY.cst.Zrt={Zss(t){const s=this.Pf.Utt();for(const i of s.$K(t))return i.UE();for(const e of s.KK(t))return e.UE();return 0},Qss(t){const s=this.Pf.Utt();for(const i of s.$K(t))return i.fV();for(const e of s.KK(t))return e.fV();return 0},tis(t){const s=this.Pf.Utt();for(const i of s.$K(t))return i.UE()/i.fV();for(const e of s.KK(t))return e.UE()/e.fV();return 0},sis(){const t=ec.XY.cst.JY.xss();return t?t.wV().join(" "):""},iis(){const t=ec.XY.cst.JY.Tss();return t?t.Mf():""},eis(){const t=ec.XY.cst.JY.Tss();return t?t.ast():""},his(t,s){const i=this.Pf.Utt();for(const e of i.$K(t)){let t=e.qtt(s);if(t){const h=t.OV("value");if(h)return h.kV()}else{let t=e.jZ(s);if(t){const r=t.OV("value");if(r)return r.kV()}}}for(const n of i.KK(t)){let t=n.qtt(s);if(t){const o=t.OV("value");if(o)return o.kV()}else{let t=n.jZ(s);if(t){const a=t.OV("value");if(a)return a.kV()}}}return 0},Oc(t,s){1<=(s=s<0?0:s)&&(s=1);const i=self.Oc.Bc(t);if(i)return self.Oc.Kc(i)(s,0,1,1);{const e=self.Oc.Kc(t);if(e)return e(s,0,1,1)}return console.warn("[TimelineController.Ease expression] no matching built-in or custom ease function found, returning 0"),0}}}{const hc=self.Vs;hc.XY.ris=class extends hc.oxt{constructor(t){super(t)}Gr(){super.Gr()}}}{const rc=self.Vs;rc.XY.ris.xCt=class extends rc.zxt{constructor(t){super(t),this.nis=null,this.Fy=null}Gr(){this.MY(),super.Gr()}Rxt(){this.BW().CO(this.Pf)}async mY(t){const s=this.BW();this.Fy=await s.aIt()}ois(t,s,i,e){!this.nis&&this.Fy&&(this.nis=new self.ais(this),this.nis.lis(this.Fy,t,s,i,e))}MY(){this.nis&&(this.nis.Gr(),this.nis=null)}uis(){return this.nis}}}{const nc=self.Vs,oc=nc.Tr(nc.Rect),ac=nc.Tr(nc.Rect),lc=nc.Tr(nc.gu);nc.XY.ris.Instance=class extends nc.xGt{constructor(t,s){super(t),this.cis=16,this.fis=16,this.dis=16,this.pis=16,this.mis=1,this.gis=1,this.yis=!0,this.Sis=null,s&&(this.cis=s[0],this.fis=s[1],this.dis=s[2],this.pis=s[3],this.mis=s[4],this.gis=s[5],this.yis=!!s[8],this.lO().MN(!!s[6])),this.Zxt.ois(this.cis,this.fis,this.dis,this.pis)}Gr(){super.Gr()}wis(t){this.Sis=t}Hv(t){const s=this.lO(),i=s.V4();this.bis(t,i.Sn(),i.wn(),s.Wm(),s.$m())}bis(t,s,i,e,h){let r=this.Zxt.uis();if(r||(this.Zxt.ois(this.cis,this.fis,this.dis,this.pis),r=this.Zxt.uis())){const n=r.Mis(),o=r.vis(),a=Math.min(this.cis,n),l=Math.min(this.fis,n),u=Math.min(this.dis,o),c=Math.min(this.pis,o),f=n-l,d=o-c,p=this.yis?1:0,m=this.mis,g=this.gis;if(0<a&&0<u&&this.Tis(t,r.wT(),0,0,a+p,u+p,s,i,a+p,u+p),0<l&&0<u&&this.Tis(t,r.wT(),f-p,0,l+p,u+p,s+e-l-p,i,l+p,u+p),0<l&&0<c&&this.Tis(t,r.wT(),f-p,d-p,l+p,c+p,s+e-l-p,i+h-c-p,l+p,c+p),0<a&&0<c&&this.Tis(t,r.wT(),0,d-p,a+p,c+p,s,i+h-c-p,a+p,c+p),0===m){const y=2===g?0:p;0<a&&u<d&&this.xis(t,r.Gis(),s,i+u,a+y,h-u-c,0,0),0<l&&u<d&&this.xis(t,r._is(),s+e-l-y,i+u,l+y,h-u-c,y,0),0<u&&a<f&&this.xis(t,r.Iis(),s+a,i,e-a-l,u+y,0,0),0<c&&a<f&&this.xis(t,r.Cis(),s+a,i+h-c-y,e-a-l,c+y,0,y)}else 1===m&&(0<a&&u<d&&this.Tis(t,r.wT(),0,u,a,d-u,s,i+u,a,h-u-c),0<l&&u<d&&this.Tis(t,r.wT(),f,u,l,d-u,s+e-l,i+u,l,h-u-c),0<u&&a<f&&this.Tis(t,r.wT(),a,0,f-a,u,s+a,i,e-a-l,u),0<c)&&a<f&&this.Tis(t,r.wT(),a,d,f-a,c,s+a,i+h-c,e-a-l,c);u<d&&a<f&&(0===g?this.xis(t,r.Pis(),s+a,i+u,e-a-l,h-u-c,0,0):1===g&&this.Tis(t,r.wT(),a,u,f-a,d-u,s+a,i+u,e-a-l,h-u-c))}}Tis(t,s,i,e,h,r,n,o,a,l){const u=s.Wm(),c=s.$m();if(t.bA(s),oc.set(n,o,n+a,o+l),ac.set(i/u,e/c,(i+h)/u,(e+r)/c),null===this.Sis){const f=this.lO(),d=f.V4(),p=d.Sn(),m=d.wn();oc.offset(-p,-m),lc.Nu(oc,f.GetAngle()),lc.offset(p,m),t.ob(lc,ac)}else this.Sis(oc,ac)}xis(t,s,i,e,h,r,n,o){const a=s.Wm(),l=s.$m();if(t.bA(s),oc.set(i,e,i+h,e+r),ac.set(-n/a,-o/l,(h-n)/a,(r-o)/l),null===this.Sis){const u=this.lO(),c=u.V4(),f=c.Sn(),d=c.wn();oc.offset(-f,-d),lc.Nu(oc,u.GetAngle()),lc.offset(f,d),t.ob(lc,ac)}else this.Sis(oc,ac)}EGt(){this.T0t.BW()}knt(t){}Vnt(t,s){}}}{const uc=self.Vs;uc.XY.ris.JY={}}{const cc=self.Vs;cc.XY.ris.Krt={UHt(t){this.lO().WM(t),this.Pf.gO()}}}{const fc=self.Vs;fc.XY.ris.Zrt={}}{let c=function(t){const s=dc.zo(t.width,t.height),i=s.getContext("2d");return i.drawImage(t,0,0),s};c;const dc=self.Vs;self.ais=class{constructor(t){this.Zxt=t,this.Pf=this.Zxt.PO(),this.a2=null,this.Ris=null,this.Ais=null,this.Eis=null,this.Fis=null,this.Dis=null,this.p7=0,this.m7=0,this.Qb=this.Pf.bM(),this.wy=!1,this.uC=!1}Gr(){this.Qb.pP()||(this.Qb.dT(this.a2),this.Qb.dT(this.Ris),this.Qb.dT(this.Ais),this.Qb.dT(this.Eis),this.Qb.dT(this.Fis),this.Qb.dT(this.Dis)),this.a2=null,this.Ris=null,this.Ais=null,this.Eis=null,this.Fis=null,this.Dis=null,this.Zxt=null,this.Qb=null,this.uC=!0}_r(){return this.uC}lis(t,s,i,e,h){this.kis(t,s,i,e,h)}Ois(){return!!this.a2}kis(t,s,i,e,h){if(!this.uC){const r=t.width,n=t.height,o=(this.p7=r,this.m7=n,s=Math.min(Math.floor(s),r),i=Math.min(Math.floor(i),r),e=Math.min(Math.floor(e),n),r-i),a=n-(h=Math.min(Math.floor(h),n)),l=this.Pf.ED(),u=this.Pf.yL().y7();this.a2=this.Qb.iE(c(t),{t2:l,s2:u}),s<o&&e<a&&(this.Ris=this.Qb.iE(this.Lis(c(t),s,e,o,a),{Zv:"repeat",Qv:"repeat",t2:l,s2:u})),0<s&&e<a&&(this.Ais=this.Qb.iE(this.Lis(c(t),0,e,s,a),{Qv:"repeat",t2:l,s2:u})),0<i&&e<a&&(this.Eis=this.Qb.iE(this.Lis(c(t),o,e,r,a),{Qv:"repeat",t2:l,s2:u})),0<e&&s<o&&(this.Fis=this.Qb.iE(this.Lis(c(t),s,0,o,e),{Zv:"repeat",t2:l,s2:u})),0<h&&s<o&&(this.Dis=this.Qb.iE(this.Lis(c(t),s,a,o,n),{Zv:"repeat",t2:l,s2:u}))}}Lis(t,s,i,e,h){const r=e-s,n=h-i,o=dc.zo(r,n),a=o.getContext("2d");return a.drawImage(t,s,i,r,n,0,0,r,n),o}Mis(){return this.p7}vis(){return this.m7}wT(){return this.a2}Pis(){return this.Ris}Gis(){return this.Ais}_is(){return this.Eis}Iis(){return this.Fis}Cis(){return this.Dis}}}{const pc=self.Vs;pc.qlt.F_t=class extends pc.o_t{constructor(t){super(t)}Gr(){super.Gr()}}}{const mc=self.Vs;mc.qlt.F_t.xCt=class extends mc.f_t{constructor(t){super(t)}Gr(){super.Gr()}Rxt(){}}}{const gc=self.Vs,yc=self.Zs,Sc=self.nW,wc=new Set,bc=(gc.qlt.F_t.Instance=class extends gc.p_t{constructor(t,s){super(t),this.LTt(!0),s&&(this.LTt(s[0]),this.nst(s[1]))}Gr(){super.Gr()}LTt(t){this.Pi.nRt(!!t)}wc(){return this.Pi.rRt()}nst(s){const i=this.Pi.yMt();if(s.trim()){let t=i.get("solidTags");t||(t=new Set,i.set("solidTags",t)),t.clear();for(const e of s.split(" "))e&&t.add(e.toLowerCase())}else i.delete("solidTags")}wV(){return this.Pi.yMt().get("solidTags")||wc}Nis(){return[...this.wV()].join(" ")}dv(){return{e:this.wc()}}pv(t){this.LTt(t.e)}knt(t){if(0===t)return this.wc()}Vnt(t,s){0===t&&this.LTt(s)}wGt(){return[{title:"$"+this.cW().Mf(),properties:[{name:"behaviors.solid.properties.enabled.name",value:this.wc(),gzt:t=>this.LTt(t)},{name:"behaviors.solid.properties.tags.name",value:this.Nis(),gzt:t=>this.nst(t)}]}]}Axt(){return self.Bis}},new WeakMap);self.Bis=class extends Sc{constructor(){super(),bc.set(this,Sc.mB().sW())}set isEnabled(t){bc.get(this).LTt(!!t)}get isEnabled(){return bc.get(this).wc()}set tags(t){yc.Re(t),bc.get(this).nst(t)}get tags(){return bc.get(this).Nis()}}}{const Mc=self.Vs;Mc.qlt.F_t.JY={wc(){return this.wc()}}}{const vc=self.Vs;vc.qlt.F_t.Krt={LTt(t){this.LTt(t)},nst(t){this.nst(t)}}}{const Tc=self.Vs;Tc.qlt.F_t.Zrt={}}{const xc=self.Vs;xc.qlt.mi=class extends xc.o_t{constructor(t){super(t)}Gr(){super.Gr()}}}{const Gc=self.Vs;Gc.qlt.mi.xCt=class extends Gc.f_t{constructor(t){super(t)}Gr(){super.Gr()}Rxt(){}}}{let v=function(t,s,i,e,h){const r=s*h,n=i*h;return C.Rr(t*h+.5*e*h*h,r,n)};v;const C=self.Vs,_c=self.Zs,Ic=self.nW,P=(C.qlt.mi.Instance=class extends C.p_t{constructor(t,s){super(t),this.Wis=null,this.Vis=!1,this.jis=!1,this.His=!1,this.Uis=!1,this.zis=!1,this.Jis=!1,this.qis=!1,this.Xis=!1,this.Yis=!1,this.$is=!1,this.Kis=null,this.Zis=-1,this.Qis=0,this.tes=0,this.ses=!1,this.ies=!1,this.ees=this.Pf.yD().IFt(this.Pi),this.hes=-1,this.res="stopped",this.nes=-1,this.k9t=!0,this.oes=0,this.aes=0,this.les=0,this.ues=0,this.ces=0,this.fes=0,this.aa=1500,this.des=1500,this.pes=C.Er(90),this.mes=330,this.ges=1500,this.yes=1500,this.Ses=650,this.wes=1e3,this.bes=!1,this.Mes=0,this.ves=0,this.Tes=!0,this.xes=0,this.HSt=!0,s&&(this.mes=s[0],this.ges=s[1],this.yes=s[2],this.Ses=s[3],this.aa=s[4],this.wes=s[5],this.bes=!!s[6],this.Mes=s[7]/1e3,this.Tes=!!s[8],this.HSt=!!s[9]);const i=this.Pf.a0();this.W0=new C.L0(C.A0.O0(i,"instancedestroy",t=>this.WQt(t.fW)),C.A0.O0(i,"afterload",t=>this.bK())),this.Tes&&this.Ges(),this.HSt&&this.b_t(),this._es()}Gr(){this.Wis&&(this.Wis.Gr(),this.Wis=null),this.Kis=null,this.ees=null,super.Gr()}Ges(){if(!this.Wis){const t=this.Pf.a0();this.Wis=new C.L0(C.A0.O0(t,"keydown",t=>this.a$t(t.data)),C.A0.O0(t,"keyup",t=>this.l$t(t.data)),C.A0.O0(t,"window-blur",()=>this.u$t()),C.A0.O0(t,"keyboard-blur",()=>this.u$t()))}}Ies(){this.Wis&&(this.Wis.Gr(),this.Wis=null)}WQt(t){this.Kis===t&&(this.Kis=null),this.ees===t&&(this.ees=null)}a$t(t){switch(t.key){case"ArrowLeft":this.Vis=!0;break;case"ArrowRight":this.jis=!0;break;case"ArrowUp":this.His=!0}}l$t(t){switch(t.key){case"ArrowLeft":this.Vis=!1;break;case"ArrowRight":this.jis=!1;break;case"ArrowUp":this.His=!1,this.Uis=!1}}u$t(){this.Vis=!1,this.jis=!1,this.His=!1,this.Uis=!1}dv(){return{ii:this.qis,lfx:this.Qis,lfy:this.tes,lfo:this.Kis?this.Kis.GB():-1,am:this.res,en:this.HSt,fallt:this.nes,ft:this.k9t,dx:this.oes,dy:this.aes,ms:this.mes,acc:this.ges,dec:this.yes,js:this.Ses,g:this.aa,g1:this.des,mf:this.wes,wof:this.ies,woj:this.ees?this.ees.GB():-1,ga:this.pes,edj:this.bes,cdj:this.Jis,dj:this.zis,sus:this.Mes,dc:this.Tes,cc:this.xes}}pv(t){this.qis=t.ii,this.Qis=t.lfx,this.tes=t.lfy,this.Zis=t.lfo,this.res=t.am;const s=t.en;this.nes=t.fallt||-1,this.k9t=t.ft,this.oes=t.dx,this.aes=t.dy,this.mes=t.ms,this.ges=t.acc,this.yes=t.dec,this.Ses=t.js,this.aa=t.g,this.des=t.g1,this.wes=t.mf,this.ies=t.wof,this.hes=t.woj,this.pes=t.ga,this.bes=t.edj,this.Jis=t.cdj,this.zis=t.dj,this.Mes=t.sus,this.Tes=t.dc,this.xes=t.cc||0,this.Vis=!1,this.jis=!1,this.His=!1,this.Uis=!1,this.Xis=!1,this.Yis=!1,this.$is=!1,this.ves=0,this.Tes?this.Ges():this.Ies(),this.N2t(s),this._es()}bK(){-1===this.Zis?this.Kis=null:this.Kis=this.Pf.hO(this.Zis),-1===this.hes?this.ees=null:this.ees=this.Pf.hO(this.hes)}Ces(t){if(this.Kis=t){const s=t.lO();this.Qis=s.KM(),this.tes=s.tv()}}Pes(){return this.Pf.mk()>this.nes+.05}_es(){this.les=Math.cos(this.pes),this.ues=Math.sin(this.pes),this.ces=Math.cos(this.pes-Math.PI/2),this.fes=Math.sin(this.pes-Math.PI/2),this.les=C.sn(this.les,6),this.ues=C.sn(this.ues,6),this.ces=C.sn(this.ces,6),this.fes=C.sn(this.fes,6),this.des=this.aa,this.aa<0&&(this.les*=-1,this.ues*=-1,this.aa=Math.abs(this.aa))}Res(){return this.aa<0?-1:1}Aes(){const s=this.Pi.lO(),h=this.Pf.yD(),r=this.Pi,t=this.Kis,i=s.KM(),n=s.tv();if(s.D4(this.les,this.ues),s.R4(),!t||!h.$O(r,t)||t.fB().vPt()&&!h.JEt(t,r)||t.fB().TPt()&&!t.oRt()){let t=h.QO(r),e=null;if(!t&&this.Pes()&&(e=h.IFt(r,!0)),s.A4(i,n),s.R4(),t)return h.$O(r,t)?null:(this.ses=!1,t);if(e&&e.length){let i=0;for(let t=0,s=e.length;t<s;++t)e[i]=e[t],h.$O(r,e[t])||++i;if(1<=i)return this.ses=!0,e[0]}return null}return s.A4(i,n),s.R4(),t}w_t(){if(this.HSt){const c=this.Pf.fk(this.Pi);this.His||this.$is||(this.Uis=!1);let e=this.Vis||this.Xis,h=this.jis||this.Yis,r=this.His||this.$is,n=r&&!this.Uis,[o,,a]=(this.Xis=!1,this.Yis=!1,this.$is=!1,this.qis&&(e=!1,h=!1,r=!1,n=!1),r||(this.ves=0),this.Ees(),this.Fes()),l=this.Aes(),u=l&&!this.ies,t=!1;if([t,l]=this.Des(l),!t){this.kes(l,a,o,r),n=this.Oes(l,n,r),l||this.Les(n,r,c),this.ies=!!l;let t=this.Nes(e,h),s=!1,i=0;if(0!==this.oes&&([s,l]=this.Bes(c,t,l,n)),0!==this.aes){const[f,d]=this.Wes(c,l);s=s||f,i=d}!s&&u&&this.aes<0&&0<i&&(this.aes=0,s=!0),this.Ves(e,h,t,c),l&&!n||s||(this.aes=Math.min(this.aes+this.aa*c,this.wes)),this.jes(l,s,n),this.ees=this.Pf.yD().IFt(this.Pi)}}}Ees(){if(this.k9t){const t=this.Pi,s=this.Pf.yD();(s.QO(t)||s.IFt(t))&&s.PFt(t,-this.les,-this.ues,4,!0),this.k9t=!1}}Fes(){let t=this.Kis,s=t?t.lO():null,i=0,e=0,h=!1;if(t&&0===this.aes&&(s.tv()!==this.tes||s.KM()!==this.Qis)){const r=this.Pi,n=r.lO(),o=this.Pf.yD(),a=s.KM(),l=s.tv(),u=(i=a-this.Qis,e=l-this.tes,n.D4(i,e),n.R4(),this.Qis=a,this.tes=l,h=!0,o.QO(r));u&&(o.fFt(r,u),o.PFt(r,-i,-e,2.5*C.Dr(i,e)))}return[i,e,h]}Des(t){let s=!1,i=this.Pi,e=i.lO(),h=this.Pf.yD(),r=h.QO(i);if(!r)return[!1,t];const n=Math.abs(e.Wm()),o=Math.abs(e.$m());return h.PFt(i,-this.les,-this.ues,o/8)?(h.fFt(i,r),this.Ces(t=r),this.ses=!1,this.aes=0):h.AFt(i,this.ces,this.fes,n/2)||h.AFt(i,this.les,this.ues,o/2)||h.EFt(i,Math.max(n,o)/2)?h.fFt(i,r):s=!0,[s,t]}kes(t,s,i,e){const h=this.Pi,r=this.Pf.yD();if(t){const n=this.les,o=this.ues,a=this.ces,l=this.fes;if(this.zis=!1,this.Jis=!1,0<this.aes&&(this.ies||(r.RFt(h,-n,-o,t,16),this.ies=!0),this.aes=0),this.Kis!==t)this.Ces(t),r.fFt(h,t);else if(s){const u=r.QO(h);u&&(r.fFt(h,u),0!==i&&(0<i?r.PFt(h,-a,-l):r.PFt(h,a,l)),r.PFt(h,-n,-o))}}else e||(this.Jis=!0)}Oes(t,s,i){if(t&&s||!t&&this.bes&&i&&this.Jis&&!this.zis){const e=this.Pi,h=e.lO(),r=this.Pf.yD(),n=h.KM(),o=h.tv();h.D4(-this.les,-this.ues),h.R4(),r.QO(e)?s=!1:(this.ves=this.Mes,this.QB(C.qlt.mi.JY.Hes),this.res="jumping",this.aes=-this.Ses,s=!0,t?this.Uis=!0:this.zis=!0),h.A4(n,o),h.R4()}return s}Les(t,s,i){s&&0<this.ves?(this.aes=-this.Ses,this.ves-=i):this.Kis=null,t&&(this.Uis=!0)}Nes(t,s){let i=0,e=this.ges,h=this.yes;return t&&!s&&(i=0<this.oes?-(e+h):-e),i=s&&!t?this.oes<0?e+h:e:i}Ves(t,s,i,e){const h=this.yes,r=(t===s&&(this.oes<0?this.oes=Math.min(this.oes+h*e,0):0<this.oes&&(this.oes=Math.max(this.oes-h*e,0))),this.oes=C.Rr(this.oes+i*e,-this.mes,this.mes),this.Pf.yD()),n=this.oes<0?this.Ues(0,1,1):null;if(n)this.oes=0,r.fFt(this.Pi,n);else{const o=0<this.oes?this.Ues(1,1,1):null;o&&(this.oes=0,r.fFt(this.Pi,o))}}Bes(e,t,h,s){let r=this.Pi,n=r.lO(),o=this.Pf.yD(),a=this.les,l=this.ues,i=this.ces,u=this.fes,c=this.mes,f=!1,d=new Set(o.IFt(r,!0)),p=n.KM(),m=n.tv(),g=v(this.oes,-c,c,t,e)*i,y=v(this.oes,-c,c,t,e)*u,S=(n.D4(i*(1<this.oes?1:-1)-a,u*(1<this.oes?1:-1)-l),n.R4(),!1),w=o.QO(r),b=(n.A4(p+g,m+y),n.R4(),o.QO(r));if(!b&&h&&this.ses&&(b=o.IFt(r),d.has(b)?b=null:S=!0),b){let t=Math.abs(this.oes*e)+2;w||!o.PFt(r,-a,-l,t,S,b)?(o.fFt(r,b),t=Math.max(Math.abs(this.oes*e*2.5),Math.floor(n.Wm())),o.PFt(r,i*(this.oes<0?1:-1),u*(this.oes<0?1:-1),t,!1)&&(!h||S||this.ses||(p=n.KM(),m=n.tv(),n.D4(a,l),o.QO(r)&&o.PFt(r,-a,-l,3,!1)))||(n.A4(p,m),n.R4()),S||(this.oes=0)):!w&&!s&&Math.abs(this.aes)<Math.abs(this.Ses/4)&&(this.aes=0,h||(f=!0))}else{const M=this.Aes();if(h&&!M){let t=Math.ceil(Math.abs(this.oes*e))+2,s=(p=n.KM(),m=n.tv(),n.D4(a*t,l*t),n.R4(),o.IFt(r)),i=!1;s&&!d.has(s)&&o.PFt(r,-a,-l,t+2,!0,s)&&(this.Ces(h=s),this.ses=!0,i=!0),i||(o.QO(r)?o.PFt(r,-a,-l,t+2,!1):(n.A4(p,m),n.R4()))}else M&&(!h&&this.ses&&(this.Ces(M),this.aes=0,f=!0),0===this.aes)&&o.RFt(r,-a,-l,M,16)}return[f,h]}Wes(s,t){let e=this.Pi,h=e.lO(),r=this.Pf.yD(),i=this.les,n=this.ues,o=!1,a=h.KM(),l=h.tv(),u=v(this.aes,-1/0,this.wes,this.aa,s),c=(h.D4(u*i,u*n),h.KM()),f=h.tv(),d=(h.R4(),r.QO(e)),p=!1;if(!d&&0<this.aes&&!t){const m=this.Pes()?r.IFt(e,!0):null;if(m&&m.length){if(this.ees){h.A4(a,l),h.R4();let i=0;for(let t=0,s=m.length;t<s;++t)m[i]=m[t],r.$O(e,m[t])||++i;C.$n(m,i),h.A4(c,f),h.R4()}1<=m.length&&(d=m[0])}p=!!d}if(d){r.fFt(e,d),this.ves=0;let t=1.1;p&&!this.ees&&(t=2);const g=Math.max(Math.abs(this.aes*s*t),2);r.PFt(e,i*(this.aes<0?1:-1),n*(this.aes<0?1:-1),g,p,d)?(this.Ces(d),this.ses=p,0<this.aes&&(o=!0),(0<this.aes||0===this.xes)&&(this.aes=0),this.aes<0&&1===this.xes&&r.RFt(e,i,n,d,32)):(h.A4(a,l),h.R4(),this.ies=!0,p||(this.aes=0))}return[o,u]}jes(t,s,i){"falling"!==this.res&&0<this.aes&&!t&&(this.QB(C.qlt.mi.JY.zes),this.res="falling"),(t||s)&&0<=this.aes&&("falling"===this.res||s||i&&0===this.aes?(this.QB(C.qlt.mi.JY.Jes),0===this.oes&&0===this.aes?this.res="stopped":this.res="moving"):("stopped"!==this.res&&0===this.oes&&0===this.aes&&(this.QB(C.qlt.mi.JY.qes),this.res="stopped"),"moving"===this.res||0===this.oes&&0===this.aes||i||(this.QB(C.qlt.mi.JY.Xes),this.res="moving")))}Yes(){return 0!==this.$es()||0!==this.Kes()}Zes(){if(0===this.aes){let e=this.Pi,t=this.lO(),h=this.Pf.yD(),s=t.KM(),i=t.tv(),r=(t.D4(this.les,this.ues),t.R4(),h.QO(e)),n=null;if(!r&&this.Pes()&&(n=h.IFt(e,!0)),t.A4(s,i),t.R4(),r)return!h.$O(e,r);if(n&&n.length){let i=0;for(let t=0,s=n.length;t<s;++t)n[i]=n[t],h.$O(e,n[t])||i++;if(1<=i)return!0}}return!1}Qes(t,s=2,i=3){return!!this.Ues(t,s,i)}Ues(t,s=2,i=3){const e=this.Pi,h=this.lO(),r=this.Pf.yD(),n=h.KM(),o=h.tv();if(0===t?h.D4(-this.ces*s,-this.fes*s):h.D4(this.ces*s,this.fes*s),h.R4(),!r.QO(e))return h.A4(n,o),h.R4(),null;h.D4(-this.les*i,-this.ues*i),h.R4();const a=r.QO(e);return h.A4(n,o),h.R4(),a}ths(){const t=this.lO(),s=t.KM(),i=t.tv(),e=(t.D4(this.les,this.ues),t.R4(),this.Pf.yD().IFt(this.Pi,!1));t.A4(s,i),t.R4(),e&&(this.nes=this.Pf.mk(),this.Kis=null)}shs(t){this.zis=!t}ihs(){return Math.hypot(this.oes,this.aes)}ehs(){return Math.atan2(this.aes,this.oes)}hhs(){return this.aes<0}rhs(){return 0<this.aes}nhs(t){this.mes=Math.max(t,0)}ohs(){return this.mes}ahs(t){this.ges=Math.max(t,0)}lhs(){return this.ges}uhs(t){this.yes=Math.max(t,0)}chs(){return this.yes}fhs(t){this.Ses=Math.max(t,0)}dhs(){return this.Ses}phs(t){this.wes=Math.max(t,0)}mhs(){return this.wes}ghs(t){if(this.des!==t){this.aa=t,this._es();const s=this.Pf.yD(),i=this.lO();s.QO(this.Pi)&&(s.PFt(this.Pi,this.les,this.ues,10),i.D4(2*this.les,2*this.ues),i.R4()),this.Kis=null}}yhs(){return this.aa}Shs(t){t=C.Ar(t),this.pes!==t&&(this.pes=t,this._es(),this.Kis=null)}whs(){return this.pes}bhs(t){this.bes=!!t}Mhs(){return this.bes}vhs(t){this.Mes=t}Ths(){return this.Mes}xhs(t){this.xes=t}Ghs(){return this.xes}_hs(t){this.oes=t}$es(){return this.oes}Ihs(t){this.aes=t}Kes(){return this.aes}Chs(t){if(this.HSt)switch(t){case 0:this.Xis=!0;break;case 1:this.Yis=!0;break;case 2:this.$is=!0}}Phs(t){this.Tes!==(t=!!t)&&(this.Tes=t,this.Tes?this.Ges():(this.Ies(),this.u$t()))}Rhs(){return this.Tes}Ahs(t){this.qis=!!t}Ehs(){return this.qis}N2t(t){this.HSt!==(t=!!t)&&(this.HSt=t,this.HSt?this.b_t():(this.g_t(),this.Kis=null,this.Xis=!1,this.Yis=!1,this.$is=!1))}W2t(){return this.HSt}knt(t){switch(t){case 0:return this.ohs();case 1:return this.lhs();case 2:return this.chs();case 3:return this.dhs();case 4:return this.yhs();case 5:return this.mhs();case 6:return this.Mhs();case 7:return 1e3*this.Ths();case 8:return this.Rhs();case 9:return this.W2t()}}Vnt(t,s){switch(t){case 0:this.nhs(s);break;case 1:this.ahs(s);break;case 2:this.uhs(s);break;case 3:this.fhs(s);break;case 4:this.ghs(s);break;case 5:this.phs(s);break;case 6:this.bhs(!!s);break;case 7:this.vhs(s/1e3);break;case 8:this.Phs(!!s);break;case 9:this.N2t(!!s)}}wGt(){const t="behaviors.platform";return[{title:"$"+this.cW().Mf(),properties:[{name:t+".debugger.vector-x",value:this.$es(),gzt:t=>this._hs(t)},{name:t+".debugger.vector-y",value:this.Kes(),gzt:t=>this.Ihs(t)},{name:t+".properties.max-speed.name",value:this.ohs(),gzt:t=>this.nhs(t)},{name:t+".properties.acceleration.name",value:this.lhs(),gzt:t=>this.ahs(t)},{name:t+".properties.deceleration.name",value:this.chs(),gzt:t=>this.uhs(t)},{name:t+".properties.jump-strength.name",value:this.dhs(),gzt:t=>this.fhs(t)},{name:t+".properties.gravity.name",value:this.yhs(),gzt:t=>this.ghs(t)},{name:t+".debugger.gravity-angle",value:C.Fr(this.whs()),gzt:t=>this.Shs(C.Er(t))},{name:t+".properties.max-fall-speed.name",value:this.mhs(),gzt:t=>this.phs(t)},{name:t+".properties.double-jump.name",value:this.Mhs(),gzt:t=>this.bhs(t)},{name:t+".properties.jump-sustain.name",value:1e3*this.Ths(),gzt:t=>this.vhs(t/1e3)},{name:t+".debugger.animation-mode",value:[t+".debugger.anim-"+this.res]},{name:t+".properties.enabled.name",value:this.W2t(),gzt:t=>this.N2t(t)}]}]}Axt(){return self.Fhs}},new WeakMap),Cc=new Map([["left",0],["right",1],["jump",2]]);self.Fhs=class extends Ic{constructor(){super(),P.set(this,Ic.mB().sW())}Dhs(){P.get(this).ths()}khs(t){P.get(this).shs(!!t)}Ohs(t){_c.Re(t);const s=Cc.get(t);if("number"!=typeof s)throw new Error("invalid control");P.get(this).Chs(s)}get speed(){return P.get(this).ihs()}get Lhs(){return P.get(this).ohs()}set Lhs(t){_c._e(t),P.get(this).nhs(t)}get acceleration(){return P.get(this).lhs()}set acceleration(t){_c._e(t),P.get(this).ahs(t)}get Nhs(){return P.get(this).chs()}set Nhs(t){_c._e(t),P.get(this).uhs(t)}get Bhs(){return P.get(this).dhs()}set Bhs(t){_c._e(t),P.get(this).fhs(t)}get Whs(){return P.get(this).mhs()}set Whs(t){_c._e(t),P.get(this).phs(t)}get pXt(){return P.get(this).yhs()}set pXt(t){_c._e(t),P.get(this).ghs(t)}get Vhs(){return P.get(this).whs()}set Vhs(t){_c._e(t),P.get(this).Shs(t)}get jhs(){return P.get(this).Mhs()}set jhs(t){P.get(this).bhs(!!t)}get Hhs(){return P.get(this).Ths()}set Hhs(t){_c._e(t),P.get(this).vhs(t)}get Uhs(){const t=P.get(this).Ghs();return 0===t?"stop":"preserve-momentum"}set Uhs(t){_c.Re(t);const s=P.get(this);if("stop"===t)s.xhs(0);else{if("preserve-momentum"!==t)throw new Error("invalid mode");s.xhs(1)}}get zhs(){return P.get(this).Zes()}Jhs(t){_c.Re(t);const s=P.get(this);if("left"===t)return s.Qes(0);if("right"===t)return s.Qes(1);throw new Error("invalid side")}get qhs(){return P.get(this).Yes()}get Xhs(){return P.get(this).hhs()}get Yhs(){return P.get(this).rhs()}get $hs(){return P.get(this).$es()}set $hs(t){_c._e(t),P.get(this)._hs(t)}get Khs(){return P.get(this).Kes()}set Khs(t){_c._e(t),P.get(this).Ihs(t)}Zhs(t,s){_c._e(t),_c._e(s);const i=P.get(this);i._hs(t),i.Ihs(s)}Qhs(){const t=P.get(this);return[t.$es(),t.Kes()]}get trs(){return P.get(this).Rhs()}set trs(t){P.get(this).Phs(!!t)}get srs(){return P.get(this).Ehs()}set srs(t){P.get(this).Ahs(!!t)}get isEnabled(){return P.get(this).W2t()}set isEnabled(t){P.get(this).N2t(!!t)}}}{const Pc=self.Vs;Pc.qlt.mi.JY={irs(){return this.Yes()},ers(t,s){return Pc.compare(this.ihs(),t,s)},hrs(){return this.Zes()},rrs(t){return this.Qes(t)},nrs(){return this.hhs()},ors(){return this.rhs()},ars(){return this.Mhs()},Hes(){return!0},zes(){return!0},qes(){return!0},Xes(){return!0},Jes(){return!0},wc(){return this.W2t()}}}{const Rc=self.Vs;Rc.qlt.mi.Krt={lrs(t){this.nhs(t)},rqt(t){this.ahs(t)},urs(t){this.uhs(t)},crs(t){this.fhs(t)},frs(t){this.phs(t)},SetGravity(t){this.ghs(t)},drs(t){this.Chs(t)},prs(t){this.Ahs(!!t)},mrs(t){this._hs(t)},grs(t){this.Ihs(t)},yrs(t){this.Shs(Rc.Er(t))},LTt(t){this.N2t(0!==t)},Srs(){this.ths()},wrs(t){this.bhs(0!==t)},brs(t){this.vhs(t/1e3)},Mrs(t){this.xhs(t)},vrs(t){this.Phs(t)},Trs(t){this.shs(t)}}}{const Ac=self.Vs;Ac.qlt.mi.Zrt={xrs(){return this.ihs()},Grs(){return this.ohs()},_rs(){return this.lhs()},Irs(){return this.chs()},Crs(){return this.dhs()},zXt(){return this.yhs()},Prs(){return Ac.Fr(this.whs())},Rrs(){return this.mhs()},Ars(){return Ac.Fr(this.ehs())},Ers(){return this.$es()},Frs(){return this.Kes()},Drs(){return 1e3*this.Ths()}}}{const Ec=self.Vs;Ec.qlt.krs=class extends Ec.o_t{constructor(t){super(t),this.Ors=0,this.Lrs=0,this.Nrs=0,this.Brs=0}Gr(){super.Gr()}Wrs(t){this.Ors=t}Vrs(){return this.Ors}jrs(t){this.Lrs=t}Hrs(){return this.Lrs}Urs(t){this.Nrs=t}zrs(){return this.Nrs}Jrs(t){this.Brs=t}qrs(){return this.Brs}}}{const Fc=self.Vs;Fc.qlt.krs.xCt=class extends Fc.f_t{constructor(t){super(t)}Gr(){super.Gr()}Rxt(){}}}{const Dc=self.Vs;Dc.qlt.krs.Instance=class extends Dc.p_t{constructor(t,s){super(t),this.HSt=!0,s&&(this.HSt=s[0]),this.HSt&&this.yGt()}Gr(){super.Gr()}dv(){const t=this.aW();return{e:this.HSt,smg:t.Vrs(),ss:t.Hrs(),se:t.zrs(),smd:t.qrs()}}pv(t){const s=this.aW();s.Wrs(t.smg),s.jrs(t.ss),s.Urs(t.se),s.Jrs(t.smd),this.HSt=t.e,this.HSt?this.yGt():this.tGt()}N2t(t){this.HSt=!!t,this.HSt?this.yGt():this.tGt()}wc(){return this.HSt}pGt(){if(this.wc()){this.Pf.fk(this.Pi);let s=this.aW(),t=s.w5(),i=0,e=0,h=0;for(const l of t){const u=l.IRt(Dc.qlt.krs);if(u&&u.sW().wc()){const c=l.lO();i+=c.KM(),e+=c.tv(),++h}}let r=this.Pi.lO().zk(),n=this.Pf.mk(),o=0,a=0;if(n>=s.Hrs()&&n<s.zrs()){let t=s.Vrs()*Math.min(this.Pf.Sk(),1);0===s.qrs()&&(t*=1-(n-s.Hrs())/(s.zrs()-s.Hrs()));const f=this.Pf.Wk()*Math.PI*2,d=this.Pf.Wk()*t;o=Math.cos(f)*d,a=Math.sin(f)*d}r.B5(i/h+o),r.V5(e/h+a)}}knt(t){if(0===t)return this.HSt}Vnt(t,s){0===t&&(this.HSt=!!s,this.HSt?this.yGt():this.tGt())}wGt(){return[{title:"$"+this.cW().Mf(),properties:[{name:"behaviors.scrollto.properties.enabled.name",value:this.wc(),gzt:t=>this.N2t(t)}]}]}}}{const kc=self.Vs;kc.qlt.krs.JY={wc(){return this.wc()}}}{const Oc=self.Vs;Oc.qlt.krs.Krt={Xrs(t,s,i){const e=this.aW();e.Wrs(t),e.jrs(this.Pf.mk()),e.Urs(this.Pf.mk()+s),e.Jrs(i)},LTt(t){this.N2t(0!==t)}}}{const Lc=self.Vs;Lc.qlt.krs.Zrt={}}{const Nc=self.Vs;Nc.qlt.Yrs=class extends Nc.o_t{constructor(t){super(t)}Gr(){super.Gr()}}}{const Bc=self.Vs;Bc.qlt.Yrs.xCt=class extends Bc.f_t{constructor(t){super(t)}Gr(){super.Gr()}Rxt(){}}}{const Wc=self.Vs;Wc.qlt.Yrs.Instance=class extends Wc.p_t{constructor(t,s){super(t),this.$rs=null,this.Krs=-1,this.ZUt="",this.Zrs=new Set,this.Qrs=0,this.tns=0,this.sns=0,this.oes=0,this.aes=0,this.ins=0,this.ens=0,this.hns=0,this.rns=0,this.nns=0,this.ons=!1,s&&(this.ons=s[0]);const i=this.Pf.a0();this.W0=new Wc.L0(Wc.A0.O0(i,"instancedestroy",t=>this.WQt(t.fW)),Wc.A0.O0(i,"afterload",t=>this.bK()))}Gr(){this.$rs=null,super.Gr()}ans(t){t?(this.$rs=t,this.yGt()):(this.$rs=null,this.tGt())}lns(t,s,i){if(t){const e=t.t2t(this.Pi);if(e){this.ZUt=s,this.ans(e);const h=this.Pi.lO(),r=e.lO();if("properties"===this.ZUt){const n=this.Zrs;n.clear();for(const o of i)n.add(o);this.oes=h.KM()-r.KM(),this.aes=h.tv()-r.tv(),this.hns=h.GetAngle()-r.GetAngle(),this.nns=h.GetAngle(),this.rns=h.hv()-r.hv(),n.has("x")&&n.has("y")&&(this.tns=Wc.Nr(r.KM(),r.tv(),h.KM(),h.tv())-r.GetAngle(),this.Qrs=Wc.Or(r.KM(),r.tv(),h.KM(),h.tv())),n.has("width-abs")?this.ins=h.Wm()-r.Wm():n.has("width-scale")&&(this.ins=h.Wm()/r.Wm()),n.has("height-abs")?this.ens=h.$m()-r.$m():n.has("height-scale")&&(this.ens=h.$m()/r.$m())}else this.Qrs=Wc.Or(r.KM(),r.tv(),h.KM(),h.tv())}}}dv(){const t=this.Zrs,s=this.ZUt,i={uid:this.$rs&&!this.$rs.kj()?this.$rs.GB():-1,m:s,d:this.ons};return"rope"===s||"bar"===s?i.pd=this.Qrs:"properties"===s&&(i.ps=[...this.Zrs],t.has("imagepoint")?i.ip=this.sns:t.has("x")&&t.has("y")?(i.pa=this.tns,i.pd=this.Qrs):(t.has("x")&&(i.dx=this.oes),t.has("y")&&(i.dy=this.aes)),t.has("angle")&&(i.da=this.hns,i.lka=this.nns),(t.has("width-abs")||t.has("width-scale"))&&(i.dw=this.ins),(t.has("height-abs")||t.has("height-scale"))&&(i.dh=this.ens),t.has("z"))&&(i.dz=this.rns),i}pv(t){const s=t.m,i=this.Zrs;if(i.clear(),this.Krs=t.uid,"number"==typeof s)this.uns(t);else if(this.ZUt=s,t.hasOwnProperty("d")&&(this.ons=!!t.d),"rope"===s||"bar"===s)this.Qrs=t.pd;else if("properties"===s){for(const e of t.ps)i.add(e);i.has("imagepoint")?this.sns=t.ip:i.has("x")&&i.has("y")?(this.tns=t.pa,this.Qrs=t.pd):(i.has("x")&&(this.oes=t.dx),i.has("y")&&(this.aes=t.dy)),i.has("angle")&&(this.hns=t.da,this.nns=t.lka||0),(i.has("width-abs")||i.has("width-scale"))&&(this.ins=t.dw),(i.has("height-abs")||i.has("height-scale"))&&(this.ens=t.dh),i.has("z")&&(this.rns=t.dz)}}uns(t){const s=this.Zrs,i=t.msa,e=t.tsa,h=t.pa,r=t.pd,n=t.m;switch(n){case 0:this.ZUt="properties",s.add("x").add("y").add("angle"),this.tns=h,this.Qrs=r,this.hns=i-e,this.nns=t.lka;break;case 1:this.ZUt="properties",s.add("x").add("y"),this.tns=h,this.Qrs=r;break;case 2:this.ZUt="properties",s.add("angle"),this.hns=i-e,this.nns=t.lka;break;case 3:this.ZUt="rope",this.Qrs=t.pd;break;case 4:this.ZUt="bar",this.Qrs=t.pd}}bK(){-1===this.Krs?this.ans(null):(this.ans(this.Pf.hO(this.Krs)),this.Krs=-1)}WQt(t){this.$rs===t&&(this.ans(null),this.ons)&&this.Pf.SB(this.Pi)}pGt(){const r=this.$rs;if(r&&!r.kj()){let i=r.lO(),t=this.Pi,e=t.lO(),s=this.ZUt,h=!1;if("rope"===s||"bar"===s){const n=Wc.Or(e.KM(),e.tv(),i.KM(),i.tv());if(n>this.Qrs||"bar"===s&&n<this.Qrs){const o=Wc.Nr(i.KM(),i.tv(),e.KM(),e.tv());e.A4(i.KM()+Math.cos(o)*this.Qrs,i.tv()+Math.sin(o)*this.Qrs),h=!0}}else{let t=this.Zrs,s=0;if(t.has("imagepoint")){const[a,l]=r.Tvt(this.sns);e.Mvt(a,l)||(e.A4(a,l),h=!0)}else if(t.has("x")&&t.has("y")){const u=i.KM()+Math.cos(i.GetAngle()+this.tns)*this.Qrs,c=i.tv()+Math.sin(i.GetAngle()+this.tns)*this.Qrs;e.Mvt(u,c)||(e.A4(u,c),h=!0)}else s=i.KM()+this.oes,t.has("x")&&s!==e.KM()&&(e.ZM(s),h=!0),s=i.tv()+this.aes,t.has("y")&&s!==e.tv()&&(e.sv(s),h=!0);t.has("angle")&&(this.nns!==e.GetAngle()&&(this.hns=Wc.Ar(this.hns+(e.GetAngle()-this.nns))),(s=Wc.Ar(i.GetAngle()+this.hns))!==e.GetAngle()&&(e.N5(s),h=!0),this.nns=e.GetAngle()),t.has("width-abs")&&(s=i.Wm()+this.ins)!==e.Wm()&&(e.qm(s),h=!0),t.has("width-scale")&&(s=i.Wm()*this.ins)!==e.Wm()&&(e.qm(s),h=!0),t.has("height-abs")&&(s=i.$m()+this.ens)!==e.$m()&&(e.Vm(s),h=!0),t.has("height-scale")&&(s=i.$m()*this.ens)!==e.$m()&&(e.Vm(s),h=!0),t.has("z")&&(s=i.hv()+this.rns)!==e.hv()&&(e.rv(s),this.Pf.gO())}h&&e.R4()}}wGt(){const t="behaviors.pin.debugger";return[{title:"$"+this.cW().Mf(),properties:[{name:t+".is-pinned",value:!!this.$rs},{name:t+".pinned-uid",value:this.$rs?this.$rs.GB():0}]}]}}}{const Vc=self.Vs;Vc.qlt.Yrs.JY={cns(){return!!this.$rs},fns(){return this.ons}}}{const jc=self.Vs;jc.qlt.Yrs.Krt={dns(t,s){this.lns(t,0===s?"rope":"bar")},pns(t,s,i,e,h,r,n){const o=[];s&&o.push("x"),i&&o.push("y"),e&&o.push("angle"),n&&o.push("z"),1===h?o.push("width-abs"):2===h&&o.push("width-scale"),1===r?o.push("height-abs"):2===r&&o.push("height-scale"),0!==o.length&&this.lns(t,"properties",o)},mns(t,s,i,e,h,r){const n=["imagepoint"];i&&n.push("angle"),r&&n.push("z"),1===e?n.push("width-abs"):2===e&&n.push("width-scale"),1===h?n.push("height-abs"):2===h&&n.push("height-scale"),this.sns=s,this.lns(t,"properties",n)},gns(t){"rope"!==this.ZUt&&"bar"!==this.ZUt||(this.Qrs=Math.max(t,0))},yns(t){this.ons=t},Sns(){this.ans(null),this.ZUt="",this.Zrs.clear(),this.sns=""},Yrs(t,s){switch(s){case 0:this.lns(t,"properties",["x","y","angle"]);break;case 1:this.lns(t,"properties",["x","y"]);break;case 2:this.lns(t,"properties",["angle"]);break;case 3:this.lns(t,"rope");break;case 4:this.lns(t,"bar")}}}}{const Hc=self.Vs;Hc.qlt.Yrs.Zrt={wns(){return this.$rs?this.$rs.GB():-1}}}{const Uc=self.Vs;Uc.qlt.D_t=class extends Uc.o_t{constructor(t){super(t)}Gr(){super.Gr()}}}{const zc=self.Vs;zc.qlt.D_t.xCt=class extends zc.f_t{constructor(t){super(t)}Gr(){super.Gr()}Rxt(){}}}{const Jc=self.Vs,qc=self.nW,Xc=(Jc.qlt.D_t.Instance=class extends Jc.p_t{constructor(t,s){super(t),this.LTt(!0),s&&this.LTt(s[0])}Gr(){super.Gr()}LTt(t){this.Pi.aRt(!!t)}wc(){return this.Pi.oRt()}dv(){return{e:this.wc()}}pv(t){this.LTt(t.e)}knt(t){if(0===t)return this.wc()}Vnt(t,s){0===t&&this.LTt(s)}wGt(){return[{title:"$"+this.cW().Mf(),properties:[{name:"behaviors.jumpthru.properties.enabled.name",value:this.wc(),gzt:t=>this.LTt(t)}]}]}Axt(){return self.bns}},new WeakMap);self.bns=class extends qc{constructor(){super(),Xc.set(this,qc.mB().sW())}set isEnabled(t){Xc.get(this).LTt(!!t)}get isEnabled(){return Xc.get(this).wc()}}}{const Yc=self.Vs;Yc.qlt.D_t.JY={wc(){return this.wc()}}}{const $c=self.Vs;$c.qlt.D_t.Krt={LTt(t){this.LTt(t)}}}{const Kc=self.Vs;Kc.qlt.D_t.Zrt={}}{const Zc=self.Vs;Zc.qlt.Mns=class extends Zc.o_t{constructor(t){super(t)}Gr(){super.Gr()}}}{const Qc=self.Vs;Qc.qlt.Mns.xCt=class extends Qc.f_t{constructor(t){super(t)}Gr(){super.Gr()}Rxt(){}}}{const tf=self.Vs,sf=self.Zs,ef=self.nW,hf=2*Math.PI,rf=Math.PI/2,nf=3*Math.PI/2,of=[0,1,8,3,4,2,5,6,9,7],af=(tf.qlt.Mns.Instance=class extends tf.p_t{constructor(t,s){super(t),this.vns=0,this.Tns=0,this.xns=0,this.Gns=0,this._ns=0,this.HSt=!0,this.Ins=0,this.Cns=0,this.Pns=0,this.Rns=0,this.Ans=0,this.Ens=0,this.pwt=0,this.Fns=0,this.Dns=0,this.kns=0,this.Ons=0,s&&(this.Tns=of[s[0]],this.xns=s[1],this.Rns=this.Pf.Wk()*s[3],this.Ins=s[2],this.Gns=s[2],this.Gns+=this.Rns,this.Cns=s[4],0!==this.Gns&&(this.Ans=this.Pf.Wk()*s[5],this.vns=s[4]/this.Gns*hf,this.vns+=this.Ans/this.Gns*hf),this.Ens=this.Pf.Wk()*s[7],this.Pns=s[6],this._ns=s[6],this._ns+=this.Ens,this.HSt=!!s[8]),5===this.Tns&&(this._ns=tf.Er(this._ns)),this.JPt(),this.HSt&&this.mGt()}Gr(){super.Gr()}dv(){return{i:this.vns,e:this.HSt,mv:this.Tns,w:this.xns,p:this.Gns,mag:this._ns,iv:this.pwt,iv2:this.Fns,r:this.Ons,lkv:this.Dns,lkv2:this.kns}}pv(t){this.vns=t.i,this.N2t(t.e),this.Tns=t.mv,this.xns=t.w,this.Gns=t.p,this._ns=t.mag,this.pwt=t.iv,this.Fns=t.iv2,this.Ons=t.r,this.Dns=t.lkv,this.kns=t.lkv2}JPt(){const t=this.Pi.lO();switch(this.Tns){case 0:this.pwt=t.KM();break;case 1:this.pwt=t.tv();break;case 2:this.pwt=t.Wm(),this.Ons=t.$m()/t.Wm();break;case 3:this.pwt=t.Wm();break;case 4:this.pwt=t.$m();break;case 5:this.pwt=t.GetAngle();break;case 6:this.pwt=t.mA();break;case 7:this.pwt=0;break;case 8:this.pwt=t.KM(),this.Fns=t.tv();break;case 9:this.pwt=t.hv()}this.Dns=this.pwt,this.kns=this.Fns}Lns(t){switch(t%=hf,this.xns){case 0:return Math.sin(t);case 1:return t<=rf?t/rf:t<=nf?1-2*(t-rf)/Math.PI:(t-nf)/rf-1;case 2:return 2*t/hf-1;case 3:return-2*t/hf+1;case 4:return t<Math.PI?-1:1}return 0}yZ(){const t=this.Pf.fk(this.Pi);this.HSt&&0!==t&&(0===this.Gns?this.vns=0:this.vns=(this.vns+t/this.Gns*hf)%hf,this.Nns())}Nns(){const t=this.Pi.lO();switch(this.Tns){case 0:t.KM()!==this.Dns&&(this.pwt+=t.KM()-this.Dns),t.ZM(this.pwt+this.Lns(this.vns)*this._ns),this.Dns=t.KM();break;case 1:t.tv()!==this.Dns&&(this.pwt+=t.tv()-this.Dns),t.sv(this.pwt+this.Lns(this.vns)*this._ns),this.Dns=t.tv();break;case 2:t.qm(this.pwt+this.Lns(this.vns)*this._ns),t.Vm(t.Wm()*this.Ons);break;case 3:t.qm(this.pwt+this.Lns(this.vns)*this._ns);break;case 4:t.Vm(this.pwt+this.Lns(this.vns)*this._ns);break;case 5:t.GetAngle()!==this.Dns&&(this.pwt=tf.Ar(this.pwt+(t.GetAngle()-this.Dns))),t.N5(this.pwt+this.Lns(this.vns)*this._ns),this.Dns=t.GetAngle();break;case 6:t.yA(this.pwt+this.Lns(this.vns)*this._ns/100);break;case 8:t.KM()!==this.Dns&&(this.pwt+=t.KM()-this.Dns),t.tv()!==this.kns&&(this.Fns+=t.tv()-this.kns),t.ZM(this.pwt+Math.cos(t.GetAngle())*this.Lns(this.vns)*this._ns),t.sv(this.Fns+Math.sin(t.GetAngle())*this.Lns(this.vns)*this._ns),this.Dns=t.KM(),this.kns=t.tv();break;case 9:t.rv(this.pwt+this.Lns(this.vns)*this._ns)}t.R4()}Bns(t,s){}Wns(t){this.Gns=t}Vns(){return this.Gns}jns(t){this._ns=t}Hns(t){5===this.Tns&&(t=tf.Er(t)),this.jns(t)}Uns(){return this._ns}zns(){let t=this.Uns();return 5===this.Tns?tf.Fr(t):t}Jns(t){5===this.Tns&&5!==t&&(this._ns=tf.Fr(this._ns)),this.Tns=t,this.JPt()}qns(){return this.Tns}Xns(t){this.xns=t}Yns(){return this.xns}$ns(t){this.vns=tf.Rr(t,0,2*Math.PI),this.Nns()}Kns(){return this.vns}N2t(t){this.HSt=!!t,this.HSt?this.mGt():this.Qxt()}W2t(){return this.HSt}knt(t){switch(t){case 0:return this.Tns;case 1:return this.xns;case 2:return this.Ins;case 6:return this.Pns;case 8:return this.HSt}}Vnt(t,s){switch(t){case 0:this.Tns=of[s],this.JPt();break;case 1:this.xns=s;break;case 2:this.Ins=s,this.Gns=this.Ins+this.Rns,this.HSt||(0!==this.Gns?(this.vns=this.Cns/this.Gns*hf,this.vns+=this.Ans/this.Gns*hf):this.vns=0);break;case 6:this.Pns=s,this._ns=this.Pns+this.Ens,5===this.Tns&&(this._ns=tf.Er(this._ns));break;case 8:this.HSt=!!s}}wGt(){const t="behaviors.sin";return[{title:"$"+this.cW().Mf(),properties:[{name:t+".properties.enabled.name",value:this.W2t(),gzt:t=>this.N2t(t)},{name:t+".properties.period.name",value:this.Vns(),gzt:t=>this.Wns(t)},{name:t+".properties.magnitude.name",value:this.zns(),gzt:t=>this.Hns(t)},{name:t+".debugger.value",value:this.Lns(this.Kns())*this.zns()}]}]}Axt(){return self.Zns}},new WeakMap),lf=["horizontal","vertical","size","width","height","angle","opacity","value-only","forwards-backwards","z-elevation"],uf=["sine","triangle","sawtooth","reverse-sawtooth","square"];self.Zns=class extends ef{constructor(){super(),af.set(this,ef.mB().sW())}set Qns(t){sf._e(t),af.get(this).Wns(t)}get Qns(){return af.get(this).Vns()}set tos(t){sf._e(t),af.get(this).jns(t)}get tos(){return af.get(this).Uns()}set ios(t){af.get(this).$ns(t)}get ios(){return af.get(this).Kns()}set eos(t){sf.Re(t);const s=lf.indexOf(t);if(-1===s)throw new Error("invalid movement");af.get(this).Jns(s)}get eos(){return lf[af.get(this).qns()]}set hos(t){sf.Re(t);const s=uf.indexOf(t);if(-1===s)throw new Error("invalid wave");af.get(this).Xns(s)}get hos(){return uf[af.get(this).Yns()]}get value(){const t=af.get(this);return t.Lns(t.Kns())*t.Uns()}ros(){af.get(this).JPt()}set isEnabled(t){af.get(this).N2t(!!t)}get isEnabled(){return af.get(this).W2t()}}}{const cf=self.Vs;cf.qlt.Mns.JY={wc(){return this.W2t()},nos(t){return this.qns()===t},oos(t,s){return cf.compare(this.Vns(),t,s)},aos(t,s){return cf.compare(this.zns(),t,s)},los(t){return this.Yns()===t}}}{const ff=self.Vs;ff.qlt.Mns.Krt={LTt(t){this.N2t(0!==t)},uos(t){this.Wns(t)},fos(t){this.Hns(t)},dos(t){this.Jns(t)},mos(t){this.xns=t},gos(t){const s=2*Math.PI;this.$ns(t*s%s)},yos(){this.JPt()}}}{const df=self.Vs;df.qlt.Mns.Zrt={Sos(){return this.Kns()/(2*Math.PI)},wos(){return this.Vns()},Mos(){return this.zns()},his(){return this.Lns(this.Kns())*this.zns()}}}{const pf=self.Vs;pf.qlt.Jlt=class extends pf.o_t{constructor(t){super(t)}Gr(){super.Gr()}}}{const mf=self.Vs;mf.qlt.Jlt.xCt=class extends mf.f_t{constructor(t){super(t)}Gr(){super.Gr()}Rxt(){}}}{const gf=self.Vs,yf=gf.qlt.Jlt;yf.Instance=class extends gf.p_t{constructor(t,s){super(t),this.vos=!1,this.tc=!0,s&&(this.vos=!1,this.tc=!!s[0]),this.Tos=new Map,this.xos=[],this.Gos=new Map,this._os=null,this.Ios=null,this.Cos=null,this.Pos=null,this.Ros="",this.Aos=[],this.wK=t=>this.bK(),this.PO().a0().addEventListener("afterload",this.wK)}Gr(){this.PO().a0().removeEventListener("afterload",this.wK),this.wK=null,this._os&&(this.Eos(this._os),this._os=null),this.Fos(),this.Dos=null,this.kos(),this.xos=null,this.Oos(),this.Gos=null,this.Aos=null,super.Gr()}Zlt(t){this.Aos.push(t)}Qlt(){this.Aos.pop()}Los(){return this.Aos[this.Aos.length-1]}LTt(t){this.tc=!!t,t?this.Gos&&this.Gos.size&&this.yGt():this.tGt();for(const s of this.Nos())t?this.Bos(s)&&s.aV():((s.IsPlaying()||s.Gst())&&this.Wos(s),s.oV());t&&this.kos()}wc(){return this.tc}Wos(t){this.xos.push(t)}Bos(t){return this.xos.includes(t)}kos(){gf.Kn(this.xos)}Vos(){return this._os}Uit(){const t=this.dW();return!!t&&!t.kj()}jos(t,s,i=!1){const e=s?this.Hos(s,i):this.Nos(i);if(e&&e.length)for(const h of e)if(h.lV(t))return h}Uos(t,s){for(const i of this.Tos.values())for(const e of i)if(!e.rV()&&e.lV(t)&&s(e))return!0;for(const h of this.Gos.values())for(const r of h)if(!r.rV()&&r.lV(t)&&s(r))return!0;return!1}zos(t){for(const s of this.Tos.values())for(const i of s)if(!i.rV()&&t(i))return!0;for(const e of this.Gos.values())for(const h of e)if(!h.rV()&&t(h))return!0;return!1}Jos(t,s){return this.jos(t,s,!0)}*qos(t,s,i=!1){const e=s?this.Hos(s,i):this.Nos(i);if(e&&e.length)for(const h of e)h.lV(t)&&(yield h)}*Xos(t,s){yield*this.qos(t,s,!0)}Hos(i,t){if(t){let t=this.Tos.get(i),s=this.Gos.get(i);return(t=t||[]).concat(s||[]).filter(t=>t).filter(t=>!t.rV())}{let t=this.Tos.get(i);return(t=t||[]).filter(t=>t).filter(t=>!t.rV())}}Nos(t){if(t){const s=[...this.Tos.values()].flat(),i=[...this.Gos.values()].flat();return s.concat(i).filter(t=>t).filter(t=>!t.rV())}{const e=[...this.Tos.values()].flat();return e.filter(t=>t).filter(t=>!t.rV())}}Yos(){return this.Nos(!0)}dv(t=0){return{s:!1,e:!!this.tc,at:this.$os(),dt:this.Kos(),wt:this.Zos(),ft:this.Qos()}}pv(t,s="full"){t&&(this.Ios=t.at,this.Cos=t.dt,this.Pos=t.wt,this.Ros=t.ft,this.vos=!1,this.tc=!!t.e,"state"===s)&&this.bK()}bK(){const t=this.PO().Utt();if(this.tas(this.Ios,this.Tos,t),this.Cos){gf.Kn(this.xos);for(const s of this.Cos)this.sas(this.xos,s,t)}this.tas(this.Pos,this.Gos,t),this._os=this.ias(this.Ros,t),this.tc?this.Gos&&this.Gos.size&&this.yGt():this.tGt()}tas(s,i,e){if(s)for(const h in s){let t=i.get(h);t?gf.Kn(t):t=[];const r=s[h];for(const n of r){const o=this.sas(t,n.name,e);if(o)this.eas(n.name,n,e);else{const a=gf.Aot.iut({runtime:this.PO(),json:n});gf.Aot.let(a,this.dW().GB()),a.Flt(t=>this.ras(t)),e.ZK(a),this.sas(t,a,e)}}i.set(h,t)}}ias(t,s){return s.YK(t)}sas(t,s,i){if("string"!=typeof s)return!!t.push(s);{const e=this.ias(s,i);if(e)return!!t.push(e)}return!1}eas(t,s,i){if("string"==typeof t){const e=this.ias(t,i);e&&(e.eX(s),gf.Aot.let(e,this.dW().GB()))}else t.eX(s),gf.Aot.let(t,this.dW().GB())}$os(){const t={};for(const[s,i]of this.Tos)t[s]=i.filter(t=>!t.rV()).map(t=>t.iX());return t}Kos(){return this.xos.filter(t=>!t.rV()).map(t=>t.Mf())}Zos(){const t={};for(const[s,i]of this.Gos)t[s]=i.map(t=>t.iX());return t}Qos(){return this._os?this._os.Mf():""}pGt(){this.Oos()}nas(t){const s=yf.aas.oas(t.property,t.out,t.aut,t.ease,t.resultMode,this.dW()),i=yf.uas.las(t.property),e=(yf.uas.fas(i)||this.das(t.property),gf.Aot.iut({runtime:this.PO(),id:i,tags:t.tags,time:t.time,fW:this.dW(),hut:!!t.hut,loop:!!t.loop,pingPong:!!t.pingPong,repeatCount:t.repeatCount,initialValueMode:t.initialValueMode,eut:s}));return e.Flt(t=>this.ras(t)),this.pas(e,t.property),e}mas(t){const s=t.DV();if(this.Tos.has(s)){const i=this.Tos.get(s);if(i){const e=i.indexOf(t);-1!==e&&i.splice(e,1)}}}IV(t,s=!1){this.mas(t),t.rV()||this.gas(t)||(t.oV(s),this.yas(t))}das(t,s=!1){if(gf.we(t)){const i=yf.uas.las(t);if(this.Tos.has(i)){const e=this.Tos.get(i),h=this.Vos();for(const r of e)r===h||r.rV()||this.gas(r)||(r.oV(s),r.Gr());gf.Kn(e)}}else{const n=this.Vos();for(const o of this.Nos())o===n||o.rV()||this.gas(o)||(o.oV(s),o.Gr());for(const a of this.Tos.keys())gf.Kn(this.Tos.get(a)),this.Tos.delete(a);this.Tos.clear()}}Eos(t){this.IV(t,!0)}Fos(){this.das(NaN,!0)}knt(t){if(0===t)return this.tc}Vnt(t,s){0===t&&(this.tc=!!s)}Sas(t){const s=t.RV(),i=s.Crt();for(const e of i){const h=e.cW();if(h.JCt()===this.constructor)return h}}QB(t,s,i,e){return this.Pf?super.QB(t):s.QB(t,i,e)}ras(t){this._os=t,yf.JY.was(t);let s,i;if(this.PO())s=this.Pi,i=this.Pf,this.QB(yf.JY.bas),this.QB(yf.JY.Mas),this.IV(t);else{if(!(s=t.RV()))return;if(s&&s.kj())return;i=s.PO();const e=this.Sas(t);this.QB(yf.JY.bas,i,s,e),this.QB(yf.JY.Mas,i,s,e),t.oV()}this._os=null,yf.JY.was(null),t.EV()&&i.SB(s)}pas(t,s){const i=yf.uas.las(s),e=(this.Tos.has(i)||this.Tos.set(i,[]),this.Tos.get(i));e.push(t)}yas(t){const s=t.DV();this.Gos.has(s)||this.Gos.set(s,[]),this.Gos.get(s).push(t),this.SGt()||this.yGt()}gas(t){const s=t.DV();return!!this.Gos.has(s)&&this.Gos.get(s).includes(t)}Oos(){if(this.Gos.size){for(const t of this.Gos.values()){for(const s of t)s.rV()||s.Gr();gf.Kn(t)}this.Gos.clear(),this.SGt()&&this.tGt()}}wGt(){return[{title:"$"+this.cW().Mf(),properties:[{name:"behaviors.tween.properties.enabled.name",value:this.wc(),gzt:t=>this.LTt(t)}]}]}Axt(){return self.vas}}}{let i=self.Vs,s=null;i.qlt.Jlt.JY={zlt(){return!0},Xlt(t){const s=this.Los();return!!s&&s.lV(t)},Ylt(t){const s=this.Los();return!!s&&(s.hst()===t||2===t)},$lt(t,s){const i=this.Los();return!!i&&(i.hst()===s||2===s)&&i.lV(t)},was(t){s=t},bas(t){return s.lV(t)},Mas(){return!0},IsPlaying(t){return this.Uos(t,i.Aot.IsPlaying)},cts(){return this.zos(i.Aot.IsPlaying)},vV(t){return this.Uos(t,i.Aot.vV)},Pss(){return this.zos(i.Aot.vV)},RW(t,s){return 0===s?this.Uos(t,i.Aot.tut):1===s&&this.Uos(t,i.Aot.sut)},Tas(t){return 0===t?this.zos(i.Aot.tut):1===t&&this.zos(i.Aot.sut)}}}{const Sf=self.Vs,wf=self.Oc,bf=Sf.qlt.Jlt;bf.Krt={LTt(t){this.LTt(!!t)},async xas(...t){if(this.wc()&&this.Uit()){const s=this.nas(bf._as.Gas(this,...t));s.Play()&&await s.bV()}},async Ias(...t){if(this.wc()&&this.Uit()){const s=this.nas(bf._as.Cas(this,...t));s.Play()&&await s.bV()}},async Pas(...t){if(this.wc()&&this.Uit()){const s=this.nas(bf._as.Ras(this,...t));s.Play()&&await s.bV()}},Aas(t){if(this.wc()&&this.Uit())for(const s of this.qos(t))s.oV()},Eas(){if(this.wc()&&this.Uit())for(const t of this.Nos())t.oV()},Fas(t){if(this.wc()&&this.Uit())for(const s of this.qos(t))s.aV()},Das(){if(this.wc()&&this.Uit())for(const t of this.Nos())t.aV()},kas(t){if(this.wc()&&this.Uit())for(const s of this.qos(t))this.IV(s)},Oas(){if(this.wc()&&this.Uit())for(const t of this.Nos())this.IV(t)},Las(t,s,i){if(this.wc()&&this.Uit()){const e=Sf.qlt.Jlt.uas.Nas(s);for(const h of this.qos(t))h.Nlt([e]),h.Blt(i,e)}},Bas(t,s,i,e){if(this.wc()&&this.Uit()){const h=Sf.qlt.Jlt.uas.Was(s);for(const r of this.qos(t))r.Nlt(h),r.Blt(i,h[0]),r.Blt(e,h[1])}},Vas(t,s){if(this.wc()&&this.Uit())for(const i of this.qos(t,"value"))i.Olt(s,"value")},jas(t,s){if(this.wc()&&this.Uit())for(const i of this.qos(t,"value"))i.Nlt(["value"]),i.Blt(s,"value")},Has(t,s){if(this.wc()&&this.Uit()){const i=wf.Qc(s);for(const e of this.qos(t))e.PV(i)}},Uas(t){if(this.wc()&&this.Uit()){const s=wf.Qc(t);for(const i of this.Nos())i.PV(s)}},zas(t,s){if(this.wc()&&this.Uit())for(const i of this.qos(t))i.uV(s)},Jas(t){if(this.wc()&&this.Uit())for(const s of this.Nos())s.uV(t)},qas(t,s){if(this.wc()&&this.Uit())for(const i of this.qos(t))i.yV(s)},Xas(t){if(this.wc()&&this.Uit())for(const s of this.Nos())s.yV(t)},Yas(t,s){if(this.wc()&&this.Uit())for(const i of this.qos(t))i.FV(!!s)},$as(t){if(this.wc()&&this.Uit())for(const s of this.Nos())s.FV(!!t)}}}{const Mf=self.Vs;Mf.qlt.Jlt.Zrt={Zss(t){const s=this.Jos(t);return s?s.UE():0},tis(t){const s=this.Jos(t);return s?s.UE()/s.fV():0},nnt(t){const s=this.Jos(t);return s?s.SV():0},his(t){const s=this.Jos(t,"value");return s?s.OV("value").kV():0},z2t(){let t=this.Vos();return(t=t||this.Los())?t.ast():""}}}{const vf=self.Vs,Tf=self.Oc,xf=["position","size","scale"],Gf=["offsetX","offsetY","offsetWidth","offsetHeight","offsetAngle","offsetOpacity","offsetColor","offsetZElevation","offsetScaleX","offsetScaleY"],_f=["value"],If=[].concat(xf).concat(Gf).concat(_f),Cf={position:["offsetX","offsetY"],size:["offsetWidth","offsetHeight"],scale:["offsetScaleX","offsetScaleY"]},Pf=Object.assign({},If.reduce((t,s)=>Object.assign({},t,{[s]:[s]}),{}),Cf);vf.qlt.Jlt.uas=class{constructor(){}static Kas(){return[...Tf.Hc()]}static Qc(t){return[...Tf.Hc()][t]}static las(t){return If[t]}static Zas(t){return If.indexOf(t)}static Qas(t){return xf[t]}static Nas(t){return Gf[t]}static tls(t){return _f[t]}static sls(t){return Cf[t]}static Was(t){return vf.Pe(t)?Pf[t]:Pf[If[t]]}static ils(t){return!!Cf[t]}static els(t){return"offsetColor"===t}static hls(t){return"offsetAngle"===t}static rls(t){return"offsetOpacity"===t}static fas(t){return"value"===t}}}{const Rf=self.Vs,Af=Rf.qlt.Jlt,Ef=new Map;Af.aas=class{constructor(){}static oas(t,s,i,e,h,r){0===Ef.size&&this.nls();let n=Af.als.ols(t),o=Ef.get(n);return Rf.we(t)&&(t=Af.uas.las(t)),this.lls(o,t,s,i,e,h,r)}static uls(t,s){const i=Rf.qlt.Jlt.oas(t);return i.cls(s)}static nls(){const t=Af.als,s=Af.fls;this.dls(t.pls,this.mls,s.gls),this.dls(t.COLOR,this.yls,s.Sls),this.dls(t.wls,this.bls,s.Mls),this.dls(t.vls,this.Tls,s.gls),this.dls(t.xls,this.Gls,s.gls)}static dls(t,s,i){Ef.set(t,this._ls(t,s,i))}static _ls(t,s,i){return{name:t,Ils:s,cls:i}}static lls(t,s,i,e,h,r,n){return t.Ils(s,t.cls(i),t.cls(e),h,r,n)}static mls(t,i,e,h,r,s){const n=Af.uas.sls(t);return n.map((t,s)=>({rut:"world-instance",property:t,type:"float",valueType:"numeric",out:i[s],aut:e[s],ease:Af.uas.Qc(h),resultMode:r}))}static yls(t,s,i,e,h,r){return Rf.XY.Text&&r.l5()instanceof Rf.XY.Text?{rut:"plugin",nut:[7],property:"color",type:"color",valueType:"color",out:s,aut:i,ease:Af.uas.Qc(e),resultMode:h}:{rut:"world-instance",property:t,type:"color",valueType:"color",out:s,aut:i,ease:Af.uas.Qc(e),resultMode:h}}static bls(t,s,i,e,h,r){return{rut:"world-instance",property:t,type:"angle",valueType:"angle",out:s,aut:i,ease:Af.uas.Qc(e),resultMode:h}}static Gls(t,s,i,e,h,r){return{rut:"world-instance",property:t,type:"float",valueType:"numeric",out:s,aut:i,ease:Af.uas.Qc(e),resultMode:h}}static Tls(t,s,i,e,h,r){return{rut:"value",property:t,type:"float",valueType:"numeric",out:s,aut:i,ease:Af.uas.Qc(e),resultMode:h}}}}{const Ff=self.Vs,Df=Ff.qlt.Jlt,kf={resultMode:"absolute"},Of=Object.assign({},kf,{tags:"",property:"",time:0,ease:0,hut:0,loop:!1,pingPong:!1,repeatCount:1}),Lf=Object.assign({},Of,{initialValueMode:"current-state",out:0,aut:0}),Nf=Object.assign({},Of,{initialValueMode:"current-state",out:[0,0],aut:[0,0]}),Bf=Object.assign({},Of,{initialValueMode:"current-state",out:[0,0,0],aut:[0,0,0]}),Wf=Object.assign({},Lf,{initialValueMode:"start-value"});Df._as=class{constructor(){}static Cls(t,s,i,e,h,r,n,o){t.tags=s,t.time=i,t.ease=e,t.hut=h,t.loop=r,t.pingPong=n,t.repeatCount=o}static Gas(t,s,i,e,h,r,n,o,a,l){const u="string"==typeof i?i:Df.uas.Nas(i),c=Df.uas.els(u)?Bf:Lf;return this.Cls(c,s,h,r,n,o,a,l),Df.uas.els(u)?(Bf.aut[0]=Ff.ln(e),Bf.aut[1]=Ff.un(e),Bf.aut[2]=Ff.cn(e),Bf.property=Df.uas.Zas(u)):Df.uas.rls(u)?Lf.aut=e/100:Lf.aut=e,c.property=Df.uas.Zas(u),c}static Cas(t,s,i,e,h,r,n,o,a,l,u){this.Cls(Nf,s,r,n,o,a,l,u);const c="string"==typeof i?i:Df.uas.Qas(i);return Nf.aut[0]=e,Nf.aut[1]=h,Nf.property=Df.uas.Zas(c),Nf}static Ras(t,s,i,e,h,r,n,o,a,l){return this.Cls(Wf,s,h,r,n,o,a,l),Wf.out=i,Wf.aut=e,Wf.property=Df.uas.Zas("value"),Wf}}}{const Vf=self.Vs,jf=Vf.qlt.Jlt,Hf=[];jf.als=class{constructor(){}static ols(t){if(0===Hf.length){const s=Hf;s.push({JP:jf.uas.ils,result:this.pls}),s.push({JP:jf.uas.els,result:this.COLOR}),s.push({JP:jf.uas.hls,result:this.wls}),s.push({JP:jf.uas.fas,result:this.vls}),s.push({JP:()=>!0,result:this.xls})}Vf.we(t)&&(t=Vf.qlt.Jlt.uas.las(t));for(const i of Hf)if(i.JP(t))return i.result}static get pls(){return"pair"}static get COLOR(){return"color"}static get wls(){return"angle"}static get vls(){return"value"}static get xls(){return"other"}}}{const Uf=self.Vs,zf=Uf.qlt.Jlt;zf.fls=class{constructor(){}static Mls(t){const s=Uf.Er(parseFloat(t));return Uf.Ar(s)}static Sls(t){return t.slice(0)}static gls(t){return t}}}{let l=function(t){qf.Re(t);let s=Yf.Bc(t),i;if(-1===(i=s?Yf.tf(s,null):Yf.tf(t,null)))throw new Error(`invalid ease name '${t}'`);return i},u=function(t,s=!1){if(!(s&&null==t||"string"==typeof t||Array.isArray(t)))throw new Error("invalid tags")};l,u;const Jf=self.Vs,qf=self.Zs,Xf=self.nW,Yf=self.Oc,$f=Jf.qlt.Jlt,Kf=new WeakMap,Zf=new Map([["x",{name:"offsetX",type:"one"}],["y",{name:"offsetY",type:"one"}],["width",{name:"offsetWidth",type:"one"}],["height",{name:"offsetHeight",type:"one"}],["angle",{name:"offsetAngle",type:"one"}],["opacity",{name:"offsetOpacity",type:"one"}],["color",{name:"offsetColor",type:"color"}],["z-elevation",{name:"offsetZElevation",type:"one"}],["x-scale",{name:"offsetScaleX",type:"one"}],["y-scale",{name:"offsetScaleY",type:"one"}],["position",{name:"position",type:"two"}],["size",{name:"size",type:"two"}],["scale",{name:"scale",type:"two"}],["value",{name:"value",type:"value"}]]),Qf={tags:"",Pls:!1,loop:!1,pingPong:!1,repeatCount:1,out:0},t0={_V:l};self.vas=class extends Xf{constructor(){super(),Kf.set(this,Xf.mB().sW())}Rls(t,s,i,e,h){const r=Kf.get(this);if(!r.wc()||!r.Uit())return null;const n=Zf.get(t);if(!n)throw new Error("invalid tween property");"one"===n.type||"value"===n.type?qf.Me(s):(qf.Je(s),"two"===n.type?(qf.Me(s[0]),qf.Me(s[1])):"color"===n.type&&(qf.Me(s[0]),qf.Me(s[1]),qf.Me(s[2]))),"angle"===t?s=Jf.Fr(s):"opacity"===t?s*=100:"color"===t&&(s=Jf.an(s[0],s[1],s[2]));const o=l(e);qf._e(i),h=Object.assign({},Qf,h),"value"===n.type&&qf.Me(h.out),u(h.tags,!0);let a;if("one"===n.type||"color"===n.type?a=r.nas($f._as.Gas(r,h.tags,n.name,s,i,o,!!h.Pls,!!h.loop,!!h.pingPong,h.repeatCount)):"two"===n.type?a=r.nas($f._as.Cas(r,h.tags,n.name,s[0],s[1],i,o,!!h.Pls,!!h.loop,!!h.pingPong,h.repeatCount)):"value"===n.type&&(a=r.nas($f._as.Ras(r,h.tags,h.out,s,i,o,!!h.Pls,!!h.loop,!!h.pingPong,h.repeatCount))),a.Play())return a.lut(r,t0);throw new Error("failed to start tween")}*Als(){const t=Kf.get(this);for(const s of t.Nos())yield s.lut(t,t0)}*Els(t){u(t);const s=Kf.get(this);for(const i of s.qos(t))yield i.lut(s,t0)}get isEnabled(){return Kf.get(this).wc()}set isEnabled(t){Kf.get(this).LTt(t)}}}{const s0=self.Vs;s0.qlt.GPt=class extends s0.o_t{constructor(t){super(t)}Gr(){super.Gr()}}}{const i0=self.Vs;i0.qlt.GPt.xCt=class extends i0.f_t{constructor(t){super(t)}Gr(){super.Gr()}Rxt(){}}}{const e0=self.Vs;e0.qlt.GPt.Instance=class extends e0.p_t{constructor(t,s){super(t)}Gr(){super.Gr()}}}{const h0=self.Vs;h0.qlt.GPt.JY={}}{const r0=self.Vs;r0.qlt.GPt.Krt={}}{const n0=self.Vs;n0.qlt.GPt.Zrt={}}{let h=function(i,e,t){const h=i.yMt(),r=e.yMt();if(t){const s=h.get(p),n=(s&&s.delete(e.NJ()),r.get(p));n&&n.delete(i.NJ())}else{let t=h.get(p),s=(t||(t=new Set,h.set(p,t)),r.get(p));s||(s=new Set,r.set(p,s)),t.add(e.NJ()),s.add(i.NJ())}},f=(h,self.Vs),s=self.Zs,i=null,e=null,r=[],d=null,n=null,p="Physics_DisabledCollisions";f.qlt.Fls=class extends f.o_t{constructor(t){super(t),(n=this).Dls=null,this.kls=10,this.Ols=.02,this.Lls=null,this.Nls=-1,this.Bls=1,this.Wls=8,this.Vls=3,this.jls=!0,this.Pf.vO(this.Hls())}Axt(){return self.Uls}async Hls(){const t=await this.Pf.pD().kO("box2d.wasm");await new Promise(s=>{self.Box2DWasmModule({wasmBinaryFile:t}).then(t=>{d=t,this.zls(),s()})})}zls(){const h=this.Pf.yD(),t=(i=f.qlt.Fls.LIt(0,0),e=f.qlt.Fls.LIt(0,0),this.Dls=new d.b2World(f.qlt.Fls.Jls(0,this.kls),!0),new d.JSContactListener),s=(t.BeginContact=t=>{const s=d.wrapPointer(t,d.b2Contact),i=f.qlt.Fls.Instance.qls(s.GetFixtureA().GetBody()),e=f.qlt.Fls.Instance.qls(s.GetFixtureB().GetBody());h.fFt(i.dW(),e.dW())},t.EndContact=()=>{},t.PreSolve=()=>{},t.PostSolve=()=>{},this.Dls.SetContactListener(t),new d.JSContactFilter);s.ShouldCollide=(t,s)=>{if(this.jls)return!0;const i=d.wrapPointer(t,d.b2Fixture),e=d.wrapPointer(s,d.b2Fixture),h=f.qlt.Fls.Instance.qls(i.GetBody()),r=f.qlt.Fls.Instance.qls(e.GetBody()),n=h.dW().fB(),o=r.dW().fB(),a=n.NJ(),l=o.NJ(),u=n.yMt().get(p);if(u&&u.has(l))return!1;const c=o.yMt().get(p);return!c||!c.has(a)},this.Dls.SetContactFilter(s),this.Lls=new d.b2WorldManifold}Gr(){super.Gr()}Xls(){return d}Yls(){return this.Dls}$ls(){return this.Ols}Kls(){return this.Bls}Zls(t){this.Bls=t}Qls(t){this.Nls=t}tus(){return this.Nls}ius(t){this.Wls=Math.max(t,1)}eus(){return this.Wls}hus(t){this.Vls=Math.max(t,1)}rus(){return this.Vls}nus(t,s){this.ius(t),this.hus(s)}Lqt(){return this.kls}SetGravity(t){t!==this.kls&&(this.Dls.SetGravity(f.qlt.Fls.Jls(0,t)),this.kls=t,this.ous())}ous(){for(const t of this.w5()){const s=f.qlt.Fls.Instance.aus(t);if(s){const i=s.GetBody();i&&i.SetAwake(!0)}}}lus(){this.jls=!1}uus(t,s,i){if(i=!!i,t&&s){if(s.RJ())for(const e of s.yyt())h(t,e,i);else h(t,s,i);this.lus()}}GetWorldManifold(){return this.Lls}static cus(){return p}static LIt(t,s){if(r.length){const i=r.pop();return i.set_x(t),i.set_y(s),i}{const e=d.b2Vec2;return new e(t,s)}}static fus(t){r.push(t)}static Jls(t,s){return i.set_x(t),i.set_y(s),i}static dus(t,s){return e.set_x(t),e.set_y(s),e}static pus(s){let t=d.b2PolygonShape,i=new t,e=d._malloc(8*s.length),h=0;for(let t=0;t<s.length;++t)d.HEAPF32[e+h>>2]=s[t].get_x(),d.HEAPF32[e+(h+4)>>2]=s[t].get_y(),h+=8;const r=d.wrapPointer(e,d.b2Vec2);return i.Set(r,s.length),d._free(e),i}};const o0=["fixed","variable"];self.Uls=class extends self.mW{constructor(){super()}set mus(t){s._e(t),n.SetGravity(t)}get mus(){return n.Lqt()}set gus(t){const s=o0.indexOf(t);if(s<0)throw new Error("invalid stepping mode");n.Zls(o0[s])}get gus(){return o0[n.Kls()]}set yus(t){s._e(t),n.ius(t)}get yus(){return n.eus()}set Sus(t){s._e(t),n.hus(t)}get Sus(){return n.rus()}wus(t,s,i){const e=n.PO(),h=e.rL(t),r=e.rL(s);i=!!i,n.uus(h,r,i)}}}{const a0=self.Vs;a0.qlt.Fls.xCt=class extends a0.f_t{constructor(t){super(t)}Gr(){super.Gr()}Rxt(){}}}{let u=function(t,s){const i=E.get(t).PO();return i.aO(s)};u;const R=self.Vs,A=self.Zs,l0=self.nW,u0=new WeakMap,c0=new WeakMap,f0=new WeakMap,d0=R.qlt.Fls.Jls,p0=R.qlt.Fls.dus,m0=R.Tr(R.Rect),g0=R.Tr(R.gu),E=(R.qlt.Fls.Instance=class extends R.p_t{constructor(t,s){super(t);const i=this.aW(),e=this.lO(),h=(this.bus=i.Xls(),this.Dls=i.Yls(),this.Ols=i.$ls(),this.Mus=!1,this.vus=0,this.Tus=0,this.xus=!1,this.Gus=1,this._us=.5,this.Ius=.2,this.Cus=0,this.Pus=.01,this.Rus=!1,this.HSt=!0,this.Aus=null,this.Eus=[],this.Fus=[],this.Dus=[],this.kus=new Set,this.Ous=e.KM(),this.Lus=e.tv(),this.nns=e.GetAngle(),this.I8t=0,this.C8t=0,this.Nus=!1,s&&(this.Mus=!!s[0],this.vus=s[1],this.xus=!!s[2],this.Gus=s[3],this._us=s[4],this.Ius=s[5],this.Cus=s[6],this.Pus=s[7],this.Rus=!!s[8],this.HSt=!!s[9]),this.Pf.a0());this.W0=new R.L0(R.A0.O0(h,"instancedestroy",t=>this.WQt(t.fW)),R.A0.O0(h,"beforeload",()=>this.SK()),R.A0.O0(h,"afterload",()=>this.bK())),c0.set(this.Pi,this),this.HSt&&this.mGt()}S_t(){this.Bus()}Gr(){this.Wus(),R.Kn(this.Dus),this.kus.clear(),this.Aus&&(this.Vus(),this.Dls.DestroyBody(this.Aus),this.Aus=null),super.Gr()}jus(t){if(this.Aus){const s=this.Aus.CreateFixture(t);return this.Eus.push(s),s}}Vus(){if(this.Aus){for(const t of this.Eus)this.Aus.DestroyFixture(t);R.Kn(this.Eus)}}Hus(){const t=this.lO();return t.J6()?(t.qEt(m0,g0,!1),g0):t.V4()}Uus(t){this.bus.destroy(t)}Bus(){if(this.HSt){const t=this.bus.b2FixtureDef,i=this.bus.b2BodyDef,e=this.lO(),s=e.o3t();if(this.Tus=this.vus,s||this.Pi.iRt()||0!==this.Tus||(this.Tus=1),!this.Aus){const o=new i;o.set_type(this.Mus?0:2);let t=e.KM()*this.Ols,s=e.tv()*this.Ols;if(2===this.Tus){const a=this.Hus();t=a.Xl()*this.Ols,s=a.Yl()*this.Ols}o.set_position(p0(t,s)),o.set_angle(e.GetAngle()),o.set_fixedRotation(this.xus),o.set_linearDamping(this.Cus),o.set_angularDamping(this.Pus),o.set_bullet(this.Rus),this.Aus=this.Dls.CreateBody(o),this.Uus(o),u0.set(this.Aus,this)}this.Vus();const h=new t,r=(h.set_density(this.Gus),h.set_friction(this._us),h.set_restitution(this.Ius),Math.max(Math.abs(e.Wm()),1)),n=Math.max(Math.abs(e.$m()),1);0===this.Tus?this.Pi.iRt()?this.zus(h):this.Jus(h,r,n):1===this.Tus?this.qus(h,e,r,n):this.Xus(h,r,n),this.I8t=e.Wm(),this.C8t=e.$m(),e.c3t(!1),this.Uus(h)}}qus(t,s,i,e){let h=this.bus.b2PolygonShape,r=new h,n=i*this.Ols,o=e*this.Ols,a=s.jW(),l=s.UW();s.Wm()<0&&(a=1-a),s.$m()<0&&(l=1-l);const u=(.5-a)*n,c=(.5-l)*o,f=R.qlt.Fls.LIt(u,c);r.SetAsBox(n/2,o/2,f,0),t.set_shape(r),this.jus(t),this.Uus(r),R.qlt.Fls.fus(f)}Xus(t,s,i){const e=this.bus.b2CircleShape,h=new e;h.set_m_radius(Math.min(s,i)*this.Ols*.5),t.set_shape(h),this.jus(t),this.Uus(h)}Jus(t,s,i){const e=this.lO(),h=e.Wm()<0,r=e.$m()<0,n=this.Ols,o=e.u3t(h?-s:s,r?-i:i,0),a=o.ic(),l=a.length/2,u=[];for(let t=0;t<l;++t)u.push(R.qlt.Fls.LIt(a[2*t],a[2*t+1]));h!=r&&u.reverse();const c=R.qlt.Fls.$us.Yus(u,s*i);for(const f of u)R.qlt.Fls.fus(f);if(c.length)for(const d of c){for(const m of d)m.set_x(m.get_x()*n),m.set_y(m.get_y()*n);const p=R.qlt.Fls.pus(d);t.set_shape(p),this.jus(t),this.Uus(p);for(const g of d)R.qlt.Fls.fus(g)}else this.qus(t,e,s,i)}zus(e){const h=this.Ols,r=R.qlt.Fls.LIt,n=R.qlt.Fls.fus,i=[],o=(this.Pi.sW().uHt(i),[]);for(let t=0,s=i.length;t<s;++t){const a=i[t],l=a.wFt(),u=a.bFt();if(u){let i=f0.get(u);if(!i){const c=u.ic(),f=u.ec();for(let t=0;t<f;++t)o.push(r(c[2*t],c[2*t+1]));const d=3758096384&a.wUt();(-2147483648==d||1073741824==d||536870912==d||-2147483648&d&&1073741824&d&&536870912&d)&&o.reverse(),i=R.qlt.Fls.$us.Yus(o,l.width()*l.height()),f0.set(u,i);for(const p of o)n(p);R.Kn(o)}for(let t=0,s=i.length;t<s;++t){const m=i[t];for(let t=0,s=m.length;t<s;++t)o.push(r((l.Wl()+m[t].get_x())*h,(l.Vl()+m[t].get_y())*h));const g=R.qlt.Fls.pus(o);e.set_shape(g),this.jus(e),this.Uus(g);for(const y of o)n(y);R.Kn(o)}}else{o.push(r(l.Wl()*h,l.Vl()*h)),o.push(r(l.jl()*h,l.Vl()*h)),o.push(r(l.jl()*h,l.Hl()*h)),o.push(r(l.Wl()*h,l.Hl()*h));const S=R.qlt.Fls.pus(o);e.set_shape(S),this.jus(e),this.Uus(S)}for(const w of o)n(w);R.Kn(o)}}Kus(){this.Aus&&(this.Wus(),u0.delete(this.Aus),this.Vus(),this.Dls.DestroyBody(this.Aus),this.Aus=null)}Wus(){for(const t of this.Fus)this.Dls.DestroyJoint(t);R.Kn(this.Fus)}Zus(){for(const t of this.Dus)switch(t.type){case 0:this.Qus(...t.params);break;case 1:this.tcs(...t.params);break;case 2:this.scs(...t.params);break;case 3:this.ics(...t.params)}}ecs(t){const s=this.lO();if(-1===t)return[s.KM(),s.tv()];if(0===t&&this.Aus){const i=this.Aus.GetWorldCenter();return[i.get_x()/this.Ols,i.get_y()/this.Ols]}return this.Pi.Tvt(t)}hcs(t,s,i,e,h){if(this.HSt&&s&&s!==this.Pi){const r=R.qlt.Fls.Instance.aus(s);r&&r.W2t()&&(this.Dus.push({type:0,params:[t,s.GB(),i,e,h]}),this.Qus(t,s.GB(),i,e,h))}}Qus(t,s,i,e,h){if(this.HSt){const r=this.Pf.hO(s);if(r&&r!==this.Pi){const n=R.qlt.Fls.Instance.aus(r);if(n&&n.W2t()){n.kus.add(this.Pi),this.rcs(!1),n.rcs(!1);const[o,a]=this.ecs(t),[l,u]=r.Tvt(i),c=o-l,f=a-u,d=this.bus.b2DistanceJointDef,p=this.Ols,m=new d;m.Initialize(this.Aus,n.GetBody(),d0(o*p,a*p),p0(l*p,u*p)),m.set_length(Math.hypot(c,f)*p),m.set_dampingRatio(e),m.set_frequencyHz(h),this.Fus.push(this.Dls.CreateJoint(m)),this.Uus(m)}}}}ncs(t,s){if(this.HSt&&s&&s!==this.Pi){const i=R.qlt.Fls.Instance.aus(s);i&&i.W2t()&&(this.Dus.push({type:1,params:[t,s.GB()]}),this.tcs(t,s.GB()))}}tcs(t,s){if(this.HSt){const i=this.Pf.hO(s);if(i&&i!==this.Pi){const e=R.qlt.Fls.Instance.aus(i);if(e&&e.W2t()){e.kus.add(this.Pi),this.rcs(!1),e.rcs(!1);const[h,r]=this.ecs(t),n=this.bus.b2RevoluteJointDef,o=this.Ols,a=new n;a.Initialize(this.Aus,e.GetBody(),d0(h*o,r*o)),this.Fus.push(this.Dls.CreateJoint(a)),this.Uus(a)}}}}ocs(t,s,i,e){if(this.HSt&&s&&s!==this.Pi){const h=R.qlt.Fls.Instance.aus(s);h&&h.W2t()&&(i=R.Fr(i),e=R.Fr(e),this.Dus.push({type:2,params:[t,s.GB(),i,e]}),this.scs(t,s.GB(),i,e))}}scs(t,s,i,e){if(this.HSt){const h=this.Pf.hO(s);if(h&&h!==this.Pi){const r=R.qlt.Fls.Instance.aus(h);if(r&&r.W2t()){r.kus.add(this.Pi),this.rcs(!1),r.rcs(!1);const[n,o]=this.ecs(t),a=this.bus.b2RevoluteJointDef,l=this.Ols,u=new a;u.Initialize(this.Aus,r.GetBody(),d0(n*l,o*l)),u.set_enableLimit(!0),u.set_lowerAngle(R.Er(i)),u.set_upperAngle(R.Er(e)),this.Fus.push(this.Dls.CreateJoint(u)),this.Uus(u)}}}}acs(t,s,i,e,h,r,n,o,a){if(this.HSt&&s&&s!==this.Pi){const l=R.qlt.Fls.Instance.aus(s);l&&l.W2t()&&(i=R.Fr(i),o=R.Fr(o),this.Dus.push({type:3,params:[t,s.GB(),i,e,h,r,n,o,a]}),this.ics(t,s.GB(),i,e,h,r,n,o,a))}}ics(t,s,i,e,h,r,n,o,a){if(this.HSt){const l=this.Pf.hO(s);if(l&&l!==this.Pi){const u=R.qlt.Fls.Instance.aus(l);if(u&&u.W2t()){u.kus.add(this.Pi),this.rcs(!1),u.rcs(!1);const[c,f]=this.ecs(t),d=(i=R.Er(i),Math.cos(i)),p=Math.sin(i),m=this.bus.b2PrismaticJointDef,g=this.Ols,y=new m;y.Initialize(this.Aus,u.GetBody(),d0(c*g,f*g),p0(d,p)),y.set_enableLimit(!!e),y.set_lowerTranslation(h*g),y.set_upperTranslation(r*g),y.set_enableMotor(!!n),y.set_motorSpeed(R.Er(o)),y.set_maxMotorForce(a),this.Fus.push(this.Dls.CreateJoint(y)),this.Uus(y)}}}}lcs(){this.HSt&&(this.Wus(),R.Kn(this.Dus),this.kus.clear())}ucs(){for(const t of this.kus){const s=R.qlt.Fls.Instance.aus(t);if(!s||!s.W2t())return;s.ccs(this.Pi)}this.kus.clear()}WQt(t){this.ccs(t)}ccs(t){let i=t.GB(),e=0;for(let t=0,s=this.Dus.length;t<s;++t)this.Dus[e]=this.Dus[t],e<this.Fus.length&&(this.Fus[e]=this.Fus[t]),this.Dus[t].params[1]===i?t<this.Fus.length&&this.Dls.DestroyJoint(this.Fus[t]):++e;R.$n(this.Dus,e),e<this.Fus.length&&R.$n(this.Fus,e),this.kus.delete(t)}GetBody(){return this.Aus}static qls(t){return u0.get(t)||null}static aus(t){return c0.get(t)||null}dv(){const t={e:this.HSt,im:this.Mus,pr:this.xus,d:this.Gus,fr:this._us,re:this.Ius,ld:this.Cus,ad:this.Pus,b:this.Rus,mcj:this.Dus};if(this.HSt){const s=this.Aus.GetLinearVelocity();t.vx=s.get_x(),t.vy=s.get_y(),t.om=this.Aus.GetAngularVelocity()}return t}SK(){this.Wus(),R.Kn(this.Dus),this.kus.clear()}pv(t){this.Kus(),this.HSt=t.e,t.hasOwnProperty("im")&&(this.Mus=!!t.im),this.xus=t.pr,this.Gus=t.d,this._us=t.fr,this.Ius=t.re,this.Cus=t.ld,this.Pus=t.ad,this.Rus=t.b,this.Dus=t.mcj;const s=this.lO();this.Ous=s.KM(),this.Lus=s.tv(),this.nns=s.GetAngle(),this.I8t=s.Wm(),this.C8t=s.$m(),this.HSt&&(this.Bus(),this.Aus.SetLinearVelocity(d0(t.vx,t.vy)),this.Aus.SetAngularVelocity(t.om),0===t.vx&&0===t.vy&&0===t.om||this.Aus.SetAwake(!0),this.Dus=t.mcj),this.HSt?this.mGt():this.Qxt()}bK(){this.HSt&&this.Zus()}yZ(){if(this.HSt){let t=this.Pf,s=this.aW(),i=0;0===s.Kls()?i=t.Sk()/60:(i=t.fk(this.Pi))>1/30&&(i=1/30);const e=t.qBt();e>s.tus()&&0<t.Sk()&&(0!==i&&this.Dls.Step(i,s.eus(),s.rus()),this.Dls.ClearForces(),s.Qls(e)),this.rcs(!0)}}rcs(t){let s=this.Pi,i=s.lO(),e=this.Ols,h=(i.Wm()===this.I8t&&i.$m()===this.C8t&&!i.y3t()||this.Bus(),this.Aus),r=i.KM(),n=i.tv(),o=r-this.Ous,a=n-this.Lus,l=.001<Math.abs(o)||.001<Math.abs(a),u=i.GetAngle()!==this.nns,c=r,f=n;if(2===this.Tus){const y=this.Hus();c=y.Xl(),f=y.Yl()}l?(u?h.SetTransform(d0(c*e,f*e),i.GetAngle()):h.SetTransform(d0(c*e,f*e),h.GetAngle()),t&&(h.SetLinearVelocity(d0(o,a)),this.Nus=!0),h.SetAwake(!0)):t&&this.Nus&&(this.Nus=!1,h.SetLinearVelocity(d0(0,0)),h.SetTransform(d0(c*e,f*e),h.GetAngle())),!l&&u&&(h.SetTransform(h.GetPosition(),i.GetAngle()),h.SetAwake(!0));const d=h.GetPosition(),p=d.get_x()/e,m=d.get_y()/e,g=h.GetAngle();if((p!==i.KM()||m!==i.tv()||g!==i.GetAngle())&&(i.A4(p,m),i.N5(g),i.R4(),2===this.Tus)){const S=this.Hus(),w=S.Xl()-i.KM(),b=S.Yl()-i.tv();0==w&&0==b||(i.D4(-w,-b),i.R4())}this.Ous=i.KM(),this.Lus=i.tv(),this.nns=i.GetAngle()}knt(t){switch(t){case 2:return this.fcs();case 3:return this.dcs();case 4:return this.pcs();case 5:return this.mcs();case 6:return this.gcs();case 7:return this.ycs();case 8:return this.Scs();case 9:return this.W2t()}}Vnt(t,s){switch(t){case 2:this.wcs(s);break;case 3:this.bcs(s);break;case 4:this.Mcs(s);break;case 5:this.vcs(s);break;case 6:this.Tcs(s);break;case 7:this.xcs(s);break;case 8:this.Gcs(s);break;case 9:this.N2t(s)}}N2t(t){t=!!t,this.HSt&&!t?(this.ucs(),this.Kus(),this.HSt=!1,this.Qxt()):!this.HSt&&t&&(this.HSt=!0,this.Bus(),this.mGt())}W2t(){return this.HSt}wGt(){const t="behaviors.physics",s=[{name:t+".properties.enabled.name",value:this.W2t(),gzt:t=>this.N2t(t)},{name:t+".properties.immovable.name",value:this._cs(),gzt:t=>this.Ics(t)},{name:t+".properties.density.name",value:this.dcs(),gzt:t=>this.bcs(t)},{name:t+".properties.friction.name",value:this.pcs(),gzt:t=>this.Mcs(t)},{name:t+".properties.elasticity.name",value:this.mcs(),gzt:t=>this.vcs(t)},{name:t+".properties.linear-damping.name",value:this.gcs(),gzt:t=>this.Tcs(t)},{name:t+".properties.angular-damping.name",value:this.ycs(),gzt:t=>this.xcs(t)}];return this.HSt&&(s.push({name:t+".debugger.is-sleeping",value:!this.Ccs()}),s.push({name:t+".debugger.velocity-x",value:this.Pcs(),gzt:t=>this.Rcs(t,this.Acs())}),s.push({name:t+".debugger.velocity-y",value:this.Acs(),gzt:t=>this.Rcs(this.Pcs(),t)}),s.push({name:t+".debugger.angular-velocity",value:R.Fr(this.Ecs()),gzt:t=>this.Fcs(R.Er(t))}),s.push({name:t+".debugger.mass",value:this.Dcs()})),[{title:"$"+this.cW().Mf(),properties:s}]}kcs(t,s,i){const[e,h]=this.ecs(i);this.Ocs(t,s,e,h)}Lcs(t,s,i,e){const[h,r]=this.ecs(e),n=R.Nr(h,r,s,i);this.Ocs(Math.cos(n)*t,Math.sin(n)*t,h,r)}Ncs(t,s,i){const[e,h]=this.ecs(i);this.Ocs(Math.cos(s)*t,Math.sin(s)*t,e,h)}Ocs(t,s,i,e){if(this.HSt){const h=this.Ols;this.Aus.ApplyForce(d0(t,s),p0(i*h,e*h),!0)}}Bcs(t,s,i){const[e,h]=this.ecs(i);this.Wcs(t,s,e,h)}Vcs(t,s,i,e){const[h,r]=this.ecs(e),n=R.Nr(h,r,s,i);this.Wcs(Math.cos(n)*t,Math.sin(n)*t,h,r)}jcs(t,s,i){const[e,h]=this.ecs(i);this.Wcs(Math.cos(s)*t,Math.sin(s)*t,e,h)}Wcs(t,s,i,e){if(this.HSt){const h=this.Ols,r=(this.Aus.ApplyLinearImpulse(d0(t,s),p0(i*h,e*h),!0),this.lO());this.Ous=r.KM(),this.Lus=r.tv(),this.Nus=!1}}Hcs(t){this.HSt&&this.Aus.ApplyTorque(t,!0)}Ucs(t,s){const i=R.Vr(this.lO().GetAngle(),s)?-1:1;this.Hcs(t*i)}zcs(t,s,i){const e=this.lO(),h=R.Nr(e.KM(),e.tv(),s,i),r=R.Vr(e.GetAngle(),h)?-1:1;this.Hcs(t*r)}Fcs(t){this.HSt&&(this.Aus.SetAngularVelocity(t),this.Aus.SetAwake(!0))}Ecs(){return this.HSt?this.Aus.GetAngularVelocity():0}Rcs(t,s){if(this.HSt){const i=this.Ols,e=(this.Aus.SetLinearVelocity(d0(t*i,s*i)),this.Aus.SetAwake(!0),this.lO());this.Ous=e.KM(),this.Lus=e.tv(),this.Nus=!1}}Jcs(){if(!this.HSt)return[0,0];const t=this.Ols,s=this.Aus.GetLinearVelocity();return[s.get_x()/t,s.get_y()/t]}Pcs(){return this.HSt?this.Aus.GetLinearVelocity().get_x()/this.Ols:0}Acs(){return this.HSt?this.Aus.GetLinearVelocity().get_y()/this.Ols:0}qcs(t,s){if(this.HSt){const i=this.Ols,e=(this.Aus.SetTransform(d0(t*i,s*i),this.Aus.GetAngle()),this.lO());e.A4(t,s),e.R4(),this.Ous=e.KM(),this.Lus=e.tv()}}bcs(t){if(this.HSt&&this.Gus!==t){this.Gus=t;for(const s of this.Eus)s.SetDensity(t);this.Aus.ResetMassData()}}dcs(){return this.HSt?this.Gus:0}Mcs(t){if(this.HSt&&this._us!==t){this._us=t;for(const s of this.Eus)s.SetFriction(t);if(this.Aus)for(let t=this.Aus.GetContactList();this.bus.getPointer(t);t=t.get_next()){const i=t.get_contact();i&&i.ResetFriction()}}}pcs(){return this.HSt?this._us:0}vcs(t){if(this.HSt&&this.Ius!==t){this.Ius=t;for(const s of this.Eus)s.SetRestitution(t)}}mcs(){return this.HSt?this.Ius:0}Tcs(t){this.HSt&&this.Cus!==t&&(this.Cus=t,this.Aus.SetLinearDamping(t))}gcs(){return this.HSt?this.Cus:0}xcs(t){this.HSt&&this.Pus!==t&&(this.Pus=t,this.Aus.SetAngularDamping(t))}ycs(){return this.HSt?this.Pus:0}Ics(t){this.HSt&&this.Mus!==(t=!!t)&&(this.Mus=t,this.Aus.SetType(this.Mus?0:2),this.Aus.SetAwake(!0))}_cs(){return this.Mus}wcs(t){this.HSt&&this.xus!==(t=!!t)&&(this.xus=t,this.Aus.SetFixedRotation(this.xus),this.Aus.SetAngularVelocity(0),this.Aus.SetAwake(!0))}fcs(){return this.xus}Gcs(t){this.HSt&&this.Rus!==(t=!!t)&&(this.Rus=t,this.Aus.SetBullet(this.Rus),this.Aus.SetAwake(!0))}Scs(){return this.Rus}Xcs(t){this.HSt&&this.Aus.SetAwake(!!t)}Ccs(){return!!this.HSt&&this.Aus.IsAwake()}Dcs(){return this.HSt?this.Aus.GetMass()/this.Ols:0}Ycs(){return this.HSt?this.Aus.GetWorldCenter().get_x()/this.Ols:0}$cs(){return this.HSt?this.Aus.GetWorldCenter().get_y()/this.Ols:0}Kcs(){if(!this.HSt)return[0,0];const t=this.Aus.GetWorldCenter(),s=this.Ols;return[t.get_x()/s,t.get_y()/s]}Zcs(){if(!this.HSt)return 0;let s=0;for(let t=this.Aus.GetContactList();this.bus.getPointer(t);t=t.get_next()){const i=t.get_contact();if(i){const e=i.GetManifold(),h=e.get_pointCount();s+=h}}return s}Qcs(i){if(i=Math.floor(i),this.HSt){let s=0;for(let t=this.Aus.GetContactList();this.bus.getPointer(t);t=t.get_next()){const e=t.get_contact();if(e){const h=e.GetManifold(),r=h.get_pointCount();if(i>=s&&i<s+r){const n=i-s,o=this.aW().GetWorldManifold(),a=(e.GetWorldManifold(o),o.get_points(n));return[a.get_x()/this.Ols,a.get_y()/this.Ols]}s+=r}}}return[0,0]}Axt(){return self.tfs}},new WeakMap);self.tfs=class extends l0{constructor(){super(),E.set(this,l0.mB().sW())}get isEnabled(){return E.get(this).W2t()}set isEnabled(t){E.get(this).N2t(t)}sfs(t,s,i=0){A._e(t),A._e(s),E.get(this).kcs(t,s,i)}ifs(t,s,i,e=0){A._e(t),A._e(s),A._e(i),E.get(this).Lcs(t,s,i,e)}efs(t,s,i=0){A._e(t),A._e(s),E.get(this).Ncs(t,s,i)}hfs(t,s,i=0){A._e(t),A._e(s),E.get(this).Bcs(t,s,i)}rfs(t,s,i,e=0){A._e(t),A._e(s),A._e(i),E.get(this).Vcs(t,s,i,e)}nfs(t,s,i=0){A._e(t),A._e(s),E.get(this).jcs(t,s,i)}ofs(t){A._e(t),E.get(this).Hcs(t)}afs(t,s){A._e(t),A._e(s),E.get(this).Ucs(t,s)}lfs(t,s,i){A._e(t),A._e(s),A._e(i),E.get(this).zcs(t,s,i)}set angularVelocity(t){A._e(t),E.get(this).Fcs(t)}get angularVelocity(){return E.get(this).Ecs()}setVelocity(t,s){A._e(t),A._e(s),E.get(this).Rcs(t,s)}ufs(){return E.get(this).Pcs()}cfs(){return E.get(this).Acs()}ffs(){return E.get(this).Jcs()}dfs(t,s){A._e(t),A._e(s),E.get(this).qcs(t,s)}set pfs(t){A._e(t),E.get(this).bcs(t)}get pfs(){return E.get(this).dcs()}set mfs(t){A._e(t),E.get(this).Mcs(t)}get mfs(){return E.get(this).pcs()}set gfs(t){A._e(t),E.get(this).vcs(t)}get gfs(){return E.get(this).mcs()}set yfs(t){A._e(t),E.get(this).Tcs(t)}get yfs(){return E.get(this).gcs()}set Sfs(t){A._e(t),E.get(this).xcs(t)}get Sfs(){return E.get(this).ycs()}set wfs(t){E.get(this).Ics(t)}get wfs(){return E.get(this)._cs()}set bfs(t){E.get(this).wcs(t)}get bfs(){return E.get(this).fcs()}set Mfs(t){E.get(this).Gcs(t)}get Mfs(){return E.get(this).Scs()}get vfs(){return E.get(this).Dcs()}Tfs(){return E.get(this).Ycs()}xfs(){return E.get(this).$cs()}Gfs(){return E.get(this).Kcs()}_fs(){return E.get(this).Zcs()}Ifs(t){return A._e(t),E.get(this).Qcs(t)[0]}Cfs(t){return A._e(t),E.get(this).Qcs(t)[1]}Pfs(t){return A._e(t),E.get(this).Qcs(t)}set Rfs(t){E.get(this).Xcs(!!t)}get Rfs(){return E.get(this).Ccs()}get Afs(){return!E.get(this).Ccs()}Efs(t,s,i,e,h){A._e(e),A._e(h);const r=u(this,s);E.get(this).hcs(t,r,i,e,h)}Ffs(t,s){const i=u(this,s);E.get(this).ncs(t,i)}Dfs(t,s,i,e){A._e(i),A._e(e);const h=u(this,s);E.get(this).ocs(t,h,i,e)}kfs(t,s,i,e,h,r,n,o,a){const l=u(this,s);E.get(this).acs(t,l,i,e,h,r,n,o,a)}Ofs(){E.get(this).lcs()}}}{const y0=self.Vs;y0.qlt.Fls.JY={Lfs(){return!this.Ccs()},Nfs(){return this._cs()},Bfs(t,s,i){if(!this.HSt)return!1;let e=0;if(0===t)e=this.Pcs();else if(1===t)e=this.Acs();else{const[h,r]=this.Jcs();e=Math.hypot(h,r)}return y0.compare(e,s,i)},Wfs(t,s){if(!this.HSt)return!1;const i=y0.Fr(this.Ecs());return y0.compare(i,t,s)},Vfs(t,s){if(!this.HSt)return!1;const i=this.Dcs();return y0.compare(i,t,s)},wc(){return this.W2t()}}}{const S0=self.Vs;S0.qlt.Fls.Krt={ApplyForce(t,s,i){this.kcs(t,s,i)},jfs(t,s,i,e){this.Lcs(t,s,i,e)},Hfs(t,s,i){this.Ncs(t,S0.Er(s),i)},Ufs(t,s,i){this.Bcs(t,s,i)},zfs(t,s,i,e){this.Vcs(t,s,i,e)},Jfs(t,s,i){this.jcs(t,S0.Er(s),i)},ApplyTorque(t){this.Hcs(S0.Er(t))},qfs(t,s){this.Ucs(S0.Er(t),S0.Er(s))},Xfs(t,s,i){this.zcs(S0.Er(t),s,i)},SetAngularVelocity(t){this.Fcs(S0.Er(t))},Yfs(t,s,i,e,h){if(s){const r=s.t2t(this.Pi);this.hcs(t,r,i,e,h)}},$fs(t,s){if(s){const i=s.t2t(this.Pi);this.ncs(t,i)}},Kfs(t,s,i,e){if(s){const h=s.t2t(this.Pi);this.ocs(t,h,S0.Er(i),S0.Er(e))}},Zfs(t,s,i,e,h,r,n,o,a){if(s){const l=s.t2t(this.Pi);this.acs(t,l,S0.Er(i),e,h,r,n,S0.Er(o),a)}},Qfs(){this.lcs()},t0s(t){this.aW().SetGravity(t)},Zls(t){this.aW().Zls(t)},nus(t,s){this.aW().nus(t,s)},s0s(t,s){this.Rcs(t,s)},i0s(t,s){this.qcs(t,s)},SetDensity(t){this.bcs(t)},SetFriction(t){this.Mcs(t)},e0s(t){this.vcs(t)},SetLinearDamping(t){this.Tcs(t)},SetAngularDamping(t){this.xcs(t)},h0s(t){this.Ics(t)},r0s(t,s){this.aW().uus(this.fB(),t,0!==s)},n0s(t){this.wcs(0!==t)},SetBullet(t){this.Gcs(0!==t)},SetAwake(t){this.Xcs(!!t)},LTt(t){this.N2t(0!==t)}}}{const w0=self.Vs;w0.qlt.Fls.Zrt={o0s(){return this.Pcs()},a0s(){return this.Acs()},l0s(){return w0.Fr(this.Ecs())},u0s(){return this.Dcs()},c0s(){return this.Ycs()},f0s(){return this.$cs()},d0s(){return this.dcs()},p0s(){return this.pcs()},m0s(){return this.mcs()},g0s(){return this.gcs()},y0s(){return this.ycs()},S0s(){return this.Zcs()},w0s(t){return this.Qcs(t)[0]},b0s(t){return this.Qcs(t)[1]}}}{let n=function(t){return v0(t.get_x(),t.get_y())},s=function(t){const s=[];for(const i of t)i.length<=8?s.push(i):s.push.apply(s,e(i));return s},e=function(i){let e=[],h=(e.push(i.splice(0,8)),e[0][0]),r=e[0][7];for(;i.length;){let t=i.splice(0,Math.min(i.length,6)),s=t.at(-1);t.push(n(h)),t.push(n(r)),e.push(t),r=s}return e};n,s,e;const b0=self.Vs,M0={},v0=(b0.qlt.Fls.$us=M0,b0.qlt.Fls.LIt),T0=b0.qlt.Fls.fus;M0.M0s=function(t,s,i,e,h,r){return t*e+i*r+h*s-s*i-e*h-r*t},M0.v0s=function(t,s,i,e,h,r,n,o){const a=h-t,l=r-s,u=i-t,c=e-s,f=n-h,d=o-r,p=c*f-u*d,m=(f*l-d*a)/p,g=t+m*u,y=s+m*c,S=M0.T0s(i,e,t,s,g,y),w=M0.T0s(g,y,h,r,n,o);return S&&w?v0(g,y):null},M0.T0s=function(t,s,i,e,h,r){const n=t<=i+.1&&h-.1<=t||i-.1<=t&&t<=h+.1,o=s<=e+.1&&r-.1<=s||e-.1<=s&&s<=r+.1;return n&&o&&M0.x0s(t,s,i,e,h,r)},M0.x0s=function(t,s,i,e,h,r){if(.1<Math.abs(h-i)){const n=(r-e)/(h-i),o=n*(t-i)+e,a=Math.abs(o-s);return a<.1}return Math.abs(t-i)<.1},M0.G0s=function(t,s,i,e){return Math.abs(i-t)<.1&&Math.abs(e-s)<.1},M0.Yus=function(t,r){let n=M0._0s(t),o=[];for(let t=0,s=n.length;t<s;++t){let i=n[t],e=[],h=0;for(let t=0,s=i.length;t<s;++t){const a=i[t],l=i[(t+1)%s];h+=a.get_x()*l.get_y()-a.get_y()*l.get_x(),e.push(v0(a.get_x(),a.get_y()))}if((h=Math.abs(h/2))>=.001*r)o.push(e);else for(let t=0,s=e.length;t<s;t++)T0(e[t])}return o=s(o)},M0._0s=function(t){let s=[],i=0,e,h=0,r,n,o,a=0,l,u,c,f,d,p,m,g,y,S,w=0,b=0,M=0,v=0,T=[],x=[],G=!1,_=[],I=[],C=!1;for(I.push(t);I.length;){for(e=(s=I[0]).length,G=!0,i=0;i<e;i++)if(u=(l=i)<e-1?i+1:i+1-e,c=i<e-2?i+2:i+2-e,f=s[l],d=s[u],p=s[c],M0.M0s(f.get_x(),f.get_y(),d.get_x(),d.get_y(),p.get_x(),p.get_y())<0){for(G=!1,a=1e9,h=0;h<e;h++)h!==l&&h!==u&&(w=h,b=h<e-1?h+1:0,m=s[w],g=s[b],y=M0.v0s(f.get_x(),f.get_y(),d.get_x(),d.get_y(),m.get_x(),m.get_y(),g.get_x(),g.get_y()))&&((r=(n=d.get_x()-y.get_x())*n+(o=d.get_y()-y.get_y())*o)<a?(v=w,M=b,S=y,a=r):T0(y));if(1e9===a)return[];for(T=[],x=[],w=v,b=M,m=s[w],g=s[b],C=!1,M0.G0s(S.get_x(),S.get_y(),g.get_x(),g.get_y())||(T.push(S),C=!0),M0.G0s(S.get_x(),S.get_y(),m.get_x(),m.get_y())||(x.push(S),C=!0),C||T0(S),v=-1,M=l;;){if(M===b){if(v<0||v>=e)return[];M0.T0s(g.get_x(),g.get_y(),s[v].get_x(),s[v].get_y(),f.get_x(),f.get_y())||T.push(s[M]);break}T.push(s[M]),(v=M)-1<0?M=e-1:M--}for(T.reverse(),v=-1,M=u;;){if(M===w){if(v<0||v>=e)return[];M!==w||M0.T0s(m.get_x(),m.get_y(),s[v].get_x(),s[v].get_y(),d.get_x(),d.get_y())||x.push(s[M]);break}x.push(s[M]),(v=M)+1>e-1?M=0:M++}I.push(T,x),I.shift();break}G&&_.push(I.shift())}return _}}{const x0=self.Vs;x0.qlt.I0s=class extends x0.o_t{constructor(t){super(t)}Gr(){super.Gr()}}}{const G0=self.Vs;G0.qlt.I0s.xCt=class extends G0.f_t{constructor(t){super(t)}Gr(){super.Gr()}Rxt(){}}}{const _0=self.Vs,I0=self.Zs,C0=self.nW,P0=(_0.qlt.I0s.Instance=class extends _0.p_t{constructor(t,s){super(t),this.C0s=0,this.P0s=0,this.R0s=0,this.A0s=0,this.E0s=0,this.mGt()}Gr(){super.Gr()}F0s(t,s,i){this.C0s=t,this.P0s=s,this.R0s=1,this.A0s=s,this.E0s=i,this.Pi.lO().MN(!1),this.Pf.gO()}D0s(){this.E0s=0,this.Pi.lO().MN(!0),this.Pf.gO()}k0s(){return 0<this.E0s}dv(){return{on:this.C0s,off:this.P0s,s:this.R0s,stl:this.A0s,tl:this.E0s}}pv(t){this.C0s=t.on,this.P0s=t.off,this.R0s=t.s,this.A0s=t.stl,this.E0s=null===t.tl?1/0:t.tl}yZ(){if(!(this.E0s<=0)){const t=this.Pf.fk(this.Pi);if(this.E0s-=t,this.E0s<=0)return this.E0s=0,this.Pi.lO().MN(!0),this.Pf.gO(),this.Xxt("flashend"),this.iGt(_0.qlt.I0s.JY.O0s);this.A0s-=t,this.A0s<=0&&(0===this.R0s?(this.Pi.lO().MN(!1),this.R0s=1,this.A0s+=this.P0s):(this.Pi.lO().MN(!0),this.R0s=0,this.A0s+=this.C0s),this.Pf.gO())}}wGt(){const t="behaviors.flash.debugger";return[{title:"$"+this.cW().Mf(),properties:[{name:t+".on-time",value:this.C0s,gzt:t=>this.C0s=t},{name:t+".off-time",value:this.P0s,gzt:t=>this.P0s=t},{name:t+".is-flashing",value:0<this.E0s},{name:t+".time-left",value:this.E0s}]}]}Axt(){return self.L0s}},new WeakMap);self.L0s=class extends C0{constructor(){super(),P0.set(this,C0.mB().sW())}N0s(t,s,i){I0._e(t),I0._e(s),I0._e(i),P0.get(this).F0s(t,s,i)}stop(){P0.get(this).D0s()}get B0s(){return P0.get(this).k0s()}}}{const R0=self.Vs;R0.qlt.I0s.JY={W0s(){return this.k0s()},O0s(){return!0}}}{const A0=self.Vs;A0.qlt.I0s.Krt={I0s(t,s,i){this.F0s(t,s,i)},V0s(){this.D0s()}}}{const E0=self.Vs;E0.qlt.I0s.Zrt={}}{const F0=self.Vs;F0.qlt.j0s=class extends F0.o_t{constructor(t){super(t)}Gr(){super.Gr()}}}{const D0=self.Vs;D0.qlt.j0s.xCt=class extends D0.f_t{constructor(t){super(t)}Gr(){super.Gr()}Rxt(){}}}{const k0=self.Vs,O0=self.Zs,L0=self.nW,N0=(k0.qlt.j0s.Instance=class extends k0.p_t{constructor(t,s){super(t),this.H0s=0,this.U0s=0,this.z0s=0,this.ons=!0,this.J0s=!0,this.q0s=!1,this.R0s=0,this.X0s=k0.Tr(k0.H0),this.Y0s=this.Pi.lO().mA()||1,s&&(this.H0s=s[0],this.U0s=s[1],this.z0s=s[2],this.ons=!!s[3],this.J0s=!!s[4],this.R0s=this.J0s?0:3),this.J0s&&(0===this.H0s?(this.R0s=1,0===this.U0s&&(this.R0s=2)):(this.Pi.lO().yA(0),this.Pf.gO())),this.mGt()}Gr(){super.Gr()}dv(){return{fit:this.H0s,wt:this.U0s,fot:this.z0s,d:this.ons,s:this.R0s,st:this.X0s.oi(),mo:this.Y0s}}pv(t){this.H0s=t.fit,this.U0s=t.wt,this.z0s=t.fot,this.ons=t.d,this.R0s=t.s,this.X0s.Set(t.st),this.Y0s=t.mo,3===this.R0s?this.Qxt():this.mGt()}yZ(){const t=this.Pf.fk(this.Pi),s=(this.X0s.Fc(t),this.Pi.lO());0===this.R0s&&(s.yA(this.X0s.oi()/this.H0s*this.Y0s),this.Pf.gO(),s.mA()>=this.Y0s)&&(s.yA(this.Y0s),this.R0s=1,this.X0s.P0(),this.Xxt("fadeinend"),this.QB(k0.qlt.j0s.JY.$0s)),1===this.R0s&&this.X0s.oi()>=this.U0s&&(this.R0s=2,this.X0s.P0(),this.Xxt("waitend"),this.QB(k0.qlt.j0s.JY.K0s)),2===this.R0s&&(0!==this.z0s?(s.yA(this.Y0s-this.X0s.oi()/this.z0s*this.Y0s),this.Pf.gO(),s.mA()<=0&&(this.R0s=3,this.X0s.P0(),this.Xxt("fadeoutend"),this.QB(k0.qlt.j0s.JY.Z0s),this.ons)&&this.Pf.SB(this.Pi)):(this.R0s=3,this.X0s.P0())),3===this.R0s&&this.Qxt()}Q0s(){this.J0s||this.q0s||(this.Y0s=this.Pi.lO().mA()||1,this.q0s=!0),3===this.R0s&&this.qA()}tds(){this.qA()}qA(){this.R0s=0,this.X0s.P0(),0===this.H0s?(this.R0s=1,0===this.U0s&&(this.R0s=2)):(this.Pi.lO().yA(0),this.Pf.gO()),this.mGt()}sds(t){this.H0s=Math.max(t,0)}ids(){return this.H0s}eds(t){this.U0s=Math.max(t,0)}hds(){return this.U0s}rds(t){this.z0s=Math.max(t,0)}nds(){return this.z0s}knt(t){switch(t){case 0:return this.ids();case 1:return this.hds();case 2:return this.nds();case 3:return this.ons}}Vnt(t,s){switch(t){case 0:this.sds(s);break;case 1:this.eds(s);break;case 2:this.rds(s);break;case 3:this.ons=!!s}}wGt(){const t="behaviors.fade";return[{title:"$"+this.cW().Mf(),properties:[{name:t+".properties.fade-in-time.name",value:this.ids(),gzt:t=>this.sds(t)},{name:t+".properties.wait-time.name",value:this.hds(),gzt:t=>this.eds(t)},{name:t+".properties.fade-out-time.name",value:this.nds(),gzt:t=>this.rds(t)},{name:t+".debugger.stage",value:[t+".debugger."+["fade-in","wait","fade-out","done"][this.R0s]]}]}]}Axt(){return self.ods}},new WeakMap);self.ods=class extends L0{constructor(){super(),N0.set(this,L0.mB().sW())}ads(){N0.get(this).Q0s()}lds(){N0.get(this).tds()}set uds(t){O0._e(t),N0.get(this).sds(t)}get uds(){return N0.get(this).ids()}set cds(t){O0._e(t),N0.get(this).eds(t)}get cds(){return N0.get(this).hds()}set fds(t){O0._e(t),N0.get(this).rds(t)}get fds(){return N0.get(this).nds()}}}{const B0=self.Vs;B0.qlt.j0s.JY={Z0s(){return!0},$0s(){return!0},K0s(){return!0}}}{const W0=self.Vs;W0.qlt.j0s.Krt={dds(){this.Q0s()},pds(){this.tds()},mds(t){this.sds(t)},gds(t){this.eds(t)},yds(t){this.rds(t)}}}{const V0=self.Vs;V0.qlt.j0s.Zrt={Sds(){return this.ids()},wds(){return this.hds()},bds(){return this.nds()}}}{const j0=self.Vs;j0.qlt.Mds=class extends j0.o_t{constructor(t){super(t)}Gr(){super.Gr()}}}{const H0=self.Vs;H0.qlt.Mds.xCt=class extends H0.f_t{constructor(t){super(t)}Gr(){super.Gr()}Rxt(){}}}{const U0=self.Vs,z0=self.Zs,J0=self.nW,q0=(U0.qlt.Mds.Instance=class extends U0.p_t{constructor(t,s){super(t);const i=this.lO(),e=(this.cIt=0,this.ges=0,this.aa=0,this.vds=!1,this.Tds=!1,this.xds=!1,this.HSt=!0,this.oes=0,this.aes=0,this.Gds=i.KM(),this._ds=i.tv(),this.nns=i.GetAngle(),this.Ids=0,this.Cds=Math.min(Math.abs(i.Wm()),Math.abs(i.$m())/2),this.Pds=!1,s&&(this.cIt=s[0],this.ges=s[1],this.aa=s[2],this.vds=!!s[3],this.Tds=!!s[4],this.xds=!!s[5],this.HSt=!!s[6]),i.GetAngle());this.oes=Math.cos(e)*this.cIt,this.aes=Math.sin(e)*this.cIt,this.HSt&&(this.mGt(),this.vds)&&this.b_t()}Gr(){super.Gr()}dv(){const t={dx:this.oes,dy:this.aes,lx:this.Gds,ly:this._ds,lka:this.nns,t:this.Ids};return 0!==this.ges&&(t.acc=this.ges),0!==this.aa&&(t.g=this.aa),this.xds&&(t.st=this.xds),this.HSt||(t.e=this.HSt),this.vds&&(t.bos=this.vds),this.Tds&&(t.sa=this.Tds),t}pv(t){this.oes=t.dx,this.aes=t.dy,this.Gds=t.lx,this._ds=t.ly,this.nns=t.lka,this.Ids=t.t,this.ges=t.hasOwnProperty("acc")?t.acc:0,this.aa=t.hasOwnProperty("g")?t.g:0,this.xds=!!t.hasOwnProperty("st")&&t.st,this.vds=!!t.hasOwnProperty("bos")&&t.bos,this.Tds=!!t.hasOwnProperty("sa")&&t.sa,this.N2t(!t.hasOwnProperty("e")||t.e)}yZ(){if(this.HSt){const h=this.Pf.fk(this.Pi),r=this.Pi.lO();if(r.GetAngle()!==this.nns){const t=r.GetAngle();if(this.Tds){const s=U0.Or(0,0,this.oes,this.aes);this.oes=Math.cos(t)*s,this.aes=Math.sin(t)*s}this.nns=t}let i=0,e=0;if(0!==this.ges){let t=U0.Or(0,0,this.oes,this.aes),s;s=0===this.oes&&0===this.aes?r.GetAngle():U0.Nr(0,0,this.oes,this.aes),t+=this.ges*h,i=Math.cos(s)*this.ges,e=Math.sin(s)*this.ges,t<0&&(t=0,i=0,e=0),this.oes=Math.cos(s)*t,this.aes=Math.sin(s)*t}if(0!==this.aa&&(this.aes+=this.aa*h,e+=this.aa),this.Gds=r.KM(),this._ds=r.tv(),0!==this.oes||0!==this.aes){const n=this.oes*h+.5*i*h*h,o=this.aes*h+.5*e*h*h,a=U0.Or(0,0,n,o);if(this.Rds(n,o,a),this.Ids+=a,this.Tds&&(0!=n||0!=o)){const l=U0.Nr(0,0,n,o);r.N5(l),this.nns=r.GetAngle()}r.R4()}}}Rds(t,s,i){const e=this.lO();if(!this.xds||i<=this.Cds)e.D4(t,s),e.R4(),this.xds&&this.QB(U0.qlt.Mds.JY.Ads);else{this.Pds=!1;const h=e.KM(),r=e.tv(),n=h+t,o=r+s,a=U0.Nr(0,0,t,s),l=Math.cos(a)*this.Cds,u=Math.sin(a)*this.Cds,c=Math.floor(i/this.Cds);for(let t=1;t<=c;++t)if(e.A4(h+l*t,r+u*t),e.R4(),this.QB(U0.qlt.Mds.JY.Ads),this.Pi.kj()||this.Pds)return;e.A4(n,o),e.R4(),this.QB(U0.qlt.Mds.JY.Ads)}}w_t(){if(this.HSt&&this.vds&&(0!==this.oes||0!==this.aes)){const t=this.Pf.fk(this.Pi),s=this.Pi.lO(),i=this.Pf.yD(),e=i.QO(this.Pi);if(e){i.fFt(this.Pi,e);const h=U0.Or(0,0,this.oes,this.aes),r=i.FFt(this.Pi,this.Gds,this._ds);this.oes=Math.cos(r)*h,this.aes=Math.sin(r)*h,s.D4(this.oes*t,this.aes*t),s.R4(),this.Tds&&(s.N5(r),this.nns=s.GetAngle(),s.R4()),i.PFt(this.Pi,this.oes/h,this.aes/h,Math.max(2.5*h*t,30))||i.EFt(this.Pi,100)}}}knt(t){switch(t){case 0:return this.ihs();case 1:return this.lhs();case 2:return this.yhs();case 4:return this.Tds;case 5:return this.xds;case 6:return this.W2t()}}Vnt(t,s){switch(t){case 0:this.Eds(s);break;case 1:this.ges=s;break;case 2:this.aa=s;break;case 4:this.Tds=!!s;break;case 5:this.xds=!!s;break;case 6:this.N2t(!!s)}}Eds(t){const s=U0.Nr(0,0,this.oes,this.aes);this.oes=Math.cos(s)*t,this.aes=Math.sin(s)*t}ihs(){return U0.sn(U0.Or(0,0,this.oes,this.aes),6)}ahs(t){this.ges=t}lhs(){return this.ges}ghs(t){this.aa=t}yhs(){return this.aa}Fds(t){const s=U0.Or(0,0,this.oes,this.aes);this.oes=Math.cos(t)*s,this.aes=Math.sin(t)*s}Dds(){return U0.Nr(0,0,this.oes,this.aes)}kds(t){this.vds!==(t=!!t)&&(this.vds=t,this.HSt)&&(this.vds?this.b_t():this.g_t())}Ods(){return this.vds}Lds(t){this.Ids=t}Nds(){return this.Ids}N2t(t){this.HSt=!!t,this.HSt?(this.mGt(),this.vds&&this.b_t()):(this.Qxt(),this.g_t())}W2t(){return this.HSt}wGt(){const t="behaviors.bullet";return[{title:"$"+this.cW().Mf(),properties:[{name:t+".debugger.vector-x",value:this.oes,gzt:t=>this.oes=t},{name:t+".debugger.vector-y",value:this.aes,gzt:t=>this.aes=t},{name:t+".properties.speed.name",value:this.ihs(),gzt:t=>this.Eds(t)},{name:t+".debugger.angle-of-motion",value:U0.Fr(this.Dds())},{name:t+".properties.gravity.name",value:this.yhs(),gzt:t=>this.ghs(t)},{name:t+".properties.acceleration.name",value:this.lhs(),gzt:t=>this.ahs(t)},{name:t+".debugger.distance-travelled",value:this.Nds()},{name:t+".properties.enabled.name",value:this.W2t(),gzt:t=>this.N2t(t)}]}]}Axt(){return self.Bds}},new WeakMap);self.Bds=class extends J0{constructor(){super(),q0.set(this,J0.mB().sW())}get speed(){return q0.get(this).ihs()}set speed(t){z0._e(t),q0.get(this).Eds(t)}get acceleration(){return q0.get(this).lhs()}set acceleration(t){z0._e(t),q0.get(this).ahs(t)}get pXt(){return q0.get(this).yhs()}set pXt(t){z0._e(t),q0.get(this).ghs(t)}get Wds(){return q0.get(this).Dds()}set Wds(t){z0._e(t),q0.get(this).Fds(t)}get Vds(){return q0.get(this).Ods()}set Vds(t){q0.get(this).kds(!!t)}get jds(){return q0.get(this).Nds()}set jds(t){z0._e(t),q0.get(this).Lds(t)}get isEnabled(){return q0.get(this).W2t()}set isEnabled(t){q0.get(this).N2t(t)}}}{const X0=self.Vs;X0.qlt.Mds.JY={ers(t,s){const i=Math.hypot(this.oes,this.aes);return X0.compare(i,t,s)},Hds(t,s){return X0.compare(this.Nds(),t,s)},Ads(){return!0},wc(){return this.W2t()}}}{const Y0=self.Vs;Y0.qlt.Mds.Krt={Uds(t){this.Eds(t)},rqt(t){this.ahs(t)},SetGravity(t){this.ghs(t)},zds(t){this.Fds(Y0.Er(t))},eF(t){if(t){const s=t.t2t(this.Pi);if(s){const i=this.Pi.lO(),e=this.Pf.yD(),h=this.Pf.fk(this.Pi),r=Y0.Or(0,0,this.oes,this.aes),n=e.FFt(this.Pi,this.Gds,this._ds,s);this.oes=Math.cos(n)*r,this.aes=Math.sin(n)*r,i.D4(this.oes*h,this.aes*h),i.R4(),this.Tds&&(i.N5(n),this.nns=i.GetAngle(),i.R4()),0!==r&&(this.vds?e.PFt(this.Pi,this.oes/r,this.aes/r,Math.max(2.5*r*h,30))||e.EFt(this.Pi,100):e.CFt(this.Pi,this.oes/r,this.aes/r,Math.max(2.5*r*h,30),s))}}},Jds(t){this.kds(t)},qds(t){this.Lds(t)},LTt(t){this.N2t(t)},Xds(){this.Pds=!0}}}{const $0=self.Vs;$0.qlt.Mds.Zrt={xrs(){return this.ihs()},_rs(){return this.lhs()},Yds(){return $0.Fr(this.Dds())},$ds(){return this.Nds()},zXt(){return this.yhs()}}}{const K0=self.Vs;K0.qlt.Kds=class extends K0.o_t{constructor(t){super(t)}Gr(){super.Gr()}}}{const Z0=self.Vs;Z0.qlt.Kds.xCt=class extends Z0.f_t{constructor(t){super(t)}Gr(){super.Gr()}Rxt(){}}}{const Q0=self.Vs,td=self.Zs,sd=self.nW,F=(Q0.qlt.Kds.Instance=class extends Q0.p_t{constructor(t,s){super(t),this.mes=200,this.ges=600,this.yes=600,this.Zds=0,this.Tds=!0,this.Qds=!1,this.HSt=!0,this.cIt=0,this.t1s=this.lO().GetAngle(),this.s1s=[],s&&(this.mes=s[0],this.ges=s[1],this.yes=s[2],this.Zds=Q0.Er(s[3]),this.Tds=s[4],this.Qds=s[5],this.HSt=s[6]),this.i1s=null,this.e1s=NaN,this.h1s=NaN,this.r1s=NaN,this.n1s=[0,0],this.o1s={eQ:this.n1s}}Gr(){this.i1s&&(this.i1s.Gr(),this.i1s=null),this.e1s=NaN,this.h1s=NaN,this.r1s=NaN,this.n1s=null,this.o1s=null,super.Gr()}dv(){return{ms:this.mes,acc:this.ges,dec:this.yes,rs:this.Zds,sa:this.Tds,sos:this.Qds,s:this.cIt,ma:this.t1s,wp:this.s1s.map(t=>({x:t.x,y:t.y})),e:this.HSt}}pv(t){this.mes=t.ms,this.ges=t.acc,this.yes=t.dec,this.Zds=t.rs,this.Tds=t.sa,this.Qds=t.sos,this.cIt=t.s,this.t1s=t.ma,this.s1s=t.wp.map(t=>({x:t.x,y:t.y})),this.N2t(t.e),this.HSt&&0<this.s1s.length&&this.mGt()}a1s(t,s,i,e){i&&Q0.Kn(this.s1s),this.s1s.push({x:t,y:s,opts:e}),this.HSt&&this.mGt()}l1s(){return this.s1s.length}u1s(t){return(t=Math.floor(t))<0||t>=this.s1s.length?0:this.s1s[t].x}c1s(t){return(t=Math.floor(t))<0||t>=this.s1s.length?0:this.s1s[t].y}Yes(){return 0<this.s1s.length}f1s(){Q0.Kn(this.s1s),this.cIt=0,this.Qxt()}d1s(){return 0<this.s1s.length?this.s1s[0].x:0}p1s(){return 0<this.s1s.length?this.s1s[0].y:0}m1s(){if(0<this.s1s.length){const t=this.s1s[0];if(t.opts)return t.opts.g1s}return!1}y1s(){if(0<this.s1s.length){const t=this.s1s[0];if(t.opts)return t.opts.g1s&&t.opts.S1s}return!1}w1s(){if(0<this.s1s.length){const t=this.s1s[0];if(t.opts)return t.opts.b1s}return NaN}Eds(t){this.Yes()&&(this.cIt=Math.min(t,this.mes))}ihs(){return this.cIt}nhs(t){this.mes=Math.max(t,0),this.Eds(this.cIt)}ohs(){return this.mes}M1s(){return this.HSt&&this.Yes()&&this.m1s()?!!this.y1s():0!==this.Zds}yZ(){if(this.HSt&&this.Yes()){let t=this.Pf.fk(this.Pi),s=this.Pi.lO(),i=s.KM(),e=s.tv(),h=s.GetAngle(),r=this.cIt,n=this.mes,o=this.ges,a=this.yes,l=this.d1s(),u=this.p1s(),c=Q0.Nr(i,e,l,u),f=!1;if(0<a&&1===this.s1s.length){const m=.5*r*r/a*1.0001;if(f=Q0.Lr(i,e,l,u)<=m*m){const g=Q0.Or(i,e,l,u);r=Math.sqrt(2*a*g),n=r,this.cIt=r}}if(this.M1s()){const y=Q0.Br(this.t1s,c);if(y>Number.EPSILON){const S=y/this.Zds,w=Q0.Or(s.KM(),s.tv(),l,u),b=w/(2*Math.sin(y)),M=b*y;n=Math.min(n,Q0.Rr(M/S,0,this.mes))}}let d=f?-a:o,p=Math.min(r*t+.5*d*t*t,n*t);if(f){if(0<a&&(this.cIt=Math.max(this.cIt-a*t,0),0===this.cIt))return void this.v1s(s,l,u)}else this.cIt=0===o?n:Math.min(this.cIt+o*t,n);if(Q0.Lr(s.KM(),s.tv(),l,u)<=p*p)this.v1s(s,l,u);else{if(this.M1s()?this.t1s=Q0.Wr(this.t1s,c,this.Zds*t):this.t1s=c,s.D4(Math.cos(this.t1s)*p,Math.sin(this.t1s)*p),this.Tds){const v=this.m1s(),T=this.y1s();if(v&&!T){const x=Q0.Or(this.e1s,this.h1s,s.KM(),s.tv()),G=Q0.Or(this.e1s,this.h1s,l,u),_=x/G;s.N5(Q0.jr(this.r1s,this.w1s(),_))}else s.N5(this.t1s),this.e1s=NaN,this.h1s=NaN,this.r1s=NaN}s.R4(),this.T1s(i,e,h)}}}v1s(t,s,i){t.A4(s,i);const e=this.s1s[0];e.opts&&e.opts.g1s?(this.e1s=e.x,this.h1s=e.y,this.r1s=e.opts.b1s,this.Tds&&t.N5(this.r1s)):(this.e1s=NaN,this.h1s=NaN,this.r1s=NaN),t.R4(),this.s1s.shift(),0===this.s1s.length&&(this.i1s&&(this.i1s.Gr(),this.i1s=null,this.e1s=NaN,this.h1s=NaN,this.r1s=NaN),this.cIt=0,this.Qxt()),this.Xxt("arrived"),this.QB(Q0.qlt.Kds.JY.x1s)}T1s(t,s,i){const e=this.Pf.yD();if(this.Qds&&e.QO(this.Pi)){this.f1s();const h=this.Pi.lO(),r=h.KM(),n=h.tv(),o=Q0.Nr(r,n,t,s),a=Q0.Or(r,n,t,s);e.PFt(this.Pi,Math.cos(o),Math.sin(o),Math.max(a,1))||(h.A4(t,s),h.N5(i),h.R4()),this.Xxt("hitsolid"),this.QB(Q0.qlt.Kds.JY.G1s)}}_1s(){return this.Tds}I1s(t){this.Tds=!!t}Fds(t){if(this.t1s=t,this.HSt&&this.Tds&&!this.Yes()){const s=this.lO();s.N5(this.t1s),s.R4()}}Dds(){return this.t1s}ahs(t){this.ges=Math.max(t,0)}lhs(){return this.ges}uhs(t){this.yes=Math.max(t,0)}chs(){return this.yes}C1s(t){this.Zds=Math.max(t,0)}P1s(){return this.Zds}R1s(t){this.Qds=!!t}A1s(){return this.Qds}N2t(t){this.HSt!==(t=!!t)&&(this.HSt=t,this.HSt&&this.Yes()?this.mGt():this.Qxt())}W2t(){return this.HSt}knt(t){switch(t){case 0:return this.ohs();case 1:return this.lhs();case 2:return this.chs();case 3:return Q0.Fr(this.P1s());case 4:return this._1s();case 5:return this.A1s();case 6:return this.W2t()}}Vnt(t,s){switch(t){case 0:this.nhs(s);break;case 1:this.ahs(s);break;case 2:this.uhs(s);break;case 3:this.C1s(Q0.Er(s));break;case 4:this.I1s(s);break;case 5:this.R1s(s);break;case 6:this.N2t(s)}}wGt(){const t="behaviors.moveto";return[{title:"$"+this.cW().Mf(),properties:[{name:t+".debugger.speed",value:this.ihs(),gzt:t=>this.Eds(t)},{name:t+".debugger.angle-of-motion",value:Q0.Fr(this.Dds()),gzt:t=>this.t1s=Q0.Er(t)},{name:t+".debugger.target-x",value:this.d1s()},{name:t+".debugger.target-y",value:this.p1s()},{name:t+".debugger.waypoint-count",value:this.l1s()},{name:t+".properties.max-speed.name",value:this.ohs(),gzt:t=>this.nhs(t)},{name:t+".properties.acceleration.name",value:this.lhs(),gzt:t=>this.ahs(t)},{name:t+".properties.deceleration.name",value:this.chs(),gzt:t=>this.uhs(t)},{name:t+".properties.rotate-speed.name",value:Q0.Fr(this.P1s()),gzt:t=>this.C1s(Q0.Er(t))},{name:t+".properties.enabled.name",value:this.W2t(),gzt:t=>this.N2t(t)}]}]}Axt(){return self.E1s}},new WeakMap);self.E1s=class extends sd{constructor(){super(),F.set(this,sd.mB().sW())}F1s(t,s,i=!0){td._e(t),td._e(s),F.get(this).a1s(t,s,!!i)}D1s(){return F.get(this).d1s()}k1s(){return F.get(this).p1s()}O1s(){const t=F.get(this);return[t.d1s(),t.p1s()]}L1s(){return F.get(this).l1s()}N1s(t){return td._e(t),F.get(this).u1s(t)}B1s(t){return td._e(t),F.get(this).c1s(t)}W1s(t){td._e(t);const s=F.get(this);return[s.u1s(t),s.c1s(t)]}stop(){F.get(this).f1s()}get qhs(){return F.get(this).Yes()}get speed(){return F.get(this).ihs()}set speed(t){td._e(t),F.get(this).Eds(t)}get Lhs(){return F.get(this).ohs()}set Lhs(t){td._e(t),F.get(this).nhs(t)}get acceleration(){return F.get(this).lhs()}set acceleration(t){td._e(t),F.get(this).ahs(t)}get Nhs(){return F.get(this).chs()}set Nhs(t){td._e(t),F.get(this).uhs(t)}get Wds(){return F.get(this).Dds()}set Wds(t){td._e(t),F.get(this).Fds(t)}get V1s(){return F.get(this).P1s()}set V1s(t){td._e(t),F.get(this).C1s(t)}get j1s(){return F.get(this).A1s()}set j1s(t){F.get(this).R1s(t)}get isEnabled(){return F.get(this).W2t()}set isEnabled(t){F.get(this).N2t(t)}}}{const id=self.Vs;id.qlt.Kds.JY={irs(){return this.Yes()},ers(t,s){return id.compare(this.ihs(),t,s)},wc(){return this.W2t()},x1s(){return!0},G1s(){return!0}}}{const ed=self.Vs;ed.qlt.Kds.Krt={H1s(t,s,i){this.a1s(t,s,0===i)},U1s(t,s,i){if(t){const e=t.y5(this.Pi);if(e&&e.lO()){const[h,r]=e.Tvt(s);this.a1s(h,r,0===i)}}},z1s(i){const t=this.Pi.Klt(ed.qlt.Pathfinding);if(t){const e=t._GetPath();if(0!==e.length)for(let t=0,s=e.length;t<s;++t){const h=e[t];this.a1s(h.x,h.y,0===t&&0===i)}}},J1s(t,s,i){const e=ed.Tr(ed.NZ,t,s);if(e.ZZ()){e.tQ(this.Pi.lO());let s=!0;for(const h of e.QZ())switch(h.Kx()){case"line":{const r=h.KM(),n=h.tv();this.a1s(r,n,s&&0===i),s=!1;break}case"cubic-bezier":for(let t=0;t<=h.JQ();t++){const o=t*h.qQ(),a=h.Map(o),l=a[0],u=a[1],c=this.u1s(this.l1s()-1),f=this.c1s(this.l1s()-1);!s&&ed.we(c)&&ed.we(f)&&ed.Lr(c,f,l,u)<25||(this.a1s(l,u,s&&0===i,{g1s:!0,S1s:s,b1s:Math.atan2(u-f,l-c)}),s=!1)}}this.i1s=e}else e.Gr()},q1s(t,s,i){const e=this.Pf.Utt().XK(t);e&&ed.qlt.Kds.Krt.J1s.call(this,e,s,i)},oV(){this.f1s()},X1s(t){this.Fds(ed.Er(t))},Uds(t){this.Eds(t)},lrs(t){this.nhs(t)},rqt(t){this.ahs(t)},urs(t){this.uhs(t)},Y1s(t){this.C1s(ed.Er(t))},$1s(t){this.R1s(t)},LTt(t){this.N2t(t)}}}{const hd=self.Vs;hd.qlt.Kds.Zrt={xrs(){return this.ihs()},Grs(){return this.ohs()},_rs(){return this.lhs()},Irs(){return this.chs()},Ars(){return hd.Fr(this.Dds())},K1s(){return hd.Fr(this.P1s())},Z1s(){return this.d1s()},Q1s(){return this.p1s()},sps(){return this.l1s()},ips(t){return this.u1s(t)},eps(t){return this.c1s(t)}}}{let t=function(t,s){return"number"==typeof t&&"number"==typeof s};t,0;const rd=self.Vs;self.ebt=[()=>"System",()=>0,t=>{const s=t.dbt(0).Fwt();return()=>s()},t=>{const s=t.dbt(0).ibt();return()=>s.xht()/20*14},t=>{const s=t.dbt(0);return()=>s.Hwt()/20*14},t=>{const s=t.dbt(0);return()=>s.Hwt()/50*14},t=>{const s=t.dbt(0);return()=>s.Bwt()},t=>{const s=t.dbt(0);return()=>s.Bwt()-16},()=>"Nope",t=>{const s=t.dbt(0).ibt();return()=>s.xht()},()=>50,()=>240,()=>18,()=>1,()=>-9,()=>"g",()=>-250,()=>100,()=>"Hurt",()=>"WalkIdle",()=>.4,()=>2,()=>"Animations",()=>"Player/Sword Animation",()=>-10,()=>"",()=>"Walk",()=>"Idle",()=>-1,()=>"Jump",()=>"Fall",()=>"GlideSystem",()=>5,()=>3,()=>400,()=>40,()=>"Storyline/Death",()=>500,()=>720,()=>20,()=>"BeforeBatFlight",()=>473,()=>800,()=>1003,()=>"Text",t=>{const s=t.dbt(0);return()=>s.Hwt()},t=>{const s=t.dbt(0),i=t.dbt(1).ibt();return()=>s.Hwt()-i.xht()},()=>"AfterText",()=>"Press X to Interact",()=>200,()=>"AfterTextStoryLine",()=>.5,t=>{const s=t.dbt(0);return()=>s.Bwt()-20},()=>775,()=>1500,()=>"sword/combat",()=>.1,()=>"Attacks",()=>"Swing",()=>6,()=>"SwingBackup",()=>"Nair",()=>"Go",()=>"SwingAgain",t=>{const s=t.dbt(0).ibt();return()=>300*s.xht()},()=>.8,t=>{const s=t.dbt(0).ibt();return()=>200*s.xht()},()=>.6,()=>.2,()=>"NoAgain",()=>10,()=>.3333333333333333,t=>{const s=t.dbt(0).Fwt(),i=t.dbt(1),e=t.dbt(2);return()=>s("Main","HUD",i.Bwt(),e.Bwt())},t=>{const s=t.dbt(0).Fwt();return()=>s(1)/2+3},t=>{const s=t.dbt(0).Fwt();return()=>s(1)/2-3},t=>{const s=t.dbt(0).Fwt();return()=>s(1)/2+10},t=>{const s=t.dbt(0).Fwt();return()=>s(1)/2-10},()=>"HurtCollisions",()=>4,()=>"Attack 0",()=>.3,()=>2.5,()=>-150,()=>150,t=>{const s=t.dbt(0);return()=>s.Kwt()/200*2.5},t=>{const s=t.dbt(0);return()=>s.Kwt()/200*-300},t=>{const s=t.dbt(0),i=t.dbt(1);return()=>s.Kwt()*Math.cos(rd.Er(i.Kwt()))},t=>{const s=t.dbt(0);return()=>1/3*s.Kwt()},()=>"Spooder",t=>{const s=t.dbt(0),i=t.dbt(1),e=t.dbt(2);return()=>s.Hwt()+(i.Kwt()-e.Hwt())/2},()=>"Scuttle 0",t=>{const s=t.dbt(0);return()=>Math.abs(s.Kwt()/2)},()=>-.1,()=>"Idle 0",t=>{const s=t.dbt(0),i=t.dbt(1).Fwt();return()=>s.Hwt()+i(-60,60)},t=>{const s=t.dbt(0);return()=>s.Hwt()+5},t=>{const s=t.dbt(0);return()=>s.Hwt()-5},t=>{const s=t.dbt(0),i=t.dbt(1).Fwt();return()=>s.Hwt()+i(-50,50)},t=>{const s=t.dbt(0).Fwt();return()=>s(1,7)},()=>-3,()=>-45,()=>.05,()=>45,t=>{const s=t.dbt(0);return()=>s.Bwt()+100},t=>{const s=t.dbt(0);return()=>s.Bwt()-50},t=>{const s=t.dbt(0);return()=>s.Bwt()+50},t=>{const s=t.dbt(0);return()=>s.Bwt()-100},()=>60,t=>{const s=t.dbt(0);return()=>s.Bwt()+300},t=>{const s=t.dbt(0);return()=>s.Bwt()-300},t=>{const s=t.dbt(0);return()=>s.Bwt()-15},t=>{const s=t.dbt(0);return()=>s.Bwt()+15},()=>-100,()=>"SpooderHurt",()=>"Hurt 0",()=>-50,t=>{const s=t.dbt(0).ibt();return()=>150*s.xht()},()=>.001,()=>-175,()=>-350,t=>{const s=t.dbt(0).ibt();return()=>75*s.xht()},t=>{const s=t.dbt(0).ibt();return()=>100*s.xht()},t=>{const s=t.dbt(0);return()=>s.Bwt()+20},()=>"BlindBatBoss",()=>"Attack",()=>"Fly",t=>{const s=t.dbt(0),i=t.dbt(1),e=t.dbt(2),h=t.dbt(3);return()=>rd.Fr(rd.Nr(s.Bwt(),i.Bwt(),e.Bwt(),h.Bwt()))},()=>2630,t=>{const s=t.dbt(0);return()=>s.Kwt()},t=>{const s=t.dbt(0),i=t.dbt(1).Fwt();return()=>s.Kwt()+10*i()},()=>2624,t=>{const s=t.dbt(0);return()=>s.Bwt()+4},t=>{const s=t.dbt(0);return()=>s.Bwt()-4},()=>"Collisions",()=>"Progression",()=>"b",()=>"Die",()=>700,()=>-17,t=>{const s=t.dbt(0),i=t.dbt(1).Fwt();return()=>s.Bwt()+i(-100,10)},t=>{const s=t.dbt(0);return()=>s.Kwt("gravity")},()=>-200,()=>"walk",()=>"IdleHappy",()=>5.4,()=>"Idle2",()=>-5,()=>"Fall2",()=>"gravity",t=>{const s=t.dbt(0),i=t.dbt(1).Fwt(),e=t.dbt(2),h=t.dbt(3);return()=>s.Bwt()+15*i()*(-e.Bwt()+h.Bwt())},()=>12,()=>"d"]}var t=self.Vs;self.JNt=function(){return[t.XY.Zjt,t.qlt.F_t,t.XY.Drt,t.qlt.mi,t.qlt.krs,t.qlt.Yrs,t.XY.oJt,t.qlt.D_t,t.XY.F9t,t.XY.Keyboard,t.XY.C$t,t.qlt.Mns,t.qlt.Jlt,t.qlt.GPt,t.qlt.Fls,t.qlt.I0s,t.qlt.j0s,t.XY.Audio,t.XY.cst,t.XY.ris,t.qlt.Mds,t.qlt.Kds,t.XY.qY.JY.Pmt,t.XY.qY.JY.G6t,t.XY.Drt.Krt.vvt,t.XY.qY.Krt.uWt,t.XY.qY.Krt.lWt,t.XY.qY.Zrt.dt,t.XY.Drt.Krt.Szt,t.XY.Drt.Krt.bvt,t.XY.Drt.Zrt.yTt,t.XY.Drt.Zrt.STt,t.XY.Drt.Krt.zEt,t.XY.qY.JY.zY,t.XY.qY.JY.k6t,t.XY.qY.Krt.oWt,t.XY.Drt.Krt.K2t,t.XY.Drt.Krt.ZM,t.XY.Drt.Krt.sv,t.XY.Drt.Krt.zzt,t.XY.Drt.Krt.tTt,t.qlt.Yrs.Krt.pns,t.XY.C$t.Krt.$vt,t.XY.qY.JY.O6t,t.qlt.Kds.Krt.H1s,t.XY.Keyboard.JY.f$t,t.XY.qY.Krt.zn,t.XY.Audio.JY.fts,t.XY.Audio.Krt._ts,t.XY.Audio.Krt.Play,t.XY.qY.JY.dyt,t.XY.qY.JY._6t,t.XY.Drt.Krt.$vt,t.XY.Drt.JY.l2t,t.qlt.mi.Krt.grs,t.qlt.mi.Krt.urs,t.XY.Drt.Krt.yzt,t.XY.qY.Krt.FWt,t.qlt.mi.JY.Hes,t.qlt.mi.JY.irs,t.qlt.mi.JY.hrs,t.XY.Drt.JY.Lzt,t.XY.Keyboard.JY.t$t,t.XY.Drt.Krt.Hzt,t.qlt.mi.JY.nrs,t.qlt.mi.JY.ors,t.XY.Drt.JY.Fzt,t.XY.Drt.JY.Dzt,t.qlt.mi.Krt.frs,t.qlt.mi.Krt.prs,t.qlt.Jlt.Krt.xas,t.qlt.krs.Krt.Xrs,t.XY.qY.Krt.aWt,t.XY.Drt.Krt.Bzt,t.XY.qY.Krt.OWt,t.qlt.krs.Krt.LTt,t.XY.C$t.JY.XKt,t.XY.C$t.Krt.ZKt,t.XY.Drt.JY.d2t,t.XY.Drt.Krt.MN,t.XY.C$t.Krt.MN,t.XY.C$t.Krt.KKt,t.XY.Drt.Krt.eTt,t.XY.qY.JY.F6t,t.XY.Drt.JY.j2t,t.XY.Drt.JY.V2t,t.XY.qY.Krt.nk,t.XY.C$t.Krt.Ff,t.XY.C$t.Krt.qm,t.XY.qY.JY.omt,t.qlt.Mns.Krt.LTt,t.qlt.mi.Krt.SetGravity,t.qlt.Yrs.Krt.Sns,t.qlt.mi.JY.Jes,t.XY.qY.Krt.lk,t.qlt.mi.Krt.mrs,t.XY.qY.Zrt.Tjt,t.XY.qY.Zrt.mjt,t.XY.qY.Zrt.xjt,t.XY.qY.Zrt.gjt,t.qlt.Mds.Zrt.xrs,t.qlt.Mds.Zrt.Yds,t.qlt.j0s.Krt.gds,t.qlt.Mds.Krt.Uds,t.XY.Drt.Krt.iTt,t.qlt.mi.Zrt.Ers,t.XY.Drt.Krt.Mzt,t.XY.Drt.JY.Z2t,t.XY.qY.Zrt.random,t.XY.Drt.JY.mvt,t.qlt.mi.Krt.drs,t.XY.Drt.JY.p2t,t.XY.Drt.JY.gvt,t.qlt.mi.Krt.lrs,t.qlt.mi.JY.rrs,t.XY.Drt.Krt.N5,t.qlt.Jlt.Krt.Pas,t.XY.qY.JY.I6t,t.qlt.Mds.Krt.zds,t.qlt.F_t.Krt.LTt,t.qlt.F_t.Krt.nst,t.XY.Audio.Krt.vts,t.qlt.I0s.Krt.I0s,t.XY.Drt.Krt.rv,t.XY.Drt.Zrt.h2t,t.qlt.Fls.Krt.r0s,t.XY.ris.Krt.K2t,t.qlt.Fls.JY.Nfs,t.qlt.Fls.Krt.t0s,t.qlt.Jlt.Zrt.his,t.qlt.I0s.Krt.V0s,t.qlt.Fls.Krt.h0s,t.qlt.Fls.Krt.s0s,t.qlt.Fls.Krt.SetAngularVelocity,t.qlt.mi.Krt.LTt,t.XY.Zjt.Krt.MN,t.qlt.j0s.Krt.dds,t.XY.ris.Krt.MN,t.XY.cst.Krt.Rss,t.qlt.mi.JY.zes,t.qlt.j0s.Krt.mds,t.qlt.j0s.Krt.yds,t.qlt.j0s.Krt.pds,t.XY.cst.Krt.Uss]},self.rBt=[{hps:0},{rps:0},{mi:0},{nps:0},{Yrs:0},{ops:0},{aps:0},{lps:0},{ups:0},{cps:0},{dps:0},{pps:0},{Keyboard:0},{mps:0},{gps:0},{yps:0},{Sps:0},{wps:0},{Jlt:0},{GPt:0},{bps:0},{Mps:0},{vps:0},{Tps:0},{xps:0},{Gps:0},{_ps:0},{Ips:0},{Cps:0},{Z1s:0},{Pps:0},{Rps:0},{Aps:0},{Eps:0},{Fps:0},{Dps:0},{kps:0},{Ops:0},{Lps:0},{Nps:0},{Bps:0},{Wps:0},{Vps:0},{jps:0},{Hps:0},{Ups:0},{Fls:0},{I0s:0},{j0s:0},{zps:0},{Jps:0},{qps:0},{Audio:0},{Zjt:0},{Xps:0},{Yps:0},{$ps:0},{Kps:0},{Zps:0},{Qps:0},{tms:0},{sms:0},{ims:0},{ems:0},{hms:0},{nms:0},{oms:0},{ams:0},{Mds:0},{lms:0},{ums:0},{cms:0},{fms:0},{dms:0},{pms:0},{mms:0},{Kds:0},{gms:0},{yms:0},{Sms:0},{wms:0},{bms:0},{Mms:0},{vms:0},{Tms:0},{xms:0},{Gms:0},{_ms:0},{Ims:0},{Cms:0},{Pms:0},{Rms:0},{Ams:0},{Ems:0},{Fms:0},{Dms:0},{kms:0},{Oms:0},{Lms:0},{Nms:0}],self.Bms={rps:class extends self.gHt{},ops:class extends self.vzt{},aps:class extends self.JJt{},lps:class extends self.JJt{},ups:class extends self.JJt{},dps:class extends self.vzt{},pps:class extends self.iXt{},Keyboard:class extends self.uB{},mps:class extends self.vzt{},gps:class extends self.OKt{},yps:class extends self.vzt{},Sps:class extends self.vzt{},bps:class extends self.vzt{},Mps:class extends self.gHt{},vps:class extends self.vzt{},Tps:class extends self.vzt{},xps:class extends self.vzt{},kps:class extends self.vzt{},Wps:class extends self.vzt{},Vps:class extends self.vzt{},Hps:class extends self.vzt{},Ups:class extends self.vzt{},zps:class extends self.OKt{},Jps:class extends self.vzt{},qps:class extends self.vzt{},Audio:class extends self.uB{},Zjt:class extends self.gHt{},Xps:class extends self.vzt{},Yps:class extends self.uB{},$ps:class extends self.vzt{},Kps:class extends self.Y6{},tms:class extends self.vzt{},sms:class extends self.vzt{},ims:class extends self.vzt{},j0s:class extends self.vzt{},ems:class extends self.vzt{},hms:class extends self.vzt{},nms:class extends self.vzt{},lms:class extends self.vzt{},ums:class extends self.vzt{},cms:class extends self.vzt{},fms:class extends self.vzt{},dms:class extends self.vzt{},pms:class extends self.vzt{},mms:class extends self.vzt{},gms:class extends self.Y6{}};